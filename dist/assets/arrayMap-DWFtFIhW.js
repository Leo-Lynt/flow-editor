import{u as n}from"./executor-D39oo3pD.js";import{g as c}from"./pathUtils-C9hlO1xX.js";import"./index-CpYWmskZ.js";const{unwrapData:f}=n;function g({nodeData:t,inputs:i}){let o=f(i["data-input"]);if(!Array.isArray(o))throw new Error("Input deve ser um array");const d=t.fieldMode||"selector";let r=[];if(d==="custom"){const e=t.customField;e&&(r=[e])}else{const e=t.selectedField;Array.isArray(e)&&e.length>0?r=e:typeof e=="string"&&(r=[e])}if(r.length===0)return o;if(r.length===1){const e=r[0];return o.map(s=>c(s,e))}return o.map(e=>{const s={};return r.forEach(l=>{const u=l.split(".").pop();s[u]=c(e,l)}),s})}function h(t){const i=[];return(t.fieldMode||"selector")==="custom"?t.customField||i.push("Campo customField obrigatório no modo custom"):(!t.selectedField||Array.isArray(t.selectedField)&&t.selectedField.length===0)&&i.push("Seleção de campo obrigatória"),{valid:i.length===0,errors:i}}export{g as execute,h as validate};
