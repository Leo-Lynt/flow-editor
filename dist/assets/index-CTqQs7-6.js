const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/output-C7J_a-Mi.js","assets/dataUtils-XrCV_Bny.js","assets/comparison-C-3EnatI.js","assets/typeConversion-Dht7g6FP.js","assets/forEach-9OFFvcAY.js","assets/whileLoop-BWu1MzO-.js","assets/conditionalBranch-MNsbHuTG.js","assets/logic-ePm9P3Wg.js","assets/arrayAggregate-BkG-WOUC.js","assets/pathUtils-BLuGwn-4.js","assets/arrayCreate-CWf8_DP0.js","assets/arrayDistinct-lMI3wFHa.js","assets/arrayFilter-DDRhseo_.js","assets/arrayGroupBy-DV61znyX.js","assets/arrayMap-Dwtf1Unq.js","assets/arrayMerge-DTWeiSuC.js","assets/arrayProcessor-3bzHxIk3.js","assets/arraySlice-CQXToVqn.js","assets/arraySort-Cq4YA2e-.js","assets/debugViewer-DCC5-KnR.js","assets/fieldExtractor-M1CRjr1v.js","assets/math-BiuBFSZX.js","assets/objectCreate-Cp_MSNis.js","assets/objectFilter-EJheFovF.js","assets/objectKeysValues-DCvxA3oL.js","assets/objectMerge-BDO1RdGM.js","assets/objectPick-DDWram9B.js","assets/objectRename-Txwo_3ZR.js","assets/objectSetProperty-D743SG3x.js","assets/objectToArray-3882GLb-.js","assets/objectTransform-C0bQpPW2.js","assets/stringOps-9GbR4b83.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function w_(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const rt={},li=[],zn=()=>{},x_=()=>!1,Xh=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),$_=e=>e.startsWith("onUpdate:"),Dt=Object.assign,Wh=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},OE=Object.prototype.hasOwnProperty,Je=(e,t)=>OE.call(e,t),ze=Array.isArray,ui=e=>fc(e)==="[object Map]",E_=e=>fc(e)==="[object Set]",Re=e=>typeof e=="function",Et=e=>typeof e=="string",Qo=e=>typeof e=="symbol",lt=e=>e!==null&&typeof e=="object",S_=e=>(lt(e)||Re(e))&&Re(e.then)&&Re(e.catch),N_=Object.prototype.toString,fc=e=>N_.call(e),PE=e=>fc(e).slice(8,-1),k_=e=>fc(e)==="[object Object]",jh=e=>Et(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,bs=w_(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),hc=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},RE=/-\w/g,cn=hc(e=>e.replace(RE,t=>t.slice(1).toUpperCase())),zE=/\B([A-Z])/g,va=hc(e=>e.replace(zE,"-$1").toLowerCase()),qh=hc(e=>e.charAt(0).toUpperCase()+e.slice(1)),wd=hc(e=>e?`on${qh(e)}`:""),uo=(e,t)=>!Object.is(e,t),xd=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},C_=(e,t,n,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:n})},VE=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Ep;const gc=()=>Ep||(Ep=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function qe(e){if(ze(e)){const t={};for(let n=0;n<e.length;n++){const o=e[n],r=Et(o)?LE(o):qe(o);if(r)for(const i in r)t[i]=r[i]}return t}else if(Et(e)||lt(e))return e}const HE=/;(?![^(]*\))/g,BE=/:([^]+)/,FE=/\/\*[^]*?\*\//g;function LE(e){const t={};return e.replace(FE,"").split(HE).forEach(n=>{if(n){const o=n.split(BE);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function We(e){let t="";if(Et(e))t=e;else if(ze(e))for(let n=0;n<e.length;n++){const o=We(e[n]);o&&(t+=o+" ")}else if(lt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function Fe(e){if(!e)return null;let{class:t,style:n}=e;return t&&!Et(t)&&(e.class=We(t)),n&&(e.style=qe(n)),e}const I_=e=>!!(e&&e.__v_isRef===!0),ye=e=>Et(e)?e:e==null?"":ze(e)||lt(e)&&(e.toString===N_||!Re(e.toString))?I_(e)?ye(e.value):JSON.stringify(e,T_,2):String(e),T_=(e,t)=>I_(t)?T_(e,t.value):ui(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[o,r],i)=>(n[$d(o,i)+" =>"]=r,n),{})}:E_(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>$d(n))}:Qo(t)?$d(t):lt(t)&&!ze(t)&&!k_(t)?String(t):t,$d=(e,t="")=>{var n;return Qo(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Nt;class A_{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Nt,!t&&Nt&&(this.index=(Nt.scopes||(Nt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Nt;try{return Nt=this,t()}finally{Nt=n}}}on(){++this._on===1&&(this.prevScope=Nt,Nt=this)}off(){this._on>0&&--this._on===0&&(Nt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(this.effects.length=0,n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Dr(e){return new A_(e)}function Gn(){return Nt}function Fo(e,t=!1){Nt&&Nt.cleanups.push(e)}let st;const Ed=new WeakSet;class M_{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Nt&&Nt.active&&Nt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ed.has(this)&&(Ed.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||O_(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Sp(this),P_(this);const t=st,n=un;st=this,un=!0;try{return this.fn()}finally{R_(this),st=t,un=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Qh(t);this.deps=this.depsTail=void 0,Sp(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ed.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ef(this)&&this.run()}get dirty(){return Ef(this)}}let D_=0,ws,xs;function O_(e,t=!1){if(e.flags|=8,t){e.next=xs,xs=e;return}e.next=ws,ws=e}function Kh(){D_++}function Jh(){if(--D_>0)return;if(xs){let t=xs;for(xs=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;ws;){let t=ws;for(ws=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(o){e||(e=o)}t=n}}if(e)throw e}function P_(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function R_(e){let t,n=e.depsTail,o=n;for(;o;){const r=o.prevDep;o.version===-1?(o===n&&(n=r),Qh(o),UE(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=r}e.deps=t,e.depsTail=n}function Ef(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(z_(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function z_(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Rs)||(e.globalVersion=Rs,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Ef(e))))return;e.flags|=2;const t=e.dep,n=st,o=un;st=e,un=!0;try{P_(e);const r=e.fn(e._value);(t.version===0||uo(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{st=n,un=o,R_(e),e.flags&=-3}}function Qh(e,t=!1){const{dep:n,prevSub:o,nextSub:r}=e;if(o&&(o.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=o,e.nextSub=void 0),n.subs===e&&(n.subs=o,!o&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Qh(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function UE(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let un=!0;const V_=[];function ho(){V_.push(un),un=!1}function go(){const e=V_.pop();un=e===void 0?!0:e}function Sp(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=st;st=void 0;try{t()}finally{st=n}}}let Rs=0;class GE{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class pc{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!st||!un||st===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==st)n=this.activeLink=new GE(st,this),st.deps?(n.prevDep=st.depsTail,st.depsTail.nextDep=n,st.depsTail=n):st.deps=st.depsTail=n,H_(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const o=n.nextDep;o.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=o),n.prevDep=st.depsTail,n.nextDep=void 0,st.depsTail.nextDep=n,st.depsTail=n,st.deps===n&&(st.deps=o)}return n}trigger(t){this.version++,Rs++,this.notify(t)}notify(t){Kh();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Jh()}}}function H_(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let o=t.deps;o;o=o.nextDep)H_(o)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Jl=new WeakMap,dr=Symbol(""),Sf=Symbol(""),zs=Symbol("");function kt(e,t,n){if(un&&st){let o=Jl.get(e);o||Jl.set(e,o=new Map);let r=o.get(n);r||(o.set(n,r=new pc),r.map=o,r.key=n),r.track()}}function ro(e,t,n,o,r,i){const s=Jl.get(e);if(!s){Rs++;return}const a=l=>{l&&l.trigger()};if(Kh(),t==="clear")s.forEach(a);else{const l=ze(e),u=l&&jh(n);if(l&&n==="length"){const c=Number(o);s.forEach((d,f)=>{(f==="length"||f===zs||!Qo(f)&&f>=c)&&a(d)})}else switch((n!==void 0||s.has(void 0))&&a(s.get(n)),u&&a(s.get(zs)),t){case"add":l?u&&a(s.get("length")):(a(s.get(dr)),ui(e)&&a(s.get(Sf)));break;case"delete":l||(a(s.get(dr)),ui(e)&&a(s.get(Sf)));break;case"set":ui(e)&&a(s.get(dr));break}}Jh()}function ZE(e,t){const n=Jl.get(e);return n&&n.get(t)}function Rr(e){const t=Xe(e);return t===e?t:(kt(t,"iterate",zs),Wt(e)?t:t.map(xt))}function mc(e){return kt(e=Xe(e),"iterate",zs),e}const YE={__proto__:null,[Symbol.iterator](){return Sd(this,Symbol.iterator,xt)},concat(...e){return Rr(this).concat(...e.map(t=>ze(t)?Rr(t):t))},entries(){return Sd(this,"entries",e=>(e[1]=xt(e[1]),e))},every(e,t){return qn(this,"every",e,t,void 0,arguments)},filter(e,t){return qn(this,"filter",e,t,n=>n.map(xt),arguments)},find(e,t){return qn(this,"find",e,t,xt,arguments)},findIndex(e,t){return qn(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return qn(this,"findLast",e,t,xt,arguments)},findLastIndex(e,t){return qn(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return qn(this,"forEach",e,t,void 0,arguments)},includes(...e){return Nd(this,"includes",e)},indexOf(...e){return Nd(this,"indexOf",e)},join(e){return Rr(this).join(e)},lastIndexOf(...e){return Nd(this,"lastIndexOf",e)},map(e,t){return qn(this,"map",e,t,void 0,arguments)},pop(){return Gi(this,"pop")},push(...e){return Gi(this,"push",e)},reduce(e,...t){return Np(this,"reduce",e,t)},reduceRight(e,...t){return Np(this,"reduceRight",e,t)},shift(){return Gi(this,"shift")},some(e,t){return qn(this,"some",e,t,void 0,arguments)},splice(...e){return Gi(this,"splice",e)},toReversed(){return Rr(this).toReversed()},toSorted(e){return Rr(this).toSorted(e)},toSpliced(...e){return Rr(this).toSpliced(...e)},unshift(...e){return Gi(this,"unshift",e)},values(){return Sd(this,"values",xt)}};function Sd(e,t,n){const o=mc(e),r=o[t]();return o!==e&&!Wt(e)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=n(i.value)),i}),r}const XE=Array.prototype;function qn(e,t,n,o,r,i){const s=mc(e),a=s!==e&&!Wt(e),l=s[t];if(l!==XE[t]){const d=l.apply(e,i);return a?xt(d):d}let u=n;s!==e&&(a?u=function(d,f){return n.call(this,xt(d),f,e)}:n.length>2&&(u=function(d,f){return n.call(this,d,f,e)}));const c=l.call(s,u,o);return a&&r?r(c):c}function Np(e,t,n,o){const r=mc(e);let i=n;return r!==e&&(Wt(e)?n.length>3&&(i=function(s,a,l){return n.call(this,s,a,l,e)}):i=function(s,a,l){return n.call(this,s,xt(a),l,e)}),r[t](i,...o)}function Nd(e,t,n){const o=Xe(e);kt(o,"iterate",zs);const r=o[t](...n);return(r===-1||r===!1)&&ng(n[0])?(n[0]=Xe(n[0]),o[t](...n)):r}function Gi(e,t,n=[]){ho(),Kh();const o=Xe(e)[t].apply(e,n);return Jh(),go(),o}const WE=w_("__proto__,__v_isRef,__isVue"),B_=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Qo));function jE(e){Qo(e)||(e=String(e));const t=Xe(this);return kt(t,"has",e),t.hasOwnProperty(e)}class F_{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,o){if(n==="__v_skip")return t.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return o===(r?i?iS:Z_:i?G_:U_).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const s=ze(t);if(!r){let l;if(s&&(l=YE[n]))return l;if(n==="hasOwnProperty")return jE}const a=Reflect.get(t,n,je(t)?t:o);if((Qo(n)?B_.has(n):WE(n))||(r||kt(t,"get",n),i))return a;if(je(a)){const l=s&&jh(n)?a:a.value;return r&&lt(l)?Ql(l):l}return lt(a)?r?Ql(a):wo(a):a}}class L_ extends F_{constructor(t=!1){super(!1,t)}set(t,n,o,r){let i=t[n];if(!this._isShallow){const l=Uo(i);if(!Wt(o)&&!Uo(o)&&(i=Xe(i),o=Xe(o)),!ze(t)&&je(i)&&!je(o))return l||(i.value=o),!0}const s=ze(t)&&jh(n)?Number(n)<t.length:Je(t,n),a=Reflect.set(t,n,o,je(t)?t:r);return t===Xe(r)&&(s?uo(o,i)&&ro(t,"set",n,o):ro(t,"add",n,o)),a}deleteProperty(t,n){const o=Je(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&o&&ro(t,"delete",n,void 0),r}has(t,n){const o=Reflect.has(t,n);return(!Qo(n)||!B_.has(n))&&kt(t,"has",n),o}ownKeys(t){return kt(t,"iterate",ze(t)?"length":dr),Reflect.ownKeys(t)}}class qE extends F_{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const KE=new L_,JE=new qE,QE=new L_(!0);const Nf=e=>e,Va=e=>Reflect.getPrototypeOf(e);function eS(e,t,n){return function(...o){const r=this.__v_raw,i=Xe(r),s=ui(i),a=e==="entries"||e===Symbol.iterator&&s,l=e==="keys"&&s,u=r[e](...o),c=n?Nf:t?eu:xt;return!t&&kt(i,"iterate",l?Sf:dr),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:a?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function Ha(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function tS(e,t){const n={get(r){const i=this.__v_raw,s=Xe(i),a=Xe(r);e||(uo(r,a)&&kt(s,"get",r),kt(s,"get",a));const{has:l}=Va(s),u=t?Nf:e?eu:xt;if(l.call(s,r))return u(i.get(r));if(l.call(s,a))return u(i.get(a));i!==s&&i.get(r)},get size(){const r=this.__v_raw;return!e&&kt(Xe(r),"iterate",dr),r.size},has(r){const i=this.__v_raw,s=Xe(i),a=Xe(r);return e||(uo(r,a)&&kt(s,"has",r),kt(s,"has",a)),r===a?i.has(r):i.has(r)||i.has(a)},forEach(r,i){const s=this,a=s.__v_raw,l=Xe(a),u=t?Nf:e?eu:xt;return!e&&kt(l,"iterate",dr),a.forEach((c,d)=>r.call(i,u(c),u(d),s))}};return Dt(n,e?{add:Ha("add"),set:Ha("set"),delete:Ha("delete"),clear:Ha("clear")}:{add(r){!t&&!Wt(r)&&!Uo(r)&&(r=Xe(r));const i=Xe(this);return Va(i).has.call(i,r)||(i.add(r),ro(i,"add",r,r)),this},set(r,i){!t&&!Wt(i)&&!Uo(i)&&(i=Xe(i));const s=Xe(this),{has:a,get:l}=Va(s);let u=a.call(s,r);u||(r=Xe(r),u=a.call(s,r));const c=l.call(s,r);return s.set(r,i),u?uo(i,c)&&ro(s,"set",r,i):ro(s,"add",r,i),this},delete(r){const i=Xe(this),{has:s,get:a}=Va(i);let l=s.call(i,r);l||(r=Xe(r),l=s.call(i,r)),a&&a.call(i,r);const u=i.delete(r);return l&&ro(i,"delete",r,void 0),u},clear(){const r=Xe(this),i=r.size!==0,s=r.clear();return i&&ro(r,"clear",void 0,void 0),s}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=eS(r,e,t)}),n}function eg(e,t){const n=tS(e,t);return(o,r,i)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?o:Reflect.get(Je(n,r)&&r in o?n:o,r,i)}const nS={get:eg(!1,!1)},oS={get:eg(!1,!0)},rS={get:eg(!0,!1)};const U_=new WeakMap,G_=new WeakMap,Z_=new WeakMap,iS=new WeakMap;function sS(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function aS(e){return e.__v_skip||!Object.isExtensible(e)?0:sS(PE(e))}function wo(e){return Uo(e)?e:tg(e,!1,KE,nS,U_)}function Y_(e){return tg(e,!1,QE,oS,G_)}function Ql(e){return tg(e,!0,JE,rS,Z_)}function tg(e,t,n,o,r){if(!lt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=aS(e);if(i===0)return e;const s=r.get(e);if(s)return s;const a=new Proxy(e,i===2?o:n);return r.set(e,a),a}function Lo(e){return Uo(e)?Lo(e.__v_raw):!!(e&&e.__v_isReactive)}function Uo(e){return!!(e&&e.__v_isReadonly)}function Wt(e){return!!(e&&e.__v_isShallow)}function ng(e){return e?!!e.__v_raw:!1}function Xe(e){const t=e&&e.__v_raw;return t?Xe(t):e}function _t(e){return!Je(e,"__v_skip")&&Object.isExtensible(e)&&C_(e,"__v_skip",!0),e}const xt=e=>lt(e)?wo(e):e,eu=e=>lt(e)?Ql(e):e;function je(e){return e?e.__v_isRef===!0:!1}function de(e){return X_(e,!1)}function bi(e){return X_(e,!0)}function X_(e,t){return je(e)?e:new lS(e,t)}class lS{constructor(t,n){this.dep=new pc,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Xe(t),this._value=n?t:xt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,o=this.__v_isShallow||Wt(t)||Uo(t);t=o?t:Xe(t),uo(t,n)&&(this._rawValue=t,this._value=o?t:xt(t),this.dep.trigger())}}function ie(e){return je(e)?e.value:e}function ge(e){return Re(e)?e():ie(e)}const uS={get:(e,t,n)=>t==="__v_raw"?e:ie(Reflect.get(e,t,n)),set:(e,t,n,o)=>{const r=e[t];return je(r)&&!je(n)?(r.value=n,!0):Reflect.set(e,t,n,o)}};function W_(e){return Lo(e)?e:new Proxy(e,uS)}class cS{constructor(t){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new pc,{get:o,set:r}=t(n.track.bind(n),n.trigger.bind(n));this._get=o,this._set=r}get value(){return this._value=this._get()}set value(t){this._set(t)}}function yc(e){return new cS(e)}function _a(e){const t=ze(e)?new Array(e.length):{};for(const n in e)t[n]=j_(e,n);return t}class dS{constructor(t,n,o){this._object=t,this._key=n,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return ZE(Xe(this._object),this._key)}}class fS{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Oe(e,t,n){return je(e)?e:Re(e)?new fS(e):lt(e)&&arguments.length>1?j_(e,t,n):de(e)}function j_(e,t,n){const o=e[t];return je(o)?o:new dS(e,t,n)}class hS{constructor(t,n,o){this.fn=t,this.setter=n,this._value=void 0,this.dep=new pc(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Rs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&st!==this)return O_(this,!0),!0}get value(){const t=this.dep.track();return z_(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function gS(e,t,n=!1){let o,r;return Re(e)?o=e:(o=e.get,r=e.set),new hS(o,r,n)}const Ba={},tu=new WeakMap;let nr;function pS(e,t=!1,n=nr){if(n){let o=tu.get(n);o||tu.set(n,o=[]),o.push(e)}}function mS(e,t,n=rt){const{immediate:o,deep:r,once:i,scheduler:s,augmentJob:a,call:l}=n,u=A=>r?A:Wt(A)||r===!1||r===0?io(A,1):io(A);let c,d,f,h,m=!1,v=!1;if(je(e)?(d=()=>e.value,m=Wt(e)):Lo(e)?(d=()=>u(e),m=!0):ze(e)?(v=!0,m=e.some(A=>Lo(A)||Wt(A)),d=()=>e.map(A=>{if(je(A))return A.value;if(Lo(A))return u(A);if(Re(A))return l?l(A,2):A()})):Re(e)?t?d=l?()=>l(e,2):e:d=()=>{if(f){ho();try{f()}finally{go()}}const A=nr;nr=c;try{return l?l(e,3,[h]):e(h)}finally{nr=A}}:d=zn,t&&r){const A=d,G=r===!0?1/0:r;d=()=>io(A(),G)}const b=Gn(),x=()=>{c.stop(),b&&b.active&&Wh(b.effects,c)};if(i&&t){const A=t;t=(...G)=>{A(...G),x()}}let N=v?new Array(e.length).fill(Ba):Ba;const S=A=>{if(!(!(c.flags&1)||!c.dirty&&!A))if(t){const G=c.run();if(r||m||(v?G.some((W,Z)=>uo(W,N[Z])):uo(G,N))){f&&f();const W=nr;nr=c;try{const Z=[G,N===Ba?void 0:v&&N[0]===Ba?[]:N,h];N=G,l?l(t,3,Z):t(...Z)}finally{nr=W}}}else c.run()};return a&&a(S),c=new M_(d),c.scheduler=s?()=>s(S,!1):S,h=A=>pS(A,!1,c),f=c.onStop=()=>{const A=tu.get(c);if(A){if(l)l(A,4);else for(const G of A)G();tu.delete(c)}},t?o?S(!0):N=c.run():s?s(S.bind(null,!0),!0):c.run(),x.pause=c.pause.bind(c),x.resume=c.resume.bind(c),x.stop=x,x}function io(e,t=1/0,n){if(t<=0||!lt(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,je(e))io(e.value,t,n);else if(ze(e))for(let o=0;o<e.length;o++)io(e[o],t,n);else if(E_(e)||ui(e))e.forEach(o=>{io(o,t,n)});else if(k_(e)){for(const o in e)io(e[o],t,n);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&io(e[o],t,n)}return e}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ba(e,t,n,o){try{return o?e(...o):e()}catch(r){vc(r,t,n)}}function Un(e,t,n,o){if(Re(e)){const r=ba(e,t,n,o);return r&&S_(r)&&r.catch(i=>{vc(i,t,n)}),r}if(ze(e)){const r=[];for(let i=0;i<e.length;i++)r.push(Un(e[i],t,n,o));return r}}function vc(e,t,n,o=!0){const r=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:s}=t&&t.appContext.config||rt;if(t){let a=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const c=a.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](e,l,u)===!1)return}a=a.parent}if(i){ho(),ba(i,null,10,[e,l,u]),go();return}}yS(e,n,r,o,s)}function yS(e,t,n,o=!0,r=!1){if(r)throw e;console.error(e)}const At=[];let $n=-1;const ci=[];let Oo=null,Yr=0;const q_=Promise.resolve();let nu=null;function bt(e){const t=nu||q_;return e?t.then(this?e.bind(this):e):t}function vS(e){let t=$n+1,n=At.length;for(;t<n;){const o=t+n>>>1,r=At[o],i=Vs(r);i<e||i===e&&r.flags&2?t=o+1:n=o}return t}function og(e){if(!(e.flags&1)){const t=Vs(e),n=At[At.length-1];!n||!(e.flags&2)&&t>=Vs(n)?At.push(e):At.splice(vS(t),0,e),e.flags|=1,K_()}}function K_(){nu||(nu=q_.then(Q_))}function _S(e){ze(e)?ci.push(...e):Oo&&e.id===-1?Oo.splice(Yr+1,0,e):e.flags&1||(ci.push(e),e.flags|=1),K_()}function kp(e,t,n=$n+1){for(;n<At.length;n++){const o=At[n];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;At.splice(n,1),n--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function J_(e){if(ci.length){const t=[...new Set(ci)].sort((n,o)=>Vs(n)-Vs(o));if(ci.length=0,Oo){Oo.push(...t);return}for(Oo=t,Yr=0;Yr<Oo.length;Yr++){const n=Oo[Yr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Oo=null,Yr=0}}const Vs=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Q_(e){try{for($n=0;$n<At.length;$n++){const t=At[$n];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ba(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;$n<At.length;$n++){const t=At[$n];t&&(t.flags&=-2)}$n=-1,At.length=0,J_(),nu=null,(At.length||ci.length)&&Q_()}}let $t=null,eb=null;function ou(e){const t=$t;return $t=e,eb=e&&e.type.__scopeId||null,t}function Pe(e,t=$t,n){if(!t||e._n)return e;const o=(...r)=>{o._d&&su(-1);const i=ou(t);let s;try{s=e(...r)}finally{ou(i),o._d&&su(1)}return s};return o._n=!0,o._c=!0,o._d=!0,o}function Ve(e,t){if($t===null)return e;const n=$c($t),o=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[i,s,a,l=rt]=t[r];i&&(Re(i)&&(i={mounted:i,updated:i}),i.deep&&io(s),o.push({dir:i,instance:n,value:s,oldValue:void 0,arg:a,modifiers:l}))}return e}function er(e,t,n,o){const r=e.dirs,i=t&&t.dirs;for(let s=0;s<r.length;s++){const a=r[s];i&&(a.oldValue=i[s].value);let l=a.dir[o];l&&(ho(),Un(l,n,8,[e.el,a,e,t]),go())}}const bS=Symbol("_vte"),wS=e=>e.__isTeleport,xS=Symbol("_leaveCb");function rg(e,t){e.shapeFlag&6&&e.component?(e.transition=t,rg(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Ne(e,t){return Re(e)?Dt({name:e.name},t,{setup:e}):e}function tb(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const ru=new WeakMap;function $s(e,t,n,o,r=!1){if(ze(e)){e.forEach((m,v)=>$s(m,t&&(ze(t)?t[v]:t),n,o,r));return}if(di(o)&&!r){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&$s(e,t,n,o.component.subTree);return}const i=o.shapeFlag&4?$c(o.component):o.el,s=r?null:i,{i:a,r:l}=e,u=t&&t.r,c=a.refs===rt?a.refs={}:a.refs,d=a.setupState,f=Xe(d),h=d===rt?x_:m=>Je(f,m);if(u!=null&&u!==l){if(Cp(t),Et(u))c[u]=null,h(u)&&(d[u]=null);else if(je(u)){u.value=null;const m=t;m.k&&(c[m.k]=null)}}if(Re(l))ba(l,a,12,[s,c]);else{const m=Et(l),v=je(l);if(m||v){const b=()=>{if(e.f){const x=m?h(l)?d[l]:c[l]:l.value;if(r)ze(x)&&Wh(x,i);else if(ze(x))x.includes(i)||x.push(i);else if(m)c[l]=[i],h(l)&&(d[l]=c[l]);else{const N=[i];l.value=N,e.k&&(c[e.k]=N)}}else m?(c[l]=s,h(l)&&(d[l]=s)):v&&(l.value=s,e.k&&(c[e.k]=s))};if(s){const x=()=>{b(),ru.delete(e)};x.id=-1,ru.set(e,x),Lt(x,n)}else Cp(e),b()}}}function Cp(e){const t=ru.get(e);t&&(t.flags|=8,ru.delete(e))}gc().requestIdleCallback;gc().cancelIdleCallback;const di=e=>!!e.type.__asyncLoader,nb=e=>e.type.__isKeepAlive;function $S(e,t){ob(e,"a",t)}function ES(e,t){ob(e,"da",t)}function ob(e,t,n=Ct){const o=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(_c(t,o,n),n){let r=n.parent;for(;r&&r.parent;)nb(r.parent.vnode)&&SS(o,t,n,r),r=r.parent}}function SS(e,t,n,o){const r=_c(t,e,o,!0);Or(()=>{Wh(o[t],r)},n)}function _c(e,t,n=Ct,o=!1){if(n){const r=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...s)=>{ho();const a=wa(n),l=Un(t,n,e,s);return a(),go(),l});return o?r.unshift(i):r.push(i),i}}const xo=e=>(t,n=Ct)=>{(!Fs||e==="sp")&&_c(e,(...o)=>t(...o),n)},rb=xo("bm"),tt=xo("m"),NS=xo("bu"),kS=xo("u"),ig=xo("bum"),Or=xo("um"),CS=xo("sp"),IS=xo("rtg"),TS=xo("rtc");function AS(e,t=Ct){_c("ec",e,t)}const ib="components";function sg(e,t){return ab(ib,e,!0,t)||e}const sb=Symbol.for("v-ndc");function Kt(e){return Et(e)?ab(ib,e,!1)||e:e||sb}function ab(e,t,n=!0,o=!1){const r=$t||Ct;if(r){const i=r.type;{const a=yN(i,!1);if(a&&(a===t||a===cn(t)||a===qh(cn(t))))return i}const s=Ip(r[e]||i[e],t)||Ip(r.appContext[e],t);return!s&&o?i:s}}function Ip(e,t){return e&&(e[t]||e[cn(t)]||e[qh(cn(t))])}function nt(e,t,n,o){let r;const i=n&&n[o],s=ze(e);if(s||Et(e)){const a=s&&Lo(e);let l=!1,u=!1;a&&(l=!Wt(e),u=Uo(e),e=mc(e)),r=new Array(e.length);for(let c=0,d=e.length;c<d;c++)r[c]=t(l?u?eu(xt(e[c])):xt(e[c]):e[c],c,void 0,i&&i[c])}else if(typeof e=="number"){r=new Array(e);for(let a=0;a<e;a++)r[a]=t(a+1,a,void 0,i&&i[a])}else if(lt(e))if(e[Symbol.iterator])r=Array.from(e,(a,l)=>t(a,l,void 0,i&&i[l]));else{const a=Object.keys(e);r=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const c=a[l];r[l]=t(e[c],c,l,i&&i[l])}}else r=[];return n&&(n[o]=r),r}function Qe(e,t,n={},o,r){if($t.ce||$t.parent&&di($t.parent)&&$t.parent.ce){const u=Object.keys(n).length>0;return t!=="default"&&(n.name=t),L(),Ye(xe,null,[ue("slot",n,o&&o())],u?-2:64)}let i=e[t];i&&i._c&&(i._d=!1),L();const s=i&&lb(i(n)),a=n.key||s&&s.key,l=Ye(xe,{key:(a&&!Qo(a)?a:`_${t}`)+(!s&&o?"_fb":"")},s||(o?o():[]),s&&e._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function lb(e){return e.some(t=>Hs(t)?!(t.type===po||t.type===xe&&!lb(t.children)):!0)?e:null}const kf=e=>e?Ib(e)?$c(e):kf(e.parent):null,Es=Dt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>kf(e.parent),$root:e=>kf(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>fb(e),$forceUpdate:e=>e.f||(e.f=()=>{og(e.update)}),$nextTick:e=>e.n||(e.n=bt.bind(e.proxy)),$watch:e=>eN.bind(e)}),kd=(e,t)=>e!==rt&&!e.__isScriptSetup&&Je(e,t),MS={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:o,data:r,props:i,accessCache:s,type:a,appContext:l}=e;let u;if(t[0]!=="$"){const h=s[t];if(h!==void 0)switch(h){case 1:return o[t];case 2:return r[t];case 4:return n[t];case 3:return i[t]}else{if(kd(o,t))return s[t]=1,o[t];if(r!==rt&&Je(r,t))return s[t]=2,r[t];if((u=e.propsOptions[0])&&Je(u,t))return s[t]=3,i[t];if(n!==rt&&Je(n,t))return s[t]=4,n[t];Cf&&(s[t]=0)}}const c=Es[t];let d,f;if(c)return t==="$attrs"&&kt(e.attrs,"get",""),c(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(n!==rt&&Je(n,t))return s[t]=4,n[t];if(f=l.config.globalProperties,Je(f,t))return f[t]},set({_:e},t,n){const{data:o,setupState:r,ctx:i}=e;return kd(r,t)?(r[t]=n,!0):o!==rt&&Je(o,t)?(o[t]=n,!0):Je(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:o,appContext:r,propsOptions:i,type:s}},a){let l,u;return!!(n[a]||e!==rt&&a[0]!=="$"&&Je(e,a)||kd(t,a)||(l=i[0])&&Je(l,a)||Je(o,a)||Je(Es,a)||Je(r.config.globalProperties,a)||(u=s.__cssModules)&&u[a])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Je(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function ub(){return cb().slots}function Li(){return cb().attrs}function cb(e){const t=jt();return t.setupContext||(t.setupContext=Ab(t))}function Tp(e){return ze(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}function bc(e,t){const n={};for(const o in e)t.includes(o)||Object.defineProperty(n,o,{enumerable:!0,get:()=>e[o]});return n}let Cf=!0;function DS(e){const t=fb(e),n=e.proxy,o=e.ctx;Cf=!1,t.beforeCreate&&Ap(t.beforeCreate,e,"bc");const{data:r,computed:i,methods:s,watch:a,provide:l,inject:u,created:c,beforeMount:d,mounted:f,beforeUpdate:h,updated:m,activated:v,deactivated:b,beforeDestroy:x,beforeUnmount:N,destroyed:S,unmounted:A,render:G,renderTracked:W,renderTriggered:Z,errorCaptured:z,serverPrefetch:j,expose:H,inheritAttrs:D,components:I,directives:R,filters:w}=t;if(u&&OS(u,o,null),s)for(const F in s){const Y=s[F];Re(Y)&&(o[F]=Y.bind(n))}if(r){const F=r.call(n,n);lt(F)&&(e.data=wo(F))}if(Cf=!0,i)for(const F in i){const Y=i[F],Q=Re(Y)?Y.bind(n,n):Re(Y.get)?Y.get.bind(n,n):zn,q=!Re(Y)&&Re(Y.set)?Y.set.bind(n):zn,ne=J({get:Q,set:q});Object.defineProperty(o,F,{enumerable:!0,configurable:!0,get:()=>ne.value,set:ae=>ne.value=ae})}if(a)for(const F in a)db(a[F],o,n,F);if(l){const F=Re(l)?l.call(n):l;Reflect.ownKeys(F).forEach(Y=>{Ht(Y,F[Y])})}c&&Ap(c,e,"c");function C(F,Y){ze(Y)?Y.forEach(Q=>F(Q.bind(n))):Y&&F(Y.bind(n))}if(C(rb,d),C(tt,f),C(NS,h),C(kS,m),C($S,v),C(ES,b),C(AS,z),C(TS,W),C(IS,Z),C(ig,N),C(Or,A),C(CS,j),ze(H))if(H.length){const F=e.exposed||(e.exposed={});H.forEach(Y=>{Object.defineProperty(F,Y,{get:()=>n[Y],set:Q=>n[Y]=Q,enumerable:!0})})}else e.exposed||(e.exposed={});G&&e.render===zn&&(e.render=G),D!=null&&(e.inheritAttrs=D),I&&(e.components=I),R&&(e.directives=R),j&&tb(e)}function OS(e,t,n=zn){ze(e)&&(e=If(e));for(const o in e){const r=e[o];let i;lt(r)?"default"in r?i=ot(r.from||o,r.default,!0):i=ot(r.from||o):i=ot(r),je(i)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>i.value,set:s=>i.value=s}):t[o]=i}}function Ap(e,t,n){Un(ze(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,n)}function db(e,t,n,o){let r=o.includes(".")?Eb(n,o):()=>n[o];if(Et(e)){const i=t[e];Re(i)&&Se(r,i)}else if(Re(e))Se(r,e.bind(n));else if(lt(e))if(ze(e))e.forEach(i=>db(i,t,n,o));else{const i=Re(e.handler)?e.handler.bind(n):t[e.handler];Re(i)&&Se(r,i,e)}}function fb(e){const t=e.type,{mixins:n,extends:o}=t,{mixins:r,optionsCache:i,config:{optionMergeStrategies:s}}=e.appContext,a=i.get(t);let l;return a?l=a:!r.length&&!n&&!o?l=t:(l={},r.length&&r.forEach(u=>iu(l,u,s,!0)),iu(l,t,s)),lt(t)&&i.set(t,l),l}function iu(e,t,n,o=!1){const{mixins:r,extends:i}=t;i&&iu(e,i,n,!0),r&&r.forEach(s=>iu(e,s,n,!0));for(const s in t)if(!(o&&s==="expose")){const a=PS[s]||n&&n[s];e[s]=a?a(e[s],t[s]):t[s]}return e}const PS={data:Mp,props:Dp,emits:Dp,methods:os,computed:os,beforeCreate:Tt,created:Tt,beforeMount:Tt,mounted:Tt,beforeUpdate:Tt,updated:Tt,beforeDestroy:Tt,beforeUnmount:Tt,destroyed:Tt,unmounted:Tt,activated:Tt,deactivated:Tt,errorCaptured:Tt,serverPrefetch:Tt,components:os,directives:os,watch:zS,provide:Mp,inject:RS};function Mp(e,t){return t?e?function(){return Dt(Re(e)?e.call(this,this):e,Re(t)?t.call(this,this):t)}:t:e}function RS(e,t){return os(If(e),If(t))}function If(e){if(ze(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Tt(e,t){return e?[...new Set([].concat(e,t))]:t}function os(e,t){return e?Dt(Object.create(null),e,t):t}function Dp(e,t){return e?ze(e)&&ze(t)?[...new Set([...e,...t])]:Dt(Object.create(null),Tp(e),Tp(t??{})):t}function zS(e,t){if(!e)return t;if(!t)return e;const n=Dt(Object.create(null),e);for(const o in t)n[o]=Tt(e[o],t[o]);return n}function hb(){return{app:null,config:{isNativeTag:x_,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let VS=0;function HS(e,t){return function(o,r=null){Re(o)||(o=Dt({},o)),r!=null&&!lt(r)&&(r=null);const i=hb(),s=new WeakSet,a=[];let l=!1;const u=i.app={_uid:VS++,_component:o,_props:r,_container:null,_context:i,_instance:null,version:bN,get config(){return i.config},set config(c){},use(c,...d){return s.has(c)||(c&&Re(c.install)?(s.add(c),c.install(u,...d)):Re(c)&&(s.add(c),c(u,...d))),u},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),u},component(c,d){return d?(i.components[c]=d,u):i.components[c]},directive(c,d){return d?(i.directives[c]=d,u):i.directives[c]},mount(c,d,f){if(!l){const h=u._ceVNode||ue(o,r);return h.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),e(h,c,f),l=!0,u._container=c,c.__vue_app__=u,$c(h.component)}},onUnmount(c){a.push(c)},unmount(){l&&(Un(a,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(c,d){return i.provides[c]=d,u},runWithContext(c){const d=fr;fr=u;try{return c()}finally{fr=d}}};return u}}let fr=null;function Ht(e,t){if(Ct){let n=Ct.provides;const o=Ct.parent&&Ct.parent.provides;o===n&&(n=Ct.provides=Object.create(o)),n[e]=t}}function ot(e,t,n=!1){const o=jt();if(o||fr){let r=fr?fr._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return n&&Re(t)?t.call(o&&o.proxy):t}}function BS(){return!!(jt()||fr)}const gb={},pb=()=>Object.create(gb),mb=e=>Object.getPrototypeOf(e)===gb;function FS(e,t,n,o=!1){const r={},i=pb();e.propsDefaults=Object.create(null),yb(e,t,r,i);for(const s in e.propsOptions[0])s in r||(r[s]=void 0);n?e.props=o?r:Y_(r):e.type.props?e.props=r:e.props=i,e.attrs=i}function LS(e,t,n,o){const{props:r,attrs:i,vnode:{patchFlag:s}}=e,a=Xe(r),[l]=e.propsOptions;let u=!1;if((o||s>0)&&!(s&16)){if(s&8){const c=e.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];if(wc(e.emitsOptions,f))continue;const h=t[f];if(l)if(Je(i,f))h!==i[f]&&(i[f]=h,u=!0);else{const m=cn(f);r[m]=Tf(l,a,m,h,e,!1)}else h!==i[f]&&(i[f]=h,u=!0)}}}else{yb(e,t,r,i)&&(u=!0);let c;for(const d in a)(!t||!Je(t,d)&&((c=va(d))===d||!Je(t,c)))&&(l?n&&(n[d]!==void 0||n[c]!==void 0)&&(r[d]=Tf(l,a,d,void 0,e,!0)):delete r[d]);if(i!==a)for(const d in i)(!t||!Je(t,d))&&(delete i[d],u=!0)}u&&ro(e.attrs,"set","")}function yb(e,t,n,o){const[r,i]=e.propsOptions;let s=!1,a;if(t)for(let l in t){if(bs(l))continue;const u=t[l];let c;r&&Je(r,c=cn(l))?!i||!i.includes(c)?n[c]=u:(a||(a={}))[c]=u:wc(e.emitsOptions,l)||(!(l in o)||u!==o[l])&&(o[l]=u,s=!0)}if(i){const l=Xe(n),u=a||rt;for(let c=0;c<i.length;c++){const d=i[c];n[d]=Tf(r,l,d,u[d],e,!Je(u,d))}}return s}function Tf(e,t,n,o,r,i){const s=e[n];if(s!=null){const a=Je(s,"default");if(a&&o===void 0){const l=s.default;if(s.type!==Function&&!s.skipFactory&&Re(l)){const{propsDefaults:u}=r;if(n in u)o=u[n];else{const c=wa(r);o=u[n]=l.call(null,t),c()}}else o=l;r.ce&&r.ce._setProp(n,o)}s[0]&&(i&&!a?o=!1:s[1]&&(o===""||o===va(n))&&(o=!0))}return o}const US=new WeakMap;function vb(e,t,n=!1){const o=n?US:t.propsCache,r=o.get(e);if(r)return r;const i=e.props,s={},a=[];let l=!1;if(!Re(e)){const c=d=>{l=!0;const[f,h]=vb(d,t,!0);Dt(s,f),h&&a.push(...h)};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!i&&!l)return lt(e)&&o.set(e,li),li;if(ze(i))for(let c=0;c<i.length;c++){const d=cn(i[c]);Op(d)&&(s[d]=rt)}else if(i)for(const c in i){const d=cn(c);if(Op(d)){const f=i[c],h=s[d]=ze(f)||Re(f)?{type:f}:Dt({},f),m=h.type;let v=!1,b=!0;if(ze(m))for(let x=0;x<m.length;++x){const N=m[x],S=Re(N)&&N.name;if(S==="Boolean"){v=!0;break}else S==="String"&&(b=!1)}else v=Re(m)&&m.name==="Boolean";h[0]=v,h[1]=b,(v||Je(h,"default"))&&a.push(d)}}const u=[s,a];return lt(e)&&o.set(e,u),u}function Op(e){return e[0]!=="$"&&!bs(e)}const ag=e=>e==="_"||e==="_ctx"||e==="$stable",lg=e=>ze(e)?e.map(Nn):[Nn(e)],GS=(e,t,n)=>{if(t._n)return t;const o=Pe((...r)=>lg(t(...r)),n);return o._c=!1,o},_b=(e,t,n)=>{const o=e._ctx;for(const r in e){if(ag(r))continue;const i=e[r];if(Re(i))t[r]=GS(r,i,o);else if(i!=null){const s=lg(i);t[r]=()=>s}}},bb=(e,t)=>{const n=lg(t);e.slots.default=()=>n},wb=(e,t,n)=>{for(const o in t)(n||!ag(o))&&(e[o]=t[o])},ZS=(e,t,n)=>{const o=e.slots=pb();if(e.vnode.shapeFlag&32){const r=t._;r?(wb(o,t,n),n&&C_(o,"_",r,!0)):_b(t,o)}else t&&bb(e,t)},YS=(e,t,n)=>{const{vnode:o,slots:r}=e;let i=!0,s=rt;if(o.shapeFlag&32){const a=t._;a?n&&a===1?i=!1:wb(r,t,n):(i=!t.$stable,_b(t,r)),s=t}else t&&(bb(e,t),s={default:1});if(i)for(const a in r)!ag(a)&&s[a]==null&&delete r[a]},Lt=lN;function XS(e){return WS(e)}function WS(e,t){const n=gc();n.__VUE__=!0;const{insert:o,remove:r,patchProp:i,createElement:s,createText:a,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:f,setScopeId:h=zn,insertStaticContent:m}=e,v=(P,B,g,p=null,$=null,_=null,y=void 0,k=null,E=!!B.dynamicChildren)=>{if(P===B)return;P&&!Zi(P,B)&&(p=ee(P),ae(P,$,_,!0),P=null),B.patchFlag===-2&&(E=!1,B.dynamicChildren=null);const{type:M,ref:V,shapeFlag:U}=B;switch(M){case xc:b(P,B,g,p);break;case po:x(P,B,g,p);break;case Cl:P==null&&N(B,g,p,y);break;case xe:I(P,B,g,p,$,_,y,k,E);break;default:U&1?G(P,B,g,p,$,_,y,k,E):U&6?R(P,B,g,p,$,_,y,k,E):(U&64||U&128)&&M.process(P,B,g,p,$,_,y,k,E,ce)}V!=null&&$?$s(V,P&&P.ref,_,B||P,!B):V==null&&P&&P.ref!=null&&$s(P.ref,null,_,P,!0)},b=(P,B,g,p)=>{if(P==null)o(B.el=a(B.children),g,p);else{const $=B.el=P.el;B.children!==P.children&&u($,B.children)}},x=(P,B,g,p)=>{P==null?o(B.el=l(B.children||""),g,p):B.el=P.el},N=(P,B,g,p)=>{[P.el,P.anchor]=m(P.children,B,g,p,P.el,P.anchor)},S=({el:P,anchor:B},g,p)=>{let $;for(;P&&P!==B;)$=f(P),o(P,g,p),P=$;o(B,g,p)},A=({el:P,anchor:B})=>{let g;for(;P&&P!==B;)g=f(P),r(P),P=g;r(B)},G=(P,B,g,p,$,_,y,k,E)=>{B.type==="svg"?y="svg":B.type==="math"&&(y="mathml"),P==null?W(B,g,p,$,_,y,k,E):j(P,B,$,_,y,k,E)},W=(P,B,g,p,$,_,y,k)=>{let E,M;const{props:V,shapeFlag:U,transition:K,dirs:te}=P;if(E=P.el=s(P.type,_,V&&V.is,V),U&8?c(E,P.children):U&16&&z(P.children,E,null,p,$,Cd(P,_),y,k),te&&er(P,null,p,"created"),Z(E,P,P.scopeId,y,p),V){for(const Ee in V)Ee!=="value"&&!bs(Ee)&&i(E,Ee,null,V[Ee],_,p);"value"in V&&i(E,"value",null,V.value,_),(M=V.onVnodeBeforeMount)&&xn(M,p,P)}te&&er(P,null,p,"beforeMount");const we=jS($,K);we&&K.beforeEnter(E),o(E,B,g),((M=V&&V.onVnodeMounted)||we||te)&&Lt(()=>{M&&xn(M,p,P),we&&K.enter(E),te&&er(P,null,p,"mounted")},$)},Z=(P,B,g,p,$)=>{if(g&&h(P,g),p)for(let _=0;_<p.length;_++)h(P,p[_]);if($){let _=$.subTree;if(B===_||Nb(_.type)&&(_.ssContent===B||_.ssFallback===B)){const y=$.vnode;Z(P,y,y.scopeId,y.slotScopeIds,$.parent)}}},z=(P,B,g,p,$,_,y,k,E=0)=>{for(let M=E;M<P.length;M++){const V=P[M]=k?Po(P[M]):Nn(P[M]);v(null,V,B,g,p,$,_,y,k)}},j=(P,B,g,p,$,_,y)=>{const k=B.el=P.el;let{patchFlag:E,dynamicChildren:M,dirs:V}=B;E|=P.patchFlag&16;const U=P.props||rt,K=B.props||rt;let te;if(g&&tr(g,!1),(te=K.onVnodeBeforeUpdate)&&xn(te,g,B,P),V&&er(B,P,g,"beforeUpdate"),g&&tr(g,!0),(U.innerHTML&&K.innerHTML==null||U.textContent&&K.textContent==null)&&c(k,""),M?H(P.dynamicChildren,M,k,g,p,Cd(B,$),_):y||Y(P,B,k,null,g,p,Cd(B,$),_,!1),E>0){if(E&16)D(k,U,K,g,$);else if(E&2&&U.class!==K.class&&i(k,"class",null,K.class,$),E&4&&i(k,"style",U.style,K.style,$),E&8){const we=B.dynamicProps;for(let Ee=0;Ee<we.length;Ee++){const Be=we[Ee],ht=U[Be],it=K[Be];(it!==ht||Be==="value")&&i(k,Be,ht,it,$,g)}}E&1&&P.children!==B.children&&c(k,B.children)}else!y&&M==null&&D(k,U,K,g,$);((te=K.onVnodeUpdated)||V)&&Lt(()=>{te&&xn(te,g,B,P),V&&er(B,P,g,"updated")},p)},H=(P,B,g,p,$,_,y)=>{for(let k=0;k<B.length;k++){const E=P[k],M=B[k],V=E.el&&(E.type===xe||!Zi(E,M)||E.shapeFlag&198)?d(E.el):g;v(E,M,V,null,p,$,_,y,!0)}},D=(P,B,g,p,$)=>{if(B!==g){if(B!==rt)for(const _ in B)!bs(_)&&!(_ in g)&&i(P,_,B[_],null,$,p);for(const _ in g){if(bs(_))continue;const y=g[_],k=B[_];y!==k&&_!=="value"&&i(P,_,k,y,$,p)}"value"in g&&i(P,"value",B.value,g.value,$)}},I=(P,B,g,p,$,_,y,k,E)=>{const M=B.el=P?P.el:a(""),V=B.anchor=P?P.anchor:a("");let{patchFlag:U,dynamicChildren:K,slotScopeIds:te}=B;te&&(k=k?k.concat(te):te),P==null?(o(M,g,p),o(V,g,p),z(B.children||[],g,V,$,_,y,k,E)):U>0&&U&64&&K&&P.dynamicChildren?(H(P.dynamicChildren,K,g,$,_,y,k),(B.key!=null||$&&B===$.subTree)&&xb(P,B,!0)):Y(P,B,g,V,$,_,y,k,E)},R=(P,B,g,p,$,_,y,k,E)=>{B.slotScopeIds=k,P==null?B.shapeFlag&512?$.ctx.activate(B,g,p,y,E):w(B,g,p,$,_,y,E):O(P,B,E)},w=(P,B,g,p,$,_,y)=>{const k=P.component=hN(P,p,$);if(nb(P)&&(k.ctx.renderer=ce),gN(k,!1,y),k.asyncDep){if($&&$.registerDep(k,C,y),!P.el){const E=k.subTree=ue(po);x(null,E,B,g),P.placeholder=E.el}}else C(k,P,B,g,$,_,y)},O=(P,B,g)=>{const p=B.component=P.component;if(sN(P,B,g))if(p.asyncDep&&!p.asyncResolved){F(p,B,g);return}else p.next=B,p.update();else B.el=P.el,p.vnode=B},C=(P,B,g,p,$,_,y)=>{const k=()=>{if(P.isMounted){let{next:U,bu:K,u:te,parent:we,vnode:Ee}=P;{const It=$b(P);if(It){U&&(U.el=Ee.el,F(P,U,y)),It.asyncDep.then(()=>{P.isUnmounted||k()});return}}let Be=U,ht;tr(P,!1),U?(U.el=Ee.el,F(P,U,y)):U=Ee,K&&xd(K),(ht=U.props&&U.props.onVnodeBeforeUpdate)&&xn(ht,we,U,Ee),tr(P,!0);const it=Rp(P),ut=P.subTree;P.subTree=it,v(ut,it,d(ut.el),ee(ut),P,$,_),U.el=it.el,Be===null&&aN(P,it.el),te&&Lt(te,$),(ht=U.props&&U.props.onVnodeUpdated)&&Lt(()=>xn(ht,we,U,Ee),$)}else{let U;const{el:K,props:te}=B,{bm:we,m:Ee,parent:Be,root:ht,type:it}=P,ut=di(B);tr(P,!1),we&&xd(we),!ut&&(U=te&&te.onVnodeBeforeMount)&&xn(U,Be,B),tr(P,!0);{ht.ce&&ht.ce._def.shadowRoot!==!1&&ht.ce._injectChildStyle(it);const It=P.subTree=Rp(P);v(null,It,g,p,P,$,_),B.el=It.el}if(Ee&&Lt(Ee,$),!ut&&(U=te&&te.onVnodeMounted)){const It=B;Lt(()=>xn(U,Be,It),$)}(B.shapeFlag&256||Be&&di(Be.vnode)&&Be.vnode.shapeFlag&256)&&P.a&&Lt(P.a,$),P.isMounted=!0,B=g=p=null}};P.scope.on();const E=P.effect=new M_(k);P.scope.off();const M=P.update=E.run.bind(E),V=P.job=E.runIfDirty.bind(E);V.i=P,V.id=P.uid,E.scheduler=()=>og(V),tr(P,!0),M()},F=(P,B,g)=>{B.component=P;const p=P.vnode.props;P.vnode=B,P.next=null,LS(P,B.props,p,g),YS(P,B.children,g),ho(),kp(P),go()},Y=(P,B,g,p,$,_,y,k,E=!1)=>{const M=P&&P.children,V=P?P.shapeFlag:0,U=B.children,{patchFlag:K,shapeFlag:te}=B;if(K>0){if(K&128){q(M,U,g,p,$,_,y,k,E);return}else if(K&256){Q(M,U,g,p,$,_,y,k,E);return}}te&8?(V&16&&le(M,$,_),U!==M&&c(g,U)):V&16?te&16?q(M,U,g,p,$,_,y,k,E):le(M,$,_,!0):(V&8&&c(g,""),te&16&&z(U,g,p,$,_,y,k,E))},Q=(P,B,g,p,$,_,y,k,E)=>{P=P||li,B=B||li;const M=P.length,V=B.length,U=Math.min(M,V);let K;for(K=0;K<U;K++){const te=B[K]=E?Po(B[K]):Nn(B[K]);v(P[K],te,g,null,$,_,y,k,E)}M>V?le(P,$,_,!0,!1,U):z(B,g,p,$,_,y,k,E,U)},q=(P,B,g,p,$,_,y,k,E)=>{let M=0;const V=B.length;let U=P.length-1,K=V-1;for(;M<=U&&M<=K;){const te=P[M],we=B[M]=E?Po(B[M]):Nn(B[M]);if(Zi(te,we))v(te,we,g,null,$,_,y,k,E);else break;M++}for(;M<=U&&M<=K;){const te=P[U],we=B[K]=E?Po(B[K]):Nn(B[K]);if(Zi(te,we))v(te,we,g,null,$,_,y,k,E);else break;U--,K--}if(M>U){if(M<=K){const te=K+1,we=te<V?B[te].el:p;for(;M<=K;)v(null,B[M]=E?Po(B[M]):Nn(B[M]),g,we,$,_,y,k,E),M++}}else if(M>K)for(;M<=U;)ae(P[M],$,_,!0),M++;else{const te=M,we=M,Ee=new Map;for(M=we;M<=K;M++){const Ft=B[M]=E?Po(B[M]):Nn(B[M]);Ft.key!=null&&Ee.set(Ft.key,M)}let Be,ht=0;const it=K-we+1;let ut=!1,It=0;const Ui=new Array(it);for(M=0;M<it;M++)Ui[M]=0;for(M=te;M<=U;M++){const Ft=P[M];if(ht>=it){ae(Ft,$,_,!0);continue}let wn;if(Ft.key!=null)wn=Ee.get(Ft.key);else for(Be=we;Be<=K;Be++)if(Ui[Be-we]===0&&Zi(Ft,B[Be])){wn=Be;break}wn===void 0?ae(Ft,$,_,!0):(Ui[wn-we]=M+1,wn>=It?It=wn:ut=!0,v(Ft,B[wn],g,null,$,_,y,k,E),ht++)}const wp=ut?qS(Ui):li;for(Be=wp.length-1,M=it-1;M>=0;M--){const Ft=we+M,wn=B[Ft],xp=B[Ft+1],$p=Ft+1<V?xp.el||xp.placeholder:p;Ui[M]===0?v(null,wn,g,$p,$,_,y,k,E):ut&&(Be<0||M!==wp[Be]?ne(wn,g,$p,2):Be--)}}},ne=(P,B,g,p,$=null)=>{const{el:_,type:y,transition:k,children:E,shapeFlag:M}=P;if(M&6){ne(P.component.subTree,B,g,p);return}if(M&128){P.suspense.move(B,g,p);return}if(M&64){y.move(P,B,g,ce);return}if(y===xe){o(_,B,g);for(let U=0;U<E.length;U++)ne(E[U],B,g,p);o(P.anchor,B,g);return}if(y===Cl){S(P,B,g);return}if(p!==2&&M&1&&k)if(p===0)k.beforeEnter(_),o(_,B,g),Lt(()=>k.enter(_),$);else{const{leave:U,delayLeave:K,afterLeave:te}=k,we=()=>{P.ctx.isUnmounted?r(_):o(_,B,g)},Ee=()=>{_._isLeaving&&_[xS](!0),U(_,()=>{we(),te&&te()})};K?K(_,we,Ee):Ee()}else o(_,B,g)},ae=(P,B,g,p=!1,$=!1)=>{const{type:_,props:y,ref:k,children:E,dynamicChildren:M,shapeFlag:V,patchFlag:U,dirs:K,cacheIndex:te}=P;if(U===-2&&($=!1),k!=null&&(ho(),$s(k,null,g,P,!0),go()),te!=null&&(B.renderCache[te]=void 0),V&256){B.ctx.deactivate(P);return}const we=V&1&&K,Ee=!di(P);let Be;if(Ee&&(Be=y&&y.onVnodeBeforeUnmount)&&xn(Be,B,P),V&6)pe(P.component,g,p);else{if(V&128){P.suspense.unmount(g,p);return}we&&er(P,null,B,"beforeUnmount"),V&64?P.type.remove(P,B,g,ce,p):M&&!M.hasOnce&&(_!==xe||U>0&&U&64)?le(M,B,g,!1,!0):(_===xe&&U&384||!$&&V&16)&&le(E,B,g),p&&fe(P)}(Ee&&(Be=y&&y.onVnodeUnmounted)||we)&&Lt(()=>{Be&&xn(Be,B,P),we&&er(P,null,B,"unmounted")},g)},fe=P=>{const{type:B,el:g,anchor:p,transition:$}=P;if(B===xe){se(g,p);return}if(B===Cl){A(P);return}const _=()=>{r(g),$&&!$.persisted&&$.afterLeave&&$.afterLeave()};if(P.shapeFlag&1&&$&&!$.persisted){const{leave:y,delayLeave:k}=$,E=()=>y(g,_);k?k(P.el,_,E):E()}else _()},se=(P,B)=>{let g;for(;P!==B;)g=f(P),r(P),P=g;r(B)},pe=(P,B,g)=>{const{bum:p,scope:$,job:_,subTree:y,um:k,m:E,a:M}=P;Pp(E),Pp(M),p&&xd(p),$.stop(),_&&(_.flags|=8,ae(y,P,B,g)),k&&Lt(k,B),Lt(()=>{P.isUnmounted=!0},B)},le=(P,B,g,p=!1,$=!1,_=0)=>{for(let y=_;y<P.length;y++)ae(P[y],B,g,p,$)},ee=P=>{if(P.shapeFlag&6)return ee(P.component.subTree);if(P.shapeFlag&128)return P.suspense.next();const B=f(P.anchor||P.el),g=B&&B[bS];return g?f(g):B};let re=!1;const oe=(P,B,g)=>{P==null?B._vnode&&ae(B._vnode,null,null,!0):v(B._vnode||null,P,B,null,null,null,g),B._vnode=P,re||(re=!0,kp(),J_(),re=!1)},ce={p:v,um:ae,m:ne,r:fe,mt:w,mc:z,pc:Y,pbc:H,n:ee,o:e};return{render:oe,hydrate:void 0,createApp:HS(oe)}}function Cd({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function tr({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function jS(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function xb(e,t,n=!1){const o=e.children,r=t.children;if(ze(o)&&ze(r))for(let i=0;i<o.length;i++){const s=o[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=Po(r[i]),a.el=s.el),!n&&a.patchFlag!==-2&&xb(s,a)),a.type===xc&&a.patchFlag!==-1&&(a.el=s.el),a.type===po&&!a.el&&(a.el=s.el)}}function qS(e){const t=e.slice(),n=[0];let o,r,i,s,a;const l=e.length;for(o=0;o<l;o++){const u=e[o];if(u!==0){if(r=n[n.length-1],e[r]<u){t[o]=r,n.push(o);continue}for(i=0,s=n.length-1;i<s;)a=i+s>>1,e[n[a]]<u?i=a+1:s=a;u<e[n[i]]&&(i>0&&(t[o]=n[i-1]),n[i]=o)}}for(i=n.length,s=n[i-1];i-- >0;)n[i]=s,s=t[s];return n}function $b(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:$b(t)}function Pp(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const KS=Symbol.for("v-scx"),JS=()=>ot(KS);function QS(e,t){return ug(e,null,t)}function Se(e,t,n){return ug(e,t,n)}function ug(e,t,n=rt){const{immediate:o,deep:r,flush:i,once:s}=n,a=Dt({},n),l=t&&o||!t&&i!=="post";let u;if(Fs){if(i==="sync"){const h=JS();u=h.__watcherHandles||(h.__watcherHandles=[])}else if(!l){const h=()=>{};return h.stop=zn,h.resume=zn,h.pause=zn,h}}const c=Ct;a.call=(h,m,v)=>Un(h,c,m,v);let d=!1;i==="post"?a.scheduler=h=>{Lt(h,c&&c.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(h,m)=>{m?h():og(h)}),a.augmentJob=h=>{t&&(h.flags|=4),d&&(h.flags|=2,c&&(h.id=c.uid,h.i=c))};const f=mS(e,t,a);return Fs&&(u?u.push(f):l&&f()),f}function eN(e,t,n){const o=this.proxy,r=Et(e)?e.includes(".")?Eb(o,e):()=>o[e]:e.bind(o,o);let i;Re(t)?i=t:(i=t.handler,n=t);const s=wa(this),a=ug(r,i.bind(o),n);return s(),a}function Eb(e,t){const n=t.split(".");return()=>{let o=e;for(let r=0;r<n.length&&o;r++)o=o[n[r]];return o}}const tN=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${cn(t)}Modifiers`]||e[`${va(t)}Modifiers`];function nN(e,t,...n){if(e.isUnmounted)return;const o=e.vnode.props||rt;let r=n;const i=t.startsWith("update:"),s=i&&tN(o,t.slice(7));s&&(s.trim&&(r=n.map(c=>Et(c)?c.trim():c)),s.number&&(r=n.map(VE)));let a,l=o[a=wd(t)]||o[a=wd(cn(t))];!l&&i&&(l=o[a=wd(va(t))]),l&&Un(l,e,6,r);const u=o[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Un(u,e,6,r)}}const oN=new WeakMap;function Sb(e,t,n=!1){const o=n?oN:t.emitsCache,r=o.get(e);if(r!==void 0)return r;const i=e.emits;let s={},a=!1;if(!Re(e)){const l=u=>{const c=Sb(u,t,!0);c&&(a=!0,Dt(s,c))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!i&&!a?(lt(e)&&o.set(e,null),null):(ze(i)?i.forEach(l=>s[l]=null):Dt(s,i),lt(e)&&o.set(e,s),s)}function wc(e,t){return!e||!Xh(t)?!1:(t=t.slice(2).replace(/Once$/,""),Je(e,t[0].toLowerCase()+t.slice(1))||Je(e,va(t))||Je(e,t))}function Rp(e){const{type:t,vnode:n,proxy:o,withProxy:r,propsOptions:[i],slots:s,attrs:a,emit:l,render:u,renderCache:c,props:d,data:f,setupState:h,ctx:m,inheritAttrs:v}=e,b=ou(e);let x,N;try{if(n.shapeFlag&4){const A=r||o,G=A;x=Nn(u.call(G,A,c,d,h,f,m)),N=a}else{const A=t;x=Nn(A.length>1?A(d,{attrs:a,slots:s,emit:l}):A(d,null)),N=t.props?a:rN(a)}}catch(A){Ss.length=0,vc(A,e,1),x=ue(po)}let S=x;if(N&&v!==!1){const A=Object.keys(N),{shapeFlag:G}=S;A.length&&G&7&&(i&&A.some($_)&&(N=iN(N,i)),S=xi(S,N,!1,!0))}return n.dirs&&(S=xi(S,null,!1,!0),S.dirs=S.dirs?S.dirs.concat(n.dirs):n.dirs),n.transition&&rg(S,n.transition),x=S,ou(b),x}const rN=e=>{let t;for(const n in e)(n==="class"||n==="style"||Xh(n))&&((t||(t={}))[n]=e[n]);return t},iN=(e,t)=>{const n={};for(const o in e)(!$_(o)||!(o.slice(9)in t))&&(n[o]=e[o]);return n};function sN(e,t,n){const{props:o,children:r,component:i}=e,{props:s,children:a,patchFlag:l}=t,u=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return o?zp(o,s,u):!!s;if(l&8){const c=t.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(s[f]!==o[f]&&!wc(u,f))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:o===s?!1:o?s?zp(o,s,u):!0:!!s;return!1}function zp(e,t,n){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let r=0;r<o.length;r++){const i=o[r];if(t[i]!==e[i]&&!wc(n,i))return!0}return!1}function aN({vnode:e,parent:t},n){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=n,t=t.parent;else break}}const Nb=e=>e.__isSuspense;function lN(e,t){t&&t.pendingBranch?ze(e)?t.effects.push(...e):t.effects.push(e):_S(e)}const xe=Symbol.for("v-fgt"),xc=Symbol.for("v-txt"),po=Symbol.for("v-cmt"),Cl=Symbol.for("v-stc"),Ss=[];let Mt=null;function L(e=!1){Ss.push(Mt=e?null:[])}function uN(){Ss.pop(),Mt=Ss[Ss.length-1]||null}let wi=1;function su(e,t=!1){wi+=e,e<0&&Mt&&t&&(Mt.hasOnce=!0)}function kb(e){return e.dynamicChildren=wi>0?Mt||li:null,uN(),wi>0&&Mt&&Mt.push(e),e}function X(e,t,n,o,r,i){return kb(T(e,t,n,o,r,i,!0))}function Ye(e,t,n,o,r){return kb(ue(e,t,n,o,r,!0))}function Hs(e){return e?e.__v_isVNode===!0:!1}function Zi(e,t){return e.type===t.type&&e.key===t.key}const Cb=({key:e})=>e??null,Il=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Et(e)||je(e)||Re(e)?{i:$t,r:e,k:t,f:!!n}:e:null);function T(e,t=null,n=null,o=0,r=null,i=e===xe?0:1,s=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Cb(t),ref:t&&Il(t),scopeId:eb,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:o,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:$t};return a?(cg(l,n),i&128&&e.normalize(l)):n&&(l.shapeFlag|=Et(n)?8:16),wi>0&&!s&&Mt&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Mt.push(l),l}const ue=cN;function cN(e,t=null,n=null,o=0,r=null,i=!1){if((!e||e===sb)&&(e=po),Hs(e)){const a=xi(e,t,!0);return n&&cg(a,n),wi>0&&!i&&Mt&&(a.shapeFlag&6?Mt[Mt.indexOf(e)]=a:Mt.push(a)),a.patchFlag=-2,a}if(vN(e)&&(e=e.__vccOpts),t){t=Le(t);let{class:a,style:l}=t;a&&!Et(a)&&(t.class=We(a)),lt(l)&&(ng(l)&&!ze(l)&&(l=Dt({},l)),t.style=qe(l))}const s=Et(e)?1:Nb(e)?128:wS(e)?64:lt(e)?4:Re(e)?2:0;return T(e,t,n,o,r,s,i,!0)}function Le(e){return e?ng(e)||mb(e)?Dt({},e):e:null}function xi(e,t,n=!1,o=!1){const{props:r,ref:i,patchFlag:s,children:a,transition:l}=e,u=t?dn(r||{},t):r,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Cb(u),ref:t&&t.ref?n&&i?ze(i)?i.concat(Il(t)):[i,Il(t)]:Il(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==xe?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&xi(e.ssContent),ssFallback:e.ssFallback&&xi(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&o&&rg(c,l.clone(c)),c}function Ze(e=" ",t=0){return ue(xc,null,e,t)}function Bs(e,t){const n=ue(Cl,null,e);return n.staticCount=t,n}function ve(e="",t=!1){return t?(L(),Ye(po,null,e)):ue(po,null,e)}function Nn(e){return e==null||typeof e=="boolean"?ue(po):ze(e)?ue(xe,null,e.slice()):Hs(e)?Po(e):ue(xc,null,String(e))}function Po(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:xi(e)}function cg(e,t){let n=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(ze(t))n=16;else if(typeof t=="object")if(o&65){const r=t.default;r&&(r._c&&(r._d=!1),cg(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!mb(t)?t._ctx=$t:r===3&&$t&&($t.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Re(t)?(t={default:t,_ctx:$t},n=32):(t=String(t),o&64?(n=16,t=[Ze(t)]):n=8);e.children=t,e.shapeFlag|=n}function dn(...e){const t={};for(let n=0;n<e.length;n++){const o=e[n];for(const r in o)if(r==="class")t.class!==o.class&&(t.class=We([t.class,o.class]));else if(r==="style")t.style=qe([t.style,o.style]);else if(Xh(r)){const i=t[r],s=o[r];s&&i!==s&&!(ze(i)&&i.includes(s))&&(t[r]=i?[].concat(i,s):s)}else r!==""&&(t[r]=o[r])}return t}function xn(e,t,n,o=null){Un(e,t,7,[n,o])}const dN=hb();let fN=0;function hN(e,t,n){const o=e.type,r=(t?t.appContext:e.appContext)||dN,i={uid:fN++,vnode:e,type:o,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new A_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:vb(o,r),emitsOptions:Sb(o,r),emit:null,emitted:null,propsDefaults:rt,inheritAttrs:o.inheritAttrs,ctx:rt,data:rt,props:rt,attrs:rt,slots:rt,refs:rt,setupState:rt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=nN.bind(null,i),e.ce&&e.ce(i),i}let Ct=null;const jt=()=>Ct||$t;let au,Af;{const e=gc(),t=(n,o)=>{let r;return(r=e[n])||(r=e[n]=[]),r.push(o),i=>{r.length>1?r.forEach(s=>s(i)):r[0](i)}};au=t("__VUE_INSTANCE_SETTERS__",n=>Ct=n),Af=t("__VUE_SSR_SETTERS__",n=>Fs=n)}const wa=e=>{const t=Ct;return au(e),e.scope.on(),()=>{e.scope.off(),au(t)}},Vp=()=>{Ct&&Ct.scope.off(),au(null)};function Ib(e){return e.vnode.shapeFlag&4}let Fs=!1;function gN(e,t=!1,n=!1){t&&Af(t);const{props:o,children:r}=e.vnode,i=Ib(e);FS(e,o,i,t),ZS(e,r,n||t);const s=i?pN(e,t):void 0;return t&&Af(!1),s}function pN(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,MS);const{setup:o}=n;if(o){ho();const r=e.setupContext=o.length>1?Ab(e):null,i=wa(e),s=ba(o,e,0,[e.props,r]),a=S_(s);if(go(),i(),(a||e.sp)&&!di(e)&&tb(e),a){if(s.then(Vp,Vp),t)return s.then(l=>{Hp(e,l)}).catch(l=>{vc(l,e,0)});e.asyncDep=s}else Hp(e,s)}else Tb(e)}function Hp(e,t,n){Re(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:lt(t)&&(e.setupState=W_(t)),Tb(e)}function Tb(e,t,n){const o=e.type;e.render||(e.render=o.render||zn);{const r=wa(e);ho();try{DS(e)}finally{go(),r()}}}const mN={get(e,t){return kt(e,"get",""),e[t]}};function Ab(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,mN),slots:e.slots,emit:e.emit,expose:t}}function $c(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(W_(_t(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Es)return Es[n](e)},has(t,n){return n in t||n in Es}})):e.proxy}function yN(e,t=!0){return Re(e)?e.displayName||e.name:e.name||t&&e.__name}function vN(e){return Re(e)&&"__vccOpts"in e}const J=(e,t)=>gS(e,t,Fs);function _e(e,t,n){try{su(-1);const o=arguments.length;return o===2?lt(t)&&!ze(t)?Hs(t)?ue(e,null,[t]):ue(e,t):ue(e,null,t):(o>3?n=Array.prototype.slice.call(arguments,2):o===3&&Hs(n)&&(n=[n]),ue(e,t,n))}finally{su(1)}}function _N(e,t){const n=e.memo;if(n.length!=t.length)return!1;for(let o=0;o<n.length;o++)if(uo(n[o],t[o]))return!1;return wi>0&&Mt&&Mt.push(e),!0}const bN="3.5.22";/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function wN(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const xN=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),$N=e=>e.startsWith("onUpdate:"),EN=Object.assign,Go=Array.isArray,Ec=e=>Db(e)==="[object Set]",Bp=e=>Db(e)==="[object Date]",Mb=e=>typeof e=="function",Ls=e=>typeof e=="string",Mf=e=>typeof e=="symbol",Fp=e=>e!==null&&typeof e=="object",SN=Object.prototype.toString,Db=e=>SN.call(e),dg=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},NN=/-\w/g,kN=dg(e=>e.replace(NN,t=>t.slice(1).toUpperCase())),CN=/\B([A-Z])/g,fg=dg(e=>e.replace(CN,"-$1").toLowerCase()),IN=dg(e=>e.charAt(0).toUpperCase()+e.slice(1)),TN=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Df=e=>{const t=parseFloat(e);return isNaN(t)?e:t},AN="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",MN=wN(AN);function Ob(e){return!!e||e===""}function DN(e,t){if(e.length!==t.length)return!1;let n=!0;for(let o=0;n&&o<e.length;o++)n=xa(e[o],t[o]);return n}function xa(e,t){if(e===t)return!0;let n=Bp(e),o=Bp(t);if(n||o)return n&&o?e.getTime()===t.getTime():!1;if(n=Mf(e),o=Mf(t),n||o)return e===t;if(n=Go(e),o=Go(t),n||o)return n&&o?DN(e,t):!1;if(n=Fp(e),o=Fp(t),n||o){if(!n||!o)return!1;const r=Object.keys(e).length,i=Object.keys(t).length;if(r!==i)return!1;for(const s in e){const a=e.hasOwnProperty(s),l=t.hasOwnProperty(s);if(a&&!l||!a&&l||!xa(e[s],t[s]))return!1}}return String(e)===String(t)}function hg(e,t){return e.findIndex(n=>xa(n,t))}/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Of;const Lp=typeof window<"u"&&window.trustedTypes;if(Lp)try{Of=Lp.createPolicy("vue",{createHTML:e=>e})}catch{}const Pb=Of?e=>Of.createHTML(e):e=>e,ON="http://www.w3.org/2000/svg",PN="http://www.w3.org/1998/Math/MathML",oo=typeof document<"u"?document:null,Up=oo&&oo.createElement("template"),RN={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,o)=>{const r=t==="svg"?oo.createElementNS(ON,e):t==="mathml"?oo.createElementNS(PN,e):n?oo.createElement(e,{is:n}):oo.createElement(e);return e==="select"&&o&&o.multiple!=null&&r.setAttribute("multiple",o.multiple),r},createText:e=>oo.createTextNode(e),createComment:e=>oo.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>oo.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,o,r,i){const s=n?n.previousSibling:t.lastChild;if(r&&(r===i||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{Up.innerHTML=Pb(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const a=Up.content;if(o==="svg"||o==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[s?s.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},zN=Symbol("_vtc");function VN(e,t,n){const o=e[zN];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const lu=Symbol("_vod"),Rb=Symbol("_vsh"),HN={name:"show",beforeMount(e,{value:t},{transition:n}){e[lu]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Yi(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:o}){!t!=!n&&(o?t?(o.beforeEnter(e),Yi(e,!0),o.enter(e)):o.leave(e,()=>{Yi(e,!1)}):Yi(e,t))},beforeUnmount(e,{value:t}){Yi(e,t)}};function Yi(e,t){e.style.display=t?e[lu]:"none",e[Rb]=!t}const BN=Symbol(""),FN=/(?:^|;)\s*display\s*:/;function LN(e,t,n){const o=e.style,r=Ls(n);let i=!1;if(n&&!r){if(t)if(Ls(t))for(const s of t.split(";")){const a=s.slice(0,s.indexOf(":")).trim();n[a]==null&&Tl(o,a,"")}else for(const s in t)n[s]==null&&Tl(o,s,"");for(const s in n)s==="display"&&(i=!0),Tl(o,s,n[s])}else if(r){if(t!==n){const s=o[BN];s&&(n+=";"+s),o.cssText=n,i=FN.test(n)}}else t&&e.removeAttribute("style");lu in e&&(e[lu]=i?o.display:"",e[Rb]&&(o.display="none"))}const Gp=/\s*!important$/;function Tl(e,t,n){if(Go(n))n.forEach(o=>Tl(e,t,o));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const o=UN(e,t);Gp.test(n)?e.setProperty(fg(o),n.replace(Gp,""),"important"):e[o]=n}}const Zp=["Webkit","Moz","ms"],Id={};function UN(e,t){const n=Id[t];if(n)return n;let o=cn(t);if(o!=="filter"&&o in e)return Id[t]=o;o=IN(o);for(let r=0;r<Zp.length;r++){const i=Zp[r]+o;if(i in e)return Id[t]=i}return t}const Yp="http://www.w3.org/1999/xlink";function Xp(e,t,n,o,r,i=MN(t)){o&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Yp,t.slice(6,t.length)):e.setAttributeNS(Yp,t,n):n==null||i&&!Ob(n)?e.removeAttribute(t):e.setAttribute(t,i?"":Mf(n)?String(n):n)}function Wp(e,t,n,o,r){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Pb(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let s=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=Ob(n):n==null&&a==="string"?(n="",s=!0):a==="number"&&(n=0,s=!0)}try{e[t]=n}catch{}s&&e.removeAttribute(r||t)}function Ho(e,t,n,o){e.addEventListener(t,n,o)}function GN(e,t,n,o){e.removeEventListener(t,n,o)}const jp=Symbol("_vei");function ZN(e,t,n,o,r=null){const i=e[jp]||(e[jp]={}),s=i[t];if(o&&s)s.value=o;else{const[a,l]=YN(t);if(o){const u=i[t]=jN(o,r);Ho(e,a,u,l)}else s&&(GN(e,a,s,l),i[t]=void 0)}}const qp=/(?:Once|Passive|Capture)$/;function YN(e){let t;if(qp.test(e)){t={};let o;for(;o=e.match(qp);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):fg(e.slice(2)),t]}let Td=0;const XN=Promise.resolve(),WN=()=>Td||(XN.then(()=>Td=0),Td=Date.now());function jN(e,t){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;Un(qN(o,n.value),t,5,[o])};return n.value=e,n.attached=WN(),n}function qN(e,t){if(Go(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(o=>r=>!r._stopped&&o&&o(r))}else return t}const Kp=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,KN=(e,t,n,o,r,i)=>{const s=r==="svg";t==="class"?VN(e,o,s):t==="style"?LN(e,n,o):xN(t)?$N(t)||ZN(e,t,n,o,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):JN(e,t,o,s))?(Wp(e,t,o),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Xp(e,t,o,s,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ls(o))?Wp(e,kN(t),o,i,t):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),Xp(e,t,o,s))};function JN(e,t,n,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&Kp(t)&&Mb(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Kp(t)&&Ls(n)?!1:t in e}const $i=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Go(t)?n=>TN(t,n):t};function QN(e){e.target.composing=!0}function Jp(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const co=Symbol("_assign"),at={created(e,{modifiers:{lazy:t,trim:n,number:o}},r){e[co]=$i(r);const i=o||r.props&&r.props.type==="number";Ho(e,t?"change":"input",s=>{if(s.target.composing)return;let a=e.value;n&&(a=a.trim()),i&&(a=Df(a)),e[co](a)}),n&&Ho(e,"change",()=>{e.value=e.value.trim()}),t||(Ho(e,"compositionstart",QN),Ho(e,"compositionend",Jp),Ho(e,"change",Jp))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:o,trim:r,number:i}},s){if(e[co]=$i(s),e.composing)return;const a=(i||e.type==="number")&&!/^0\d/.test(e.value)?Df(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(o&&t===n||r&&e.value.trim()===l)||(e.value=l))}},Ns={deep:!0,created(e,t,n){e[co]=$i(n),Ho(e,"change",()=>{const o=e._modelValue,r=Us(e),i=e.checked,s=e[co];if(Go(o)){const a=hg(o,r),l=a!==-1;if(i&&!l)s(o.concat(r));else if(!i&&l){const u=[...o];u.splice(a,1),s(u)}}else if(Ec(o)){const a=new Set(o);i?a.add(r):a.delete(r),s(a)}else s(zb(e,i))})},mounted:Qp,beforeUpdate(e,t,n){e[co]=$i(n),Qp(e,t,n)}};function Qp(e,{value:t,oldValue:n},o){e._modelValue=t;let r;if(Go(t))r=hg(t,o.props.value)>-1;else if(Ec(t))r=t.has(o.props.value);else{if(t===n)return;r=xa(t,zb(e,!0))}e.checked!==r&&(e.checked=r)}const En={deep:!0,created(e,{value:t,modifiers:{number:n}},o){const r=Ec(t);Ho(e,"change",()=>{const i=Array.prototype.filter.call(e.options,s=>s.selected).map(s=>n?Df(Us(s)):Us(s));e[co](e.multiple?r?new Set(i):i:i[0]),e._assigning=!0,bt(()=>{e._assigning=!1})}),e[co]=$i(o)},mounted(e,{value:t}){em(e,t)},beforeUpdate(e,t,n){e[co]=$i(n)},updated(e,{value:t}){e._assigning||em(e,t)}};function em(e,t){const n=e.multiple,o=Go(t);if(!(n&&!o&&!Ec(t))){for(let r=0,i=e.options.length;r<i;r++){const s=e.options[r],a=Us(s);if(n)if(o){const l=typeof a;l==="string"||l==="number"?s.selected=t.some(u=>String(u)===String(a)):s.selected=hg(t,a)>-1}else s.selected=t.has(a);else if(xa(Us(s),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Us(e){return"_value"in e?e._value:e.value}function zb(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const e2=["ctrl","shift","alt","meta"],t2={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>e2.some(n=>e[`${n}Key`]&&!t.includes(n))},oi=(e,t)=>{const n=e._withMods||(e._withMods={}),o=t.join(".");return n[o]||(n[o]=((r,...i)=>{for(let s=0;s<t.length;s++){const a=t2[t[s]];if(a&&a(r,t))return}return e(r,...i)}))},n2={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Fa=(e,t)=>{const n=e._withKeys||(e._withKeys={}),o=t.join(".");return n[o]||(n[o]=(r=>{if(!("key"in r))return;const i=fg(r.key);if(t.some(s=>s===i||n2[s]===i))return e(r)}))},o2=EN({patchProp:KN},RN);let tm;function r2(){return tm||(tm=XS(o2))}const i2=((...e)=>{const t=r2().createApp(...e),{mount:n}=t;return t.mount=o=>{const r=a2(o);if(!r)return;const i=t._component;!Mb(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const s=n(r,!1,s2(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),s},t});function s2(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function a2(e){return Ls(e)?document.querySelector(e):e}/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Vb;const Sc=e=>Vb=e,Hb=Symbol();function Pf(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var ks;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(ks||(ks={}));function l2(){const e=Dr(!0),t=e.run(()=>de({}));let n=[],o=[];const r=_t({install(i){Sc(r),r._a=i,i.provide(Hb,r),i.config.globalProperties.$pinia=r,o.forEach(s=>n.push(s)),o=[]},use(i){return this._a?n.push(i):o.push(i),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return r}const Bb=()=>{};function nm(e,t,n,o=Bb){e.push(t);const r=()=>{const i=e.indexOf(t);i>-1&&(e.splice(i,1),o())};return!n&&Gn()&&Fo(r),r}function zr(e,...t){e.slice().forEach(n=>{n(...t)})}const u2=e=>e(),om=Symbol(),Ad=Symbol();function Rf(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,o)=>e.set(o,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const o=t[n],r=e[n];Pf(r)&&Pf(o)&&e.hasOwnProperty(n)&&!je(o)&&!Lo(o)?e[n]=Rf(r,o):e[n]=o}return e}const c2=Symbol();function d2(e){return!Pf(e)||!Object.prototype.hasOwnProperty.call(e,c2)}const{assign:Co}=Object;function f2(e){return!!(je(e)&&e.effect)}function h2(e,t,n,o){const{state:r,actions:i,getters:s}=t,a=n.state.value[e];let l;function u(){a||(n.state.value[e]=r?r():{});const c=_a(n.state.value[e]);return Co(c,i,Object.keys(s||{}).reduce((d,f)=>(d[f]=_t(J(()=>{Sc(n);const h=n._s.get(e);return s[f].call(h,h)})),d),{}))}return l=Fb(e,u,t,n,o,!0),l}function Fb(e,t,n={},o,r,i){let s;const a=Co({actions:{}},n),l={deep:!0};let u,c,d=[],f=[],h;const m=o.state.value[e];!i&&!m&&(o.state.value[e]={}),de({});let v;function b(z){let j;u=c=!1,typeof z=="function"?(z(o.state.value[e]),j={type:ks.patchFunction,storeId:e,events:h}):(Rf(o.state.value[e],z),j={type:ks.patchObject,payload:z,storeId:e,events:h});const H=v=Symbol();bt().then(()=>{v===H&&(u=!0)}),c=!0,zr(d,j,o.state.value[e])}const x=i?function(){const{state:j}=n,H=j?j():{};this.$patch(D=>{Co(D,H)})}:Bb;function N(){s.stop(),d=[],f=[],o._s.delete(e)}const S=(z,j="")=>{if(om in z)return z[Ad]=j,z;const H=function(){Sc(o);const D=Array.from(arguments),I=[],R=[];function w(F){I.push(F)}function O(F){R.push(F)}zr(f,{args:D,name:H[Ad],store:G,after:w,onError:O});let C;try{C=z.apply(this&&this.$id===e?this:G,D)}catch(F){throw zr(R,F),F}return C instanceof Promise?C.then(F=>(zr(I,F),F)).catch(F=>(zr(R,F),Promise.reject(F))):(zr(I,C),C)};return H[om]=!0,H[Ad]=j,H},A={_p:o,$id:e,$onAction:nm.bind(null,f),$patch:b,$reset:x,$subscribe(z,j={}){const H=nm(d,z,j.detached,()=>D()),D=s.run(()=>Se(()=>o.state.value[e],I=>{(j.flush==="sync"?c:u)&&z({storeId:e,type:ks.direct,events:h},I)},Co({},l,j)));return H},$dispose:N},G=wo(A);o._s.set(e,G);const Z=(o._a&&o._a.runWithContext||u2)(()=>o._e.run(()=>(s=Dr()).run(()=>t({action:S}))));for(const z in Z){const j=Z[z];if(je(j)&&!f2(j)||Lo(j))i||(m&&d2(j)&&(je(j)?j.value=m[z]:Rf(j,m[z])),o.state.value[e][z]=j);else if(typeof j=="function"){const H=S(j,z);Z[z]=H,a.actions[z]=j}}return Co(G,Z),Co(Xe(G),Z),Object.defineProperty(G,"$state",{get:()=>o.state.value[e],set:z=>{b(j=>{Co(j,z)})}}),o._p.forEach(z=>{Co(G,s.run(()=>z({store:G,app:o._a,pinia:o,options:a})))}),m&&i&&n.hydrate&&n.hydrate(G.$state,m),u=!0,c=!0,G}/*! #__NO_SIDE_EFFECTS__ */function Lb(e,t,n){let o;const r=typeof t=="function";o=r?n:t;function i(s,a){const l=BS();return s=s||(l?ot(Hb,null):null),s&&Sc(s),s=Vb,s._s.has(e)||(r?Fb(e,t,o,s):h2(e,o,s)),s._s.get(e)}return i.$id=e,i}function Gs(e){return Gn()?(Fo(e),!0):!1}function so(e){return typeof e=="function"?e():ie(e)}const g2=typeof window<"u"&&typeof document<"u",p2=e=>typeof e<"u",m2=Object.prototype.toString,y2=e=>m2.call(e)==="[object Object]",v2=()=>{};function _2(e,t){function n(...o){return new Promise((r,i)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(r).catch(i)})}return n}const Ub=e=>e();function b2(e=Ub){const t=de(!0);function n(){t.value=!1}function o(){t.value=!0}const r=(...i)=>{t.value&&e(...i)};return{isActive:Ql(t),pause:n,resume:o,eventFilter:r}}function rm(e,t=!1,n="Timeout"){return new Promise((o,r)=>{setTimeout(t?()=>r(n):o,e)})}function w2(e,t,n={}){const{eventFilter:o=Ub,...r}=n;return Se(e,_2(o,t),r)}function Vr(e,t,n={}){const{eventFilter:o,...r}=n,{eventFilter:i,pause:s,resume:a,isActive:l}=b2(o);return{stop:w2(e,t,{...r,eventFilter:i}),pause:s,resume:a,isActive:l}}function x2(e,t={}){if(!je(e))return _a(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=yc(()=>({get(){return e.value[o]},set(r){var i;if((i=so(t.replaceRef))!=null?i:!0)if(Array.isArray(e.value)){const a=[...e.value];a[o]=r,e.value=a}else{const a={...e.value,[o]:r};Object.setPrototypeOf(a,Object.getPrototypeOf(e.value)),e.value=a}else e.value[o]=r}}));return n}function zf(e,t=!1){function n(d,{flush:f="sync",deep:h=!1,timeout:m,throwOnTimeout:v}={}){let b=null;const N=[new Promise(S=>{b=Se(e,A=>{d(A)!==t&&(b?.(),S(A))},{flush:f,deep:h,immediate:!0})})];return m!=null&&N.push(rm(m,v).then(()=>so(e)).finally(()=>b?.())),Promise.race(N)}function o(d,f){if(!je(d))return n(A=>A===d,f);const{flush:h="sync",deep:m=!1,timeout:v,throwOnTimeout:b}=f??{};let x=null;const S=[new Promise(A=>{x=Se([e,d],([G,W])=>{t!==(G===W)&&(x?.(),A(G))},{flush:h,deep:m,immediate:!0})})];return v!=null&&S.push(rm(v,b).then(()=>so(e)).finally(()=>(x?.(),so(e)))),Promise.race(S)}function r(d){return n(f=>!!f,d)}function i(d){return o(null,d)}function s(d){return o(void 0,d)}function a(d){return n(Number.isNaN,d)}function l(d,f){return n(h=>{const m=Array.from(h);return m.includes(d)||m.includes(so(d))},f)}function u(d){return c(1,d)}function c(d=1,f){let h=-1;return n(()=>(h+=1,h>=d),f)}return Array.isArray(so(e))?{toMatch:n,toContains:l,changed:u,changedTimes:c,get not(){return zf(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:r,toBeNull:i,toBeNaN:a,toBeUndefined:s,changed:u,changedTimes:c,get not(){return zf(e,!t)}}}function Vf(e){return zf(e)}function $2(e){var t;const n=so(e);return(t=n?.$el)!=null?t:n}const Gb=g2?window:void 0;function Zb(...e){let t,n,o,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,r]=e,t=Gb):[t,n,o,r]=e,!t)return v2;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const i=[],s=()=>{i.forEach(c=>c()),i.length=0},a=(c,d,f,h)=>(c.addEventListener(d,f,h),()=>c.removeEventListener(d,f,h)),l=Se(()=>[$2(t),so(r)],([c,d])=>{if(s(),!c)return;const f=y2(d)?{...d}:d;i.push(...n.flatMap(h=>o.map(m=>a(c,h,m,f))))},{immediate:!0,flush:"post"}),u=()=>{l(),s()};return Gs(u),u}function E2(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function im(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:r=Gb,eventName:i="keydown",passive:s=!1,dedupe:a=!1}=o,l=E2(t);return Zb(r,i,c=>{c.repeat&&so(a)||l(c)&&n(c)},s)}function S2(e){return JSON.parse(JSON.stringify(e))}function Md(e,t,n,o={}){var r,i,s;const{clone:a=!1,passive:l=!1,eventName:u,deep:c=!1,defaultValue:d,shouldEmit:f}=o,h=jt(),m=n||h?.emit||((r=h?.$emit)==null?void 0:r.bind(h))||((s=(i=h?.proxy)==null?void 0:i.$emit)==null?void 0:s.bind(h?.proxy));let v=u;t||(t="modelValue"),v=v||`update:${t.toString()}`;const b=S=>a?typeof a=="function"?a(S):S2(S):S,x=()=>p2(e[t])?b(e[t]):d,N=S=>{f?f(S)&&m(v,S):m(v,S)};if(l){const S=x(),A=de(S);let G=!1;return Se(()=>e[t],W=>{G||(G=!0,A.value=b(W),bt(()=>G=!1))}),Se(A,W=>{!G&&(W!==e[t]||c)&&N(W)},{deep:c}),A}else return J({get(){return x()},set(S){N(S)}})}var N2={value:()=>{}};function Nc(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Al(n)}function Al(e){this._=e}function k2(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Al.prototype=Nc.prototype={constructor:Al,on:function(e,t){var n=this._,o=k2(e+"",n),r,i=-1,s=o.length;if(arguments.length<2){for(;++i<s;)if((r=(e=o[i]).type)&&(r=C2(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(r=(e=o[i]).type)n[r]=sm(n[r],e.name,t);else if(t==null)for(r in n)n[r]=sm(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Al(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};function C2(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function sm(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=N2,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Hf="http://www.w3.org/1999/xhtml";const am={svg:"http://www.w3.org/2000/svg",xhtml:Hf,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function kc(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),am.hasOwnProperty(t)?{space:am[t],local:e}:e}function I2(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Hf&&t.documentElement.namespaceURI===Hf?t.createElement(e):t.createElementNS(n,e)}}function T2(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Yb(e){var t=kc(e);return(t.local?T2:I2)(t)}function A2(){}function gg(e){return e==null?A2:function(){return this.querySelector(e)}}function M2(e){typeof e!="function"&&(e=gg(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=new Array(s),l,u,c=0;c<s;++c)(l=i[c])&&(u=e.call(l,l.__data__,c,i))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new Yt(o,this._parents)}function D2(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function O2(){return[]}function Xb(e){return e==null?O2:function(){return this.querySelectorAll(e)}}function P2(e){return function(){return D2(e.apply(this,arguments))}}function R2(e){typeof e=="function"?e=P2(e):e=Xb(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var s=t[i],a=s.length,l,u=0;u<a;++u)(l=s[u])&&(o.push(e.call(l,l.__data__,u,s)),r.push(l));return new Yt(o,r)}function Wb(e){return function(){return this.matches(e)}}function jb(e){return function(t){return t.matches(e)}}var z2=Array.prototype.find;function V2(e){return function(){return z2.call(this.children,e)}}function H2(){return this.firstElementChild}function B2(e){return this.select(e==null?H2:V2(typeof e=="function"?e:jb(e)))}var F2=Array.prototype.filter;function L2(){return Array.from(this.children)}function U2(e){return function(){return F2.call(this.children,e)}}function G2(e){return this.selectAll(e==null?L2:U2(typeof e=="function"?e:jb(e)))}function Z2(e){typeof e!="function"&&(e=Wb(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=[],l,u=0;u<s;++u)(l=i[u])&&e.call(l,l.__data__,u,i)&&a.push(l);return new Yt(o,this._parents)}function qb(e){return new Array(e.length)}function Y2(){return new Yt(this._enter||this._groups.map(qb),this._parents)}function uu(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}uu.prototype={constructor:uu,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function X2(e){return function(){return e}}function W2(e,t,n,o,r,i){for(var s=0,a,l=t.length,u=i.length;s<u;++s)(a=t[s])?(a.__data__=i[s],o[s]=a):n[s]=new uu(e,i[s]);for(;s<l;++s)(a=t[s])&&(r[s]=a)}function j2(e,t,n,o,r,i,s){var a,l,u=new Map,c=t.length,d=i.length,f=new Array(c),h;for(a=0;a<c;++a)(l=t[a])&&(f[a]=h=s.call(l,l.__data__,a,t)+"",u.has(h)?r[a]=l:u.set(h,l));for(a=0;a<d;++a)h=s.call(e,i[a],a,i)+"",(l=u.get(h))?(o[a]=l,l.__data__=i[a],u.delete(h)):n[a]=new uu(e,i[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(f[a])===l&&(r[a]=l)}function q2(e){return e.__data__}function K2(e,t){if(!arguments.length)return Array.from(this,q2);var n=t?j2:W2,o=this._parents,r=this._groups;typeof e!="function"&&(e=X2(e));for(var i=r.length,s=new Array(i),a=new Array(i),l=new Array(i),u=0;u<i;++u){var c=o[u],d=r[u],f=d.length,h=J2(e.call(c,c&&c.__data__,u,o)),m=h.length,v=a[u]=new Array(m),b=s[u]=new Array(m),x=l[u]=new Array(f);n(c,d,v,b,x,h,t);for(var N=0,S=0,A,G;N<m;++N)if(A=v[N]){for(N>=S&&(S=N+1);!(G=b[S])&&++S<m;);A._next=G||null}}return s=new Yt(s,o),s._enter=a,s._exit=l,s}function J2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Q2(){return new Yt(this._exit||this._groups.map(qb),this._parents)}function ek(e,t,n){var o=this.enter(),r=this,i=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function tk(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,s=Math.min(r,i),a=new Array(r),l=0;l<s;++l)for(var u=n[l],c=o[l],d=u.length,f=a[l]=new Array(d),h,m=0;m<d;++m)(h=u[m]||c[m])&&(f[m]=h);for(;l<r;++l)a[l]=n[l];return new Yt(a,this._parents)}function nk(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,i=o[r],s;--r>=0;)(s=o[r])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function ok(e){e||(e=rk);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var s=n[i],a=s.length,l=r[i]=new Array(a),u,c=0;c<a;++c)(u=s[c])&&(l[c]=u);l.sort(t)}return new Yt(r,this._parents).order()}function rk(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ik(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function sk(){return Array.from(this)}function ak(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var s=o[r];if(s)return s}return null}function lk(){let e=0;for(const t of this)++e;return e}function uk(){return!this.node()}function ck(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],i=0,s=r.length,a;i<s;++i)(a=r[i])&&e.call(a,a.__data__,i,r);return this}function dk(e){return function(){this.removeAttribute(e)}}function fk(e){return function(){this.removeAttributeNS(e.space,e.local)}}function hk(e,t){return function(){this.setAttribute(e,t)}}function gk(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function pk(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function mk(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function yk(e,t){var n=kc(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?fk:dk:typeof t=="function"?n.local?mk:pk:n.local?gk:hk)(n,t))}function Kb(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function vk(e){return function(){this.style.removeProperty(e)}}function _k(e,t,n){return function(){this.style.setProperty(e,t,n)}}function bk(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function wk(e,t,n){return arguments.length>1?this.each((t==null?vk:typeof t=="function"?bk:_k)(e,t,n??"")):Ei(this.node(),e)}function Ei(e,t){return e.style.getPropertyValue(t)||Kb(e).getComputedStyle(e,null).getPropertyValue(t)}function xk(e){return function(){delete this[e]}}function $k(e,t){return function(){this[e]=t}}function Ek(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Sk(e,t){return arguments.length>1?this.each((t==null?xk:typeof t=="function"?Ek:$k)(e,t)):this.node()[e]}function Jb(e){return e.trim().split(/^|\s+/)}function pg(e){return e.classList||new Qb(e)}function Qb(e){this._node=e,this._names=Jb(e.getAttribute("class")||"")}Qb.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ew(e,t){for(var n=pg(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function tw(e,t){for(var n=pg(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function Nk(e){return function(){ew(this,e)}}function kk(e){return function(){tw(this,e)}}function Ck(e,t){return function(){(t.apply(this,arguments)?ew:tw)(this,e)}}function Ik(e,t){var n=Jb(e+"");if(arguments.length<2){for(var o=pg(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?Ck:t?Nk:kk)(n,t))}function Tk(){this.textContent=""}function Ak(e){return function(){this.textContent=e}}function Mk(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Dk(e){return arguments.length?this.each(e==null?Tk:(typeof e=="function"?Mk:Ak)(e)):this.node().textContent}function Ok(){this.innerHTML=""}function Pk(e){return function(){this.innerHTML=e}}function Rk(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function zk(e){return arguments.length?this.each(e==null?Ok:(typeof e=="function"?Rk:Pk)(e)):this.node().innerHTML}function Vk(){this.nextSibling&&this.parentNode.appendChild(this)}function Hk(){return this.each(Vk)}function Bk(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Fk(){return this.each(Bk)}function Lk(e){var t=typeof e=="function"?e:Yb(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Uk(){return null}function Gk(e,t){var n=typeof e=="function"?e:Yb(e),o=t==null?Uk:typeof t=="function"?t:gg(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Zk(){var e=this.parentNode;e&&e.removeChild(this)}function Yk(){return this.each(Zk)}function Xk(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Wk(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function jk(e){return this.select(e?Wk:Xk)}function qk(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Kk(e){return function(t){e.call(this,t,this.__data__)}}function Jk(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Qk(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++o]=i;++o?t.length=o:delete this.__on}}}function eC(e,t,n){return function(){var o=this.__on,r,i=Kk(t);if(o){for(var s=0,a=o.length;s<a;++s)if((r=o[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function tC(e,t,n){var o=Jk(e+""),r,i=o.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(r=0,c=a[l];r<i;++r)if((s=o[r]).type===c.type&&s.name===c.name)return c.value}return}for(a=t?eC:Qk,r=0;r<i;++r)this.each(a(o[r],t,n));return this}function nw(e,t,n){var o=Kb(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function nC(e,t){return function(){return nw(this,e,t)}}function oC(e,t){return function(){return nw(this,e,t.apply(this,arguments))}}function rC(e,t){return this.each((typeof t=="function"?oC:nC)(e,t))}function*iC(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length,s;r<i;++r)(s=o[r])&&(yield s)}var ow=[null];function Yt(e,t){this._groups=e,this._parents=t}function $a(){return new Yt([[document.documentElement]],ow)}function sC(){return this}Yt.prototype=$a.prototype={constructor:Yt,select:M2,selectAll:R2,selectChild:B2,selectChildren:G2,filter:Z2,data:K2,enter:Y2,exit:Q2,join:ek,merge:tk,selection:sC,order:nk,sort:ok,call:ik,nodes:sk,node:ak,size:lk,empty:uk,each:ck,attr:yk,style:wk,property:Sk,classed:Ik,text:Dk,html:zk,raise:Hk,lower:Fk,append:Lk,insert:Gk,remove:Yk,clone:jk,datum:qk,on:tC,dispatch:rC,[Symbol.iterator]:iC};function Jt(e){return typeof e=="string"?new Yt([[document.querySelector(e)]],[document.documentElement]):new Yt([[e]],ow)}function aC(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Sn(e,t){if(e=aC(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const lC={passive:!1},Zs={capture:!0,passive:!1};function Dd(e){e.stopImmediatePropagation()}function fi(e){e.preventDefault(),e.stopImmediatePropagation()}function rw(e){var t=e.document.documentElement,n=Jt(e).on("dragstart.drag",fi,Zs);"onselectstart"in t?n.on("selectstart.drag",fi,Zs):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function iw(e,t){var n=e.document.documentElement,o=Jt(e).on("dragstart.drag",null);t&&(o.on("click.drag",fi,Zs),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const La=e=>()=>e;function Bf(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:s,y:a,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}Bf.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function uC(e){return!e.ctrlKey&&!e.button}function cC(){return this.parentNode}function dC(e,t){return t??{x:e.x,y:e.y}}function fC(){return navigator.maxTouchPoints||"ontouchstart"in this}function hC(){var e=uC,t=cC,n=dC,o=fC,r={},i=Nc("start","drag","end"),s=0,a,l,u,c,d=0;function f(A){A.on("mousedown.drag",h).filter(o).on("touchstart.drag",b).on("touchmove.drag",x,lC).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(A,G){if(!(c||!e.call(this,A,G))){var W=S(this,t.call(this,A,G),A,G,"mouse");W&&(Jt(A.view).on("mousemove.drag",m,Zs).on("mouseup.drag",v,Zs),rw(A.view),Dd(A),u=!1,a=A.clientX,l=A.clientY,W("start",A))}}function m(A){if(fi(A),!u){var G=A.clientX-a,W=A.clientY-l;u=G*G+W*W>d}r.mouse("drag",A)}function v(A){Jt(A.view).on("mousemove.drag mouseup.drag",null),iw(A.view,u),fi(A),r.mouse("end",A)}function b(A,G){if(e.call(this,A,G)){var W=A.changedTouches,Z=t.call(this,A,G),z=W.length,j,H;for(j=0;j<z;++j)(H=S(this,Z,A,G,W[j].identifier,W[j]))&&(Dd(A),H("start",A,W[j]))}}function x(A){var G=A.changedTouches,W=G.length,Z,z;for(Z=0;Z<W;++Z)(z=r[G[Z].identifier])&&(fi(A),z("drag",A,G[Z]))}function N(A){var G=A.changedTouches,W=G.length,Z,z;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),Z=0;Z<W;++Z)(z=r[G[Z].identifier])&&(Dd(A),z("end",A,G[Z]))}function S(A,G,W,Z,z,j){var H=i.copy(),D=Sn(j||W,G),I,R,w;if((w=n.call(A,new Bf("beforestart",{sourceEvent:W,target:f,identifier:z,active:s,x:D[0],y:D[1],dx:0,dy:0,dispatch:H}),Z))!=null)return I=w.x-D[0]||0,R=w.y-D[1]||0,function O(C,F,Y){var Q=D,q;switch(C){case"start":r[z]=O,q=s++;break;case"end":delete r[z],--s;case"drag":D=Sn(Y||F,G),q=s;break}H.call(C,A,new Bf(C,{sourceEvent:F,subject:w,target:f,identifier:z,active:q,x:D[0]+I,y:D[1]+R,dx:D[0]-Q[0],dy:D[1]-Q[1],dispatch:H}),Z)}}return f.filter=function(A){return arguments.length?(e=typeof A=="function"?A:La(!!A),f):e},f.container=function(A){return arguments.length?(t=typeof A=="function"?A:La(A),f):t},f.subject=function(A){return arguments.length?(n=typeof A=="function"?A:La(A),f):n},f.touchable=function(A){return arguments.length?(o=typeof A=="function"?A:La(!!A),f):o},f.on=function(){var A=i.on.apply(i,arguments);return A===i?f:A},f.clickDistance=function(A){return arguments.length?(d=(A=+A)*A,f):Math.sqrt(d)},f}function mg(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function sw(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Ea(){}var Ys=.7,cu=1/Ys,hi="\\s*([+-]?\\d+)\\s*",Xs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Vn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gC=/^#([0-9a-f]{3,8})$/,pC=new RegExp(`^rgb\\(${hi},${hi},${hi}\\)$`),mC=new RegExp(`^rgb\\(${Vn},${Vn},${Vn}\\)$`),yC=new RegExp(`^rgba\\(${hi},${hi},${hi},${Xs}\\)$`),vC=new RegExp(`^rgba\\(${Vn},${Vn},${Vn},${Xs}\\)$`),_C=new RegExp(`^hsl\\(${Xs},${Vn},${Vn}\\)$`),bC=new RegExp(`^hsla\\(${Xs},${Vn},${Vn},${Xs}\\)$`),lm={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};mg(Ea,$r,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:um,formatHex:um,formatHex8:wC,formatHsl:xC,formatRgb:cm,toString:cm});function um(){return this.rgb().formatHex()}function wC(){return this.rgb().formatHex8()}function xC(){return aw(this).formatHsl()}function cm(){return this.rgb().formatRgb()}function $r(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=gC.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?dm(t):n===3?new Ot(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ua(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ua(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=pC.exec(e))?new Ot(t[1],t[2],t[3],1):(t=mC.exec(e))?new Ot(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=yC.exec(e))?Ua(t[1],t[2],t[3],t[4]):(t=vC.exec(e))?Ua(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=_C.exec(e))?gm(t[1],t[2]/100,t[3]/100,1):(t=bC.exec(e))?gm(t[1],t[2]/100,t[3]/100,t[4]):lm.hasOwnProperty(e)?dm(lm[e]):e==="transparent"?new Ot(NaN,NaN,NaN,0):null}function dm(e){return new Ot(e>>16&255,e>>8&255,e&255,1)}function Ua(e,t,n,o){return o<=0&&(e=t=n=NaN),new Ot(e,t,n,o)}function $C(e){return e instanceof Ea||(e=$r(e)),e?(e=e.rgb(),new Ot(e.r,e.g,e.b,e.opacity)):new Ot}function Ff(e,t,n,o){return arguments.length===1?$C(e):new Ot(e,t,n,o??1)}function Ot(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}mg(Ot,Ff,sw(Ea,{brighter(e){return e=e==null?cu:Math.pow(cu,e),new Ot(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ys:Math.pow(Ys,e),new Ot(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ot(hr(this.r),hr(this.g),hr(this.b),du(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fm,formatHex:fm,formatHex8:EC,formatRgb:hm,toString:hm}));function fm(){return`#${sr(this.r)}${sr(this.g)}${sr(this.b)}`}function EC(){return`#${sr(this.r)}${sr(this.g)}${sr(this.b)}${sr((isNaN(this.opacity)?1:this.opacity)*255)}`}function hm(){const e=du(this.opacity);return`${e===1?"rgb(":"rgba("}${hr(this.r)}, ${hr(this.g)}, ${hr(this.b)}${e===1?")":`, ${e})`}`}function du(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function hr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function sr(e){return e=hr(e),(e<16?"0":"")+e.toString(16)}function gm(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Qt(e,t,n,o)}function aw(e){if(e instanceof Qt)return new Qt(e.h,e.s,e.l,e.opacity);if(e instanceof Ea||(e=$r(e)),!e)return new Qt;if(e instanceof Qt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),s=NaN,a=i-r,l=(i+r)/2;return a?(t===i?s=(n-o)/a+(n<o)*6:n===i?s=(o-t)/a+2:s=(t-n)/a+4,a/=l<.5?i+r:2-i-r,s*=60):a=l>0&&l<1?0:s,new Qt(s,a,l,e.opacity)}function SC(e,t,n,o){return arguments.length===1?aw(e):new Qt(e,t,n,o??1)}function Qt(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}mg(Qt,SC,sw(Ea,{brighter(e){return e=e==null?cu:Math.pow(cu,e),new Qt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ys:Math.pow(Ys,e),new Qt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new Ot(Od(e>=240?e-240:e+120,r,o),Od(e,r,o),Od(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new Qt(pm(this.h),Ga(this.s),Ga(this.l),du(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=du(this.opacity);return`${e===1?"hsl(":"hsla("}${pm(this.h)}, ${Ga(this.s)*100}%, ${Ga(this.l)*100}%${e===1?")":`, ${e})`}`}}));function pm(e){return e=(e||0)%360,e<0?e+360:e}function Ga(e){return Math.max(0,Math.min(1,e||0))}function Od(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const yg=e=>()=>e;function NC(e,t){return function(n){return e+n*t}}function kC(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function CC(e){return(e=+e)==1?lw:function(t,n){return n-t?kC(t,n,e):yg(isNaN(t)?n:t)}}function lw(e,t){var n=t-e;return n?NC(e,n):yg(isNaN(e)?t:e)}const fu=(function e(t){var n=CC(t);function o(r,i){var s=n((r=Ff(r)).r,(i=Ff(i)).r),a=n(r.g,i.g),l=n(r.b,i.b),u=lw(r.opacity,i.opacity);return function(c){return r.r=s(c),r.g=a(c),r.b=l(c),r.opacity=u(c),r+""}}return o.gamma=e,o})(1);function IC(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,o=t.slice(),r;return function(i){for(r=0;r<n;++r)o[r]=e[r]*(1-i)+t[r]*i;return o}}function TC(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function AC(e,t){var n=t?t.length:0,o=e?Math.min(n,e.length):0,r=new Array(o),i=new Array(n),s;for(s=0;s<o;++s)r[s]=Cs(e[s],t[s]);for(;s<n;++s)i[s]=t[s];return function(a){for(s=0;s<o;++s)i[s]=r[s](a);return i}}function MC(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function kn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function DC(e,t){var n={},o={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=Cs(e[r],t[r]):o[r]=t[r];return function(i){for(r in n)o[r]=n[r](i);return o}}var Lf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pd=new RegExp(Lf.source,"g");function OC(e){return function(){return e}}function PC(e){return function(t){return e(t)+""}}function uw(e,t){var n=Lf.lastIndex=Pd.lastIndex=0,o,r,i,s=-1,a=[],l=[];for(e=e+"",t=t+"";(o=Lf.exec(e))&&(r=Pd.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),a[s]?a[s]+=i:a[++s]=i),(o=o[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:kn(o,r)})),n=Pd.lastIndex;return n<t.length&&(i=t.slice(n),a[s]?a[s]+=i:a[++s]=i),a.length<2?l[0]?PC(l[0].x):OC(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}function Cs(e,t){var n=typeof t,o;return t==null||n==="boolean"?yg(t):(n==="number"?kn:n==="string"?(o=$r(t))?(t=o,fu):uw:t instanceof $r?fu:t instanceof Date?MC:TC(t)?IC:Array.isArray(t)?AC:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?DC:kn)(e,t)}var mm=180/Math.PI,Uf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function cw(e,t,n,o,r,i){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,l/=a),e*o<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*mm,skewX:Math.atan(l)*mm,scaleX:s,scaleY:a}}var Za;function RC(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Uf:cw(t.a,t.b,t.c,t.d,t.e,t.f)}function zC(e){return e==null||(Za||(Za=document.createElementNS("http://www.w3.org/2000/svg","g")),Za.setAttribute("transform",e),!(e=Za.transform.baseVal.consolidate()))?Uf:(e=e.matrix,cw(e.a,e.b,e.c,e.d,e.e,e.f))}function dw(e,t,n,o){function r(u){return u.length?u.pop()+" ":""}function i(u,c,d,f,h,m){if(u!==d||c!==f){var v=h.push("translate(",null,t,null,n);m.push({i:v-4,x:kn(u,d)},{i:v-2,x:kn(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function s(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(r(d)+"rotate(",null,o)-2,x:kn(u,c)})):c&&d.push(r(d)+"rotate("+c+o)}function a(u,c,d,f){u!==c?f.push({i:d.push(r(d)+"skewX(",null,o)-2,x:kn(u,c)}):c&&d.push(r(d)+"skewX("+c+o)}function l(u,c,d,f,h,m){if(u!==d||c!==f){var v=h.push(r(h)+"scale(",null,",",null,")");m.push({i:v-4,x:kn(u,d)},{i:v-2,x:kn(c,f)})}else(d!==1||f!==1)&&h.push(r(h)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),i(u.translateX,u.translateY,c.translateX,c.translateY,d,f),s(u.rotate,c.rotate,d,f),a(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var m=-1,v=f.length,b;++m<v;)d[(b=f[m]).i]=b.x(h);return d.join("")}}}var VC=dw(RC,"px, ","px)","deg)"),HC=dw(zC,", ",")",")"),BC=1e-12;function ym(e){return((e=Math.exp(e))+1/e)/2}function FC(e){return((e=Math.exp(e))-1/e)/2}function LC(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ml=(function e(t,n,o){function r(i,s){var a=i[0],l=i[1],u=i[2],c=s[0],d=s[1],f=s[2],h=c-a,m=d-l,v=h*h+m*m,b,x;if(v<BC)x=Math.log(f/u)/t,b=function(Z){return[a+Z*h,l+Z*m,u*Math.exp(t*Z*x)]};else{var N=Math.sqrt(v),S=(f*f-u*u+o*v)/(2*u*n*N),A=(f*f-u*u-o*v)/(2*f*n*N),G=Math.log(Math.sqrt(S*S+1)-S),W=Math.log(Math.sqrt(A*A+1)-A);x=(W-G)/t,b=function(Z){var z=Z*x,j=ym(G),H=u/(n*N)*(j*LC(t*z+G)-FC(G));return[a+H*h,l+H*m,u*j/ym(t*z+G)]}}return b.duration=x*1e3*t/Math.SQRT2,b}return r.rho=function(i){var s=Math.max(.001,+i),a=s*s,l=a*a;return e(s,a,l)},r})(Math.SQRT2,2,4);var Si=0,rs=0,Xi=0,fw=1e3,hu,is,gu=0,Er=0,Cc=0,Ws=typeof performance=="object"&&performance.now?performance:Date,hw=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function vg(){return Er||(hw(UC),Er=Ws.now()+Cc)}function UC(){Er=0}function pu(){this._call=this._time=this._next=null}pu.prototype=gw.prototype={constructor:pu,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?vg():+n)+(t==null?0:+t),!this._next&&is!==this&&(is?is._next=this:hu=this,is=this),this._call=e,this._time=n,Gf()},stop:function(){this._call&&(this._call=null,this._time=1/0,Gf())}};function gw(e,t,n){var o=new pu;return o.restart(e,t,n),o}function GC(){vg(),++Si;for(var e=hu,t;e;)(t=Er-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Si}function vm(){Er=(gu=Ws.now())+Cc,Si=rs=0;try{GC()}finally{Si=0,YC(),Er=0}}function ZC(){var e=Ws.now(),t=e-gu;t>fw&&(Cc-=t,gu=e)}function YC(){for(var e,t=hu,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:hu=n);is=e,Gf(o)}function Gf(e){if(!Si){rs&&(rs=clearTimeout(rs));var t=e-Er;t>24?(e<1/0&&(rs=setTimeout(vm,e-Ws.now()-Cc)),Xi&&(Xi=clearInterval(Xi))):(Xi||(gu=Ws.now(),Xi=setInterval(ZC,fw)),Si=1,hw(vm))}}function _m(e,t,n){var o=new pu;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var XC=Nc("start","end","cancel","interrupt"),WC=[],pw=0,bm=1,Zf=2,Dl=3,wm=4,Yf=5,Ol=6;function Ic(e,t,n,o,r,i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;jC(e,n,{name:t,index:o,group:r,on:XC,tween:WC,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:pw})}function _g(e,t){var n=mn(e,t);if(n.state>pw)throw new Error("too late; already scheduled");return n}function Zn(e,t){var n=mn(e,t);if(n.state>Dl)throw new Error("too late; already running");return n}function mn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function jC(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=gw(i,0,n.time);function i(u){n.state=bm,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var c,d,f,h;if(n.state!==bm)return l();for(c in o)if(h=o[c],h.name===n.name){if(h.state===Dl)return _m(s);h.state===wm?(h.state=Ol,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[c]):+c<t&&(h.state=Ol,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[c])}if(_m(function(){n.state===Dl&&(n.state=wm,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Zf,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Zf){for(n.state=Dl,r=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++d]=h);r.length=d+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Yf,1),d=-1,f=r.length;++d<f;)r[d].call(e,c);n.state===Yf&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Ol,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function Pl(e,t){var n=e.__transition,o,r,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((o=n[s]).name!==t){i=!1;continue}r=o.state>Zf&&o.state<Yf,o.state=Ol,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[s]}i&&delete e.__transition}}function qC(e){return this.each(function(){Pl(this,e)})}function KC(e,t){var n,o;return function(){var r=Zn(this,e),i=r.tween;if(i!==n){o=n=i;for(var s=0,a=o.length;s<a;++s)if(o[s].name===t){o=o.slice(),o.splice(s,1);break}}r.tween=o}}function JC(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=Zn(this,e),s=i.tween;if(s!==o){r=(o=s).slice();for(var a={name:t,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===t){r[l]=a;break}l===u&&r.push(a)}i.tween=r}}function QC(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=mn(this.node(),n).tween,r=0,i=o.length,s;r<i;++r)if((s=o[r]).name===e)return s.value;return null}return this.each((t==null?KC:JC)(n,e,t))}function bg(e,t,n){var o=e._id;return e.each(function(){var r=Zn(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return mn(r,o).value[t]}}function mw(e,t){var n;return(typeof t=="number"?kn:t instanceof $r?fu:(n=$r(t))?(t=n,fu):uw)(e,t)}function e3(e){return function(){this.removeAttribute(e)}}function t3(e){return function(){this.removeAttributeNS(e.space,e.local)}}function n3(e,t,n){var o,r=n+"",i;return function(){var s=this.getAttribute(e);return s===r?null:s===o?i:i=t(o=s,n)}}function o3(e,t,n){var o,r=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===r?null:s===o?i:i=t(o=s,n)}}function r3(e,t,n){var o,r,i;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===o&&l===r?i:(r=l,i=t(o=s,a)))}}function i3(e,t,n){var o,r,i;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===o&&l===r?i:(r=l,i=t(o=s,a)))}}function s3(e,t){var n=kc(e),o=n==="transform"?HC:mw;return this.attrTween(e,typeof t=="function"?(n.local?i3:r3)(n,o,bg(this,"attr."+e,t)):t==null?(n.local?t3:e3)(n):(n.local?o3:n3)(n,o,t))}function a3(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function l3(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function u3(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&l3(e,i)),n}return r._value=t,r}function c3(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&a3(e,i)),n}return r._value=t,r}function d3(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=kc(e);return this.tween(n,(o.local?u3:c3)(o,t))}function f3(e,t){return function(){_g(this,e).delay=+t.apply(this,arguments)}}function h3(e,t){return t=+t,function(){_g(this,e).delay=t}}function g3(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?f3:h3)(t,e)):mn(this.node(),t).delay}function p3(e,t){return function(){Zn(this,e).duration=+t.apply(this,arguments)}}function m3(e,t){return t=+t,function(){Zn(this,e).duration=t}}function y3(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?p3:m3)(t,e)):mn(this.node(),t).duration}function v3(e,t){if(typeof t!="function")throw new Error;return function(){Zn(this,e).ease=t}}function _3(e){var t=this._id;return arguments.length?this.each(v3(t,e)):mn(this.node(),t).ease}function b3(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Zn(this,e).ease=n}}function w3(e){if(typeof e!="function")throw new Error;return this.each(b3(this._id,e))}function x3(e){typeof e!="function"&&(e=Wb(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=[],l,u=0;u<s;++u)(l=i[u])&&e.call(l,l.__data__,u,i)&&a.push(l);return new mo(o,this._parents,this._name,this._id)}function $3(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),s=new Array(o),a=0;a<i;++a)for(var l=t[a],u=n[a],c=l.length,d=s[a]=new Array(c),f,h=0;h<c;++h)(f=l[h]||u[h])&&(d[h]=f);for(;a<o;++a)s[a]=t[a];return new mo(s,this._parents,this._name,this._id)}function E3(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function S3(e,t,n){var o,r,i=E3(t)?_g:Zn;return function(){var s=i(this,e),a=s.on;a!==o&&(r=(o=a).copy()).on(t,n),s.on=r}}function N3(e,t){var n=this._id;return arguments.length<2?mn(this.node(),n).on.on(e):this.each(S3(n,e,t))}function k3(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function C3(){return this.on("end.remove",k3(this._id))}function I3(e){var t=this._name,n=this._id;typeof e!="function"&&(e=gg(e));for(var o=this._groups,r=o.length,i=new Array(r),s=0;s<r;++s)for(var a=o[s],l=a.length,u=i[s]=new Array(l),c,d,f=0;f<l;++f)(c=a[f])&&(d=e.call(c,c.__data__,f,a))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,Ic(u[f],t,n,f,u,mn(c,n)));return new mo(i,this._parents,t,n)}function T3(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Xb(e));for(var o=this._groups,r=o.length,i=[],s=[],a=0;a<r;++a)for(var l=o[a],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var f=e.call(c,c.__data__,d,l),h,m=mn(c,n),v=0,b=f.length;v<b;++v)(h=f[v])&&Ic(h,t,n,v,f,m);i.push(f),s.push(c)}return new mo(i,s,t,n)}var A3=$a.prototype.constructor;function M3(){return new A3(this._groups,this._parents)}function D3(e,t){var n,o,r;return function(){var i=Ei(this,e),s=(this.style.removeProperty(e),Ei(this,e));return i===s?null:i===n&&s===o?r:r=t(n=i,o=s)}}function yw(e){return function(){this.style.removeProperty(e)}}function O3(e,t,n){var o,r=n+"",i;return function(){var s=Ei(this,e);return s===r?null:s===o?i:i=t(o=s,n)}}function P3(e,t,n){var o,r,i;return function(){var s=Ei(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Ei(this,e))),s===l?null:s===o&&l===r?i:(r=l,i=t(o=s,a))}}function R3(e,t){var n,o,r,i="style."+t,s="end."+i,a;return function(){var l=Zn(this,e),u=l.on,c=l.value[i]==null?a||(a=yw(t)):void 0;(u!==n||r!==c)&&(o=(n=u).copy()).on(s,r=c),l.on=o}}function z3(e,t,n){var o=(e+="")=="transform"?VC:mw;return t==null?this.styleTween(e,D3(e,o)).on("end.style."+e,yw(e)):typeof t=="function"?this.styleTween(e,P3(e,o,bg(this,"style."+e,t))).each(R3(this._id,e)):this.styleTween(e,O3(e,o,t),n).on("end.style."+e,null)}function V3(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function H3(e,t,n){var o,r;function i(){var s=t.apply(this,arguments);return s!==r&&(o=(r=s)&&V3(e,s,n)),o}return i._value=t,i}function B3(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,H3(e,t,n??""))}function F3(e){return function(){this.textContent=e}}function L3(e){return function(){var t=e(this);this.textContent=t??""}}function U3(e){return this.tween("text",typeof e=="function"?L3(bg(this,"text",e)):F3(e==null?"":e+""))}function G3(e){return function(t){this.textContent=e.call(this,t)}}function Z3(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&G3(r)),t}return o._value=e,o}function Y3(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Z3(e))}function X3(){for(var e=this._name,t=this._id,n=vw(),o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],a=s.length,l,u=0;u<a;++u)if(l=s[u]){var c=mn(l,t);Ic(l,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new mo(o,this._parents,e,n)}function W3(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i,s){var a={value:s},l={value:function(){--r===0&&i()}};n.each(function(){var u=Zn(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),r===0&&i()})}var j3=0;function mo(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function vw(){return++j3}var Kn=$a.prototype;mo.prototype={constructor:mo,select:I3,selectAll:T3,selectChild:Kn.selectChild,selectChildren:Kn.selectChildren,filter:x3,merge:$3,selection:M3,transition:X3,call:Kn.call,nodes:Kn.nodes,node:Kn.node,size:Kn.size,empty:Kn.empty,each:Kn.each,on:N3,attr:s3,attrTween:d3,style:z3,styleTween:B3,text:U3,textTween:Y3,remove:C3,tween:QC,delay:g3,duration:y3,ease:_3,easeVarying:w3,end:W3,[Symbol.iterator]:Kn[Symbol.iterator]};function q3(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var K3={time:null,delay:0,duration:250,ease:q3};function J3(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Q3(e){var t,n;e instanceof mo?(t=e._id,e=e._name):(t=vw(),(n=K3).time=vg(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],a=s.length,l,u=0;u<a;++u)(l=s[u])&&Ic(l,e,t,u,s,n||J3(l,t));return new mo(o,this._parents,e,t)}$a.prototype.interrupt=qC;$a.prototype.transition=Q3;const Ya=e=>()=>e;function eI(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function ao(e,t,n){this.k=e,this.x=t,this.y=n}ao.prototype={constructor:ao,scale:function(e){return e===1?this:new ao(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ao(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ni=new ao(1,0,0);ao.prototype;function Rd(e){e.stopImmediatePropagation()}function Wi(e){e.preventDefault(),e.stopImmediatePropagation()}function tI(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function nI(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function xm(){return this.__zoom||Ni}function oI(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function rI(){return navigator.maxTouchPoints||"ontouchstart"in this}function iI(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function sI(){var e=tI,t=nI,n=iI,o=oI,r=rI,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=Ml,u=Nc("start","zoom","end"),c,d,f,h=500,m=150,v=0,b=10;function x(w){w.property("__zoom",xm).on("wheel.zoom",z,{passive:!1}).on("mousedown.zoom",j).on("dblclick.zoom",H).filter(r).on("touchstart.zoom",D).on("touchmove.zoom",I).on("touchend.zoom touchcancel.zoom",R).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(w,O,C,F){var Y=w.selection?w.selection():w;Y.property("__zoom",xm),w!==Y?G(w,O,C,F):Y.interrupt().each(function(){W(this,arguments).event(F).start().zoom(null,typeof O=="function"?O.apply(this,arguments):O).end()})},x.scaleBy=function(w,O,C,F){x.scaleTo(w,function(){var Y=this.__zoom.k,Q=typeof O=="function"?O.apply(this,arguments):O;return Y*Q},C,F)},x.scaleTo=function(w,O,C,F){x.transform(w,function(){var Y=t.apply(this,arguments),Q=this.__zoom,q=C==null?A(Y):typeof C=="function"?C.apply(this,arguments):C,ne=Q.invert(q),ae=typeof O=="function"?O.apply(this,arguments):O;return n(S(N(Q,ae),q,ne),Y,s)},C,F)},x.translateBy=function(w,O,C,F){x.transform(w,function(){return n(this.__zoom.translate(typeof O=="function"?O.apply(this,arguments):O,typeof C=="function"?C.apply(this,arguments):C),t.apply(this,arguments),s)},null,F)},x.translateTo=function(w,O,C,F,Y){x.transform(w,function(){var Q=t.apply(this,arguments),q=this.__zoom,ne=F==null?A(Q):typeof F=="function"?F.apply(this,arguments):F;return n(Ni.translate(ne[0],ne[1]).scale(q.k).translate(typeof O=="function"?-O.apply(this,arguments):-O,typeof C=="function"?-C.apply(this,arguments):-C),Q,s)},F,Y)};function N(w,O){return O=Math.max(i[0],Math.min(i[1],O)),O===w.k?w:new ao(O,w.x,w.y)}function S(w,O,C){var F=O[0]-C[0]*w.k,Y=O[1]-C[1]*w.k;return F===w.x&&Y===w.y?w:new ao(w.k,F,Y)}function A(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function G(w,O,C,F){w.on("start.zoom",function(){W(this,arguments).event(F).start()}).on("interrupt.zoom end.zoom",function(){W(this,arguments).event(F).end()}).tween("zoom",function(){var Y=this,Q=arguments,q=W(Y,Q).event(F),ne=t.apply(Y,Q),ae=C==null?A(ne):typeof C=="function"?C.apply(Y,Q):C,fe=Math.max(ne[1][0]-ne[0][0],ne[1][1]-ne[0][1]),se=Y.__zoom,pe=typeof O=="function"?O.apply(Y,Q):O,le=l(se.invert(ae).concat(fe/se.k),pe.invert(ae).concat(fe/pe.k));return function(ee){if(ee===1)ee=pe;else{var re=le(ee),oe=fe/re[2];ee=new ao(oe,ae[0]-re[0]*oe,ae[1]-re[1]*oe)}q.zoom(null,ee)}})}function W(w,O,C){return!C&&w.__zooming||new Z(w,O)}function Z(w,O){this.that=w,this.args=O,this.active=0,this.sourceEvent=null,this.extent=t.apply(w,O),this.taps=0}Z.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,O){return this.mouse&&w!=="mouse"&&(this.mouse[1]=O.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=O.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=O.invert(this.touch1[0])),this.that.__zoom=O,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var O=Jt(this.that).datum();u.call(w,this.that,new eI(w,{sourceEvent:this.sourceEvent,target:x,transform:this.that.__zoom,dispatch:u}),O)}};function z(w,...O){if(!e.apply(this,arguments))return;var C=W(this,O).event(w),F=this.__zoom,Y=Math.max(i[0],Math.min(i[1],F.k*Math.pow(2,o.apply(this,arguments)))),Q=Sn(w);if(C.wheel)(C.mouse[0][0]!==Q[0]||C.mouse[0][1]!==Q[1])&&(C.mouse[1]=F.invert(C.mouse[0]=Q)),clearTimeout(C.wheel);else{if(F.k===Y)return;C.mouse=[Q,F.invert(Q)],Pl(this),C.start()}Wi(w),C.wheel=setTimeout(q,m),C.zoom("mouse",n(S(N(F,Y),C.mouse[0],C.mouse[1]),C.extent,s));function q(){C.wheel=null,C.end()}}function j(w,...O){if(f||!e.apply(this,arguments))return;var C=w.currentTarget,F=W(this,O,!0).event(w),Y=Jt(w.view).on("mousemove.zoom",ae,!0).on("mouseup.zoom",fe,!0),Q=Sn(w,C),q=w.clientX,ne=w.clientY;rw(w.view),Rd(w),F.mouse=[Q,this.__zoom.invert(Q)],Pl(this),F.start();function ae(se){if(Wi(se),!F.moved){var pe=se.clientX-q,le=se.clientY-ne;F.moved=pe*pe+le*le>v}F.event(se).zoom("mouse",n(S(F.that.__zoom,F.mouse[0]=Sn(se,C),F.mouse[1]),F.extent,s))}function fe(se){Y.on("mousemove.zoom mouseup.zoom",null),iw(se.view,F.moved),Wi(se),F.event(se).end()}}function H(w,...O){if(e.apply(this,arguments)){var C=this.__zoom,F=Sn(w.changedTouches?w.changedTouches[0]:w,this),Y=C.invert(F),Q=C.k*(w.shiftKey?.5:2),q=n(S(N(C,Q),F,Y),t.apply(this,O),s);Wi(w),a>0?Jt(this).transition().duration(a).call(G,q,F,w):Jt(this).call(x.transform,q,F,w)}}function D(w,...O){if(e.apply(this,arguments)){var C=w.touches,F=C.length,Y=W(this,O,w.changedTouches.length===F).event(w),Q,q,ne,ae;for(Rd(w),q=0;q<F;++q)ne=C[q],ae=Sn(ne,this),ae=[ae,this.__zoom.invert(ae),ne.identifier],Y.touch0?!Y.touch1&&Y.touch0[2]!==ae[2]&&(Y.touch1=ae,Y.taps=0):(Y.touch0=ae,Q=!0,Y.taps=1+!!c);c&&(c=clearTimeout(c)),Q&&(Y.taps<2&&(d=ae[0],c=setTimeout(function(){c=null},h)),Pl(this),Y.start())}}function I(w,...O){if(this.__zooming){var C=W(this,O).event(w),F=w.changedTouches,Y=F.length,Q,q,ne,ae;for(Wi(w),Q=0;Q<Y;++Q)q=F[Q],ne=Sn(q,this),C.touch0&&C.touch0[2]===q.identifier?C.touch0[0]=ne:C.touch1&&C.touch1[2]===q.identifier&&(C.touch1[0]=ne);if(q=C.that.__zoom,C.touch1){var fe=C.touch0[0],se=C.touch0[1],pe=C.touch1[0],le=C.touch1[1],ee=(ee=pe[0]-fe[0])*ee+(ee=pe[1]-fe[1])*ee,re=(re=le[0]-se[0])*re+(re=le[1]-se[1])*re;q=N(q,Math.sqrt(ee/re)),ne=[(fe[0]+pe[0])/2,(fe[1]+pe[1])/2],ae=[(se[0]+le[0])/2,(se[1]+le[1])/2]}else if(C.touch0)ne=C.touch0[0],ae=C.touch0[1];else return;C.zoom("touch",n(S(q,ne,ae),C.extent,s))}}function R(w,...O){if(this.__zooming){var C=W(this,O).event(w),F=w.changedTouches,Y=F.length,Q,q;for(Rd(w),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),Q=0;Q<Y;++Q)q=F[Q],C.touch0&&C.touch0[2]===q.identifier?delete C.touch0:C.touch1&&C.touch1[2]===q.identifier&&delete C.touch1;if(C.touch1&&!C.touch0&&(C.touch0=C.touch1,delete C.touch1),C.touch0)C.touch0[1]=this.__zoom.invert(C.touch0[0]);else if(C.end(),C.taps===2&&(q=Sn(q,this),Math.hypot(d[0]-q[0],d[1]-q[1])<b)){var ne=Jt(this).on("dblclick.zoom");ne&&ne.apply(this,arguments)}}}return x.wheelDelta=function(w){return arguments.length?(o=typeof w=="function"?w:Ya(+w),x):o},x.filter=function(w){return arguments.length?(e=typeof w=="function"?w:Ya(!!w),x):e},x.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:Ya(!!w),x):r},x.extent=function(w){return arguments.length?(t=typeof w=="function"?w:Ya([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),x):t},x.scaleExtent=function(w){return arguments.length?(i[0]=+w[0],i[1]=+w[1],x):[i[0],i[1]]},x.translateExtent=function(w){return arguments.length?(s[0][0]=+w[0][0],s[1][0]=+w[1][0],s[0][1]=+w[0][1],s[1][1]=+w[1][1],x):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},x.constrain=function(w){return arguments.length?(n=w,x):n},x.duration=function(w){return arguments.length?(a=+w,x):a},x.interpolate=function(w){return arguments.length?(l=w,x):l},x.on=function(){var w=u.on.apply(u,arguments);return w===u?x:w},x.clickDistance=function(w){return arguments.length?(v=(w=+w)*w,x):Math.sqrt(v)},x.tapDistance=function(w){return arguments.length?(b=+w,x):b},x}var $e=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))($e||{}),wg=(e=>(e.Partial="partial",e.Full="full",e))(wg||{}),or=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(or||{}),Zo=(e=>(e.Strict="strict",e.Loose="loose",e))(Zo||{}),Xf=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(Xf||{}),Is=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(Is||{});const aI=["INPUT","SELECT","TEXTAREA"],lI=typeof document<"u"?document:null;function Wf(e){var t,n;const o=((n=(t=e.composedPath)==null?void 0:t.call(e))==null?void 0:n[0])||e.target,r=typeof o?.hasAttribute=="function"?o.hasAttribute("contenteditable"):!1,i=typeof o?.closest=="function"?o.closest(".nokey"):null;return aI.includes(o?.nodeName)||r||!!i}function uI(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function $m(e,t,n,o){const r=t.replace("+",`
`).replace(`

`,`
+`).split(`
`).map(s=>s.trim().toLowerCase());if(r.length===1)return e.toLowerCase()===t.toLowerCase();o||n.add(e.toLowerCase());const i=r.every((s,a)=>n.has(s)&&Array.from(n.values())[a]===r[a]);return o&&n.delete(e.toLowerCase()),i}function cI(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=dI(n.code,e);return Array.isArray(e)?e.some(r=>$m(n[o],r,t,n.type==="keyup")):$m(n[o],e,t,n.type==="keyup")}}function dI(e,t){return t.includes(e)?"code":"key"}function Ts(e,t){const n=J(()=>ge(t?.target)??lI),o=bi(ge(e)===!0);let r=!1;const i=new Set;let s=l(ge(e));Se(()=>ge(e),(u,c)=>{typeof c=="boolean"&&typeof u!="boolean"&&a(),s=l(u)},{immediate:!0}),Zb(["blur","contextmenu"],a),im((...u)=>s(...u),u=>{var c,d;const f=ge(t?.actInsideInputWithModifier)??!0,h=ge(t?.preventDefault)??!1;if(r=uI(u),(!r||r&&!f)&&Wf(u))return;const v=((d=(c=u.composedPath)==null?void 0:c.call(u))==null?void 0:d[0])||u.target,b=v?.nodeName==="BUTTON"||v?.nodeName==="A";!h&&(r||!b)&&u.preventDefault(),o.value=!0},{eventName:"keydown",target:n}),im((...u)=>s(...u),u=>{const c=ge(t?.actInsideInputWithModifier)??!0;if(o.value){if((!r||r&&!c)&&Wf(u))return;r=!1,o.value=!1}},{eventName:"keyup",target:n});function a(){r=!1,i.clear(),o.value=ge(e)===!0}function l(u){return u===null?(a(),()=>!1):typeof u=="boolean"?(a(),o.value=u,()=>!1):Array.isArray(u)||typeof u=="string"?cI(u,i):u}return o}const _w="vue-flow__node-desc",bw="vue-flow__edge-desc",fI="vue-flow__aria-live",ww=["Enter"," ","Escape"],gi={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function mu(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function yu(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function Tc(e){return{width:e.offsetWidth,height:e.offsetHeight}}function Sr(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function xw(e,t){return{x:Sr(e.x,t[0][0],t[1][0]),y:Sr(e.y,t[0][1],t[1][1])}}function Em(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function Yo(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function gr(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!Yo(e)}function ss(e){return gr(e)&&"computedPosition"in e}function Xa(e){return!Number.isNaN(e)&&Number.isFinite(e)}function hI(e){return Xa(e.width)&&Xa(e.height)&&Xa(e.x)&&Xa(e.y)}function gI(e,t,n){const o={id:e.id.toString(),type:e.type??"default",dimensions:_t({width:0,height:0}),computedPosition:_t({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:pt(e.data)?e.data:{},events:_t(pt(e.events)?e.events:{})};return Object.assign(t??o,e,{id:e.id.toString(),parentNode:n})}function $w(e,t,n){var o,r;const i={id:e.id.toString(),type:e.type??t?.type??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(o=e.sourceHandle)==null?void 0:o.toString(),targetHandle:(r=e.targetHandle)==null?void 0:r.toString(),updatable:e.updatable??n?.updatable,selectable:e.selectable??n?.selectable,focusable:e.focusable??n?.focusable,data:pt(e.data)?e.data:{},events:_t(pt(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??n?.interactionWidth,...n??{}};return Object.assign(t??i,e,{id:e.id.toString()})}function Ew(e,t,n,o){const r=typeof e=="string"?e:e.id,i=new Set,s=o==="source"?"target":"source";for(const a of n)a[s]===r&&i.add(a[o]);return t.filter(a=>i.has(a.id))}function pI(...e){if(e.length===3){const[i,s,a]=e;return Ew(i,s,a,"target")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(i=>Yo(i)&&i.source===o).map(i=>n.find(s=>gr(s)&&s.id===i.target))}function mI(...e){if(e.length===3){const[i,s,a]=e;return Ew(i,s,a,"source")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(i=>Yo(i)&&i.target===o).map(i=>n.find(s=>gr(s)&&s.id===i.source))}function Sw({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function yI(e,t){return t.some(n=>Yo(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function js({x:e,y:t},{x:n,y:o,zoom:r}){return{x:e*r+n,y:t*r+o}}function qs({x:e,y:t},{x:n,y:o,zoom:r},i=!1,s=[1,1]){const a={x:(e-n)/r,y:(t-o)/r};return i?Ac(a,s):a}function vI(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function Nw({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function _I({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function kw(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const o=e[n];t=vI(t,Nw({...o.computedPosition,...o.dimensions}))}return _I(t)}function Cw(e,t,n={x:0,y:0,zoom:1},o=!1,r=!1){const i={...qs(t,n),width:t.width/n.zoom,height:t.height/n.zoom},s=[];for(const a of e){const{dimensions:l,selectable:u=!0,hidden:c=!1}=a,d=l.width??a.width??null,f=l.height??a.height??null;if(r&&!u||c)continue;const h=yu(i,mu(a)),m=d===null||f===null,v=o&&h>0,b=(d??0)*(f??0);(m||v||h>=b||a.dragging)&&s.push(a)}return s}function Iw(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter(o=>n.has(o.source)||n.has(o.target))}function Hr(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return Sa(`The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function bI(e,t,n){if(typeof e=="string"||typeof e=="number"){const o=Hr(e,n),r=Hr(e,t);return{top:o,right:r,bottom:o,left:r,x:r*2,y:o*2}}if(typeof e=="object"){const o=Hr(e.top??e.y??0,n),r=Hr(e.bottom??e.y??0,n),i=Hr(e.left??e.x??0,t),s=Hr(e.right??e.x??0,t);return{top:o,right:s,bottom:r,left:i,x:i+s,y:o+r}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function wI(e,t,n,o,r,i){const{x:s,y:a}=js(e,{x:t,y:n,zoom:o}),{x:l,y:u}=js({x:e.x+e.width,y:e.y+e.height},{x:t,y:n,zoom:o}),c=r-l,d=i-u;return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(c),bottom:Math.floor(d)}}function Sm(e,t,n,o,r,i=.1){const s=bI(i,t,n),a=(t-s.x)/e.width,l=(n-s.y)/e.height,u=Math.min(a,l),c=Sr(u,o,r),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*c,m=n/2-f*c,v=wI(e,h,m,c,t,n),b={left:Math.min(v.left-s.left,0),top:Math.min(v.top-s.top,0),right:Math.min(v.right-s.right,0),bottom:Math.min(v.bottom-s.bottom,0)};return{x:h-b.left+b.right,y:m-b.top+b.bottom,zoom:c}}function xI(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function Tw(e,t){if(!e.parentNode)return!1;const n=t.get(e.parentNode);return n?n.selected?!0:Tw(n,t):!1}function Ks(e,t){return typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`}function Nm(e){const t=e.ctrlKey&&vu()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t}function km(e,t,n){return e<t?Sr(Math.abs(e-t),1,t)/t:e>n?-Sr(Math.abs(e-n),1,t)/t:0}function Aw(e,t,n=15,o=40){const r=km(e.x,o,t.width-o)*n,i=km(e.y,o,t.height-o)*n;return[r,i]}function zd(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let r={};if(typeof t.style=="function"?r={...t.style(t)}:t.style&&(r={...t.style}),r.width=r.width??`${t.dimensions.width}px`,r.height=r.height??`${t.dimensions.height}px`,n>0)if(typeof r.width=="string"){const i=Number(r.width.replace("px",""));r.width=`${i+n}px`}else r.width+=n;if(o>0)if(typeof r.height=="string"){const i=Number(r.height.replace("px",""));r.height=`${i+o}px`}else r.height+=o;if(e.position.x<0){const i=Math.abs(e.position.x);if(t.position.x=t.position.x-i,typeof r.width=="string"){const s=Number(r.width.replace("px",""));r.width=`${s+i}px`}else r.width+=i;e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);if(t.position.y=t.position.y-i,typeof r.height=="string"){const s=Number(r.height.replace("px",""));r.height=`${s+i}px`}else r.height+=i;e.position.y=0}t.dimensions.width=Number(r.width.toString().replace("px","")),t.dimensions.height=Number(r.height.toString().replace("px","")),typeof t.style=="function"?t.style=i=>{const s=t.style;return{...s(i),...r}}:t.style={...t.style,...r}}}}function Cm(e,t){var n,o;const r=e.filter(s=>s.type==="add"||s.type==="remove");for(const s of r)if(s.type==="add")t.findIndex(l=>l.id===s.item.id)===-1&&t.push(s.item);else if(s.type==="remove"){const a=t.findIndex(l=>l.id===s.id);a!==-1&&t.splice(a,1)}const i=t.map(s=>s.id);for(const s of t)for(const a of e)if(a.id===s.id)switch(a.type){case"select":s.selected=a.selected;break;case"position":if(ss(s)&&(typeof a.position<"u"&&(s.position=a.position),typeof a.dragging<"u"&&(s.dragging=a.dragging),s.expandParent&&s.parentNode)){const l=t[i.indexOf(s.parentNode)];l&&ss(l)&&zd(s,l)}break;case"dimensions":if(ss(s)&&(typeof a.dimensions<"u"&&(s.dimensions=a.dimensions),typeof a.updateStyle<"u"&&a.updateStyle&&(s.style={...s.style||{},width:`${(n=a.dimensions)==null?void 0:n.width}px`,height:`${(o=a.dimensions)==null?void 0:o.height}px`}),typeof a.resizing<"u"&&(s.resizing=a.resizing),s.expandParent&&s.parentNode)){const l=t[i.indexOf(s.parentNode)];l&&ss(l)&&(!!l.dimensions.width&&!!l.dimensions.height?zd(s,l):bt(()=>{zd(s,l)}))}break}return t}function Io(e,t){return{id:e,type:"select",selected:t}}function Im(e){return{item:e,type:"add"}}function Tm(e){return{id:e,type:"remove"}}function Am(e,t,n,o,r){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:r||null,type:"remove"}}function Ro(e,t=new Set,n=!1){const o=[];for(const[r,i]of e){const s=t.has(r);!(i.selected===void 0&&!s)&&i.selected!==s&&(n&&(i.selected=s),o.push(Io(i.id,s)))}return o}const Mm=()=>{};function be(e){const t=new Set;let n=Mm,o=()=>!1;const r=()=>t.size>0||o(),i=f=>{n=f},s=()=>{n=Mm},a=f=>{o=f},l=()=>{o=()=>!1},u=f=>{t.delete(f)};return{on:f=>{t.add(f);const h=()=>u(f);return Gs(h),{off:h}},off:u,trigger:f=>{const h=[n];return r()?h.push(...t):e&&h.push(e),Promise.allSettled(h.map(m=>m(f)))},hasListeners:r,listeners:t,setEmitter:i,removeEmitter:s,setHasEmitListeners:a,removeHasEmitListeners:l}}function Dm(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function $I(e,t,n,o){var r,i;const s=new Map;for(const[a,l]of e)(l.selected||l.id===o)&&(!l.parentNode||!Tw(l,e))&&(l.draggable||t&&typeof l.draggable>"u")&&e.get(a)&&s.set(a,{id:l.id,position:l.position||{x:0,y:0},distance:{x:n.x-((r=l.computedPosition)==null?void 0:r.x)||0,y:n.y-((i=l.computedPosition)==null?void 0:i.y)||0},from:{x:l.computedPosition.x,y:l.computedPosition.y},extent:l.extent,parentNode:l.parentNode,dimensions:{...l.dimensions},expandParent:l.expandParent});return Array.from(s.values())}function Vd({id:e,dragItems:t,findNode:n}){const o=[];for(const r of t){const i=n(r.id);i&&o.push(i)}return[e?o.find(r=>r.id===e):o[0],o]}function Mw(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function EI(e,t,n){const[o,r,i,s]=typeof e!="string"?Mw(e.padding):[0,0,0,0];return n&&typeof n.computedPosition.x<"u"&&typeof n.computedPosition.y<"u"&&typeof n.dimensions.width<"u"&&typeof n.dimensions.height<"u"?[[n.computedPosition.x+s,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-r,n.computedPosition.y+n.dimensions.height-i]]:!1}function SI(e,t,n,o){let r=e.extent||n;if((r==="parent"||!Array.isArray(r)&&r?.range==="parent")&&!e.expandParent)if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const i=EI(r,e,o);i&&(r=i)}else t(new vt(mt.NODE_EXTENT_INVALID,e.id)),r=n;else if(Array.isArray(r)){const i=o?.computedPosition.x||0,s=o?.computedPosition.y||0;r=[[r[0][0]+i,r[0][1]+s],[r[1][0]+i,r[1][1]+s]]}else if(r!=="parent"&&r?.range&&Array.isArray(r.range)){const[i,s,a,l]=Mw(r.padding),u=o?.computedPosition.x||0,c=o?.computedPosition.y||0;r=[[r.range[0][0]+u+l,r.range[0][1]+c+i],[r.range[1][0]+u-s,r.range[1][1]+c-a]]}return r==="parent"?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:r}function NI({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function xg(e,t,n,o,r){const i=NI(e.dimensions,SI(e,n,o,r)),s=xw(t,i);return{position:{x:s.x-(r?.computedPosition.x||0),y:s.y-(r?.computedPosition.y||0)},computedPosition:s}}function ki(e,t,n=$e.Left,o=!1){const r=(t?.x??0)+e.computedPosition.x,i=(t?.y??0)+e.computedPosition.y,{width:s,height:a}=t??TI(e);if(o)return{x:r+s/2,y:i+a/2};switch(t?.position??n){case $e.Top:return{x:r+s/2,y:i};case $e.Right:return{x:r+s,y:i+a/2};case $e.Bottom:return{x:r+s/2,y:i+a};case $e.Left:return{x:r,y:i+a/2}}}function Om(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function kI({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:i,width:s,height:a,viewport:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+o,t.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=Nw({x:(0-l.x)/l.zoom,y:(0-l.y)/l.zoom,width:s/l.zoom,height:a/l.zoom}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),f=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(d*f)>0}function CI(e,t,n=!1){const o=typeof e.zIndex=="number";let r=o?e.zIndex:0;const i=t(e.source),s=t(e.target);return!i||!s?0:(n&&(r=o?e.zIndex:Math.max(i.computedPosition.z||0,s.computedPosition.z||0)),r)}var mt=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(mt||{});const Pm={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};let vt=class extends Error{constructor(t,...n){var o;super((o=Pm[t])==null?void 0:o.call(Pm,...n)),this.name="VueFlowError",this.code=t,this.args=n}};function $g(e){return"clientX"in e}function II(e){return"sourceEvent"in e}function Mn(e,t){const n=$g(e);let o,r;return n?(o=e.clientX,r=e.clientY):"touches"in e&&e.touches.length>0?(o=e.touches[0].clientX,r=e.touches[0].clientY):"changedTouches"in e&&e.changedTouches.length>0?(o=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY):(o=0,r=0),{x:o-(t?.left??0),y:r-(t?.top??0)}}const vu=()=>{var e;return typeof navigator<"u"&&((e=navigator?.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function TI(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function Ac(e,t=[1,1]){return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}}const AI=()=>!0;function Hd(e){e?.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function MI(e,t,n){const o=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const i of t.values())yu(r,mu(i))>0&&o.push(i);return o}const DI=250;function OI(e,t,n,o){var r,i;let s=[],a=Number.POSITIVE_INFINITY;const l=MI(e,n,t+DI);for(const u of l){const c=[...((r=u.handleBounds)==null?void 0:r.source)??[],...((i=u.handleBounds)==null?void 0:i.target)??[]];for(const d of c){if(o.nodeId===d.nodeId&&o.type===d.type&&o.id===d.id)continue;const{x:f,y:h}=ki(u,d,d.position,!0),m=Math.sqrt((f-e.x)**2+(h-e.y)**2);m>t||(m<a?(s=[{...d,x:f,y:h}],a=m):m===a&&s.push({...d,x:f,y:h}))}}if(!s.length)return null;if(s.length>1){const u=o.type==="source"?"target":"source";return s.find(c=>c.type===u)??s[0]}return s[0]}function Rm(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:i,doc:s,lib:a,flowId:l,isValidConnection:u=AI},c,d,f,h){const m=i==="target",v=t?s.querySelector(`.${a}-flow__handle[data-id="${l}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:b,y:x}=Mn(e),N=s.elementFromPoint(b,x),S=N?.classList.contains(`${a}-flow__handle`)?N:v,A={handleDomNode:S,isValid:!1,connection:null,toHandle:null};if(S){const G=Dw(void 0,S),W=S.getAttribute("data-nodeid"),Z=S.getAttribute("data-handleid"),z=S.classList.contains("connectable"),j=S.classList.contains("connectableend");if(!W||!G)return A;const H={source:m?W:o,sourceHandle:m?Z:r,target:m?o:W,targetHandle:m?r:Z};A.connection=H;const I=z&&j&&(n===Zo.Strict?m&&G==="source"||!m&&G==="target":W!==o||Z!==r);A.isValid=I&&u(H,{nodes:d,edges:c,sourceNode:f(H.source),targetNode:f(H.target)}),A.toHandle=Ow(W,G,Z,h,n,!0)}return A}function Dw(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function PI(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function RI(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}function Ow(e,t,n,o,r,i=!1){var s,a,l;const u=o.get(e);if(!u)return null;const c=r===Zo.Strict?(s=u.handleBounds)==null?void 0:s[t]:[...((a=u.handleBounds)==null?void 0:a.source)??[],...((l=u.handleBounds)==null?void 0:l.target)??[]],d=(n?c?.find(f=>f.id===n):c?.[0])??null;return d&&i?{...d,...ki(u,d,d.position,!0)}:d}const jf={[$e.Left]:$e.Right,[$e.Right]:$e.Left,[$e.Top]:$e.Bottom,[$e.Bottom]:$e.Top},zI=["production","prod"];function Sa(e,...t){Pw()&&console.warn(`[Vue Flow]: ${e}`,...t)}function Pw(){return!zI.includes("production")}function zm(e,t,n,o,r){const i=t.querySelectorAll(`.vue-flow__handle.${e}`);return i?.length?Array.from(i).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:r,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/o,y:(a.top-n.top)/o,...Tc(s)}}):null}function qf(e,t,n,o,r,i=!1,s){r.value=!1,e.selected?(i||e.selected&&t)&&(o([e]),bt(()=>{s.blur()})):n([e])}function pt(e){return typeof ie(e)<"u"}function VI(e,t,n,o){if(!e||!e.source||!e.target)return n(new vt(mt.EDGE_INVALID,e?.id??"[ID UNKNOWN]")),!1;let r;return Yo(e)?r=e:r={...e,id:Sw(e)},r=$w(r,void 0,o),yI(r,t)?!1:r}function HI(e,t,n,o,r){if(!t.source||!t.target)return r(new vt(mt.EDGE_INVALID,e.id)),!1;if(!n)return r(new vt(mt.EDGE_NOT_FOUND,e.id)),!1;const{id:i,...s}=e;return{...s,id:o?Sw(t):i,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle}}function Vm(e,t,n){const o={},r=[];for(let i=0;i<e.length;++i){const s=e[i];if(!gr(s)){n(new vt(mt.NODE_INVALID,s?.id)||`[ID UNKNOWN|INDEX ${i}]`);continue}const a=gI(s,t(s.id),s.parentNode);s.parentNode&&(o[s.parentNode]=!0),r[i]=a}for(const i of r){const s=t(i.parentNode)||r.find(a=>a.id===i.parentNode);i.parentNode&&!s&&n(new vt(mt.NODE_MISSING_PARENT,i.id,i.parentNode)),(i.parentNode||o[i.id])&&(o[i.id]&&(i.isParent=!0),s&&(s.isParent=!0))}return r}function Hm(e,t,n,o,r,i){let s=r;const a=o.get(s)||new Map;o.set(s,a.set(n,t)),s=`${r}-${e}`;const l=o.get(s)||new Map;if(o.set(s,l.set(n,t)),i){s=`${r}-${e}-${i}`;const u=o.get(s)||new Map;o.set(s,u.set(n,t))}}function Bd(e,t,n){e.clear();for(const o of n){const{source:r,target:i,sourceHandle:s=null,targetHandle:a=null}=o,l={edgeId:o.id,source:r,target:i,sourceHandle:s,targetHandle:a},u=`${r}-${s}--${i}-${a}`,c=`${i}-${a}--${r}-${s}`;Hm("source",l,c,e,r,s),Hm("target",l,u,e,i,a)}}function Bm(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Fd(e,t,n,o,r,i,s,a){const l=[];for(const u of e){const c=Yo(u)?u:VI(u,a,r,i);if(!c)continue;const d=n(c.source),f=n(c.target);if(!d||!f){r(new vt(mt.EDGE_SOURCE_TARGET_MISSING,c.id,c.source,c.target));continue}if(!d){r(new vt(mt.EDGE_SOURCE_MISSING,c.id,c.source));continue}if(!f){r(new vt(mt.EDGE_TARGET_MISSING,c.id,c.target));continue}if(t&&!t(c,{edges:a,nodes:s,sourceNode:d,targetNode:f})){r(new vt(mt.EDGE_INVALID,c.id));continue}const h=o(c.id);l.push({...$w(c,h,i),sourceNode:d,targetNode:f})}return l}const Fm=Symbol("vueFlow"),Rw=Symbol("nodeId"),zw=Symbol("nodeRef"),BI=Symbol("edgeId"),FI=Symbol("edgeRef"),Mc=Symbol("slots");function Vw(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:r,nodeLookup:i,nodeExtent:s,nodeDragThreshold:a,viewport:l,autoPanOnNodeDrag:u,autoPanSpeed:c,nodesDraggable:d,panBy:f,findNode:h,multiSelectionActive:m,nodesSelectionActive:v,selectNodesOnDrag:b,removeSelectedElements:x,addSelectedNodes:N,updateNodePositions:S,emits:A}=ct(),{onStart:G,onDrag:W,onStop:Z,onClick:z,el:j,disabled:H,id:D,selectable:I,dragHandle:R}=e,w=bi(!1);let O=[],C,F=null,Y={x:void 0,y:void 0},Q={x:0,y:0},q=null,ne=!1,ae=!1,fe=0,se=!1;const pe=GI(),le=({x:P,y:B})=>{Y={x:P,y:B};let g=!1;if(O=O.map(p=>{const $={x:P-p.distance.x,y:B-p.distance.y},{computedPosition:_}=xg(p,n.value?Ac($,o.value):$,A.error,s.value,p.parentNode?h(p.parentNode):void 0);return g=g||p.position.x!==_.x||p.position.y!==_.y,p.position=_,p}),ae=ae||g,!!g&&(S(O,!0,!0),w.value=!0,q)){const[p,$]=Vd({id:D,dragItems:O,findNode:h});W({event:q,node:p,nodes:$})}},ee=()=>{if(!F)return;const[P,B]=Aw(Q,F,c.value);if(P!==0||B!==0){const g={x:(Y.x??0)-P/l.value.zoom,y:(Y.y??0)-B/l.value.zoom};f({x:P,y:B})&&le(g)}fe=requestAnimationFrame(ee)},re=(P,B)=>{ne=!0;const g=h(D);!b.value&&!m.value&&g&&(g.selected||x()),g&&ge(I)&&b.value&&qf(g,m.value,N,x,v,!1,B);const p=pe(P.sourceEvent);if(Y=p,O=$I(i.value,d.value,p,D),O.length){const[$,_]=Vd({id:D,dragItems:O,findNode:h});G({event:P.sourceEvent,node:$,nodes:_})}},oe=(P,B)=>{var g;P.sourceEvent.type==="touchmove"&&P.sourceEvent.touches.length>1||(ae=!1,a.value===0&&re(P,B),Y=pe(P.sourceEvent),F=((g=t.value)==null?void 0:g.getBoundingClientRect())||null,Q=Mn(P.sourceEvent,F))},ce=(P,B)=>{const g=pe(P.sourceEvent);if(!se&&ne&&u.value&&(se=!0,ee()),!ne){const p=g.xSnapped-(Y.x??0),$=g.ySnapped-(Y.y??0);Math.sqrt(p*p+$*$)>a.value&&re(P,B)}(Y.x!==g.xSnapped||Y.y!==g.ySnapped)&&O.length&&ne&&(q=P.sourceEvent,Q=Mn(P.sourceEvent,F),le(g))},me=P=>{let B=!1;if(!ne&&!w.value&&!m.value){const g=P.sourceEvent,p=pe(g),$=p.xSnapped-(Y.x??0),_=p.ySnapped-(Y.y??0),y=Math.sqrt($*$+_*_);y!==0&&y<=a.value&&(z?.(g),B=!0)}if(O.length&&!B){ae&&(S(O,!1,!1),ae=!1);const[g,p]=Vd({id:D,dragItems:O,findNode:h});Z({event:P.sourceEvent,node:g,nodes:p})}O=[],w.value=!1,se=!1,ne=!1,Y={x:void 0,y:void 0},cancelAnimationFrame(fe)};return Se([()=>ge(H),j],([P,B],g,p)=>{if(B){const $=Jt(B);P||(C=hC().on("start",_=>oe(_,B)).on("drag",_=>ce(_,B)).on("end",_=>me(_)).filter(_=>{const y=_.target,k=ge(R);return!_.button&&(!r.value||!Dm(y,`.${r.value}`,B)&&(!k||Dm(y,k,B)))}),$.call(C)),p(()=>{$.on(".drag",null),C&&(C.on("start",null),C.on("drag",null),C.on("end",null))})}}),w}function LI(){return{doubleClick:be(),click:be(),mouseEnter:be(),mouseMove:be(),mouseLeave:be(),contextMenu:be(),updateStart:be(),update:be(),updateEnd:be()}}function UI(e,t){const n=LI();return n.doubleClick.on(o=>{var r,i;t.edgeDoubleClick(o),(i=(r=e.events)==null?void 0:r.doubleClick)==null||i.call(r,o)}),n.click.on(o=>{var r,i;t.edgeClick(o),(i=(r=e.events)==null?void 0:r.click)==null||i.call(r,o)}),n.mouseEnter.on(o=>{var r,i;t.edgeMouseEnter(o),(i=(r=e.events)==null?void 0:r.mouseEnter)==null||i.call(r,o)}),n.mouseMove.on(o=>{var r,i;t.edgeMouseMove(o),(i=(r=e.events)==null?void 0:r.mouseMove)==null||i.call(r,o)}),n.mouseLeave.on(o=>{var r,i;t.edgeMouseLeave(o),(i=(r=e.events)==null?void 0:r.mouseLeave)==null||i.call(r,o)}),n.contextMenu.on(o=>{var r,i;t.edgeContextMenu(o),(i=(r=e.events)==null?void 0:r.contextMenu)==null||i.call(r,o)}),n.updateStart.on(o=>{var r,i;t.edgeUpdateStart(o),(i=(r=e.events)==null?void 0:r.updateStart)==null||i.call(r,o)}),n.update.on(o=>{var r,i;t.edgeUpdate(o),(i=(r=e.events)==null?void 0:r.update)==null||i.call(r,o)}),n.updateEnd.on(o=>{var r,i;t.edgeUpdateEnd(o),(i=(r=e.events)==null?void 0:r.updateEnd)==null||i.call(r,o)}),Object.entries(n).reduce((o,[r,i])=>(o.emit[r]=i.trigger,o.on[r]=i.on,o),{emit:{},on:{}})}function GI(){const{viewport:e,snapGrid:t,snapToGrid:n,vueFlowRef:o}=ct();return r=>{var i;const s=((i=o.value)==null?void 0:i.getBoundingClientRect())??{left:0,top:0},a=II(r)?r.sourceEvent:r,{x:l,y:u}=Mn(a,s),c=qs({x:l,y:u},e.value),{x:d,y:f}=n.value?Ac(c,t.value):c;return{xSnapped:d,ySnapped:f,...c}}}function Wa(){return!0}function Hw({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:r,onEdgeUpdate:i,onEdgeUpdateEnd:s}){const{id:a,vueFlowRef:l,connectionMode:u,connectionRadius:c,connectOnClick:d,connectionClickStartHandle:f,nodesConnectable:h,autoPanOnConnect:m,autoPanSpeed:v,findNode:b,panBy:x,startConnection:N,updateConnection:S,endConnection:A,emits:G,viewport:W,edges:Z,nodes:z,isValidConnection:j,nodeLookup:H}=ct();let D=null,I=!1,R=null;function w(C){var F;const Y=ge(n)==="target",Q=$g(C),q=Em(C.target),ne=C.currentTarget;if(ne&&(Q&&C.button===0||!Q)){let ae=function(V){g=Mn(V,me),le=OI(qs(g,W.value,!1,[1,1]),c.value,H.value,_),p||($(),p=!0);const U=Rm(V,{handle:le,connectionMode:u.value,fromNodeId:ge(t),fromHandleId:ge(e),fromType:Y?"target":"source",isValidConnection:pe,doc:q,lib:"vue",flowId:a,nodeLookup:H.value},Z.value,z.value,b,H.value);R=U.handleDomNode,D=U.connection,I=RI(!!le,U.isValid);const K={...M,isValid:I,to:U.toHandle&&I?js({x:U.toHandle.x,y:U.toHandle.y},W.value):g,toHandle:U.toHandle,toPosition:I&&U.toHandle?U.toHandle.position:jf[_.position],toNode:U.toHandle?H.value.get(U.toHandle.nodeId):null};if(I&&le&&M?.toHandle&&K.toHandle&&M.toHandle.type===K.toHandle.type&&M.toHandle.nodeId===K.toHandle.nodeId&&M.toHandle.id===K.toHandle.id&&M.to.x===K.to.x&&M.to.y===K.to.y)return;const te=le??U.toHandle;if(S(te&&I?js({x:te.x,y:te.y},W.value):g,U.toHandle,PI(!!te,I)),M=K,!le&&!I&&!R)return Hd(B);D&&D.source!==D.target&&R&&(Hd(B),B=R,R.classList.add("connecting","vue-flow__handle-connecting"),R.classList.toggle("valid",!!I),R.classList.toggle("vue-flow__handle-valid",!!I))},fe=function(V){"touches"in V&&V.touches.length>0||((le||R)&&D&&I&&(i?i(V,D):G.connect(D)),G.connectEnd(V),r&&s?.(V),Hd(B),cancelAnimationFrame(ee),A(V),p=!1,I=!1,D=null,R=null,q.removeEventListener("mousemove",ae),q.removeEventListener("mouseup",fe),q.removeEventListener("touchmove",ae),q.removeEventListener("touchend",fe))};const se=b(ge(t));let pe=ge(o)||j.value||Wa;!pe&&se&&(pe=(Y?se.isValidSourcePos:se.isValidTargetPos)||Wa);let le,ee=0;const{x:re,y:oe}=Mn(C),ce=Dw(ge(r),ne),me=(F=l.value)==null?void 0:F.getBoundingClientRect();if(!me||!ce)return;const P=Ow(ge(t),ce,ge(e),H.value,u.value);if(!P)return;let B,g=Mn(C,me),p=!1;const $=()=>{if(!m.value)return;const[V,U]=Aw(g,me,v.value);x({x:V,y:U}),ee=requestAnimationFrame($)},_={...P,nodeId:ge(t),type:ce,position:P.position},y=H.value.get(ge(t)),E={inProgress:!0,isValid:null,from:ki(y,_,$e.Left,!0),fromHandle:_,fromPosition:_.position,fromNode:y,to:g,toHandle:null,toPosition:jf[_.position],toNode:null};N({nodeId:ge(t),id:ge(e),type:ce,position:ne?.getAttribute("data-handlepos")||$e.Top,...g},{x:re-me.left,y:oe-me.top}),G.connectStart({event:C,nodeId:ge(t),handleId:ge(e),handleType:ce});let M=E;q.addEventListener("mousemove",ae),q.addEventListener("mouseup",fe),q.addEventListener("touchmove",ae),q.addEventListener("touchend",fe)}}function O(C){var F,Y;if(!d.value)return;const Q=ge(n)==="target";if(!f.value){G.clickConnectStart({event:C,nodeId:ge(t),handleId:ge(e)}),N({nodeId:ge(t),type:ge(n),id:ge(e),position:$e.Top,...Mn(C)},void 0,!0);return}let q=ge(o)||j.value||Wa;const ne=b(ge(t));if(!q&&ne&&(q=(Q?ne.isValidSourcePos:ne.isValidTargetPos)||Wa),ne&&(typeof ne.connectable>"u"?h.value:ne.connectable)===!1)return;const ae=Em(C.target),fe=Rm(C,{handle:{nodeId:ge(t),id:ge(e),type:ge(n),position:$e.Top,...Mn(C)},connectionMode:u.value,fromNodeId:f.value.nodeId,fromHandleId:f.value.id??null,fromType:f.value.type,isValidConnection:q,doc:ae,lib:"vue",flowId:a,nodeLookup:H.value},Z.value,z.value,b,H.value),se=((F=fe.connection)==null?void 0:F.source)===((Y=fe.connection)==null?void 0:Y.target);fe.isValid&&fe.connection&&!se&&G.connect(fe.connection),G.clickConnectEnd(C),A(C,!0)}return{handlePointerDown:w,handleClick:O}}function ZI(){return ot(Rw,"")}function Bw(e){const t=e??ZI()??"",n=ot(zw,de(null)),{findNode:o,edges:r,emits:i}=ct(),s=o(t);return s||i.error(new vt(mt.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:s,parentNode:J(()=>o(s.parentNode)),connectedEdges:J(()=>Iw([s],r.value))}}function YI(){return{doubleClick:be(),click:be(),mouseEnter:be(),mouseMove:be(),mouseLeave:be(),contextMenu:be(),dragStart:be(),drag:be(),dragStop:be()}}function XI(e,t){const n=YI();return n.doubleClick.on(o=>{var r,i;t.nodeDoubleClick(o),(i=(r=e.events)==null?void 0:r.doubleClick)==null||i.call(r,o)}),n.click.on(o=>{var r,i;t.nodeClick(o),(i=(r=e.events)==null?void 0:r.click)==null||i.call(r,o)}),n.mouseEnter.on(o=>{var r,i;t.nodeMouseEnter(o),(i=(r=e.events)==null?void 0:r.mouseEnter)==null||i.call(r,o)}),n.mouseMove.on(o=>{var r,i;t.nodeMouseMove(o),(i=(r=e.events)==null?void 0:r.mouseMove)==null||i.call(r,o)}),n.mouseLeave.on(o=>{var r,i;t.nodeMouseLeave(o),(i=(r=e.events)==null?void 0:r.mouseLeave)==null||i.call(r,o)}),n.contextMenu.on(o=>{var r,i;t.nodeContextMenu(o),(i=(r=e.events)==null?void 0:r.contextMenu)==null||i.call(r,o)}),n.dragStart.on(o=>{var r,i;t.nodeDragStart(o),(i=(r=e.events)==null?void 0:r.dragStart)==null||i.call(r,o)}),n.drag.on(o=>{var r,i;t.nodeDrag(o),(i=(r=e.events)==null?void 0:r.drag)==null||i.call(r,o)}),n.dragStop.on(o=>{var r,i;t.nodeDragStop(o),(i=(r=e.events)==null?void 0:r.dragStop)==null||i.call(r,o)}),Object.entries(n).reduce((o,[r,i])=>(o.emit[r]=i.trigger,o.on[r]=i.on,o),{emit:{},on:{}})}function Fw(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:r,snapToGrid:i,nodesDraggable:s,emits:a}=ct();return(l,u=!1)=>{const c=i.value?r.value[0]:5,d=i.value?r.value[1]:5,f=u?4:1,h=l.x*c*f,m=l.y*d*f,v=[];for(const b of e.value)if(b.draggable||s&&typeof b.draggable>"u"){const x={x:b.computedPosition.x+h,y:b.computedPosition.y+m},{computedPosition:N}=xg(b,x,a.error,t.value,b.parentNode?o(b.parentNode):void 0);v.push({id:b.id,position:N,from:b.position,distance:{x:l.x,y:l.y},dimensions:b.dimensions})}n(v,!0,!1)}}const ja=.1,WI=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2;function $o(){return Sa("Viewport not initialized yet."),Promise.resolve(!1)}const jI={zoomIn:$o,zoomOut:$o,zoomTo:$o,fitView:$o,setCenter:$o,fitBounds:$o,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:$o,setTransform:$o,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function qI(e){function t(o,r){return new Promise(i=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate(r?.interpolate==="linear"?Cs:Ml).scaleBy(Ld(e.d3Selection,r?.duration,r?.ease,()=>{i(!0)}),o):i(!1)})}function n(o,r,i,s){return new Promise(a=>{var l;const{x:u,y:c}=xw({x:-o,y:-r},e.translateExtent),d=Ni.translate(-u,-c).scale(i);e.d3Selection&&e.d3Zoom?(l=e.d3Zoom)==null||l.interpolate(s?.interpolate==="linear"?Cs:Ml).transform(Ld(e.d3Selection,s?.duration,s?.ease,()=>{a(!0)}),d):a(!1)})}return J(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:r=>t(1.2,r),zoomOut:r=>t(1/1.2,r),zoomTo:(r,i)=>new Promise(s=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate(i?.interpolate==="linear"?Cs:Ml).scaleTo(Ld(e.d3Selection,i?.duration,i?.ease,()=>{s(!0)}),r):s(!1)}),setViewport:(r,i)=>n(r.x,r.y,r.zoom,i),setTransform:(r,i)=>n(r.x,r.y,r.zoom,i),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(r={padding:ja,includeHiddenNodes:!1,duration:0})=>{var i,s;const a=[];for(const f of e.nodes)f.dimensions.width&&f.dimensions.height&&(r?.includeHiddenNodes||!f.hidden)&&(!((i=r.nodes)!=null&&i.length)||(s=r.nodes)!=null&&s.length&&r.nodes.includes(f.id))&&a.push(f);if(!a.length)return Promise.resolve(!1);const l=kw(a),{x:u,y:c,zoom:d}=Sm(l,e.dimensions.width,e.dimensions.height,r.minZoom??e.minZoom,r.maxZoom??e.maxZoom,r.padding??ja);return n(u,c,d,r)},setCenter:(r,i,s)=>{const a=typeof s?.zoom<"u"?s.zoom:e.maxZoom,l=e.dimensions.width/2-r*a,u=e.dimensions.height/2-i*a;return n(l,u,a,s)},fitBounds:(r,i={padding:ja})=>{const{x:s,y:a,zoom:l}=Sm(r,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,i.padding??ja);return n(s,a,l,i)},project:r=>qs(r,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:r=>{if(e.vueFlowRef){const{x:i,y:s}=e.vueFlowRef.getBoundingClientRect(),a={x:r.x-i,y:r.y-s};return qs(a,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:r=>{if(e.vueFlowRef){const{x:i,y:s}=e.vueFlowRef.getBoundingClientRect(),a={x:r.x+i,y:r.y+s};return js(a,e.viewport)}return{x:0,y:0}}}:jI)}function Ld(e,t=0,n=WI,o=()=>{}){const r=typeof t=="number"&&t>0;return r||o(),r?e.transition().duration(t).ease(n).on("end",o):e}function KI(e,t,n){const o=Dr(!0);return o.run(()=>{const r=()=>{o.run(()=>{let v,b,x=!!(n.nodes.value.length||n.edges.value.length);v=Vr([e.modelValue,()=>{var N,S;return(S=(N=e.modelValue)==null?void 0:N.value)==null?void 0:S.length}],([N])=>{N&&Array.isArray(N)&&(b?.pause(),n.setElements(N),!b&&!x&&N.length?x=!0:b?.resume())}),b=Vr([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],([N,S])=>{var A;(A=e.modelValue)!=null&&A.value&&Array.isArray(e.modelValue.value)&&(v?.pause(),e.modelValue.value=[...N,...S],bt(()=>{v?.resume()}))},{immediate:x}),Fo(()=>{v?.stop(),b?.stop()})})},i=()=>{o.run(()=>{let v,b,x=!!n.nodes.value.length;v=Vr([e.nodes,()=>{var N,S;return(S=(N=e.nodes)==null?void 0:N.value)==null?void 0:S.length}],([N])=>{N&&Array.isArray(N)&&(b?.pause(),n.setNodes(N),!b&&!x&&N.length?x=!0:b?.resume())}),b=Vr([n.nodes,()=>n.nodes.value.length],([N])=>{var S;(S=e.nodes)!=null&&S.value&&Array.isArray(e.nodes.value)&&(v?.pause(),e.nodes.value=[...N],bt(()=>{v?.resume()}))},{immediate:x}),Fo(()=>{v?.stop(),b?.stop()})})},s=()=>{o.run(()=>{let v,b,x=!!n.edges.value.length;v=Vr([e.edges,()=>{var N,S;return(S=(N=e.edges)==null?void 0:N.value)==null?void 0:S.length}],([N])=>{N&&Array.isArray(N)&&(b?.pause(),n.setEdges(N),!b&&!x&&N.length?x=!0:b?.resume())}),b=Vr([n.edges,()=>n.edges.value.length],([N])=>{var S;(S=e.edges)!=null&&S.value&&Array.isArray(e.edges.value)&&(v?.pause(),e.edges.value=[...N],bt(()=>{v?.resume()}))},{immediate:x}),Fo(()=>{v?.stop(),b?.stop()})})},a=()=>{o.run(()=>{Se(()=>t.maxZoom,()=>{t.maxZoom&&pt(t.maxZoom)&&n.setMaxZoom(t.maxZoom)},{immediate:!0})})},l=()=>{o.run(()=>{Se(()=>t.minZoom,()=>{t.minZoom&&pt(t.minZoom)&&n.setMinZoom(t.minZoom)},{immediate:!0})})},u=()=>{o.run(()=>{Se(()=>t.translateExtent,()=>{t.translateExtent&&pt(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)},{immediate:!0})})},c=()=>{o.run(()=>{Se(()=>t.nodeExtent,()=>{t.nodeExtent&&pt(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)},{immediate:!0})})},d=()=>{o.run(()=>{Se(()=>t.applyDefault,()=>{pt(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)},{immediate:!0})})},f=()=>{o.run(()=>{const v=async b=>{let x=b;typeof t.autoConnect=="function"&&(x=await t.autoConnect(b)),x!==!1&&n.addEdges([x])};Se(()=>t.autoConnect,()=>{pt(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)},{immediate:!0}),Se(n.autoConnect,(b,x,N)=>{b?n.onConnect(v):n.hooks.value.connect.off(v),N(()=>{n.hooks.value.connect.off(v)})},{immediate:!0})})},h=()=>{const v=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const b of Object.keys(t)){const x=b;if(!v.includes(x)){const N=Oe(()=>t[x]),S=n[x];je(S)&&o.run(()=>{Se(N,A=>{pt(A)&&(S.value=A)},{immediate:!0})})}}};(()=>{r(),i(),s(),l(),a(),u(),c(),d(),f(),h()})()}),()=>o.stop()}function JI(){return{edgesChange:be(),nodesChange:be(),nodeDoubleClick:be(),nodeClick:be(),nodeMouseEnter:be(),nodeMouseMove:be(),nodeMouseLeave:be(),nodeContextMenu:be(),nodeDragStart:be(),nodeDrag:be(),nodeDragStop:be(),nodesInitialized:be(),miniMapNodeClick:be(),miniMapNodeDoubleClick:be(),miniMapNodeMouseEnter:be(),miniMapNodeMouseMove:be(),miniMapNodeMouseLeave:be(),connect:be(),connectStart:be(),connectEnd:be(),clickConnectStart:be(),clickConnectEnd:be(),paneReady:be(),init:be(),move:be(),moveStart:be(),moveEnd:be(),selectionDragStart:be(),selectionDrag:be(),selectionDragStop:be(),selectionContextMenu:be(),selectionStart:be(),selectionEnd:be(),viewportChangeStart:be(),viewportChange:be(),viewportChangeEnd:be(),paneScroll:be(),paneClick:be(),paneContextMenu:be(),paneMouseEnter:be(),paneMouseMove:be(),paneMouseLeave:be(),edgeContextMenu:be(),edgeMouseEnter:be(),edgeMouseMove:be(),edgeMouseLeave:be(),edgeDoubleClick:be(),edgeClick:be(),edgeUpdateStart:be(),edgeUpdate:be(),edgeUpdateEnd:be(),updateNodeInternals:be(),error:be(e=>Sa(e.message))}}function QI(e,t){const n=jt();rb(()=>{for(const[r,i]of Object.entries(t.value)){const s=a=>{e(r,a)};i.setEmitter(s),Gs(i.removeEmitter),i.setHasEmitListeners(()=>o(r)),Gs(i.removeHasEmitListeners)}});function o(r){var i;const s=eT(r);return!!((i=n?.vnode.props)==null?void 0:i[s])}}function eT(e){const[t,...n]=e.split(":");return`on${t.replace(/(?:^|-)(\w)/g,(r,i)=>i.toUpperCase())}${n.length?`:${n.join(":")}`:""}`}function Lw(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:wg.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:Is.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:or.Bezier,style:{}},connectionMode:Zo.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:vu()?"Meta":"Control",zoomActivationKeyCode:vu()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:JI(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const tT=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function nT(e,t,n){const o=qI(e),r=g=>{const p=g??[];e.hooks.updateNodeInternals.trigger(p)},i=g=>mI(g,e.nodes,e.edges),s=g=>pI(g,e.nodes,e.edges),a=g=>Iw(g,e.edges),l=({id:g,type:p,nodeId:$})=>{var _;const y=g?`-${p}-${g}`:`-${p}`;return Array.from(((_=e.connectionLookup.get(`${$}${y}`))==null?void 0:_.values())??[])},u=g=>{if(g)return t.value.get(g)},c=g=>{if(g)return n.value.get(g)},d=(g,p,$)=>{var _,y;const k=[];for(const E of g){const M={id:E.id,type:"position",dragging:$,from:E.from};if(p&&(M.position=E.position,E.parentNode)){const V=u(E.parentNode);M.position={x:M.position.x-(((_=V?.computedPosition)==null?void 0:_.x)??0),y:M.position.y-(((y=V?.computedPosition)==null?void 0:y.y)??0)}}k.push(M)}k?.length&&e.hooks.nodesChange.trigger(k)},f=g=>{if(!e.vueFlowRef)return;const p=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!p)return;const $=window.getComputedStyle(p),{m22:_}=new window.DOMMatrixReadOnly($.transform),y=[];for(const k of g){const E=k,M=u(E.id);if(M){const V=Tc(E.nodeElement);if(!!(V.width&&V.height&&(M.dimensions.width!==V.width||M.dimensions.height!==V.height||E.forceUpdate))){const K=E.nodeElement.getBoundingClientRect();M.dimensions=V,M.handleBounds.source=zm("source",E.nodeElement,K,_,M.id),M.handleBounds.target=zm("target",E.nodeElement,K,_,M.id),y.push({id:M.id,type:"dimensions",dimensions:V})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&o.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),y.length&&e.hooks.nodesChange.trigger(y)},h=(g,p)=>{const $=new Set,_=new Set;for(const E of g)gr(E)?$.add(E.id):Yo(E)&&_.add(E.id);const y=Ro(t.value,$,!0),k=Ro(n.value,_);if(e.multiSelectionActive){for(const E of $)y.push(Io(E,p));for(const E of _)k.push(Io(E,p))}y.length&&e.hooks.nodesChange.trigger(y),k.length&&e.hooks.edgesChange.trigger(k)},m=g=>{if(e.multiSelectionActive){const p=g.map($=>Io($.id,!0));e.hooks.nodesChange.trigger(p);return}e.hooks.nodesChange.trigger(Ro(t.value,new Set(g.map(p=>p.id)),!0)),e.hooks.edgesChange.trigger(Ro(n.value))},v=g=>{if(e.multiSelectionActive){const p=g.map($=>Io($.id,!0));e.hooks.edgesChange.trigger(p);return}e.hooks.edgesChange.trigger(Ro(n.value,new Set(g.map(p=>p.id)))),e.hooks.nodesChange.trigger(Ro(t.value,new Set,!0))},b=g=>{h(g,!0)},x=g=>{const $=(g||e.nodes).map(_=>(_.selected=!1,Io(_.id,!1)));e.hooks.nodesChange.trigger($)},N=g=>{const $=(g||e.edges).map(_=>(_.selected=!1,Io(_.id,!1)));e.hooks.edgesChange.trigger($)},S=g=>{if(!g||!g.length)return h([],!1);const p=g.reduce(($,_)=>{const y=Io(_.id,!1);return gr(_)?$.nodes.push(y):$.edges.push(y),$},{nodes:[],edges:[]});p.nodes.length&&e.hooks.nodesChange.trigger(p.nodes),p.edges.length&&e.hooks.edgesChange.trigger(p.edges)},A=g=>{var p;(p=e.d3Zoom)==null||p.scaleExtent([g,e.maxZoom]),e.minZoom=g},G=g=>{var p;(p=e.d3Zoom)==null||p.scaleExtent([e.minZoom,g]),e.maxZoom=g},W=g=>{var p;(p=e.d3Zoom)==null||p.translateExtent(g),e.translateExtent=g},Z=g=>{e.nodeExtent=g,r()},z=g=>{var p;(p=e.d3Zoom)==null||p.clickDistance(g)},j=g=>{e.nodesDraggable=g,e.nodesConnectable=g,e.elementsSelectable=g},H=g=>{const p=g instanceof Function?g(e.nodes):g;!e.initialized&&!p.length||(e.nodes=Vm(p,u,e.hooks.error.trigger))},D=g=>{const p=g instanceof Function?g(e.edges):g;if(!e.initialized&&!p.length)return;const $=Fd(p,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);Bd(e.connectionLookup,n.value,$),e.edges=$},I=g=>{const p=g instanceof Function?g([...e.nodes,...e.edges]):g;!e.initialized&&!p.length||(H(p.filter(gr)),D(p.filter(Yo)))},R=g=>{let p=g instanceof Function?g(e.nodes):g;p=Array.isArray(p)?p:[p];const $=Vm(p,u,e.hooks.error.trigger),_=[];for(const y of $)_.push(Im(y));_.length&&e.hooks.nodesChange.trigger(_)},w=g=>{let p=g instanceof Function?g(e.edges):g;p=Array.isArray(p)?p:[p];const $=Fd(p,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),_=[];for(const y of $)_.push(Im(y));_.length&&e.hooks.edgesChange.trigger(_)},O=(g,p=!0,$=!1)=>{const _=g instanceof Function?g(e.nodes):g,y=Array.isArray(_)?_:[_],k=[],E=[];function M(U){const K=a(U);for(const te of K)(!pt(te.deletable)||te.deletable)&&E.push(Am(te.id,te.source,te.target,te.sourceHandle,te.targetHandle))}function V(U){const K=[];for(const te of e.nodes)te.parentNode===U&&K.push(te);if(K.length){for(const te of K)k.push(Tm(te.id));p&&M(K);for(const te of K)V(te.id)}}for(const U of y){const K=typeof U=="string"?u(U):U;K&&(pt(K.deletable)&&!K.deletable||(k.push(Tm(K.id)),p&&M([K]),$&&V(K.id)))}E.length&&e.hooks.edgesChange.trigger(E),k.length&&e.hooks.nodesChange.trigger(k)},C=g=>{const p=g instanceof Function?g(e.edges):g,$=Array.isArray(p)?p:[p],_=[];for(const y of $){const k=typeof y=="string"?c(y):y;k&&(pt(k.deletable)&&!k.deletable||_.push(Am(typeof y=="string"?y:y.id,k.source,k.target,k.sourceHandle,k.targetHandle)))}e.hooks.edgesChange.trigger(_)},F=(g,p,$=!0)=>{const _=c(g.id);if(!_)return!1;const y=e.edges.indexOf(_),k=HI(g,p,_,$,e.hooks.error.trigger);if(k){const[E]=Fd([k],e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);return e.edges=e.edges.map((M,V)=>V===y?E:M),Bd(e.connectionLookup,n.value,[E]),E}return!1},Y=(g,p,$={replace:!1})=>{const _=c(g);if(!_)return;const y=typeof p=="function"?p(_):p;_.data=$.replace?y:{..._.data,...y}},Q=g=>Cm(g,e.nodes),q=g=>{const p=Cm(g,e.edges);return Bd(e.connectionLookup,n.value,p),p},ne=(g,p,$={replace:!1})=>{const _=u(g);if(!_)return;const y=typeof p=="function"?p(_):p;$.replace?e.nodes.splice(e.nodes.indexOf(_),1,y):Object.assign(_,y)},ae=(g,p,$={replace:!1})=>{const _=u(g);if(!_)return;const y=typeof p=="function"?p(_):p;_.data=$.replace?y:{..._.data,...y}},fe=(g,p,$=!1)=>{$?e.connectionClickStartHandle=g:e.connectionStartHandle=g,e.connectionEndHandle=null,e.connectionStatus=null,p&&(e.connectionPosition=p)},se=(g,p=null,$=null)=>{e.connectionStartHandle&&(e.connectionPosition=g,e.connectionEndHandle=p,e.connectionStatus=$)},pe=(g,p)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,p?e.connectionClickStartHandle=null:e.connectionStartHandle=null},le=g=>{const p=hI(g),$=p?null:ss(g)?g:u(g.id);return!p&&!$?[null,null,p]:[p?g:mu($),$,p]},ee=(g,p=!0,$=e.nodes)=>{const[_,y,k]=le(g);if(!_)return[];const E=[];for(const M of $||e.nodes){if(!k&&(M.id===y.id||!M.computedPosition))continue;const V=mu(M),U=yu(V,_);(p&&U>0||U>=V.width*V.height||U>=Number(_.width)*Number(_.height))&&E.push(M)}return E},re=(g,p,$=!0)=>{const[_]=le(g);if(!_)return!1;const y=yu(_,p);return $&&y>0||y>=Number(_.width)*Number(_.height)},oe=g=>{const{viewport:p,dimensions:$,d3Zoom:_,d3Selection:y,translateExtent:k}=e;if(!_||!y||!g.x&&!g.y)return!1;const E=Ni.translate(p.x+g.x,p.y+g.y).scale(p.zoom),M=[[0,0],[$.width,$.height]],V=_.constrain()(E,M,k),U=e.viewport.x!==V.x||e.viewport.y!==V.y||e.viewport.zoom!==V.k;return _.transform(y,V),U},ce=g=>{const p=g instanceof Function?g(e):g,$=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];pt(p.defaultEdgeOptions)&&(e.defaultEdgeOptions=p.defaultEdgeOptions);const _=p.modelValue||p.nodes||p.edges?[]:void 0;_&&(p.modelValue&&_.push(...p.modelValue),p.nodes&&_.push(...p.nodes),p.edges&&_.push(...p.edges),I(_));const y=()=>{pt(p.maxZoom)&&G(p.maxZoom),pt(p.minZoom)&&A(p.minZoom),pt(p.translateExtent)&&W(p.translateExtent)};for(const k of Object.keys(p)){const E=k,M=p[E];![...tT,...$].includes(E)&&pt(M)&&(e[E]=M)}Vf(()=>e.d3Zoom).not.toBeNull().then(y),e.initialized||(e.initialized=!0)};return{updateNodePositions:d,updateNodeDimensions:f,setElements:I,setNodes:H,setEdges:D,addNodes:R,addEdges:w,removeNodes:O,removeEdges:C,findNode:u,findEdge:c,updateEdge:F,updateEdgeData:Y,updateNode:ne,updateNodeData:ae,applyEdgeChanges:q,applyNodeChanges:Q,addSelectedElements:b,addSelectedNodes:m,addSelectedEdges:v,setMinZoom:A,setMaxZoom:G,setTranslateExtent:W,setNodeExtent:Z,setPaneClickDistance:z,removeSelectedElements:S,removeSelectedNodes:x,removeSelectedEdges:N,startConnection:fe,updateConnection:se,endConnection:pe,setInteractive:j,setState:ce,getIntersectingNodes:ee,getIncomers:i,getOutgoers:s,getConnectedEdges:a,getHandleConnections:l,isNodeIntersecting:re,panBy:oe,fitView:g=>o.value.fitView(g),zoomIn:g=>o.value.zoomIn(g),zoomOut:g=>o.value.zoomOut(g),zoomTo:(g,p)=>o.value.zoomTo(g,p),setViewport:(g,p)=>o.value.setViewport(g,p),setTransform:(g,p)=>o.value.setTransform(g,p),getViewport:()=>o.value.getViewport(),getTransform:()=>o.value.getTransform(),setCenter:(g,p,$)=>o.value.setCenter(g,p,$),fitBounds:(g,p)=>o.value.fitBounds(g,p),project:g=>o.value.project(g),screenToFlowCoordinate:g=>o.value.screenToFlowCoordinate(g),flowToScreenCoordinate:g=>o.value.flowToScreenCoordinate(g),toObject:()=>{const g=[],p=[];for(const $ of e.nodes){const{computedPosition:_,handleBounds:y,selected:k,dimensions:E,isParent:M,resizing:V,dragging:U,events:K,...te}=$;g.push(te)}for(const $ of e.edges){const{selected:_,sourceNode:y,targetNode:k,events:E,...M}=$;p.push(M)}return JSON.parse(JSON.stringify({nodes:g,edges:p,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:g=>new Promise(p=>{const{nodes:$,edges:_,position:y,zoom:k,viewport:E}=g;if($&&H($),_&&D(_),E?.x&&E?.y||y){const M=E?.x||y[0],V=E?.y||y[1],U=E?.zoom||k||e.viewport.zoom;return Vf(()=>o.value.viewportInitialized).toBe(!0).then(()=>{o.value.setViewport({x:M,y:V,zoom:U}).then(()=>{p(!0)})})}else p(!0)}),updateNodeInternals:r,viewportHelper:o,$reset:()=>{const g=Lw();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const p=Ni.translate(g.defaultViewport.x??0,g.defaultViewport.y??0).scale(Sr(g.defaultViewport.zoom??1,g.minZoom,g.maxZoom)),$=e.viewportRef.getBoundingClientRect(),_=[[0,0],[$.width,$.height]],y=e.d3Zoom.constrain()(p,_,g.translateExtent);e.d3Zoom.transform(e.d3Selection,y)}ce(g)},$destroy:()=>{}}}const oT=["data-id","data-handleid","data-nodeid","data-handlepos"],rT={name:"Handle",compatConfig:{MODE:3}},Xo=Ne({...rT,props:{id:{default:null},type:{},position:{default:()=>$e.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=bc(e,["position","connectable","connectableStart","connectableEnd","id"]),o=Oe(()=>n.type??"source"),r=Oe(()=>n.isValidConnection??null),{id:i,connectionStartHandle:s,connectionClickStartHandle:a,connectionEndHandle:l,vueFlowRef:u,nodesConnectable:c,noDragClassName:d,noPanClassName:f}=ct(),{id:h,node:m,nodeEl:v,connectedEdges:b}=Bw(),x=de(),N=Oe(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),S=Oe(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),A=Oe(()=>{var D,I,R,w,O,C;return((D=s.value)==null?void 0:D.nodeId)===h&&((I=s.value)==null?void 0:I.id)===e.id&&((R=s.value)==null?void 0:R.type)===o.value||((w=l.value)==null?void 0:w.nodeId)===h&&((O=l.value)==null?void 0:O.id)===e.id&&((C=l.value)==null?void 0:C.type)===o.value}),G=Oe(()=>{var D,I,R;return((D=a.value)==null?void 0:D.nodeId)===h&&((I=a.value)==null?void 0:I.id)===e.id&&((R=a.value)==null?void 0:R.type)===o.value}),{handlePointerDown:W,handleClick:Z}=Hw({nodeId:h,handleId:e.id,isValidConnection:r,type:o}),z=J(()=>typeof e.connectable=="string"&&e.connectable==="single"?!b.value.some(D=>{const I=D[`${o.value}Handle`];return D[o.value]!==h?!1:I?I===e.id:!0}):typeof e.connectable=="number"?b.value.filter(D=>{const I=D[`${o.value}Handle`];return D[o.value]!==h?!1:I?I===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(m,b.value):pt(e.connectable)?e.connectable:c.value);tt(()=>{var D;if(!m.dimensions.width||!m.dimensions.height)return;const I=(D=m.handleBounds[o.value])==null?void 0:D.find(Q=>Q.id===e.id);if(!u.value||I)return;const R=u.value.querySelector(".vue-flow__transformationpane");if(!v.value||!x.value||!R||!e.id)return;const w=v.value.getBoundingClientRect(),O=x.value.getBoundingClientRect(),C=window.getComputedStyle(R),{m22:F}=new window.DOMMatrixReadOnly(C.transform),Y={id:e.id,position:e.position,x:(O.left-w.left)/F,y:(O.top-w.top)/F,type:o.value,nodeId:h,...Tc(x.value)};m.handleBounds[o.value]=[...m.handleBounds[o.value]??[],Y]});function j(D){const I=$g(D);z.value&&N.value&&(I&&D.button===0||!I)&&W(D)}function H(D){!h||!a.value&&!N.value||z.value&&Z(D)}return t({handleClick:Z,handlePointerDown:W,onClick:H,onPointerDown:j}),(D,I)=>(L(),X("div",{ref_key:"handle",ref:x,"data-id":`${ie(i)}-${ie(h)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":ie(h),"data-handlepos":D.position,class:We(["vue-flow__handle",[`vue-flow__handle-${D.position}`,`vue-flow__handle-${e.id}`,ie(d),ie(f),o.value,{connectable:z.value,connecting:G.value,connectablestart:N.value,connectableend:S.value,connectionindicator:z.value&&(N.value&&!A.value||S.value&&A.value)}]]),onMousedown:j,onTouchstartPassive:j,onClick:H},[Qe(D.$slots,"default",{id:D.id})],42,oT))}}),Dc=function({sourcePosition:e=$e.Bottom,targetPosition:t=$e.Top,label:n,connectable:o=!0,isValidTargetPos:r,isValidSourcePos:i,data:s}){const a=s.label??n;return[_e(Xo,{type:"target",position:t,connectable:o,isValidConnection:r}),typeof a!="string"&&a?_e(a):_e(xe,[a]),_e(Xo,{type:"source",position:e,connectable:o,isValidConnection:i})]};Dc.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];Dc.inheritAttrs=!1;Dc.compatConfig={MODE:3};const iT=Dc,Oc=function({targetPosition:e=$e.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:r}){const i=r.label??t;return[_e(Xo,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof i!="string"&&i?_e(i):_e(xe,[i])]};Oc.props=["targetPosition","label","isValidTargetPos","connectable","data"];Oc.inheritAttrs=!1;Oc.compatConfig={MODE:3};const sT=Oc,Pc=function({sourcePosition:e=$e.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:r}){const i=r.label??t;return[typeof i!="string"&&i?_e(i):_e(xe,[i]),_e(Xo,{type:"source",position:e,connectable:n,isValidConnection:o})]};Pc.props=["sourcePosition","label","isValidSourcePos","connectable","data"];Pc.inheritAttrs=!1;Pc.compatConfig={MODE:3};const aT=Pc,lT=["transform"],uT=["width","height","x","y","rx","ry"],cT=["y"],dT={name:"EdgeText",compatConfig:{MODE:3}},fT=Ne({...dT,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=de({x:0,y:0,width:0,height:0}),n=de(null),o=J(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);tt(r),Se([()=>e.x,()=>e.y,n,()=>e.label],r);function r(){if(!n.value)return;const i=n.value.getBBox();(i.width!==t.value.width||i.height!==t.value.height)&&(t.value=i)}return(i,s)=>(L(),X("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[i.labelShowBg?(L(),X("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*i.labelBgPadding[0]}px`,height:`${t.value.height+2*i.labelBgPadding[1]}px`,x:-i.labelBgPadding[0],y:-i.labelBgPadding[1],style:qe(i.labelBgStyle),rx:i.labelBgBorderRadius,ry:i.labelBgBorderRadius},null,12,uT)):ve("",!0),T("text",dn(i.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:i.labelStyle}),[Qe(i.$slots,"default",{},()=>[typeof i.label!="string"?(L(),Ye(Kt(i.label),{key:0})):(L(),X(xe,{key:1},[Ze(ye(i.label),1)],64))])],16,cT)],8,lT))}}),hT=["id","d","marker-end","marker-start"],gT=["d","stroke-width"],pT={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},Rc=Ne({...pT,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=de(null),o=de(null),r=de(null),i=Li();return t({pathEl:n,interactionEl:o,labelEl:r}),(s,a)=>(L(),X(xe,null,[T("path",dn(ie(i),{id:s.id,ref_key:"pathEl",ref:n,d:s.path,class:"vue-flow__edge-path","marker-end":s.markerEnd,"marker-start":s.markerStart}),null,16,hT),s.interactionWidth?(L(),X("path",{key:0,ref_key:"interactionEl",ref:o,fill:"none",d:s.path,"stroke-width":s.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,gT)):ve("",!0),s.label&&s.labelX&&s.labelY?(L(),Ye(fT,{key:1,ref_key:"labelEl",ref:r,x:s.labelX,y:s.labelY,label:s.label,"label-show-bg":s.labelShowBg,"label-bg-style":s.labelBgStyle,"label-bg-padding":s.labelBgPadding,"label-bg-border-radius":s.labelBgBorderRadius,"label-style":s.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):ve("",!0)],64))}});function Uw({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,s=Math.abs(o-t)/2,a=o<t?o+s:o-s;return[i,a,r,s]}function Gw({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:s,targetControlY:a}){const l=e*.125+r*.375+s*.375+n*.125,u=t*.125+i*.375+a*.375+o*.125,c=Math.abs(l-e),d=Math.abs(u-t);return[l,u,c,d]}function qa(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Lm({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){let s,a;switch(e){case $e.Left:s=t-qa(t-o,i),a=n;break;case $e.Right:s=t+qa(o-t,i),a=n;break;case $e.Top:s=t,a=n-qa(n-r,i);break;case $e.Bottom:s=t,a=n+qa(r-n,i);break}return[s,a]}function Zw(e){const{sourceX:t,sourceY:n,sourcePosition:o=$e.Bottom,targetX:r,targetY:i,targetPosition:s=$e.Top,curvature:a=.25}=e,[l,u]=Lm({pos:o,x1:t,y1:n,x2:r,y2:i,c:a}),[c,d]=Lm({pos:s,x1:r,y1:i,x2:t,y2:n,c:a}),[f,h,m,v]=Gw({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:c,targetControlY:d});return[`M${t},${n} C${l},${u} ${c},${d} ${r},${i}`,f,h,m,v]}function Um({pos:e,x1:t,y1:n,x2:o,y2:r}){let i,s;switch(e){case $e.Left:case $e.Right:i=.5*(t+o),s=n;break;case $e.Top:case $e.Bottom:i=t,s=.5*(n+r);break}return[i,s]}function Yw(e){const{sourceX:t,sourceY:n,sourcePosition:o=$e.Bottom,targetX:r,targetY:i,targetPosition:s=$e.Top}=e,[a,l]=Um({pos:o,x1:t,y1:n,x2:r,y2:i}),[u,c]=Um({pos:s,x1:r,y1:i,x2:t,y2:n}),[d,f,h,m]=Gw({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${t},${n} C${a},${l} ${u},${c} ${r},${i}`,d,f,h,m]}const Gm={[$e.Left]:{x:-1,y:0},[$e.Right]:{x:1,y:0},[$e.Top]:{x:0,y:-1},[$e.Bottom]:{x:0,y:1}};function mT({source:e,sourcePosition:t=$e.Bottom,target:n}){return t===$e.Left||t===$e.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function Zm(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function yT({source:e,sourcePosition:t=$e.Bottom,target:n,targetPosition:o=$e.Top,center:r,offset:i}){const s=Gm[t],a=Gm[o],l={x:e.x+s.x*i,y:e.y+s.y*i},u={x:n.x+a.x*i,y:n.y+a.y*i},c=mT({source:l,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",f=c[d];let h,m,v;const b={x:0,y:0},x={x:0,y:0},[N,S,A,G]=Uw({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[d]*a[d]===-1){m=r.x??N,v=r.y??S;const Z=[{x:m,y:l.y},{x:m,y:u.y}],z=[{x:l.x,y:v},{x:u.x,y:v}];s[d]===f?h=d==="x"?Z:z:h=d==="x"?z:Z}else{const Z=[{x:l.x,y:u.y}],z=[{x:u.x,y:l.y}];if(d==="x"?h=s.x===f?z:Z:h=s.y===f?Z:z,t===o){const R=Math.abs(e[d]-n[d]);if(R<=i){const w=Math.min(i-1,i-R);s[d]===f?b[d]=(l[d]>e[d]?-1:1)*w:x[d]=(u[d]>n[d]?-1:1)*w}}if(t!==o){const R=d==="x"?"y":"x",w=s[d]===a[R],O=l[R]>u[R],C=l[R]<u[R];(s[d]===1&&(!w&&O||w&&C)||s[d]!==1&&(!w&&C||w&&O))&&(h=d==="x"?Z:z)}const j={x:l.x+b.x,y:l.y+b.y},H={x:u.x+x.x,y:u.y+x.y},D=Math.max(Math.abs(j.x-h[0].x),Math.abs(H.x-h[0].x)),I=Math.max(Math.abs(j.y-h[0].y),Math.abs(H.y-h[0].y));D>=I?(m=(j.x+H.x)/2,v=h[0].y):(m=h[0].x,v=(j.y+H.y)/2)}return[[e,{x:l.x+b.x,y:l.y+b.y},...h,{x:u.x+x.x,y:u.y+x.y},n],m,v,A,G]}function vT(e,t,n,o){const r=Math.min(Zm(e,t)/2,Zm(t,n)/2,o),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${i+r*u},${s}Q ${i},${s} ${i},${s+r*c}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${i},${s+r*l}Q ${i},${s} ${i+r*a},${s}`}function Kf(e){const{sourceX:t,sourceY:n,sourcePosition:o=$e.Bottom,targetX:r,targetY:i,targetPosition:s=$e.Top,borderRadius:a=5,centerX:l,centerY:u,offset:c=20}=e,[d,f,h,m,v]=yT({source:{x:t,y:n},sourcePosition:o,target:{x:r,y:i},targetPosition:s,center:{x:l,y:u},offset:c});return[d.reduce((x,N,S)=>{let A;return S>0&&S<d.length-1?A=vT(d[S-1],N,d[S+1],a):A=`${S===0?"M":"L"}${N.x} ${N.y}`,x+=A,x},""),f,h,m,v]}function _T(e){const{sourceX:t,sourceY:n,targetX:o,targetY:r}=e,[i,s,a,l]=Uw({sourceX:t,sourceY:n,targetX:o,targetY:r});return[`M ${t},${n}L ${o},${r}`,i,s,a,l]}const bT=Ne({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=_T(e);return _e(Rc,{path:n,labelX:o,labelY:r,...t,...e})}}}),wT=bT,xT=Ne({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=Kf({...e,sourcePosition:e.sourcePosition??$e.Bottom,targetPosition:e.targetPosition??$e.Top});return _e(Rc,{path:n,labelX:o,labelY:r,...t,...e})}}}),Xw=xT,$T=Ne({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>_e(Xw,{...e,...t,borderRadius:0})}}),ET=$T,ST=Ne({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=Zw({...e,sourcePosition:e.sourcePosition??$e.Bottom,targetPosition:e.targetPosition??$e.Top});return _e(Rc,{path:n,labelX:o,labelY:r,...t,...e})}}}),NT=ST,kT=Ne({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=Yw({...e,sourcePosition:e.sourcePosition??$e.Bottom,targetPosition:e.targetPosition??$e.Top});return _e(Rc,{path:n,labelX:o,labelY:r,...t,...e})}}}),CT=kT,IT={input:aT,default:iT,output:sT},TT={default:NT,straight:wT,step:ET,smoothstep:Xw,simplebezier:CT};function AT(e,t,n){const o=J(()=>v=>t.value.get(v)),r=J(()=>v=>n.value.get(v)),i=J(()=>{const v={...TT,...e.edgeTypes},b=Object.keys(v);for(const x of e.edges)x.type&&!b.includes(x.type)&&(v[x.type]=x.type);return v}),s=J(()=>{const v={...IT,...e.nodeTypes},b=Object.keys(v);for(const x of e.nodes)x.type&&!b.includes(x.type)&&(v[x.type]=x.type);return v}),a=J(()=>e.onlyRenderVisibleElements?Cw(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),l=J(()=>{if(e.onlyRenderVisibleElements){const v=[];for(const b of e.edges){const x=t.value.get(b.source),N=t.value.get(b.target);kI({sourcePos:x.computedPosition||{x:0,y:0},targetPos:N.computedPosition||{x:0,y:0},sourceWidth:x.dimensions.width,sourceHeight:x.dimensions.height,targetWidth:N.dimensions.width,targetHeight:N.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&v.push(b)}return v}return e.edges}),u=J(()=>[...a.value,...l.value]),c=J(()=>{const v=[];for(const b of e.nodes)b.selected&&v.push(b);return v}),d=J(()=>{const v=[];for(const b of e.edges)b.selected&&v.push(b);return v}),f=J(()=>[...c.value,...d.value]),h=J(()=>{const v=[];for(const b of e.nodes)b.dimensions.width&&b.dimensions.height&&b.handleBounds!==void 0&&v.push(b);return v}),m=J(()=>a.value.length>0&&h.value.length===a.value.length);return{getNode:o,getEdge:r,getElements:u,getEdgeTypes:i,getNodeTypes:s,getEdges:l,getNodes:a,getSelectedElements:f,getSelectedNodes:c,getSelectedEdges:d,getNodesInitialized:h,areNodesInitialized:m}}let MT=class Xr{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=jt())==null?void 0:t.appContext.app,o=n?.config.globalProperties.$vueFlowStorage??Xr.instance;return Xr.instance=o??new Xr,n&&(n.config.globalProperties.$vueFlowStorage=Xr.instance),Xr.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=Lw(),r=wo(o),i={};for(const[f,h]of Object.entries(r.hooks)){const m=`on${f.charAt(0).toUpperCase()+f.slice(1)}`;i[m]=h.on}const s={};for(const[f,h]of Object.entries(r.hooks))s[f]=h.trigger;const a=J(()=>{const f=new Map;for(const h of r.nodes)f.set(h.id,h);return f}),l=J(()=>{const f=new Map;for(const h of r.edges)f.set(h.id,h);return f}),u=AT(r,a,l),c=nT(r,a,l);c.setState({...r,...n});const d={...i,...u,...c,...x2(r),nodeLookup:a,edgeLookup:l,emits:s,id:t,vueFlowVersion:"1.47.0",$destroy:()=>{this.remove(t)}};return this.set(t,d),d}getId(){return`vue-flow-${this.currentId++}`}};function ct(e){const t=MT.getInstance(),n=Gn(),o=typeof e=="object",r=o?e:{id:e},i=r.id,s=i??n?.vueFlowId;let a;if(n){const l=ot(Fm,null);typeof l<"u"&&l!==null&&(!s||l.id===s)&&(a=l)}if(a||s&&(a=t.get(s)),!a||s&&a.id!==s){const l=i??t.getId(),u=t.create(l,r);a=u,(n??Dr(!0)).run(()=>{Se(u.applyDefault,(d,f,h)=>{const m=b=>{u.applyNodeChanges(b)},v=b=>{u.applyEdgeChanges(b)};d?(u.onNodesChange(m),u.onEdgesChange(v)):(u.hooks.value.nodesChange.off(m),u.hooks.value.edgesChange.off(v)),h(()=>{u.hooks.value.nodesChange.off(m),u.hooks.value.edgesChange.off(v)})},{immediate:!0}),Gs(()=>{if(a){const d=t.get(a.id);d?d.$destroy():Sa(`No store instance found for id ${a.id} in storage.`)}})})}else o&&a.setState(r);if(n&&(Ht(Fm,a),n.vueFlowId=a.id),o){const l=jt();l?.type.name!=="VueFlow"&&a.emits.error(new vt(mt.USEVUEFLOW_OPTIONS))}return a}function DT(e){const{emits:t,dimensions:n}=ct();let o;tt(()=>{const r=()=>{var i,s;if(!e.value||!(((s=(i=e.value).checkVisibility)==null?void 0:s.call(i))??!0))return;const a=Tc(e.value);(a.width===0||a.height===0)&&t.error(new vt(mt.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:a.width||500,height:a.height||500}};r(),window.addEventListener("resize",r),e.value&&(o=new ResizeObserver(()=>r()),o.observe(e.value)),ig(()=>{window.removeEventListener("resize",r),o&&e.value&&o.unobserve(e.value)})})}const OT={name:"UserSelection",compatConfig:{MODE:3}},PT=Ne({...OT,props:{userSelectionRect:{}},setup(e){return(t,n)=>(L(),X("div",{class:"vue-flow__selection vue-flow__container",style:qe({width:`${t.userSelectionRect.width}px`,height:`${t.userSelectionRect.height}px`,transform:`translate(${t.userSelectionRect.x}px, ${t.userSelectionRect.y}px)`})},null,4))}}),RT=["tabIndex"],zT={name:"NodesSelection",compatConfig:{MODE:3}},VT=Ne({...zT,setup(e){const{emits:t,viewport:n,getSelectedNodes:o,noPanClassName:r,disableKeyboardA11y:i,userSelectionActive:s}=ct(),a=Fw(),l=de(null),u=Vw({el:l,onStart(m){t.selectionDragStart(m),t.nodeDragStart(m)},onDrag(m){t.selectionDrag(m),t.nodeDrag(m)},onStop(m){t.selectionDragStop(m),t.nodeDragStop(m)}});tt(()=>{var m;i.value||(m=l.value)==null||m.focus({preventScroll:!0})});const c=J(()=>kw(o.value)),d=J(()=>({width:`${c.value.width}px`,height:`${c.value.height}px`,top:`${c.value.y}px`,left:`${c.value.x}px`}));function f(m){t.selectionContextMenu({event:m,nodes:o.value})}function h(m){i||gi[m.key]&&(m.preventDefault(),a({x:gi[m.key].x,y:gi[m.key].y},m.shiftKey))}return(m,v)=>!ie(s)&&c.value.width&&c.value.height?(L(),X("div",{key:0,class:We(["vue-flow__nodesselection vue-flow__container",ie(r)]),style:qe({transform:`translate(${ie(n).x}px,${ie(n).y}px) scale(${ie(n).zoom})`})},[T("div",{ref_key:"el",ref:l,class:We([{dragging:ie(u)},"vue-flow__nodesselection-rect"]),style:qe(d.value),tabIndex:ie(i)?void 0:-1,onContextmenu:f,onKeydown:h},null,46,RT)],6)):ve("",!0)}});function HT(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}const BT={name:"Pane",compatConfig:{MODE:3}},FT=Ne({...BT,props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:o,emits:r,userSelectionActive:i,removeSelectedElements:s,userSelectionRect:a,elementsSelectable:l,nodesSelectionActive:u,getSelectedEdges:c,getSelectedNodes:d,removeNodes:f,removeEdges:h,selectionMode:m,deleteKeyCode:v,multiSelectionKeyCode:b,multiSelectionActive:x,edgeLookup:N,nodeLookup:S,connectionLookup:A,defaultEdgeOptions:G,connectionStartHandle:W}=ct(),Z=de(null),z=de(new Set),j=de(new Set),H=de(),D=Oe(()=>l.value&&(e.isSelecting||i.value)),I=Oe(()=>W.value!==null);let R=!1,w=!1;const O=Ts(v,{actInsideInputWithModifier:!1}),C=Ts(b);Se(O,se=>{se&&(f(d.value),h(c.value),u.value=!1)}),Se(C,se=>{x.value=se});function F(se,pe){return le=>{le.target===pe&&se?.(le)}}function Y(se){if(R||I.value){R=!1;return}r.paneClick(se),s(),u.value=!1}function Q(se){se.preventDefault(),se.stopPropagation(),r.paneContextMenu(se)}function q(se){r.paneScroll(se)}function ne(se){var pe,le,ee;if(H.value=(pe=t.value)==null?void 0:pe.getBoundingClientRect(),!l.value||!e.isSelecting||se.button!==0||se.target!==Z.value||!H.value)return;(ee=(le=se.target)==null?void 0:le.setPointerCapture)==null||ee.call(le,se.pointerId);const{x:re,y:oe}=HT(se,H.value);w=!0,R=!1,s(),a.value={width:0,height:0,startX:re,startY:oe,x:re,y:oe},r.selectionStart(se)}function ae(se){var pe;if(!H.value||!a.value)return;R=!0;const{x:le,y:ee}=Mn(se,H.value),{startX:re=0,startY:oe=0}=a.value,ce={startX:re,startY:oe,x:le<re?le:re,y:ee<oe?ee:oe,width:Math.abs(le-re),height:Math.abs(ee-oe)},me=z.value,P=j.value;z.value=new Set(Cw(n.value,ce,o.value,m.value===wg.Partial,!0).map(g=>g.id)),j.value=new Set;const B=((pe=G.value)==null?void 0:pe.selectable)??!0;for(const g of z.value){const p=A.value.get(g);if(p)for(const{edgeId:$}of p.values()){const _=N.value.get($);_&&(_.selectable??B)&&j.value.add($)}}if(!Bm(me,z.value)){const g=Ro(S.value,z.value,!0);r.nodesChange(g)}if(!Bm(P,j.value)){const g=Ro(N.value,j.value);r.edgesChange(g)}a.value=ce,i.value=!0,u.value=!1}function fe(se){var pe;se.button!==0||!w||((pe=se.target)==null||pe.releasePointerCapture(se.pointerId),!i.value&&a.value&&se.target===Z.value&&Y(se),i.value=!1,a.value=null,u.value=z.value.size>0,r.selectionEnd(se),e.selectionKeyPressed&&(R=!1),w=!1)}return(se,pe)=>(L(),X("div",{ref_key:"container",ref:Z,class:We(["vue-flow__pane vue-flow__container",{selection:se.isSelecting}]),onClick:pe[0]||(pe[0]=le=>D.value?void 0:F(Y,Z.value)(le)),onContextmenu:pe[1]||(pe[1]=le=>F(Q,Z.value)(le)),onWheelPassive:pe[2]||(pe[2]=le=>F(q,Z.value)(le)),onPointerenter:pe[3]||(pe[3]=le=>D.value?void 0:ie(r).paneMouseEnter(le)),onPointerdown:pe[4]||(pe[4]=le=>D.value?ne(le):ie(r).paneMouseMove(le)),onPointermove:pe[5]||(pe[5]=le=>D.value?ae(le):ie(r).paneMouseMove(le)),onPointerup:pe[6]||(pe[6]=le=>D.value?fe(le):void 0),onPointerleave:pe[7]||(pe[7]=le=>ie(r).paneMouseLeave(le))},[Qe(se.$slots,"default"),ie(i)&&ie(a)?(L(),Ye(PT,{key:0,"user-selection-rect":ie(a)},null,8,["user-selection-rect"])):ve("",!0),ie(u)&&ie(d).length?(L(),Ye(VT,{key:1})):ve("",!0)],34))}}),LT={name:"Transform",compatConfig:{MODE:3}},UT=Ne({...LT,setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:o}=ct(),r=J(()=>n.value?!o.value:!1),i=J(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(s,a)=>(L(),X("div",{class:"vue-flow__transformationpane vue-flow__container",style:qe({transform:i.value,opacity:r.value?0:void 0})},[Qe(s.$slots,"default")],4))}}),GT={name:"Viewport",compatConfig:{MODE:3}},ZT=Ne({...GT,setup(e){const{minZoom:t,maxZoom:n,defaultViewport:o,translateExtent:r,zoomActivationKeyCode:i,selectionKeyCode:s,panActivationKeyCode:a,panOnScroll:l,panOnScrollMode:u,panOnScrollSpeed:c,panOnDrag:d,zoomOnDoubleClick:f,zoomOnPinch:h,zoomOnScroll:m,preventScrolling:v,noWheelClassName:b,noPanClassName:x,emits:N,connectionStartHandle:S,userSelectionActive:A,paneDragging:G,d3Zoom:W,d3Selection:Z,d3ZoomHandler:z,viewport:j,viewportRef:H,paneClickDistance:D}=ct();DT(H);const I=bi(!1),R=bi(!1);let w=null,O=!1,C=0,F={x:0,y:0,zoom:0};const Y=Ts(a),Q=Ts(s),q=Ts(i),ne=Oe(()=>(!Q.value||Q.value&&s.value===!0)&&(Y.value||d.value)),ae=Oe(()=>Y.value||l.value),fe=Oe(()=>Q.value||s.value===!0&&ne.value!==!0),se=Oe(()=>S.value!==null);tt(()=>{if(!H.value){Sa("Viewport element is missing");return}const oe=H.value,ce=oe.getBoundingClientRect(),me=sI().clickDistance(D.value).scaleExtent([t.value,n.value]).translateExtent(r.value),P=Jt(oe).call(me),B=P.on("wheel.zoom"),g=Ni.translate(o.value.x??0,o.value.y??0).scale(Sr(o.value.zoom??1,t.value,n.value)),p=[[0,0],[ce.width,ce.height]],$=me.constrain()(g,p,r.value);me.transform(P,$),me.wheelDelta(Nm),W.value=me,Z.value=P,z.value=B,j.value={x:$.x,y:$.y,zoom:$.k},me.on("start",_=>{var y;if(!_.sourceEvent)return null;C=_.sourceEvent.button,I.value=!0;const k=ee(_.transform);((y=_.sourceEvent)==null?void 0:y.type)==="mousedown"&&(G.value=!0),F=k,N.viewportChangeStart(k),N.moveStart({event:_,flowTransform:k})}),me.on("end",_=>{if(!_.sourceEvent)return null;if(I.value=!1,G.value=!1,pe(ne.value,C??0)&&!O&&N.paneContextMenu(_.sourceEvent),O=!1,le(F,_.transform)){const y=ee(_.transform);F=y,N.viewportChangeEnd(y),N.moveEnd({event:_,flowTransform:y})}}),me.filter(_=>{var y;const k=q.value||m.value,E=h.value&&_.ctrlKey,M=_.button,V=_.type==="wheel";if(M===1&&_.type==="mousedown"&&(re(_,"vue-flow__node")||re(_,"vue-flow__edge")))return!0;if(!ne.value&&!k&&!ae.value&&!f.value&&!h.value||A.value||se.value&&!V||!f.value&&_.type==="dblclick"||re(_,b.value)&&V||re(_,x.value)&&(!V||ae.value&&V&&!q.value)||!h.value&&_.ctrlKey&&V||!k&&!ae.value&&!E&&V)return!1;if(!h&&_.type==="touchstart"&&((y=_.touches)==null?void 0:y.length)>1)return _.preventDefault(),!1;if(!ne.value&&(_.type==="mousedown"||_.type==="touchstart")||s.value===!0&&Array.isArray(d.value)&&d.value.includes(0)&&M===0||Array.isArray(d.value)&&!d.value.includes(M)&&(_.type==="mousedown"||_.type==="touchstart"))return!1;const U=Array.isArray(d.value)&&d.value.includes(M)||s.value===!0&&Array.isArray(d.value)&&!d.value.includes(0)||!M||M<=1;return(!_.ctrlKey||Y.value||V)&&U}),Se([A,ne],()=>{A.value&&!I.value?me.on("zoom",null):A.value||me.on("zoom",_=>{j.value={x:_.transform.x,y:_.transform.y,zoom:_.transform.k};const y=ee(_.transform);O=pe(ne.value,C??0),N.viewportChange(y),N.move({event:_,flowTransform:y})})},{immediate:!0}),Se([A,ae,u,q,h,v,b],()=>{ae.value&&!q.value&&!A.value?P.on("wheel.zoom",_=>{if(re(_,b.value))return!1;const y=q.value||m.value,k=h.value&&_.ctrlKey;if(!(!v.value||ae.value||y||k))return!1;_.preventDefault(),_.stopImmediatePropagation();const M=P.property("__zoom").k||1,V=vu();if(!Y.value&&_.ctrlKey&&h.value&&V){const Ee=Sn(_),Be=Nm(_),ht=M*2**Be;me.scaleTo(P,ht,Ee,_);return}const U=_.deltaMode===1?20:1;let K=u.value===Is.Vertical?0:_.deltaX*U,te=u.value===Is.Horizontal?0:_.deltaY*U;!V&&_.shiftKey&&u.value!==Is.Vertical&&!K&&te&&(K=te,te=0),me.translateBy(P,-(K/M)*c.value,-(te/M)*c.value);const we=ee(P.property("__zoom"));w&&clearTimeout(w),R.value?(N.move({event:_,flowTransform:we}),N.viewportChange(we),w=setTimeout(()=>{N.moveEnd({event:_,flowTransform:we}),N.viewportChangeEnd(we),R.value=!1},150)):(R.value=!0,N.moveStart({event:_,flowTransform:we}),N.viewportChangeStart(we))},{passive:!1}):typeof B<"u"&&P.on("wheel.zoom",function(_,y){const k=!v.value&&_.type==="wheel"&&!_.ctrlKey,E=q.value||m.value,M=h.value&&_.ctrlKey;if(!E&&!l.value&&!M&&_.type==="wheel"||k||re(_,b.value))return null;_.preventDefault(),B.call(this,_,y)},{passive:!1})},{immediate:!0})});function pe(oe,ce){return ce===2&&Array.isArray(oe)&&oe.includes(2)}function le(oe,ce){return oe.x!==ce.x&&!Number.isNaN(ce.x)||oe.y!==ce.y&&!Number.isNaN(ce.y)||oe.zoom!==ce.k&&!Number.isNaN(ce.k)}function ee(oe){return{x:oe.x,y:oe.y,zoom:oe.k}}function re(oe,ce){return oe.target.closest(`.${ce}`)}return(oe,ce)=>(L(),X("div",{ref_key:"viewportRef",ref:H,class:"vue-flow__viewport vue-flow__container"},[ue(FT,{"is-selecting":fe.value,"selection-key-pressed":ie(Q),class:We({connecting:se.value,dragging:ie(G),draggable:ie(d)===!0||Array.isArray(ie(d))&&ie(d).includes(0)})},{default:Pe(()=>[ue(UT,null,{default:Pe(()=>[Qe(oe.$slots,"default")]),_:3})]),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}}),YT=["id"],XT=["id"],WT=["id"],jT={name:"A11yDescriptions",compatConfig:{MODE:3}},qT=Ne({...jT,setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=ct();return(r,i)=>(L(),X(xe,null,[T("div",{id:`${ie(_w)}-${ie(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+ye(ie(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,YT),T("div",{id:`${ie(bw)}-${ie(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,XT),ie(n)?ve("",!0):(L(),X("div",{key:0,id:`${ie(fI)}-${ie(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},ye(ie(o)),9,WT))],64))}});function KT(){const e=ct();Se(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function JT(e,t,n){return n===$e.Left?e-t:n===$e.Right?e+t:e}function QT(e,t,n){return n===$e.Top?e-t:n===$e.Bottom?e+t:e}const Eg=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=$e.Top,type:r}){return _e("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${r}`,cx:JT(t,e,o),cy:QT(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};Eg.props=["radius","centerX","centerY","position","type"];Eg.compatConfig={MODE:3};const Ym=Eg,e4=Ne({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:r,emits:i,nodesSelectionActive:s,noPanClassName:a,getEdgeTypes:l,removeSelectedEdges:u,findEdge:c,findNode:d,isValidConnection:f,multiSelectionActive:h,disableKeyboardA11y:m,elementsSelectable:v,edgesUpdatable:b,edgesFocusable:x,hooks:N}=ct(),S=J(()=>c(e.id)),{emit:A,on:G}=UI(S.value,i),W=ot(Mc),Z=jt(),z=de(!1),j=de(!1),H=de(""),D=de(null),I=de("source"),R=de(null),w=Oe(()=>typeof S.value.selectable>"u"?v.value:S.value.selectable),O=Oe(()=>typeof S.value.updatable>"u"?b.value:S.value.updatable),C=Oe(()=>typeof S.value.focusable>"u"?x.value:S.value.focusable);Ht(BI,e.id),Ht(FI,R);const F=J(()=>S.value.class instanceof Function?S.value.class(S.value):S.value.class),Y=J(()=>S.value.style instanceof Function?S.value.style(S.value):S.value.style),Q=J(()=>{const p=S.value.type||"default",$=W?.[`edge-${p}`];if($)return $;let _=S.value.template??l.value[p];if(typeof _=="string"&&Z){const y=Object.keys(Z.appContext.components);y&&y.includes(p)&&(_=sg(p,!1))}return _&&typeof _!="string"?_:(i.error(new vt(mt.EDGE_TYPE_MISSING,_)),!1)}),{handlePointerDown:q}=Hw({nodeId:H,handleId:D,type:I,isValidConnection:f,edgeUpdaterType:I,onEdgeUpdate:fe,onEdgeUpdateEnd:se});return()=>{const p=d(S.value.source),$=d(S.value.target),_="pathOptions"in S.value?S.value.pathOptions:{};if(!p&&!$)return i.error(new vt(mt.EDGE_SOURCE_TARGET_MISSING,S.value.id,S.value.source,S.value.target)),null;if(!p)return i.error(new vt(mt.EDGE_SOURCE_MISSING,S.value.id,S.value.source)),null;if(!$)return i.error(new vt(mt.EDGE_TARGET_MISSING,S.value.id,S.value.target)),null;if(!S.value||S.value.hidden||p.hidden||$.hidden)return null;let y;o.value===Zo.Strict?y=p.handleBounds.source:y=[...p.handleBounds.source||[],...p.handleBounds.target||[]];const k=Om(y,S.value.sourceHandle);let E;o.value===Zo.Strict?E=$.handleBounds.target:E=[...$.handleBounds.target||[],...$.handleBounds.source||[]];const M=Om(E,S.value.targetHandle),V=k?.position||$e.Bottom,U=M?.position||$e.Top,{x:K,y:te}=ki(p,k,V),{x:we,y:Ee}=ki($,M,U);return S.value.sourceX=K,S.value.sourceY=te,S.value.targetX=we,S.value.targetY=Ee,_e("g",{ref:R,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${Q.value===!1?"default":S.value.type||"default"}`,a.value,F.value,{updating:z.value,selected:S.value.selected,animated:S.value.animated,inactive:!w.value&&!N.value.edgeClick.hasListeners()}],tabIndex:C.value?0:void 0,"aria-label":S.value.ariaLabel===null?void 0:S.value.ariaLabel??`Edge from ${S.value.source} to ${S.value.target}`,"aria-describedby":C.value?`${bw}-${t}`:void 0,"aria-roledescription":"edge",role:C.value?"group":"img",...S.value.domAttributes,onClick:le,onContextmenu:ee,onDblclick:re,onMouseenter:oe,onMousemove:ce,onMouseleave:me,onKeyDown:C.value?g:void 0},[j.value?null:_e(Q.value===!1?l.value.default:Q.value,{id:e.id,sourceNode:p,targetNode:$,source:S.value.source,target:S.value.target,type:S.value.type,updatable:O.value,selected:S.value.selected,animated:S.value.animated,label:S.value.label,labelStyle:S.value.labelStyle,labelShowBg:S.value.labelShowBg,labelBgStyle:S.value.labelBgStyle,labelBgPadding:S.value.labelBgPadding,labelBgBorderRadius:S.value.labelBgBorderRadius,data:S.value.data,events:{...S.value.events,...G},style:Y.value,markerStart:`url('#${Ks(S.value.markerStart,t)}')`,markerEnd:`url('#${Ks(S.value.markerEnd,t)}')`,sourcePosition:V,targetPosition:U,sourceX:K,sourceY:te,targetX:we,targetY:Ee,sourceHandleId:S.value.sourceHandle,targetHandleId:S.value.targetHandle,interactionWidth:S.value.interactionWidth,..._}),[O.value==="source"||O.value===!0?[_e("g",{onMousedown:P,onMouseenter:ne,onMouseout:ae},_e(Ym,{position:V,centerX:K,centerY:te,radius:r.value,type:"source","data-type":"source"}))]:null,O.value==="target"||O.value===!0?[_e("g",{onMousedown:B,onMouseenter:ne,onMouseout:ae},_e(Ym,{position:U,centerX:we,centerY:Ee,radius:r.value,type:"target","data-type":"target"}))]:null]])};function ne(){z.value=!0}function ae(){z.value=!1}function fe(p,$){A.update({event:p,edge:S.value,connection:$})}function se(p){A.updateEnd({event:p,edge:S.value}),j.value=!1}function pe(p,$){p.button===0&&(j.value=!0,H.value=$?S.value.target:S.value.source,D.value=($?S.value.targetHandle:S.value.sourceHandle)??null,I.value=$?"target":"source",A.updateStart({event:p,edge:S.value}),q(p))}function le(p){var $;const _={event:p,edge:S.value};w.value&&(s.value=!1,S.value.selected&&h.value?(u([S.value]),($=R.value)==null||$.blur()):n([S.value])),A.click(_)}function ee(p){A.contextMenu({event:p,edge:S.value})}function re(p){A.doubleClick({event:p,edge:S.value})}function oe(p){A.mouseEnter({event:p,edge:S.value})}function ce(p){A.mouseMove({event:p,edge:S.value})}function me(p){A.mouseLeave({event:p,edge:S.value})}function P(p){pe(p,!0)}function B(p){pe(p,!1)}function g(p){var $;!m.value&&ww.includes(p.key)&&w.value&&(p.key==="Escape"?(($=R.value)==null||$.blur(),u([c(e.id)])):n([c(e.id)]))}}}),t4=e4,n4=Ne({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:r,connectionPosition:i,connectionLineType:s,connectionLineStyle:a,connectionLineOptions:l,connectionStatus:u,viewport:c,findNode:d}=ct(),f=(e=ot(Mc))==null?void 0:e["connection-line"],h=J(()=>{var N;return d((N=o.value)==null?void 0:N.nodeId)}),m=J(()=>{var N;return d((N=r.value)==null?void 0:N.nodeId)??null}),v=J(()=>({x:(i.value.x-c.value.x)/c.value.zoom,y:(i.value.y-c.value.y)/c.value.zoom})),b=J(()=>l.value.markerStart?`url(#${Ks(l.value.markerStart,t)})`:""),x=J(()=>l.value.markerEnd?`url(#${Ks(l.value.markerEnd,t)})`:"");return()=>{var N,S,A;if(!h.value||!o.value)return null;const G=o.value.id,W=o.value.type,Z=h.value.handleBounds;let z=Z?.[W]??[];if(n.value===Zo.Loose){const Y=Z?.[W==="source"?"target":"source"]??[];z=[...z,...Y]}if(!z)return null;const j=(G?z.find(Y=>Y.id===G):z[0])??null,H=j?.position??$e.Top,{x:D,y:I}=ki(h.value,j,H);let R=null;m.value&&(n.value===Zo.Strict?R=((N=m.value.handleBounds[W==="source"?"target":"source"])==null?void 0:N.find(Y=>{var Q;return Y.id===((Q=r.value)==null?void 0:Q.id)}))||null:R=((S=[...m.value.handleBounds.source??[],...m.value.handleBounds.target??[]])==null?void 0:S.find(Y=>{var Q;return Y.id===((Q=r.value)==null?void 0:Q.id)}))||null);const w=((A=r.value)==null?void 0:A.position)??(H?jf[H]:null);if(!H||!w)return null;const O=s.value??l.value.type??or.Bezier;let C="";const F={sourceX:D,sourceY:I,sourcePosition:H,targetX:v.value.x,targetY:v.value.y,targetPosition:w};return O===or.Bezier?[C]=Zw(F):O===or.Step?[C]=Kf({...F,borderRadius:0}):O===or.SmoothStep?[C]=Kf(F):O===or.SimpleBezier?[C]=Yw(F):C=`M${D},${I} ${v.value.x},${v.value.y}`,_e("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},_e("g",{class:"vue-flow__connection"},f?_e(f,{sourceX:D,sourceY:I,sourcePosition:H,targetX:v.value.x,targetY:v.value.y,targetPosition:w,sourceNode:h.value,sourceHandle:j,targetNode:m.value,targetHandle:R,markerEnd:x.value,markerStart:b.value,connectionStatus:u.value}):_e("path",{d:C,class:[l.value.class,u.value,"vue-flow__connection-path"],style:{...a.value,...l.value.style},"marker-end":x.value,"marker-start":b.value})))}}}),o4=n4,r4=["id","markerWidth","markerHeight","markerUnits","orient"],i4={name:"MarkerType",compatConfig:{MODE:3}},s4=Ne({...i4,props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup(e){return(t,n)=>(L(),X("marker",{id:t.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${t.width}`,markerHeight:`${t.height}`,markerUnits:t.markerUnits,orient:t.orient},[t.type===ie(Xf).ArrowClosed?(L(),X("polyline",{key:0,style:qe({stroke:t.color,fill:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):ve("",!0),t.type===ie(Xf).Arrow?(L(),X("polyline",{key:1,style:qe({stroke:t.color,strokeWidth:t.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):ve("",!0)],8,r4))}}),a4={class:"vue-flow__marker vue-flow__container","aria-hidden":"true"},l4={name:"MarkerDefinitions",compatConfig:{MODE:3}},u4=Ne({...l4,setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:r}=ct(),i=J(()=>{const s=new Set,a=[],l=u=>{if(u){const c=Ks(u,t);s.has(c)||(typeof u=="object"?a.push({...u,id:c,color:u.color||r.value}):a.push({id:c,color:r.value,type:u}),s.add(c))}};for(const u of[o.value.markerEnd,o.value.markerStart])l(u);for(const u of n.value)for(const c of[u.markerStart,u.markerEnd])l(c);return a.sort((u,c)=>u.id.localeCompare(c.id))});return(s,a)=>(L(),X("svg",a4,[T("defs",null,[(L(!0),X(xe,null,nt(i.value,l=>(L(),Ye(s4,{id:l.id,key:l.id,type:l.type,color:l.color,width:l.width,height:l.height,markerUnits:l.markerUnits,"stroke-width":l.strokeWidth,orient:l.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"]))),128))])]))}}),c4={name:"Edges",compatConfig:{MODE:3}},d4=Ne({...c4,setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:o}=ct();return(r,i)=>(L(),X(xe,null,[ue(u4),(L(!0),X(xe,null,nt(ie(n),s=>(L(),X("svg",{key:s.id,class:"vue-flow__edges vue-flow__container",style:qe({zIndex:ie(CI)(s,ie(t),ie(o))})},[ue(ie(t4),{id:s.id},null,8,["id"])],4))),128)),ue(ie(o4))],64))}}),f4=Ne({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:r,multiSelectionActive:i,emits:s,removeSelectedNodes:a,addSelectedNodes:l,updateNodeDimensions:u,onUpdateNodeInternals:c,getNodeTypes:d,nodeExtent:f,elevateNodesOnSelect:h,disableKeyboardA11y:m,ariaLiveMessage:v,snapToGrid:b,snapGrid:x,nodeDragThreshold:N,nodesDraggable:S,elementsSelectable:A,nodesConnectable:G,nodesFocusable:W,hooks:Z}=ct(),z=de(null);Ht(zw,z),Ht(Rw,e.id);const j=ot(Mc),H=jt(),D=Fw(),{node:I,parentNode:R}=Bw(e.id),{emit:w,on:O}=XI(I,s),C=Oe(()=>typeof I.draggable>"u"?S.value:I.draggable),F=Oe(()=>typeof I.selectable>"u"?A.value:I.selectable),Y=Oe(()=>typeof I.connectable>"u"?G.value:I.connectable),Q=Oe(()=>typeof I.focusable>"u"?W.value:I.focusable),q=J(()=>F.value||C.value||Z.value.nodeClick.hasListeners()||Z.value.nodeDoubleClick.hasListeners()||Z.value.nodeMouseEnter.hasListeners()||Z.value.nodeMouseMove.hasListeners()||Z.value.nodeMouseLeave.hasListeners()),ne=Oe(()=>!!I.dimensions.width&&!!I.dimensions.height),ae=J(()=>{const $=I.type||"default",_=j?.[`node-${$}`];if(_)return _;let y=I.template||d.value[$];if(typeof y=="string"&&H){const k=Object.keys(H.appContext.components);k&&k.includes($)&&(y=sg($,!1))}return y&&typeof y!="string"?y:(s.error(new vt(mt.NODE_TYPE_MISSING,y)),!1)}),fe=Vw({id:e.id,el:z,disabled:()=>!C.value,selectable:F,dragHandle:()=>I.dragHandle,onStart($){w.dragStart($)},onDrag($){w.drag($)},onStop($){w.dragStop($)},onClick($){g($)}}),se=J(()=>I.class instanceof Function?I.class(I):I.class),pe=J(()=>{const $=(I.style instanceof Function?I.style(I):I.style)||{},_=I.width instanceof Function?I.width(I):I.width,y=I.height instanceof Function?I.height(I):I.height;return!$.width&&_&&($.width=typeof _=="string"?_:`${_}px`),!$.height&&y&&($.height=typeof y=="string"?y:`${y}px`),$}),le=Oe(()=>Number(I.zIndex??pe.value.zIndex??0));return c($=>{($.includes(e.id)||!$.length)&&re()}),tt(()=>{Se(()=>I.hidden,($=!1,_,y)=>{!$&&z.value&&(e.resizeObserver.observe(z.value),y(()=>{z.value&&e.resizeObserver.unobserve(z.value)}))},{immediate:!0,flush:"post"})}),Se([()=>I.type,()=>I.sourcePosition,()=>I.targetPosition],()=>{bt(()=>{u([{id:e.id,nodeElement:z.value,forceUpdate:!0}])})}),Se([()=>I.position.x,()=>I.position.y,()=>{var $;return($=R.value)==null?void 0:$.computedPosition.x},()=>{var $;return($=R.value)==null?void 0:$.computedPosition.y},()=>{var $;return($=R.value)==null?void 0:$.computedPosition.z},le,()=>I.selected,()=>I.dimensions.height,()=>I.dimensions.width,()=>{var $;return($=R.value)==null?void 0:$.dimensions.height},()=>{var $;return($=R.value)==null?void 0:$.dimensions.width}],([$,_,y,k,E,M])=>{const V={x:$,y:_,z:M+(h.value&&I.selected?1e3:0)};typeof y<"u"&&typeof k<"u"?I.computedPosition=xI({x:y,y:k,z:E},V):I.computedPosition=V},{flush:"post",immediate:!0}),Se([()=>I.extent,f],([$,_],[y,k])=>{($!==y||_!==k)&&ee()}),I.extent==="parent"||typeof I.extent=="object"&&"range"in I.extent&&I.extent.range==="parent"?Vf(()=>ne).toBe(!0).then(ee):ee(),()=>I.hidden?null:_e("div",{ref:z,"data-id":I.id,class:["vue-flow__node",`vue-flow__node-${ae.value===!1?"default":I.type||"default"}`,{[n.value]:C.value,dragging:fe?.value,draggable:C.value,selected:I.selected,selectable:F.value,parent:I.isParent},se.value],style:{visibility:ne.value?"visible":"hidden",zIndex:I.computedPosition.z??le.value,transform:`translate(${I.computedPosition.x}px,${I.computedPosition.y}px)`,pointerEvents:q.value?"all":"none",...pe.value},tabIndex:Q.value?0:void 0,role:Q.value?"group":void 0,"aria-describedby":m.value?void 0:`${_w}-${t}`,"aria-label":I.ariaLabel,"aria-roledescription":"node",...I.domAttributes,onMouseenter:oe,onMousemove:ce,onMouseleave:me,onContextmenu:P,onClick:g,onDblclick:B,onKeydown:p},[_e(ae.value===!1?d.value.default:ae.value,{id:I.id,type:I.type,data:I.data,events:{...I.events,...O},selected:I.selected,resizing:I.resizing,dragging:fe.value,connectable:Y.value,position:I.computedPosition,dimensions:I.dimensions,isValidTargetPos:I.isValidTargetPos,isValidSourcePos:I.isValidSourcePos,parent:I.parentNode,parentNodeId:I.parentNode,zIndex:I.computedPosition.z??le.value,targetPosition:I.targetPosition,sourcePosition:I.sourcePosition,label:I.label,dragHandle:I.dragHandle,onUpdateNodeInternals:re})]);function ee(){const $=I.computedPosition,{computedPosition:_,position:y}=xg(I,b.value?Ac($,x.value):$,s.error,f.value,R.value);(I.computedPosition.x!==_.x||I.computedPosition.y!==_.y)&&(I.computedPosition={...I.computedPosition,..._}),(I.position.x!==y.x||I.position.y!==y.y)&&(I.position=y)}function re(){z.value&&u([{id:e.id,nodeElement:z.value,forceUpdate:!0}])}function oe($){fe?.value||w.mouseEnter({event:$,node:I})}function ce($){fe?.value||w.mouseMove({event:$,node:I})}function me($){fe?.value||w.mouseLeave({event:$,node:I})}function P($){return w.contextMenu({event:$,node:I})}function B($){return w.doubleClick({event:$,node:I})}function g($){F.value&&(!o.value||!C.value||N.value>0)&&qf(I,i.value,l,a,r,!1,z.value),w.click({event:$,node:I})}function p($){if(!(Wf($)||m.value))if(ww.includes($.key)&&F.value){const _=$.key==="Escape";qf(I,i.value,l,a,r,_,z.value)}else C.value&&I.selected&&gi[$.key]&&($.preventDefault(),v.value=`Moved selected node ${$.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~I.position.x}, y: ${~~I.position.y}`,D({x:gi[$.key].x,y:gi[$.key].y},$.shiftKey))}}}),h4=f4;function g4(e={includeHiddenNodes:!1}){const{nodes:t}=ct();return J(()=>{if(t.value.length===0)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&(n?.handleBounds===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}const p4={class:"vue-flow__nodes vue-flow__container"},m4={name:"Nodes",compatConfig:{MODE:3}},y4=Ne({...m4,setup(e){const{getNodes:t,updateNodeDimensions:n,emits:o}=ct(),r=g4(),i=de();return Se(r,s=>{s&&bt(()=>{o.nodesInitialized(t.value)})},{immediate:!0}),tt(()=>{i.value=new ResizeObserver(s=>{const a=s.map(l=>({id:l.target.getAttribute("data-id"),nodeElement:l.target,forceUpdate:!0}));bt(()=>n(a))})}),ig(()=>{var s;return(s=i.value)==null?void 0:s.disconnect()}),(s,a)=>(L(),X("div",p4,[i.value?(L(!0),X(xe,{key:0},nt(ie(t),(l,u,c,d)=>{const f=[l.id];if(d&&d.key===l.id&&_N(d,f))return d;const h=(L(),Ye(ie(h4),{id:l.id,key:l.id,"resize-observer":i.value},null,8,["id","resize-observer"]));return h.memo=f,h},a,0),128)):ve("",!0)]))}});function v4(){const{emits:e}=ct();tt(()=>{if(Pw()){const t=document.querySelector(".vue-flow__pane");t&&window.getComputedStyle(t).zIndex!=="1"&&e.error(new vt(mt.MISSING_STYLES))}})}const _4=T("div",{class:"vue-flow__edge-labels"},null,-1),b4={name:"VueFlow",compatConfig:{MODE:3}},w4=Ne({...b4,props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{type:[Boolean,null],default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","paneReady","init","updateNodeInternals","error","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","edgeUpdate","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdateEnd","nodeContextMenu","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeDoubleClick","nodeClick","nodeDragStart","nodeDrag","nodeDragStop","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,r=ub(),i=Md(o,"modelValue",n),s=Md(o,"nodes",n),a=Md(o,"edges",n),l=ct(o),u=KI({modelValue:i,nodes:s,edges:a},o,l);return QI(n,l.hooks),KT(),v4(),Ht(Mc,r),Or(u),t(l),(c,d)=>(L(),X("div",{ref:ie(l).vueFlowRef,class:"vue-flow"},[ue(ZT,null,{default:Pe(()=>[ue(d4),_4,ue(y4),Qe(c.$slots,"zoom-pane")]),_:3}),Qe(c.$slots,"default"),ue(qT)],512))}});function Ww(e){return Gn()?(Fo(e),!0):!1}function Wr(e){return typeof e=="function"?e():ie(e)}function Xm(e,t=!1,n="Timeout"){return new Promise((o,r)=>{setTimeout(t?()=>r(n):o,e)})}function x4(e,t={}){if(!je(e))return _a(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=yc(()=>({get(){return e.value[o]},set(r){var i;if((i=Wr(t.replaceRef))!=null?i:!0)if(Array.isArray(e.value)){const a=[...e.value];a[o]=r,e.value=a}else{const a={...e.value,[o]:r};Object.setPrototypeOf(a,Object.getPrototypeOf(e.value)),e.value=a}else e.value[o]=r}}));return n}function Jf(e,t=!1){function n(d,{flush:f="sync",deep:h=!1,timeout:m,throwOnTimeout:v}={}){let b=null;const N=[new Promise(S=>{b=Se(e,A=>{d(A)!==t&&(b?.(),S(A))},{flush:f,deep:h,immediate:!0})})];return m!=null&&N.push(Xm(m,v).then(()=>Wr(e)).finally(()=>b?.())),Promise.race(N)}function o(d,f){if(!je(d))return n(A=>A===d,f);const{flush:h="sync",deep:m=!1,timeout:v,throwOnTimeout:b}=f??{};let x=null;const S=[new Promise(A=>{x=Se([e,d],([G,W])=>{t!==(G===W)&&(x?.(),A(G))},{flush:h,deep:m,immediate:!0})})];return v!=null&&S.push(Xm(v,b).then(()=>Wr(e)).finally(()=>(x?.(),Wr(e)))),Promise.race(S)}function r(d){return n(f=>!!f,d)}function i(d){return o(null,d)}function s(d){return o(void 0,d)}function a(d){return n(Number.isNaN,d)}function l(d,f){return n(h=>{const m=Array.from(h);return m.includes(d)||m.includes(Wr(d))},f)}function u(d){return c(1,d)}function c(d=1,f){let h=-1;return n(()=>(h+=1,h>=d),f)}return Array.isArray(Wr(e))?{toMatch:n,toContains:l,changed:u,changedTimes:c,get not(){return Jf(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:r,toBeNull:i,toBeNaN:a,toBeUndefined:s,changed:u,changedTimes:c,get not(){return Jf(e,!t)}}}function Wm(e){return Jf(e)}var $4={value:()=>{}};function jw(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Rl(n)}function Rl(e){this._=e}function E4(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Rl.prototype=jw.prototype={constructor:Rl,on:function(e,t){var n=this._,o=E4(e+"",n),r,i=-1,s=o.length;if(arguments.length<2){for(;++i<s;)if((r=(e=o[i]).type)&&(r=S4(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(r=(e=o[i]).type)n[r]=jm(n[r],e.name,t);else if(t==null)for(r in n)n[r]=jm(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Rl(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};function S4(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function jm(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=$4,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Qf="http://www.w3.org/1999/xhtml";const qm={svg:"http://www.w3.org/2000/svg",xhtml:Qf,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function zc(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),qm.hasOwnProperty(t)?{space:qm[t],local:e}:e}function N4(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Qf&&t.documentElement.namespaceURI===Qf?t.createElement(e):t.createElementNS(n,e)}}function k4(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function qw(e){var t=zc(e);return(t.local?k4:N4)(t)}function C4(){}function Sg(e){return e==null?C4:function(){return this.querySelector(e)}}function I4(e){typeof e!="function"&&(e=Sg(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=new Array(s),l,u,c=0;c<s;++c)(l=i[c])&&(u=e.call(l,l.__data__,c,i))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new fn(o,this._parents)}function T4(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function A4(){return[]}function Kw(e){return e==null?A4:function(){return this.querySelectorAll(e)}}function M4(e){return function(){return T4(e.apply(this,arguments))}}function D4(e){typeof e=="function"?e=M4(e):e=Kw(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var s=t[i],a=s.length,l,u=0;u<a;++u)(l=s[u])&&(o.push(e.call(l,l.__data__,u,s)),r.push(l));return new fn(o,r)}function Jw(e){return function(){return this.matches(e)}}function Qw(e){return function(t){return t.matches(e)}}var O4=Array.prototype.find;function P4(e){return function(){return O4.call(this.children,e)}}function R4(){return this.firstElementChild}function z4(e){return this.select(e==null?R4:P4(typeof e=="function"?e:Qw(e)))}var V4=Array.prototype.filter;function H4(){return Array.from(this.children)}function B4(e){return function(){return V4.call(this.children,e)}}function F4(e){return this.selectAll(e==null?H4:B4(typeof e=="function"?e:Qw(e)))}function L4(e){typeof e!="function"&&(e=Jw(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=[],l,u=0;u<s;++u)(l=i[u])&&e.call(l,l.__data__,u,i)&&a.push(l);return new fn(o,this._parents)}function e1(e){return new Array(e.length)}function U4(){return new fn(this._enter||this._groups.map(e1),this._parents)}function _u(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}_u.prototype={constructor:_u,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function G4(e){return function(){return e}}function Z4(e,t,n,o,r,i){for(var s=0,a,l=t.length,u=i.length;s<u;++s)(a=t[s])?(a.__data__=i[s],o[s]=a):n[s]=new _u(e,i[s]);for(;s<l;++s)(a=t[s])&&(r[s]=a)}function Y4(e,t,n,o,r,i,s){var a,l,u=new Map,c=t.length,d=i.length,f=new Array(c),h;for(a=0;a<c;++a)(l=t[a])&&(f[a]=h=s.call(l,l.__data__,a,t)+"",u.has(h)?r[a]=l:u.set(h,l));for(a=0;a<d;++a)h=s.call(e,i[a],a,i)+"",(l=u.get(h))?(o[a]=l,l.__data__=i[a],u.delete(h)):n[a]=new _u(e,i[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(f[a])===l&&(r[a]=l)}function X4(e){return e.__data__}function W4(e,t){if(!arguments.length)return Array.from(this,X4);var n=t?Y4:Z4,o=this._parents,r=this._groups;typeof e!="function"&&(e=G4(e));for(var i=r.length,s=new Array(i),a=new Array(i),l=new Array(i),u=0;u<i;++u){var c=o[u],d=r[u],f=d.length,h=j4(e.call(c,c&&c.__data__,u,o)),m=h.length,v=a[u]=new Array(m),b=s[u]=new Array(m),x=l[u]=new Array(f);n(c,d,v,b,x,h,t);for(var N=0,S=0,A,G;N<m;++N)if(A=v[N]){for(N>=S&&(S=N+1);!(G=b[S])&&++S<m;);A._next=G||null}}return s=new fn(s,o),s._enter=a,s._exit=l,s}function j4(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function q4(){return new fn(this._exit||this._groups.map(e1),this._parents)}function K4(e,t,n){var o=this.enter(),r=this,i=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function J4(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,s=Math.min(r,i),a=new Array(r),l=0;l<s;++l)for(var u=n[l],c=o[l],d=u.length,f=a[l]=new Array(d),h,m=0;m<d;++m)(h=u[m]||c[m])&&(f[m]=h);for(;l<r;++l)a[l]=n[l];return new fn(a,this._parents)}function Q4(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,i=o[r],s;--r>=0;)(s=o[r])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function eA(e){e||(e=tA);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var s=n[i],a=s.length,l=r[i]=new Array(a),u,c=0;c<a;++c)(u=s[c])&&(l[c]=u);l.sort(t)}return new fn(r,this._parents).order()}function tA(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function nA(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function oA(){return Array.from(this)}function rA(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var s=o[r];if(s)return s}return null}function iA(){let e=0;for(const t of this)++e;return e}function sA(){return!this.node()}function aA(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],i=0,s=r.length,a;i<s;++i)(a=r[i])&&e.call(a,a.__data__,i,r);return this}function lA(e){return function(){this.removeAttribute(e)}}function uA(e){return function(){this.removeAttributeNS(e.space,e.local)}}function cA(e,t){return function(){this.setAttribute(e,t)}}function dA(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function fA(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function hA(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function gA(e,t){var n=zc(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?uA:lA:typeof t=="function"?n.local?hA:fA:n.local?dA:cA)(n,t))}function t1(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function pA(e){return function(){this.style.removeProperty(e)}}function mA(e,t,n){return function(){this.style.setProperty(e,t,n)}}function yA(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function vA(e,t,n){return arguments.length>1?this.each((t==null?pA:typeof t=="function"?yA:mA)(e,t,n??"")):Ci(this.node(),e)}function Ci(e,t){return e.style.getPropertyValue(t)||t1(e).getComputedStyle(e,null).getPropertyValue(t)}function _A(e){return function(){delete this[e]}}function bA(e,t){return function(){this[e]=t}}function wA(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function xA(e,t){return arguments.length>1?this.each((t==null?_A:typeof t=="function"?wA:bA)(e,t)):this.node()[e]}function n1(e){return e.trim().split(/^|\s+/)}function Ng(e){return e.classList||new o1(e)}function o1(e){this._node=e,this._names=n1(e.getAttribute("class")||"")}o1.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function r1(e,t){for(var n=Ng(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function i1(e,t){for(var n=Ng(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function $A(e){return function(){r1(this,e)}}function EA(e){return function(){i1(this,e)}}function SA(e,t){return function(){(t.apply(this,arguments)?r1:i1)(this,e)}}function NA(e,t){var n=n1(e+"");if(arguments.length<2){for(var o=Ng(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?SA:t?$A:EA)(n,t))}function kA(){this.textContent=""}function CA(e){return function(){this.textContent=e}}function IA(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function TA(e){return arguments.length?this.each(e==null?kA:(typeof e=="function"?IA:CA)(e)):this.node().textContent}function AA(){this.innerHTML=""}function MA(e){return function(){this.innerHTML=e}}function DA(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function OA(e){return arguments.length?this.each(e==null?AA:(typeof e=="function"?DA:MA)(e)):this.node().innerHTML}function PA(){this.nextSibling&&this.parentNode.appendChild(this)}function RA(){return this.each(PA)}function zA(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function VA(){return this.each(zA)}function HA(e){var t=typeof e=="function"?e:qw(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function BA(){return null}function FA(e,t){var n=typeof e=="function"?e:qw(e),o=t==null?BA:typeof t=="function"?t:Sg(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function LA(){var e=this.parentNode;e&&e.removeChild(this)}function UA(){return this.each(LA)}function GA(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ZA(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function YA(e){return this.select(e?ZA:GA)}function XA(e){return arguments.length?this.property("__data__",e):this.node().__data__}function WA(e){return function(t){e.call(this,t,this.__data__)}}function jA(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function qA(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++o]=i;++o?t.length=o:delete this.__on}}}function KA(e,t,n){return function(){var o=this.__on,r,i=WA(t);if(o){for(var s=0,a=o.length;s<a;++s)if((r=o[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function JA(e,t,n){var o=jA(e+""),r,i=o.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(r=0,c=a[l];r<i;++r)if((s=o[r]).type===c.type&&s.name===c.name)return c.value}return}for(a=t?KA:qA,r=0;r<i;++r)this.each(a(o[r],t,n));return this}function s1(e,t,n){var o=t1(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function QA(e,t){return function(){return s1(this,e,t)}}function eM(e,t){return function(){return s1(this,e,t.apply(this,arguments))}}function tM(e,t){return this.each((typeof t=="function"?eM:QA)(e,t))}function*nM(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length,s;r<i;++r)(s=o[r])&&(yield s)}var oM=[null];function fn(e,t){this._groups=e,this._parents=t}function Na(){return new fn([[document.documentElement]],oM)}function rM(){return this}fn.prototype=Na.prototype={constructor:fn,select:I4,selectAll:D4,selectChild:z4,selectChildren:F4,filter:L4,data:W4,enter:U4,exit:q4,join:K4,merge:J4,selection:rM,order:Q4,sort:eA,call:nA,nodes:oA,node:rA,size:iA,empty:sA,each:aA,attr:gA,style:vA,property:xA,classed:NA,text:TA,html:OA,raise:RA,lower:VA,append:HA,insert:FA,remove:UA,clone:YA,datum:XA,on:JA,dispatch:tM,[Symbol.iterator]:nM};function kg(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function a1(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function ka(){}var Js=.7,bu=1/Js,pi="\\s*([+-]?\\d+)\\s*",Qs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Hn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",iM=/^#([0-9a-f]{3,8})$/,sM=new RegExp(`^rgb\\(${pi},${pi},${pi}\\)$`),aM=new RegExp(`^rgb\\(${Hn},${Hn},${Hn}\\)$`),lM=new RegExp(`^rgba\\(${pi},${pi},${pi},${Qs}\\)$`),uM=new RegExp(`^rgba\\(${Hn},${Hn},${Hn},${Qs}\\)$`),cM=new RegExp(`^hsl\\(${Qs},${Hn},${Hn}\\)$`),dM=new RegExp(`^hsla\\(${Qs},${Hn},${Hn},${Qs}\\)$`),Km={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};kg(ka,Nr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Jm,formatHex:Jm,formatHex8:fM,formatHsl:hM,formatRgb:Qm,toString:Qm});function Jm(){return this.rgb().formatHex()}function fM(){return this.rgb().formatHex8()}function hM(){return l1(this).formatHsl()}function Qm(){return this.rgb().formatRgb()}function Nr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=iM.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ey(t):n===3?new Pt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ka(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ka(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=sM.exec(e))?new Pt(t[1],t[2],t[3],1):(t=aM.exec(e))?new Pt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=lM.exec(e))?Ka(t[1],t[2],t[3],t[4]):(t=uM.exec(e))?Ka(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=cM.exec(e))?oy(t[1],t[2]/100,t[3]/100,1):(t=dM.exec(e))?oy(t[1],t[2]/100,t[3]/100,t[4]):Km.hasOwnProperty(e)?ey(Km[e]):e==="transparent"?new Pt(NaN,NaN,NaN,0):null}function ey(e){return new Pt(e>>16&255,e>>8&255,e&255,1)}function Ka(e,t,n,o){return o<=0&&(e=t=n=NaN),new Pt(e,t,n,o)}function gM(e){return e instanceof ka||(e=Nr(e)),e?(e=e.rgb(),new Pt(e.r,e.g,e.b,e.opacity)):new Pt}function eh(e,t,n,o){return arguments.length===1?gM(e):new Pt(e,t,n,o??1)}function Pt(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}kg(Pt,eh,a1(ka,{brighter(e){return e=e==null?bu:Math.pow(bu,e),new Pt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Js:Math.pow(Js,e),new Pt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Pt(pr(this.r),pr(this.g),pr(this.b),wu(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ty,formatHex:ty,formatHex8:pM,formatRgb:ny,toString:ny}));function ty(){return`#${ar(this.r)}${ar(this.g)}${ar(this.b)}`}function pM(){return`#${ar(this.r)}${ar(this.g)}${ar(this.b)}${ar((isNaN(this.opacity)?1:this.opacity)*255)}`}function ny(){const e=wu(this.opacity);return`${e===1?"rgb(":"rgba("}${pr(this.r)}, ${pr(this.g)}, ${pr(this.b)}${e===1?")":`, ${e})`}`}function wu(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function pr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ar(e){return e=pr(e),(e<16?"0":"")+e.toString(16)}function oy(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new en(e,t,n,o)}function l1(e){if(e instanceof en)return new en(e.h,e.s,e.l,e.opacity);if(e instanceof ka||(e=Nr(e)),!e)return new en;if(e instanceof en)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),s=NaN,a=i-r,l=(i+r)/2;return a?(t===i?s=(n-o)/a+(n<o)*6:n===i?s=(o-t)/a+2:s=(t-n)/a+4,a/=l<.5?i+r:2-i-r,s*=60):a=l>0&&l<1?0:s,new en(s,a,l,e.opacity)}function mM(e,t,n,o){return arguments.length===1?l1(e):new en(e,t,n,o??1)}function en(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}kg(en,mM,a1(ka,{brighter(e){return e=e==null?bu:Math.pow(bu,e),new en(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Js:Math.pow(Js,e),new en(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new Pt(Ud(e>=240?e-240:e+120,r,o),Ud(e,r,o),Ud(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new en(ry(this.h),Ja(this.s),Ja(this.l),wu(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=wu(this.opacity);return`${e===1?"hsl(":"hsla("}${ry(this.h)}, ${Ja(this.s)*100}%, ${Ja(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ry(e){return e=(e||0)%360,e<0?e+360:e}function Ja(e){return Math.max(0,Math.min(1,e||0))}function Ud(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Cg=e=>()=>e;function yM(e,t){return function(n){return e+n*t}}function vM(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function _M(e){return(e=+e)==1?u1:function(t,n){return n-t?vM(t,n,e):Cg(isNaN(t)?n:t)}}function u1(e,t){var n=t-e;return n?yM(e,n):Cg(isNaN(e)?t:e)}const xu=(function e(t){var n=_M(t);function o(r,i){var s=n((r=eh(r)).r,(i=eh(i)).r),a=n(r.g,i.g),l=n(r.b,i.b),u=u1(r.opacity,i.opacity);return function(c){return r.r=s(c),r.g=a(c),r.b=l(c),r.opacity=u(c),r+""}}return o.gamma=e,o})(1);function bM(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,o=t.slice(),r;return function(i){for(r=0;r<n;++r)o[r]=e[r]*(1-i)+t[r]*i;return o}}function wM(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function xM(e,t){var n=t?t.length:0,o=e?Math.min(n,e.length):0,r=new Array(o),i=new Array(n),s;for(s=0;s<o;++s)r[s]=As(e[s],t[s]);for(;s<n;++s)i[s]=t[s];return function(a){for(s=0;s<o;++s)i[s]=r[s](a);return i}}function $M(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function Cn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function EM(e,t){var n={},o={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=As(e[r],t[r]):o[r]=t[r];return function(i){for(r in n)o[r]=n[r](i);return o}}var th=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Gd=new RegExp(th.source,"g");function SM(e){return function(){return e}}function NM(e){return function(t){return e(t)+""}}function c1(e,t){var n=th.lastIndex=Gd.lastIndex=0,o,r,i,s=-1,a=[],l=[];for(e=e+"",t=t+"";(o=th.exec(e))&&(r=Gd.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),a[s]?a[s]+=i:a[++s]=i),(o=o[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:Cn(o,r)})),n=Gd.lastIndex;return n<t.length&&(i=t.slice(n),a[s]?a[s]+=i:a[++s]=i),a.length<2?l[0]?NM(l[0].x):SM(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}function As(e,t){var n=typeof t,o;return t==null||n==="boolean"?Cg(t):(n==="number"?Cn:n==="string"?(o=Nr(t))?(t=o,xu):c1:t instanceof Nr?xu:t instanceof Date?$M:wM(t)?bM:Array.isArray(t)?xM:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?EM:Cn)(e,t)}var iy=180/Math.PI,nh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function d1(e,t,n,o,r,i){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,l/=a),e*o<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*iy,skewX:Math.atan(l)*iy,scaleX:s,scaleY:a}}var Qa;function kM(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?nh:d1(t.a,t.b,t.c,t.d,t.e,t.f)}function CM(e){return e==null||(Qa||(Qa=document.createElementNS("http://www.w3.org/2000/svg","g")),Qa.setAttribute("transform",e),!(e=Qa.transform.baseVal.consolidate()))?nh:(e=e.matrix,d1(e.a,e.b,e.c,e.d,e.e,e.f))}function f1(e,t,n,o){function r(u){return u.length?u.pop()+" ":""}function i(u,c,d,f,h,m){if(u!==d||c!==f){var v=h.push("translate(",null,t,null,n);m.push({i:v-4,x:Cn(u,d)},{i:v-2,x:Cn(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function s(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(r(d)+"rotate(",null,o)-2,x:Cn(u,c)})):c&&d.push(r(d)+"rotate("+c+o)}function a(u,c,d,f){u!==c?f.push({i:d.push(r(d)+"skewX(",null,o)-2,x:Cn(u,c)}):c&&d.push(r(d)+"skewX("+c+o)}function l(u,c,d,f,h,m){if(u!==d||c!==f){var v=h.push(r(h)+"scale(",null,",",null,")");m.push({i:v-4,x:Cn(u,d)},{i:v-2,x:Cn(c,f)})}else(d!==1||f!==1)&&h.push(r(h)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),i(u.translateX,u.translateY,c.translateX,c.translateY,d,f),s(u.rotate,c.rotate,d,f),a(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var m=-1,v=f.length,b;++m<v;)d[(b=f[m]).i]=b.x(h);return d.join("")}}}var IM=f1(kM,"px, ","px)","deg)"),TM=f1(CM,", ",")",")"),AM=1e-12;function sy(e){return((e=Math.exp(e))+1/e)/2}function MM(e){return((e=Math.exp(e))-1/e)/2}function DM(e){return((e=Math.exp(2*e))-1)/(e+1)}const Zd=(function e(t,n,o){function r(i,s){var a=i[0],l=i[1],u=i[2],c=s[0],d=s[1],f=s[2],h=c-a,m=d-l,v=h*h+m*m,b,x;if(v<AM)x=Math.log(f/u)/t,b=function(Z){return[a+Z*h,l+Z*m,u*Math.exp(t*Z*x)]};else{var N=Math.sqrt(v),S=(f*f-u*u+o*v)/(2*u*n*N),A=(f*f-u*u-o*v)/(2*f*n*N),G=Math.log(Math.sqrt(S*S+1)-S),W=Math.log(Math.sqrt(A*A+1)-A);x=(W-G)/t,b=function(Z){var z=Z*x,j=sy(G),H=u/(n*N)*(j*DM(t*z+G)-MM(G));return[a+H*h,l+H*m,u*j/sy(t*z+G)]}}return b.duration=x*1e3*t/Math.SQRT2,b}return r.rho=function(i){var s=Math.max(.001,+i),a=s*s,l=a*a;return e(s,a,l)},r})(Math.SQRT2,2,4);var Ii=0,as=0,ji=0,h1=1e3,$u,ls,Eu=0,kr=0,Vc=0,ea=typeof performance=="object"&&performance.now?performance:Date,g1=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ig(){return kr||(g1(OM),kr=ea.now()+Vc)}function OM(){kr=0}function Su(){this._call=this._time=this._next=null}Su.prototype=p1.prototype={constructor:Su,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Ig():+n)+(t==null?0:+t),!this._next&&ls!==this&&(ls?ls._next=this:$u=this,ls=this),this._call=e,this._time=n,oh()},stop:function(){this._call&&(this._call=null,this._time=1/0,oh())}};function p1(e,t,n){var o=new Su;return o.restart(e,t,n),o}function PM(){Ig(),++Ii;for(var e=$u,t;e;)(t=kr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ii}function ay(){kr=(Eu=ea.now())+Vc,Ii=as=0;try{PM()}finally{Ii=0,zM(),kr=0}}function RM(){var e=ea.now(),t=e-Eu;t>h1&&(Vc-=t,Eu=e)}function zM(){for(var e,t=$u,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:$u=n);ls=e,oh(o)}function oh(e){if(!Ii){as&&(as=clearTimeout(as));var t=e-kr;t>24?(e<1/0&&(as=setTimeout(ay,e-ea.now()-Vc)),ji&&(ji=clearInterval(ji))):(ji||(Eu=ea.now(),ji=setInterval(RM,h1)),Ii=1,g1(ay))}}function ly(e,t,n){var o=new Su;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var VM=jw("start","end","cancel","interrupt"),HM=[],m1=0,uy=1,rh=2,zl=3,cy=4,ih=5,Vl=6;function Hc(e,t,n,o,r,i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;BM(e,n,{name:t,index:o,group:r,on:VM,tween:HM,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:m1})}function Tg(e,t){var n=yn(e,t);if(n.state>m1)throw new Error("too late; already scheduled");return n}function Yn(e,t){var n=yn(e,t);if(n.state>zl)throw new Error("too late; already running");return n}function yn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function BM(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=p1(i,0,n.time);function i(u){n.state=uy,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var c,d,f,h;if(n.state!==uy)return l();for(c in o)if(h=o[c],h.name===n.name){if(h.state===zl)return ly(s);h.state===cy?(h.state=Vl,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[c]):+c<t&&(h.state=Vl,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[c])}if(ly(function(){n.state===zl&&(n.state=cy,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=rh,n.on.call("start",e,e.__data__,n.index,n.group),n.state===rh){for(n.state=zl,r=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++d]=h);r.length=d+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=ih,1),d=-1,f=r.length;++d<f;)r[d].call(e,c);n.state===ih&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Vl,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function FM(e,t){var n=e.__transition,o,r,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((o=n[s]).name!==t){i=!1;continue}r=o.state>rh&&o.state<ih,o.state=Vl,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[s]}i&&delete e.__transition}}function LM(e){return this.each(function(){FM(this,e)})}function UM(e,t){var n,o;return function(){var r=Yn(this,e),i=r.tween;if(i!==n){o=n=i;for(var s=0,a=o.length;s<a;++s)if(o[s].name===t){o=o.slice(),o.splice(s,1);break}}r.tween=o}}function GM(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=Yn(this,e),s=i.tween;if(s!==o){r=(o=s).slice();for(var a={name:t,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===t){r[l]=a;break}l===u&&r.push(a)}i.tween=r}}function ZM(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=yn(this.node(),n).tween,r=0,i=o.length,s;r<i;++r)if((s=o[r]).name===e)return s.value;return null}return this.each((t==null?UM:GM)(n,e,t))}function Ag(e,t,n){var o=e._id;return e.each(function(){var r=Yn(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return yn(r,o).value[t]}}function y1(e,t){var n;return(typeof t=="number"?Cn:t instanceof Nr?xu:(n=Nr(t))?(t=n,xu):c1)(e,t)}function YM(e){return function(){this.removeAttribute(e)}}function XM(e){return function(){this.removeAttributeNS(e.space,e.local)}}function WM(e,t,n){var o,r=n+"",i;return function(){var s=this.getAttribute(e);return s===r?null:s===o?i:i=t(o=s,n)}}function jM(e,t,n){var o,r=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===r?null:s===o?i:i=t(o=s,n)}}function qM(e,t,n){var o,r,i;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===o&&l===r?i:(r=l,i=t(o=s,a)))}}function KM(e,t,n){var o,r,i;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===o&&l===r?i:(r=l,i=t(o=s,a)))}}function JM(e,t){var n=zc(e),o=n==="transform"?TM:y1;return this.attrTween(e,typeof t=="function"?(n.local?KM:qM)(n,o,Ag(this,"attr."+e,t)):t==null?(n.local?XM:YM)(n):(n.local?jM:WM)(n,o,t))}function QM(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function e5(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function t5(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&e5(e,i)),n}return r._value=t,r}function n5(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&QM(e,i)),n}return r._value=t,r}function o5(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=zc(e);return this.tween(n,(o.local?t5:n5)(o,t))}function r5(e,t){return function(){Tg(this,e).delay=+t.apply(this,arguments)}}function i5(e,t){return t=+t,function(){Tg(this,e).delay=t}}function s5(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?r5:i5)(t,e)):yn(this.node(),t).delay}function a5(e,t){return function(){Yn(this,e).duration=+t.apply(this,arguments)}}function l5(e,t){return t=+t,function(){Yn(this,e).duration=t}}function u5(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?a5:l5)(t,e)):yn(this.node(),t).duration}function c5(e,t){if(typeof t!="function")throw new Error;return function(){Yn(this,e).ease=t}}function d5(e){var t=this._id;return arguments.length?this.each(c5(t,e)):yn(this.node(),t).ease}function f5(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Yn(this,e).ease=n}}function h5(e){if(typeof e!="function")throw new Error;return this.each(f5(this._id,e))}function g5(e){typeof e!="function"&&(e=Jw(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=[],l,u=0;u<s;++u)(l=i[u])&&e.call(l,l.__data__,u,i)&&a.push(l);return new yo(o,this._parents,this._name,this._id)}function p5(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),s=new Array(o),a=0;a<i;++a)for(var l=t[a],u=n[a],c=l.length,d=s[a]=new Array(c),f,h=0;h<c;++h)(f=l[h]||u[h])&&(d[h]=f);for(;a<o;++a)s[a]=t[a];return new yo(s,this._parents,this._name,this._id)}function m5(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function y5(e,t,n){var o,r,i=m5(t)?Tg:Yn;return function(){var s=i(this,e),a=s.on;a!==o&&(r=(o=a).copy()).on(t,n),s.on=r}}function v5(e,t){var n=this._id;return arguments.length<2?yn(this.node(),n).on.on(e):this.each(y5(n,e,t))}function _5(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function b5(){return this.on("end.remove",_5(this._id))}function w5(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Sg(e));for(var o=this._groups,r=o.length,i=new Array(r),s=0;s<r;++s)for(var a=o[s],l=a.length,u=i[s]=new Array(l),c,d,f=0;f<l;++f)(c=a[f])&&(d=e.call(c,c.__data__,f,a))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,Hc(u[f],t,n,f,u,yn(c,n)));return new yo(i,this._parents,t,n)}function x5(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Kw(e));for(var o=this._groups,r=o.length,i=[],s=[],a=0;a<r;++a)for(var l=o[a],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var f=e.call(c,c.__data__,d,l),h,m=yn(c,n),v=0,b=f.length;v<b;++v)(h=f[v])&&Hc(h,t,n,v,f,m);i.push(f),s.push(c)}return new yo(i,s,t,n)}var $5=Na.prototype.constructor;function E5(){return new $5(this._groups,this._parents)}function S5(e,t){var n,o,r;return function(){var i=Ci(this,e),s=(this.style.removeProperty(e),Ci(this,e));return i===s?null:i===n&&s===o?r:r=t(n=i,o=s)}}function v1(e){return function(){this.style.removeProperty(e)}}function N5(e,t,n){var o,r=n+"",i;return function(){var s=Ci(this,e);return s===r?null:s===o?i:i=t(o=s,n)}}function k5(e,t,n){var o,r,i;return function(){var s=Ci(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Ci(this,e))),s===l?null:s===o&&l===r?i:(r=l,i=t(o=s,a))}}function C5(e,t){var n,o,r,i="style."+t,s="end."+i,a;return function(){var l=Yn(this,e),u=l.on,c=l.value[i]==null?a||(a=v1(t)):void 0;(u!==n||r!==c)&&(o=(n=u).copy()).on(s,r=c),l.on=o}}function I5(e,t,n){var o=(e+="")=="transform"?IM:y1;return t==null?this.styleTween(e,S5(e,o)).on("end.style."+e,v1(e)):typeof t=="function"?this.styleTween(e,k5(e,o,Ag(this,"style."+e,t))).each(C5(this._id,e)):this.styleTween(e,N5(e,o,t),n).on("end.style."+e,null)}function T5(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function A5(e,t,n){var o,r;function i(){var s=t.apply(this,arguments);return s!==r&&(o=(r=s)&&T5(e,s,n)),o}return i._value=t,i}function M5(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,A5(e,t,n??""))}function D5(e){return function(){this.textContent=e}}function O5(e){return function(){var t=e(this);this.textContent=t??""}}function P5(e){return this.tween("text",typeof e=="function"?O5(Ag(this,"text",e)):D5(e==null?"":e+""))}function R5(e){return function(t){this.textContent=e.call(this,t)}}function z5(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&R5(r)),t}return o._value=e,o}function V5(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,z5(e))}function H5(){for(var e=this._name,t=this._id,n=_1(),o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],a=s.length,l,u=0;u<a;++u)if(l=s[u]){var c=yn(l,t);Hc(l,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new yo(o,this._parents,e,n)}function B5(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i,s){var a={value:s},l={value:function(){--r===0&&i()}};n.each(function(){var u=Yn(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),r===0&&i()})}var F5=0;function yo(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function _1(){return++F5}var Jn=Na.prototype;yo.prototype={constructor:yo,select:w5,selectAll:x5,selectChild:Jn.selectChild,selectChildren:Jn.selectChildren,filter:g5,merge:p5,selection:E5,transition:H5,call:Jn.call,nodes:Jn.nodes,node:Jn.node,size:Jn.size,empty:Jn.empty,each:Jn.each,on:v5,attr:JM,attrTween:o5,style:I5,styleTween:M5,text:P5,textTween:V5,remove:b5,tween:ZM,delay:s5,duration:u5,ease:d5,easeVarying:h5,end:B5,[Symbol.iterator]:Jn[Symbol.iterator]};function L5(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var U5={time:null,delay:0,duration:250,ease:L5};function G5(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Z5(e){var t,n;e instanceof yo?(t=e._id,e=e._name):(t=_1(),(n=U5).time=Ig(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],a=s.length,l,u=0;u<a;++u)(l=s[u])&&Hc(l,e,t,u,s,n||G5(l,t));return new yo(o,this._parents,e,t)}Na.prototype.interrupt=LM;Na.prototype.transition=Z5;function ri(e,t,n){this.k=e,this.x=t,this.y=n}ri.prototype={constructor:ri,scale:function(e){return e===1?this:new ri(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ri(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var sh=new ri(1,0,0);ri.prototype;var Te=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(Te||{}),b1=(e=>(e.Partial="partial",e.Full="full",e))(b1||{}),w1=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(w1||{}),Bc=(e=>(e.Strict="strict",e.Loose="loose",e))(Bc||{}),x1=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(x1||{});function Nu(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function ku(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function Mg(e){return{width:e.offsetWidth,height:e.offsetHeight}}function Ti(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function Y5(e,t){return{x:Ti(e.x,t[0][0],t[1][0]),y:Ti(e.y,t[0][1],t[1][1])}}function dy(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function Wo(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function mr(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!Wo(e)}function us(e){return mr(e)&&"computedPosition"in e}function el(e){return!Number.isNaN(e)&&Number.isFinite(e)}function X5(e){return el(e.width)&&el(e.height)&&el(e.x)&&el(e.y)}function W5(e,t,n){const o={id:e.id.toString(),type:e.type??"default",dimensions:_t({width:0,height:0}),computedPosition:_t({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:Ut(e.data)?e.data:{},events:_t(Ut(e.events)?e.events:{})};return Object.assign(t??o,e,{id:e.id.toString(),parentNode:n})}function $1(e,t,n){var o,r;const i={id:e.id.toString(),type:e.type??t?.type??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(o=e.sourceHandle)==null?void 0:o.toString(),targetHandle:(r=e.targetHandle)==null?void 0:r.toString(),updatable:e.updatable??n?.updatable,selectable:e.selectable??n?.selectable,focusable:e.focusable??n?.focusable,data:Ut(e.data)?e.data:{},events:_t(Ut(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??n?.interactionWidth,...n??{}};return Object.assign(t??i,e,{id:e.id.toString()})}function E1(e,t,n,o){const r=typeof e=="string"?e:e.id,i=new Set,s=o==="source"?"target":"source";for(const a of n)a[s]===r&&i.add(a[o]);return t.filter(a=>i.has(a.id))}function j5(...e){if(e.length===3){const[i,s,a]=e;return E1(i,s,a,"target")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(i=>Wo(i)&&i.source===o).map(i=>n.find(s=>mr(s)&&s.id===i.target))}function q5(...e){if(e.length===3){const[i,s,a]=e;return E1(i,s,a,"source")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(i=>Wo(i)&&i.target===o).map(i=>n.find(s=>mr(s)&&s.id===i.source))}function S1({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function K5(e,t){return t.some(n=>Wo(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function ta({x:e,y:t},{x:n,y:o,zoom:r}){return{x:e*r+n,y:t*r+o}}function Cu({x:e,y:t},{x:n,y:o,zoom:r},i=!1,s=[1,1]){const a={x:(e-n)/r,y:(t-o)/r};return i?aD(a,s):a}function J5(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function N1({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function Q5({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function eD(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const o=e[n];t=J5(t,N1({...o.computedPosition,...o.dimensions}))}return Q5(t)}function tD(e,t,n={x:0,y:0,zoom:1},o=!1,r=!1){const i={...Cu(t,n),width:t.width/n.zoom,height:t.height/n.zoom},s=[];for(const a of e){const{dimensions:l,selectable:u=!0,hidden:c=!1}=a,d=l.width??a.width??null,f=l.height??a.height??null;if(r&&!u||c)continue;const h=ku(i,Nu(a)),m=d===null||f===null,v=o&&h>0,b=(d??0)*(f??0);(m||v||h>=b||a.dragging)&&s.push(a)}return s}function k1(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter(o=>n.has(o.source)||n.has(o.target))}function Br(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return Fc(`The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function nD(e,t,n){if(typeof e=="string"||typeof e=="number"){const o=Br(e,n),r=Br(e,t);return{top:o,right:r,bottom:o,left:r,x:r*2,y:o*2}}if(typeof e=="object"){const o=Br(e.top??e.y??0,n),r=Br(e.bottom??e.y??0,n),i=Br(e.left??e.x??0,t),s=Br(e.right??e.x??0,t);return{top:o,right:s,bottom:r,left:i,x:i+s,y:o+r}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function oD(e,t,n,o,r,i){const{x:s,y:a}=ta(e,{x:t,y:n,zoom:o}),{x:l,y:u}=ta({x:e.x+e.width,y:e.y+e.height},{x:t,y:n,zoom:o}),c=r-l,d=i-u;return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(c),bottom:Math.floor(d)}}function fy(e,t,n,o,r,i=.1){const s=nD(i,t,n),a=(t-s.x)/e.width,l=(n-s.y)/e.height,u=Math.min(a,l),c=Ti(u,o,r),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*c,m=n/2-f*c,v=oD(e,h,m,c,t,n),b={left:Math.min(v.left-s.left,0),top:Math.min(v.top-s.top,0),right:Math.min(v.right-s.right,0),bottom:Math.min(v.bottom-s.bottom,0)};return{x:h-b.left+b.right,y:m-b.top+b.bottom,zoom:c}}function hy(e,t,n){return e<t?Ti(Math.abs(e-t),1,t)/t:e>n?-Ti(Math.abs(e-n),1,t)/t:0}function rD(e,t,n=15,o=40){const r=hy(e.x,o,t.width-o)*n,i=hy(e.y,o,t.height-o)*n;return[r,i]}function Yd(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let r={};if(typeof t.style=="function"?r={...t.style(t)}:t.style&&(r={...t.style}),r.width=r.width??`${t.dimensions.width}px`,r.height=r.height??`${t.dimensions.height}px`,n>0)if(typeof r.width=="string"){const i=Number(r.width.replace("px",""));r.width=`${i+n}px`}else r.width+=n;if(o>0)if(typeof r.height=="string"){const i=Number(r.height.replace("px",""));r.height=`${i+o}px`}else r.height+=o;if(e.position.x<0){const i=Math.abs(e.position.x);if(t.position.x=t.position.x-i,typeof r.width=="string"){const s=Number(r.width.replace("px",""));r.width=`${s+i}px`}else r.width+=i;e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);if(t.position.y=t.position.y-i,typeof r.height=="string"){const s=Number(r.height.replace("px",""));r.height=`${s+i}px`}else r.height+=i;e.position.y=0}t.dimensions.width=Number(r.width.toString().replace("px","")),t.dimensions.height=Number(r.height.toString().replace("px","")),typeof t.style=="function"?t.style=i=>{const s=t.style;return{...s(i),...r}}:t.style={...t.style,...r}}}}function gy(e,t){var n,o;const r=e.filter(s=>s.type==="add"||s.type==="remove");for(const s of r)if(s.type==="add")t.findIndex(l=>l.id===s.item.id)===-1&&t.push(s.item);else if(s.type==="remove"){const a=t.findIndex(l=>l.id===s.id);a!==-1&&t.splice(a,1)}const i=t.map(s=>s.id);for(const s of t)for(const a of e)if(a.id===s.id)switch(a.type){case"select":s.selected=a.selected;break;case"position":if(us(s)&&(typeof a.position<"u"&&(s.position=a.position),typeof a.dragging<"u"&&(s.dragging=a.dragging),s.expandParent&&s.parentNode)){const l=t[i.indexOf(s.parentNode)];l&&us(l)&&Yd(s,l)}break;case"dimensions":if(us(s)&&(typeof a.dimensions<"u"&&(s.dimensions=a.dimensions),typeof a.updateStyle<"u"&&a.updateStyle&&(s.style={...s.style||{},width:`${(n=a.dimensions)==null?void 0:n.width}px`,height:`${(o=a.dimensions)==null?void 0:o.height}px`}),typeof a.resizing<"u"&&(s.resizing=a.resizing),s.expandParent&&s.parentNode)){const l=t[i.indexOf(s.parentNode)];l&&us(l)&&(!!l.dimensions.width&&!!l.dimensions.height?Yd(s,l):bt(()=>{Yd(s,l)}))}break}return t}function To(e,t){return{id:e,type:"select",selected:t}}function py(e){return{item:e,type:"add"}}function my(e){return{id:e,type:"remove"}}function yy(e,t,n,o,r){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:r||null,type:"remove"}}function Fr(e,t=new Set,n=!1){const o=[];for(const[r,i]of e){const s=t.has(r);!(i.selected===void 0&&!s)&&i.selected!==s&&(n&&(i.selected=s),o.push(To(i.id,s)))}return o}const vy=()=>{};function ke(e){const t=new Set;let n=vy,o=()=>!1;const r=()=>t.size>0||o(),i=f=>{n=f},s=()=>{n=vy},a=f=>{o=f},l=()=>{o=()=>!1},u=f=>{t.delete(f)};return{on:f=>{t.add(f);const h=()=>u(f);return Ww(h),{off:h}},off:u,trigger:f=>{const h=[n];return r()?h.push(...t):e&&h.push(e),Promise.allSettled(h.map(m=>m(f)))},hasListeners:r,listeners:t,setEmitter:i,removeEmitter:s,setHasEmitListeners:a,removeHasEmitListeners:l}}function Dg(e,t,n=Te.Left,o=!1){const r=(t?.x??0)+e.computedPosition.x,i=(t?.y??0)+e.computedPosition.y,{width:s,height:a}=t??sD(e);if(o)return{x:r+s/2,y:i+a/2};switch(t?.position??n){case Te.Top:return{x:r+s/2,y:i};case Te.Right:return{x:r+s,y:i+a/2};case Te.Bottom:return{x:r+s/2,y:i+a};case Te.Left:return{x:r,y:i+a/2}}}function iD({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:i,width:s,height:a,viewport:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+o,t.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=N1({x:(0-l.x)/l.zoom,y:(0-l.y)/l.zoom,width:s/l.zoom,height:a/l.zoom}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),f=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(d*f)>0}var sn=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(sn||{});const _y={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};let Dn=class extends Error{constructor(t,...n){var o;super((o=_y[t])==null?void 0:o.call(_y,...n)),this.name="VueFlowError",this.code=t,this.args=n}};function Og(e){return"clientX"in e}function jr(e,t){const n=Og(e);let o,r;return n?(o=e.clientX,r=e.clientY):"touches"in e&&e.touches.length>0?(o=e.touches[0].clientX,r=e.touches[0].clientY):"changedTouches"in e&&e.changedTouches.length>0?(o=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY):(o=0,r=0),{x:o-(t?.left??0),y:r-(t?.top??0)}}const by=()=>{var e;return typeof navigator<"u"&&((e=navigator?.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function sD(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function aD(e,t=[1,1]){return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}}const lD=()=>!0;function Xd(e){e?.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function uD(e,t,n){const o=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const i of t.values())ku(r,Nu(i))>0&&o.push(i);return o}const cD=250;function dD(e,t,n,o){var r,i;let s=[],a=Number.POSITIVE_INFINITY;const l=uD(e,n,t+cD);for(const u of l){const c=[...((r=u.handleBounds)==null?void 0:r.source)??[],...((i=u.handleBounds)==null?void 0:i.target)??[]];for(const d of c){if(o.nodeId===d.nodeId&&o.type===d.type&&o.id===d.id)continue;const{x:f,y:h}=Dg(u,d,d.position,!0),m=Math.sqrt((f-e.x)**2+(h-e.y)**2);m>t||(m<a?(s=[{...d,x:f,y:h}],a=m):m===a&&s.push({...d,x:f,y:h}))}}if(!s.length)return null;if(s.length>1){const u=o.type==="source"?"target":"source";return s.find(c=>c.type===u)??s[0]}return s[0]}function wy(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:i,doc:s,lib:a,flowId:l,isValidConnection:u=lD},c,d,f,h){const m=i==="target",v=t?s.querySelector(`.${a}-flow__handle[data-id="${l}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:b,y:x}=jr(e),N=s.elementFromPoint(b,x),S=N?.classList.contains(`${a}-flow__handle`)?N:v,A={handleDomNode:S,isValid:!1,connection:null,toHandle:null};if(S){const G=C1(void 0,S),W=S.getAttribute("data-nodeid"),Z=S.getAttribute("data-handleid"),z=S.classList.contains("connectable"),j=S.classList.contains("connectableend");if(!W||!G)return A;const H={source:m?W:o,sourceHandle:m?Z:r,target:m?o:W,targetHandle:m?r:Z};A.connection=H;const I=z&&j&&(n===Bc.Strict?m&&G==="source"||!m&&G==="target":W!==o||Z!==r);A.isValid=I&&u(H,{nodes:d,edges:c,sourceNode:f(H.source),targetNode:f(H.target)}),A.toHandle=I1(W,G,Z,h,n,!0)}return A}function C1(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function fD(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function hD(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}function I1(e,t,n,o,r,i=!1){var s,a,l;const u=o.get(e);if(!u)return null;const c=r===Bc.Strict?(s=u.handleBounds)==null?void 0:s[t]:[...((a=u.handleBounds)==null?void 0:a.source)??[],...((l=u.handleBounds)==null?void 0:l.target)??[]],d=(n?c?.find(f=>f.id===n):c?.[0])??null;return d&&i?{...d,...Dg(u,d,d.position,!0)}:d}const xy={[Te.Left]:Te.Right,[Te.Right]:Te.Left,[Te.Top]:Te.Bottom,[Te.Bottom]:Te.Top},gD=["production","prod"];function Fc(e,...t){pD()&&console.warn(`[Vue Flow]: ${e}`,...t)}function pD(){return!gD.includes("production")}function $y(e,t,n,o,r){const i=t.querySelectorAll(`.vue-flow__handle.${e}`);return i?.length?Array.from(i).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:r,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/o,y:(a.top-n.top)/o,...Mg(s)}}):null}function Ut(e){return typeof ie(e)<"u"}function mD(e,t,n,o){if(!e||!e.source||!e.target)return n(new Dn(sn.EDGE_INVALID,e?.id??"[ID UNKNOWN]")),!1;let r;return Wo(e)?r=e:r={...e,id:S1(e)},r=$1(r,void 0,o),K5(r,t)?!1:r}function yD(e,t,n,o,r){if(!t.source||!t.target)return r(new Dn(sn.EDGE_INVALID,e.id)),!1;if(!n)return r(new Dn(sn.EDGE_NOT_FOUND,e.id)),!1;const{id:i,...s}=e;return{...s,id:o?S1(t):i,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle}}function Ey(e,t,n){const o={},r=[];for(let i=0;i<e.length;++i){const s=e[i];if(!mr(s)){n(new Dn(sn.NODE_INVALID,s?.id)||`[ID UNKNOWN|INDEX ${i}]`);continue}const a=W5(s,t(s.id),s.parentNode);s.parentNode&&(o[s.parentNode]=!0),r[i]=a}for(const i of r){const s=t(i.parentNode)||r.find(a=>a.id===i.parentNode);i.parentNode&&!s&&n(new Dn(sn.NODE_MISSING_PARENT,i.id,i.parentNode)),(i.parentNode||o[i.id])&&(o[i.id]&&(i.isParent=!0),s&&(s.isParent=!0))}return r}function Sy(e,t,n,o,r,i){let s=r;const a=o.get(s)||new Map;o.set(s,a.set(n,t)),s=`${r}-${e}`;const l=o.get(s)||new Map;if(o.set(s,l.set(n,t)),i){s=`${r}-${e}-${i}`;const u=o.get(s)||new Map;o.set(s,u.set(n,t))}}function Wd(e,t,n){e.clear();for(const o of n){const{source:r,target:i,sourceHandle:s=null,targetHandle:a=null}=o,l={edgeId:o.id,source:r,target:i,sourceHandle:s,targetHandle:a},u=`${r}-${s}--${i}-${a}`,c=`${i}-${a}--${r}-${s}`;Sy("source",l,c,e,r,s),Sy("target",l,u,e,i,a)}}function jd(e,t,n,o,r,i,s,a){const l=[];for(const u of e){const c=Wo(u)?u:mD(u,a,r,i);if(!c)continue;const d=n(c.source),f=n(c.target);if(!d||!f){r(new Dn(sn.EDGE_SOURCE_TARGET_MISSING,c.id,c.source,c.target));continue}if(!d){r(new Dn(sn.EDGE_SOURCE_MISSING,c.id,c.source));continue}if(!f){r(new Dn(sn.EDGE_TARGET_MISSING,c.id,c.target));continue}if(t&&!t(c,{edges:a,nodes:s,sourceNode:d,targetNode:f})){r(new Dn(sn.EDGE_INVALID,c.id));continue}const h=o(c.id);l.push({...$1(c,h,i),sourceNode:d,targetNode:f})}return l}const Ny=Symbol("vueFlow"),vD=Symbol("nodeId"),_D=Symbol("nodeRef");function tl(){return!0}function bD({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:r,onEdgeUpdate:i,onEdgeUpdateEnd:s}){const{id:a,vueFlowRef:l,connectionMode:u,connectionRadius:c,connectOnClick:d,connectionClickStartHandle:f,nodesConnectable:h,autoPanOnConnect:m,autoPanSpeed:v,findNode:b,panBy:x,startConnection:N,updateConnection:S,endConnection:A,emits:G,viewport:W,edges:Z,nodes:z,isValidConnection:j,nodeLookup:H}=Yc();let D=null,I=!1,R=null;function w(C){var F;const Y=ge(n)==="target",Q=Og(C),q=dy(C.target),ne=C.currentTarget;if(ne&&(Q&&C.button===0||!Q)){let ae=function(V){g=jr(V,me),le=dD(Cu(g,W.value,!1,[1,1]),c.value,H.value,_),p||($(),p=!0);const U=wy(V,{handle:le,connectionMode:u.value,fromNodeId:ge(t),fromHandleId:ge(e),fromType:Y?"target":"source",isValidConnection:pe,doc:q,lib:"vue",flowId:a,nodeLookup:H.value},Z.value,z.value,b,H.value);R=U.handleDomNode,D=U.connection,I=hD(!!le,U.isValid);const K={...M,isValid:I,to:U.toHandle&&I?ta({x:U.toHandle.x,y:U.toHandle.y},W.value):g,toHandle:U.toHandle,toPosition:I&&U.toHandle?U.toHandle.position:xy[_.position],toNode:U.toHandle?H.value.get(U.toHandle.nodeId):null};if(I&&le&&M?.toHandle&&K.toHandle&&M.toHandle.type===K.toHandle.type&&M.toHandle.nodeId===K.toHandle.nodeId&&M.toHandle.id===K.toHandle.id&&M.to.x===K.to.x&&M.to.y===K.to.y)return;const te=le??U.toHandle;if(S(te&&I?ta({x:te.x,y:te.y},W.value):g,U.toHandle,fD(!!te,I)),M=K,!le&&!I&&!R)return Xd(B);D&&D.source!==D.target&&R&&(Xd(B),B=R,R.classList.add("connecting","vue-flow__handle-connecting"),R.classList.toggle("valid",!!I),R.classList.toggle("vue-flow__handle-valid",!!I))},fe=function(V){"touches"in V&&V.touches.length>0||((le||R)&&D&&I&&(i?i(V,D):G.connect(D)),G.connectEnd(V),r&&s?.(V),Xd(B),cancelAnimationFrame(ee),A(V),p=!1,I=!1,D=null,R=null,q.removeEventListener("mousemove",ae),q.removeEventListener("mouseup",fe),q.removeEventListener("touchmove",ae),q.removeEventListener("touchend",fe))};const se=b(ge(t));let pe=ge(o)||j.value||tl;!pe&&se&&(pe=(Y?se.isValidSourcePos:se.isValidTargetPos)||tl);let le,ee=0;const{x:re,y:oe}=jr(C),ce=C1(ge(r),ne),me=(F=l.value)==null?void 0:F.getBoundingClientRect();if(!me||!ce)return;const P=I1(ge(t),ce,ge(e),H.value,u.value);if(!P)return;let B,g=jr(C,me),p=!1;const $=()=>{if(!m.value)return;const[V,U]=rD(g,me,v.value);x({x:V,y:U}),ee=requestAnimationFrame($)},_={...P,nodeId:ge(t),type:ce,position:P.position},y=H.value.get(ge(t)),E={inProgress:!0,isValid:null,from:Dg(y,_,Te.Left,!0),fromHandle:_,fromPosition:_.position,fromNode:y,to:g,toHandle:null,toPosition:xy[_.position],toNode:null};N({nodeId:ge(t),id:ge(e),type:ce,position:ne?.getAttribute("data-handlepos")||Te.Top,...g},{x:re-me.left,y:oe-me.top}),G.connectStart({event:C,nodeId:ge(t),handleId:ge(e),handleType:ce});let M=E;q.addEventListener("mousemove",ae),q.addEventListener("mouseup",fe),q.addEventListener("touchmove",ae),q.addEventListener("touchend",fe)}}function O(C){var F,Y;if(!d.value)return;const Q=ge(n)==="target";if(!f.value){G.clickConnectStart({event:C,nodeId:ge(t),handleId:ge(e)}),N({nodeId:ge(t),type:ge(n),id:ge(e),position:Te.Top,...jr(C)},void 0,!0);return}let q=ge(o)||j.value||tl;const ne=b(ge(t));if(!q&&ne&&(q=(Q?ne.isValidSourcePos:ne.isValidTargetPos)||tl),ne&&(typeof ne.connectable>"u"?h.value:ne.connectable)===!1)return;const ae=dy(C.target),fe=wy(C,{handle:{nodeId:ge(t),id:ge(e),type:ge(n),position:Te.Top,...jr(C)},connectionMode:u.value,fromNodeId:f.value.nodeId,fromHandleId:f.value.id??null,fromType:f.value.type,isValidConnection:q,doc:ae,lib:"vue",flowId:a,nodeLookup:H.value},Z.value,z.value,b,H.value),se=((F=fe.connection)==null?void 0:F.source)===((Y=fe.connection)==null?void 0:Y.target);fe.isValid&&fe.connection&&!se&&G.connect(fe.connection),G.clickConnectEnd(C),A(C,!0)}return{handlePointerDown:w,handleClick:O}}function wD(){return ot(vD,"")}function xD(e){const t=wD()??"",n=ot(_D,de(null)),{findNode:o,edges:r,emits:i}=Yc(),s=o(t);return s||i.error(new Dn(sn.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:s,parentNode:J(()=>o(s.parentNode)),connectedEdges:J(()=>k1([s],r.value))}}const nl=.1,$D=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2;function Eo(){return Fc("Viewport not initialized yet."),Promise.resolve(!1)}const ED={zoomIn:Eo,zoomOut:Eo,zoomTo:Eo,fitView:Eo,setCenter:Eo,fitBounds:Eo,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:Eo,setTransform:Eo,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function SD(e){function t(o,r){return new Promise(i=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate(r?.interpolate==="linear"?As:Zd).scaleBy(qd(e.d3Selection,r?.duration,r?.ease,()=>{i(!0)}),o):i(!1)})}function n(o,r,i,s){return new Promise(a=>{var l;const{x:u,y:c}=Y5({x:-o,y:-r},e.translateExtent),d=sh.translate(-u,-c).scale(i);e.d3Selection&&e.d3Zoom?(l=e.d3Zoom)==null||l.interpolate(s?.interpolate==="linear"?As:Zd).transform(qd(e.d3Selection,s?.duration,s?.ease,()=>{a(!0)}),d):a(!1)})}return J(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:r=>t(1.2,r),zoomOut:r=>t(1/1.2,r),zoomTo:(r,i)=>new Promise(s=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate(i?.interpolate==="linear"?As:Zd).scaleTo(qd(e.d3Selection,i?.duration,i?.ease,()=>{s(!0)}),r):s(!1)}),setViewport:(r,i)=>n(r.x,r.y,r.zoom,i),setTransform:(r,i)=>n(r.x,r.y,r.zoom,i),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(r={padding:nl,includeHiddenNodes:!1,duration:0})=>{var i,s;const a=[];for(const f of e.nodes)f.dimensions.width&&f.dimensions.height&&(r?.includeHiddenNodes||!f.hidden)&&(!((i=r.nodes)!=null&&i.length)||(s=r.nodes)!=null&&s.length&&r.nodes.includes(f.id))&&a.push(f);if(!a.length)return Promise.resolve(!1);const l=eD(a),{x:u,y:c,zoom:d}=fy(l,e.dimensions.width,e.dimensions.height,r.minZoom??e.minZoom,r.maxZoom??e.maxZoom,r.padding??nl);return n(u,c,d,r)},setCenter:(r,i,s)=>{const a=typeof s?.zoom<"u"?s.zoom:e.maxZoom,l=e.dimensions.width/2-r*a,u=e.dimensions.height/2-i*a;return n(l,u,a,s)},fitBounds:(r,i={padding:nl})=>{const{x:s,y:a,zoom:l}=fy(r,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,i.padding??nl);return n(s,a,l,i)},project:r=>Cu(r,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:r=>{if(e.vueFlowRef){const{x:i,y:s}=e.vueFlowRef.getBoundingClientRect(),a={x:r.x-i,y:r.y-s};return Cu(a,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:r=>{if(e.vueFlowRef){const{x:i,y:s}=e.vueFlowRef.getBoundingClientRect(),a={x:r.x+i,y:r.y+s};return ta(a,e.viewport)}return{x:0,y:0}}}:ED)}function qd(e,t=0,n=$D,o=()=>{}){const r=typeof t=="number"&&t>0;return r||o(),r?e.transition().duration(t).ease(n).on("end",o):e}function ND(){return{edgesChange:ke(),nodesChange:ke(),nodeDoubleClick:ke(),nodeClick:ke(),nodeMouseEnter:ke(),nodeMouseMove:ke(),nodeMouseLeave:ke(),nodeContextMenu:ke(),nodeDragStart:ke(),nodeDrag:ke(),nodeDragStop:ke(),nodesInitialized:ke(),miniMapNodeClick:ke(),miniMapNodeDoubleClick:ke(),miniMapNodeMouseEnter:ke(),miniMapNodeMouseMove:ke(),miniMapNodeMouseLeave:ke(),connect:ke(),connectStart:ke(),connectEnd:ke(),clickConnectStart:ke(),clickConnectEnd:ke(),paneReady:ke(),init:ke(),move:ke(),moveStart:ke(),moveEnd:ke(),selectionDragStart:ke(),selectionDrag:ke(),selectionDragStop:ke(),selectionContextMenu:ke(),selectionStart:ke(),selectionEnd:ke(),viewportChangeStart:ke(),viewportChange:ke(),viewportChangeEnd:ke(),paneScroll:ke(),paneClick:ke(),paneContextMenu:ke(),paneMouseEnter:ke(),paneMouseMove:ke(),paneMouseLeave:ke(),edgeContextMenu:ke(),edgeMouseEnter:ke(),edgeMouseMove:ke(),edgeMouseLeave:ke(),edgeDoubleClick:ke(),edgeClick:ke(),edgeUpdateStart:ke(),edgeUpdate:ke(),edgeUpdateEnd:ke(),updateNodeInternals:ke(),error:ke(e=>Fc(e.message))}}function T1(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:b1.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:x1.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:w1.Bezier,style:{}},connectionMode:Bc.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:by()?"Meta":"Control",zoomActivationKeyCode:by()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:ND(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const kD=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function CD(e,t,n){const o=SD(e),r=g=>{const p=g??[];e.hooks.updateNodeInternals.trigger(p)},i=g=>q5(g,e.nodes,e.edges),s=g=>j5(g,e.nodes,e.edges),a=g=>k1(g,e.edges),l=({id:g,type:p,nodeId:$})=>{var _;const y=g?`-${p}-${g}`:`-${p}`;return Array.from(((_=e.connectionLookup.get(`${$}${y}`))==null?void 0:_.values())??[])},u=g=>{if(g)return t.value.get(g)},c=g=>{if(g)return n.value.get(g)},d=(g,p,$)=>{var _,y;const k=[];for(const E of g){const M={id:E.id,type:"position",dragging:$,from:E.from};if(p&&(M.position=E.position,E.parentNode)){const V=u(E.parentNode);M.position={x:M.position.x-(((_=V?.computedPosition)==null?void 0:_.x)??0),y:M.position.y-(((y=V?.computedPosition)==null?void 0:y.y)??0)}}k.push(M)}k?.length&&e.hooks.nodesChange.trigger(k)},f=g=>{if(!e.vueFlowRef)return;const p=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!p)return;const $=window.getComputedStyle(p),{m22:_}=new window.DOMMatrixReadOnly($.transform),y=[];for(const k of g){const E=k,M=u(E.id);if(M){const V=Mg(E.nodeElement);if(!!(V.width&&V.height&&(M.dimensions.width!==V.width||M.dimensions.height!==V.height||E.forceUpdate))){const K=E.nodeElement.getBoundingClientRect();M.dimensions=V,M.handleBounds.source=$y("source",E.nodeElement,K,_,M.id),M.handleBounds.target=$y("target",E.nodeElement,K,_,M.id),y.push({id:M.id,type:"dimensions",dimensions:V})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&o.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),y.length&&e.hooks.nodesChange.trigger(y)},h=(g,p)=>{const $=new Set,_=new Set;for(const E of g)mr(E)?$.add(E.id):Wo(E)&&_.add(E.id);const y=Fr(t.value,$,!0),k=Fr(n.value,_);if(e.multiSelectionActive){for(const E of $)y.push(To(E,p));for(const E of _)k.push(To(E,p))}y.length&&e.hooks.nodesChange.trigger(y),k.length&&e.hooks.edgesChange.trigger(k)},m=g=>{if(e.multiSelectionActive){const p=g.map($=>To($.id,!0));e.hooks.nodesChange.trigger(p);return}e.hooks.nodesChange.trigger(Fr(t.value,new Set(g.map(p=>p.id)),!0)),e.hooks.edgesChange.trigger(Fr(n.value))},v=g=>{if(e.multiSelectionActive){const p=g.map($=>To($.id,!0));e.hooks.edgesChange.trigger(p);return}e.hooks.edgesChange.trigger(Fr(n.value,new Set(g.map(p=>p.id)))),e.hooks.nodesChange.trigger(Fr(t.value,new Set,!0))},b=g=>{h(g,!0)},x=g=>{const $=(g||e.nodes).map(_=>(_.selected=!1,To(_.id,!1)));e.hooks.nodesChange.trigger($)},N=g=>{const $=(g||e.edges).map(_=>(_.selected=!1,To(_.id,!1)));e.hooks.edgesChange.trigger($)},S=g=>{if(!g||!g.length)return h([],!1);const p=g.reduce(($,_)=>{const y=To(_.id,!1);return mr(_)?$.nodes.push(y):$.edges.push(y),$},{nodes:[],edges:[]});p.nodes.length&&e.hooks.nodesChange.trigger(p.nodes),p.edges.length&&e.hooks.edgesChange.trigger(p.edges)},A=g=>{var p;(p=e.d3Zoom)==null||p.scaleExtent([g,e.maxZoom]),e.minZoom=g},G=g=>{var p;(p=e.d3Zoom)==null||p.scaleExtent([e.minZoom,g]),e.maxZoom=g},W=g=>{var p;(p=e.d3Zoom)==null||p.translateExtent(g),e.translateExtent=g},Z=g=>{e.nodeExtent=g,r()},z=g=>{var p;(p=e.d3Zoom)==null||p.clickDistance(g)},j=g=>{e.nodesDraggable=g,e.nodesConnectable=g,e.elementsSelectable=g},H=g=>{const p=g instanceof Function?g(e.nodes):g;!e.initialized&&!p.length||(e.nodes=Ey(p,u,e.hooks.error.trigger))},D=g=>{const p=g instanceof Function?g(e.edges):g;if(!e.initialized&&!p.length)return;const $=jd(p,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);Wd(e.connectionLookup,n.value,$),e.edges=$},I=g=>{const p=g instanceof Function?g([...e.nodes,...e.edges]):g;!e.initialized&&!p.length||(H(p.filter(mr)),D(p.filter(Wo)))},R=g=>{let p=g instanceof Function?g(e.nodes):g;p=Array.isArray(p)?p:[p];const $=Ey(p,u,e.hooks.error.trigger),_=[];for(const y of $)_.push(py(y));_.length&&e.hooks.nodesChange.trigger(_)},w=g=>{let p=g instanceof Function?g(e.edges):g;p=Array.isArray(p)?p:[p];const $=jd(p,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),_=[];for(const y of $)_.push(py(y));_.length&&e.hooks.edgesChange.trigger(_)},O=(g,p=!0,$=!1)=>{const _=g instanceof Function?g(e.nodes):g,y=Array.isArray(_)?_:[_],k=[],E=[];function M(U){const K=a(U);for(const te of K)(!Ut(te.deletable)||te.deletable)&&E.push(yy(te.id,te.source,te.target,te.sourceHandle,te.targetHandle))}function V(U){const K=[];for(const te of e.nodes)te.parentNode===U&&K.push(te);if(K.length){for(const te of K)k.push(my(te.id));p&&M(K);for(const te of K)V(te.id)}}for(const U of y){const K=typeof U=="string"?u(U):U;K&&(Ut(K.deletable)&&!K.deletable||(k.push(my(K.id)),p&&M([K]),$&&V(K.id)))}E.length&&e.hooks.edgesChange.trigger(E),k.length&&e.hooks.nodesChange.trigger(k)},C=g=>{const p=g instanceof Function?g(e.edges):g,$=Array.isArray(p)?p:[p],_=[];for(const y of $){const k=typeof y=="string"?c(y):y;k&&(Ut(k.deletable)&&!k.deletable||_.push(yy(typeof y=="string"?y:y.id,k.source,k.target,k.sourceHandle,k.targetHandle)))}e.hooks.edgesChange.trigger(_)},F=(g,p,$=!0)=>{const _=c(g.id);if(!_)return!1;const y=e.edges.indexOf(_),k=yD(g,p,_,$,e.hooks.error.trigger);if(k){const[E]=jd([k],e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);return e.edges=e.edges.map((M,V)=>V===y?E:M),Wd(e.connectionLookup,n.value,[E]),E}return!1},Y=(g,p,$={replace:!1})=>{const _=c(g);if(!_)return;const y=typeof p=="function"?p(_):p;_.data=$.replace?y:{..._.data,...y}},Q=g=>gy(g,e.nodes),q=g=>{const p=gy(g,e.edges);return Wd(e.connectionLookup,n.value,p),p},ne=(g,p,$={replace:!1})=>{const _=u(g);if(!_)return;const y=typeof p=="function"?p(_):p;$.replace?e.nodes.splice(e.nodes.indexOf(_),1,y):Object.assign(_,y)},ae=(g,p,$={replace:!1})=>{const _=u(g);if(!_)return;const y=typeof p=="function"?p(_):p;_.data=$.replace?y:{..._.data,...y}},fe=(g,p,$=!1)=>{$?e.connectionClickStartHandle=g:e.connectionStartHandle=g,e.connectionEndHandle=null,e.connectionStatus=null,p&&(e.connectionPosition=p)},se=(g,p=null,$=null)=>{e.connectionStartHandle&&(e.connectionPosition=g,e.connectionEndHandle=p,e.connectionStatus=$)},pe=(g,p)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,p?e.connectionClickStartHandle=null:e.connectionStartHandle=null},le=g=>{const p=X5(g),$=p?null:us(g)?g:u(g.id);return!p&&!$?[null,null,p]:[p?g:Nu($),$,p]},ee=(g,p=!0,$=e.nodes)=>{const[_,y,k]=le(g);if(!_)return[];const E=[];for(const M of $||e.nodes){if(!k&&(M.id===y.id||!M.computedPosition))continue;const V=Nu(M),U=ku(V,_);(p&&U>0||U>=V.width*V.height||U>=Number(_.width)*Number(_.height))&&E.push(M)}return E},re=(g,p,$=!0)=>{const[_]=le(g);if(!_)return!1;const y=ku(_,p);return $&&y>0||y>=Number(_.width)*Number(_.height)},oe=g=>{const{viewport:p,dimensions:$,d3Zoom:_,d3Selection:y,translateExtent:k}=e;if(!_||!y||!g.x&&!g.y)return!1;const E=sh.translate(p.x+g.x,p.y+g.y).scale(p.zoom),M=[[0,0],[$.width,$.height]],V=_.constrain()(E,M,k),U=e.viewport.x!==V.x||e.viewport.y!==V.y||e.viewport.zoom!==V.k;return _.transform(y,V),U},ce=g=>{const p=g instanceof Function?g(e):g,$=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];Ut(p.defaultEdgeOptions)&&(e.defaultEdgeOptions=p.defaultEdgeOptions);const _=p.modelValue||p.nodes||p.edges?[]:void 0;_&&(p.modelValue&&_.push(...p.modelValue),p.nodes&&_.push(...p.nodes),p.edges&&_.push(...p.edges),I(_));const y=()=>{Ut(p.maxZoom)&&G(p.maxZoom),Ut(p.minZoom)&&A(p.minZoom),Ut(p.translateExtent)&&W(p.translateExtent)};for(const k of Object.keys(p)){const E=k,M=p[E];![...kD,...$].includes(E)&&Ut(M)&&(e[E]=M)}Wm(()=>e.d3Zoom).not.toBeNull().then(y),e.initialized||(e.initialized=!0)};return{updateNodePositions:d,updateNodeDimensions:f,setElements:I,setNodes:H,setEdges:D,addNodes:R,addEdges:w,removeNodes:O,removeEdges:C,findNode:u,findEdge:c,updateEdge:F,updateEdgeData:Y,updateNode:ne,updateNodeData:ae,applyEdgeChanges:q,applyNodeChanges:Q,addSelectedElements:b,addSelectedNodes:m,addSelectedEdges:v,setMinZoom:A,setMaxZoom:G,setTranslateExtent:W,setNodeExtent:Z,setPaneClickDistance:z,removeSelectedElements:S,removeSelectedNodes:x,removeSelectedEdges:N,startConnection:fe,updateConnection:se,endConnection:pe,setInteractive:j,setState:ce,getIntersectingNodes:ee,getIncomers:i,getOutgoers:s,getConnectedEdges:a,getHandleConnections:l,isNodeIntersecting:re,panBy:oe,fitView:g=>o.value.fitView(g),zoomIn:g=>o.value.zoomIn(g),zoomOut:g=>o.value.zoomOut(g),zoomTo:(g,p)=>o.value.zoomTo(g,p),setViewport:(g,p)=>o.value.setViewport(g,p),setTransform:(g,p)=>o.value.setTransform(g,p),getViewport:()=>o.value.getViewport(),getTransform:()=>o.value.getTransform(),setCenter:(g,p,$)=>o.value.setCenter(g,p,$),fitBounds:(g,p)=>o.value.fitBounds(g,p),project:g=>o.value.project(g),screenToFlowCoordinate:g=>o.value.screenToFlowCoordinate(g),flowToScreenCoordinate:g=>o.value.flowToScreenCoordinate(g),toObject:()=>{const g=[],p=[];for(const $ of e.nodes){const{computedPosition:_,handleBounds:y,selected:k,dimensions:E,isParent:M,resizing:V,dragging:U,events:K,...te}=$;g.push(te)}for(const $ of e.edges){const{selected:_,sourceNode:y,targetNode:k,events:E,...M}=$;p.push(M)}return JSON.parse(JSON.stringify({nodes:g,edges:p,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:g=>new Promise(p=>{const{nodes:$,edges:_,position:y,zoom:k,viewport:E}=g;if($&&H($),_&&D(_),E?.x&&E?.y||y){const M=E?.x||y[0],V=E?.y||y[1],U=E?.zoom||k||e.viewport.zoom;return Wm(()=>o.value.viewportInitialized).toBe(!0).then(()=>{o.value.setViewport({x:M,y:V,zoom:U}).then(()=>{p(!0)})})}else p(!0)}),updateNodeInternals:r,viewportHelper:o,$reset:()=>{const g=T1();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const p=sh.translate(g.defaultViewport.x??0,g.defaultViewport.y??0).scale(Ti(g.defaultViewport.zoom??1,g.minZoom,g.maxZoom)),$=e.viewportRef.getBoundingClientRect(),_=[[0,0],[$.width,$.height]],y=e.d3Zoom.constrain()(p,_,g.translateExtent);e.d3Zoom.transform(e.d3Selection,y)}ce(g)},$destroy:()=>{}}}const ID=["data-id","data-handleid","data-nodeid","data-handlepos"],TD={name:"Handle",compatConfig:{MODE:3}},Iu=Ne({...TD,props:{id:{default:null},type:{},position:{default:()=>Te.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=bc(e,["position","connectable","connectableStart","connectableEnd","id"]),o=Oe(()=>n.type??"source"),r=Oe(()=>n.isValidConnection??null),{id:i,connectionStartHandle:s,connectionClickStartHandle:a,connectionEndHandle:l,vueFlowRef:u,nodesConnectable:c,noDragClassName:d,noPanClassName:f}=Yc(),{id:h,node:m,nodeEl:v,connectedEdges:b}=xD(),x=de(),N=Oe(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),S=Oe(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),A=Oe(()=>{var D,I,R,w,O,C;return((D=s.value)==null?void 0:D.nodeId)===h&&((I=s.value)==null?void 0:I.id)===e.id&&((R=s.value)==null?void 0:R.type)===o.value||((w=l.value)==null?void 0:w.nodeId)===h&&((O=l.value)==null?void 0:O.id)===e.id&&((C=l.value)==null?void 0:C.type)===o.value}),G=Oe(()=>{var D,I,R;return((D=a.value)==null?void 0:D.nodeId)===h&&((I=a.value)==null?void 0:I.id)===e.id&&((R=a.value)==null?void 0:R.type)===o.value}),{handlePointerDown:W,handleClick:Z}=bD({nodeId:h,handleId:e.id,isValidConnection:r,type:o}),z=J(()=>typeof e.connectable=="string"&&e.connectable==="single"?!b.value.some(D=>{const I=D[`${o.value}Handle`];return D[o.value]!==h?!1:I?I===e.id:!0}):typeof e.connectable=="number"?b.value.filter(D=>{const I=D[`${o.value}Handle`];return D[o.value]!==h?!1:I?I===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(m,b.value):Ut(e.connectable)?e.connectable:c.value);tt(()=>{var D;if(!m.dimensions.width||!m.dimensions.height)return;const I=(D=m.handleBounds[o.value])==null?void 0:D.find(Q=>Q.id===e.id);if(!u.value||I)return;const R=u.value.querySelector(".vue-flow__transformationpane");if(!v.value||!x.value||!R||!e.id)return;const w=v.value.getBoundingClientRect(),O=x.value.getBoundingClientRect(),C=window.getComputedStyle(R),{m22:F}=new window.DOMMatrixReadOnly(C.transform),Y={id:e.id,position:e.position,x:(O.left-w.left)/F,y:(O.top-w.top)/F,type:o.value,nodeId:h,...Mg(x.value)};m.handleBounds[o.value]=[...m.handleBounds[o.value]??[],Y]});function j(D){const I=Og(D);z.value&&N.value&&(I&&D.button===0||!I)&&W(D)}function H(D){!h||!a.value&&!N.value||z.value&&Z(D)}return t({handleClick:Z,handlePointerDown:W,onClick:H,onPointerDown:j}),(D,I)=>(L(),X("div",{ref_key:"handle",ref:x,"data-id":`${ie(i)}-${ie(h)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":ie(h),"data-handlepos":D.position,class:We(["vue-flow__handle",[`vue-flow__handle-${D.position}`,`vue-flow__handle-${e.id}`,ie(d),ie(f),o.value,{connectable:z.value,connecting:G.value,connectablestart:N.value,connectableend:S.value,connectionindicator:z.value&&(N.value&&!A.value||S.value&&A.value)}]]),onMousedown:j,onTouchstartPassive:j,onClick:H},[Qe(D.$slots,"default",{id:D.id})],42,ID))}}),Lc=function({sourcePosition:e=Te.Bottom,targetPosition:t=Te.Top,label:n,connectable:o=!0,isValidTargetPos:r,isValidSourcePos:i,data:s}){const a=s.label??n;return[_e(Iu,{type:"target",position:t,connectable:o,isValidConnection:r}),typeof a!="string"&&a?_e(a):_e(xe,[a]),_e(Iu,{type:"source",position:e,connectable:o,isValidConnection:i})]};Lc.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];Lc.inheritAttrs=!1;Lc.compatConfig={MODE:3};const AD=Lc,Uc=function({targetPosition:e=Te.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:r}){const i=r.label??t;return[_e(Iu,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof i!="string"&&i?_e(i):_e(xe,[i])]};Uc.props=["targetPosition","label","isValidTargetPos","connectable","data"];Uc.inheritAttrs=!1;Uc.compatConfig={MODE:3};const MD=Uc,Gc=function({sourcePosition:e=Te.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:r}){const i=r.label??t;return[typeof i!="string"&&i?_e(i):_e(xe,[i]),_e(Iu,{type:"source",position:e,connectable:n,isValidConnection:o})]};Gc.props=["sourcePosition","label","isValidSourcePos","connectable","data"];Gc.inheritAttrs=!1;Gc.compatConfig={MODE:3};const DD=Gc,OD=["transform"],PD=["width","height","x","y","rx","ry"],RD=["y"],zD={name:"EdgeText",compatConfig:{MODE:3}},VD=Ne({...zD,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=de({x:0,y:0,width:0,height:0}),n=de(null),o=J(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);tt(r),Se([()=>e.x,()=>e.y,n,()=>e.label],r);function r(){if(!n.value)return;const i=n.value.getBBox();(i.width!==t.value.width||i.height!==t.value.height)&&(t.value=i)}return(i,s)=>(L(),X("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[i.labelShowBg?(L(),X("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*i.labelBgPadding[0]}px`,height:`${t.value.height+2*i.labelBgPadding[1]}px`,x:-i.labelBgPadding[0],y:-i.labelBgPadding[1],style:qe(i.labelBgStyle),rx:i.labelBgBorderRadius,ry:i.labelBgBorderRadius},null,12,PD)):ve("",!0),T("text",dn(i.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:i.labelStyle}),[Qe(i.$slots,"default",{},()=>[typeof i.label!="string"?(L(),Ye(Kt(i.label),{key:0})):(L(),X(xe,{key:1},[Ze(ye(i.label),1)],64))])],16,RD)],8,OD))}}),HD=["id","d","marker-end","marker-start"],BD=["d","stroke-width"],FD={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},Zc=Ne({...FD,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=de(null),o=de(null),r=de(null),i=Li();return t({pathEl:n,interactionEl:o,labelEl:r}),(s,a)=>(L(),X(xe,null,[T("path",dn(ie(i),{id:s.id,ref_key:"pathEl",ref:n,d:s.path,class:"vue-flow__edge-path","marker-end":s.markerEnd,"marker-start":s.markerStart}),null,16,HD),s.interactionWidth?(L(),X("path",{key:0,ref_key:"interactionEl",ref:o,fill:"none",d:s.path,"stroke-width":s.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,BD)):ve("",!0),s.label&&s.labelX&&s.labelY?(L(),Ye(VD,{key:1,ref_key:"labelEl",ref:r,x:s.labelX,y:s.labelY,label:s.label,"label-show-bg":s.labelShowBg,"label-bg-style":s.labelBgStyle,"label-bg-padding":s.labelBgPadding,"label-bg-border-radius":s.labelBgBorderRadius,"label-style":s.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):ve("",!0)],64))}});function A1({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,s=Math.abs(o-t)/2,a=o<t?o+s:o-s;return[i,a,r,s]}function M1({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:s,targetControlY:a}){const l=e*.125+r*.375+s*.375+n*.125,u=t*.125+i*.375+a*.375+o*.125,c=Math.abs(l-e),d=Math.abs(u-t);return[l,u,c,d]}function ol(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function ky({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){let s,a;switch(e){case Te.Left:s=t-ol(t-o,i),a=n;break;case Te.Right:s=t+ol(o-t,i),a=n;break;case Te.Top:s=t,a=n-ol(n-r,i);break;case Te.Bottom:s=t,a=n+ol(r-n,i);break}return[s,a]}function LD(e){const{sourceX:t,sourceY:n,sourcePosition:o=Te.Bottom,targetX:r,targetY:i,targetPosition:s=Te.Top,curvature:a=.25}=e,[l,u]=ky({pos:o,x1:t,y1:n,x2:r,y2:i,c:a}),[c,d]=ky({pos:s,x1:r,y1:i,x2:t,y2:n,c:a}),[f,h,m,v]=M1({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:c,targetControlY:d});return[`M${t},${n} C${l},${u} ${c},${d} ${r},${i}`,f,h,m,v]}function Cy({pos:e,x1:t,y1:n,x2:o,y2:r}){let i,s;switch(e){case Te.Left:case Te.Right:i=.5*(t+o),s=n;break;case Te.Top:case Te.Bottom:i=t,s=.5*(n+r);break}return[i,s]}function UD(e){const{sourceX:t,sourceY:n,sourcePosition:o=Te.Bottom,targetX:r,targetY:i,targetPosition:s=Te.Top}=e,[a,l]=Cy({pos:o,x1:t,y1:n,x2:r,y2:i}),[u,c]=Cy({pos:s,x1:r,y1:i,x2:t,y2:n}),[d,f,h,m]=M1({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${t},${n} C${a},${l} ${u},${c} ${r},${i}`,d,f,h,m]}const Iy={[Te.Left]:{x:-1,y:0},[Te.Right]:{x:1,y:0},[Te.Top]:{x:0,y:-1},[Te.Bottom]:{x:0,y:1}};function GD({source:e,sourcePosition:t=Te.Bottom,target:n}){return t===Te.Left||t===Te.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function Ty(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function ZD({source:e,sourcePosition:t=Te.Bottom,target:n,targetPosition:o=Te.Top,center:r,offset:i}){const s=Iy[t],a=Iy[o],l={x:e.x+s.x*i,y:e.y+s.y*i},u={x:n.x+a.x*i,y:n.y+a.y*i},c=GD({source:l,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",f=c[d];let h,m,v;const b={x:0,y:0},x={x:0,y:0},[N,S,A,G]=A1({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[d]*a[d]===-1){m=r.x??N,v=r.y??S;const Z=[{x:m,y:l.y},{x:m,y:u.y}],z=[{x:l.x,y:v},{x:u.x,y:v}];s[d]===f?h=d==="x"?Z:z:h=d==="x"?z:Z}else{const Z=[{x:l.x,y:u.y}],z=[{x:u.x,y:l.y}];if(d==="x"?h=s.x===f?z:Z:h=s.y===f?Z:z,t===o){const R=Math.abs(e[d]-n[d]);if(R<=i){const w=Math.min(i-1,i-R);s[d]===f?b[d]=(l[d]>e[d]?-1:1)*w:x[d]=(u[d]>n[d]?-1:1)*w}}if(t!==o){const R=d==="x"?"y":"x",w=s[d]===a[R],O=l[R]>u[R],C=l[R]<u[R];(s[d]===1&&(!w&&O||w&&C)||s[d]!==1&&(!w&&C||w&&O))&&(h=d==="x"?Z:z)}const j={x:l.x+b.x,y:l.y+b.y},H={x:u.x+x.x,y:u.y+x.y},D=Math.max(Math.abs(j.x-h[0].x),Math.abs(H.x-h[0].x)),I=Math.max(Math.abs(j.y-h[0].y),Math.abs(H.y-h[0].y));D>=I?(m=(j.x+H.x)/2,v=h[0].y):(m=h[0].x,v=(j.y+H.y)/2)}return[[e,{x:l.x+b.x,y:l.y+b.y},...h,{x:u.x+x.x,y:u.y+x.y},n],m,v,A,G]}function YD(e,t,n,o){const r=Math.min(Ty(e,t)/2,Ty(t,n)/2,o),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${i+r*u},${s}Q ${i},${s} ${i},${s+r*c}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${i},${s+r*l}Q ${i},${s} ${i+r*a},${s}`}function XD(e){const{sourceX:t,sourceY:n,sourcePosition:o=Te.Bottom,targetX:r,targetY:i,targetPosition:s=Te.Top,borderRadius:a=5,centerX:l,centerY:u,offset:c=20}=e,[d,f,h,m,v]=ZD({source:{x:t,y:n},sourcePosition:o,target:{x:r,y:i},targetPosition:s,center:{x:l,y:u},offset:c});return[d.reduce((x,N,S)=>{let A;return S>0&&S<d.length-1?A=YD(d[S-1],N,d[S+1],a):A=`${S===0?"M":"L"}${N.x} ${N.y}`,x+=A,x},""),f,h,m,v]}function WD(e){const{sourceX:t,sourceY:n,targetX:o,targetY:r}=e,[i,s,a,l]=A1({sourceX:t,sourceY:n,targetX:o,targetY:r});return[`M ${t},${n}L ${o},${r}`,i,s,a,l]}const jD=Ne({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=WD(e);return _e(Zc,{path:n,labelX:o,labelY:r,...t,...e})}}}),qD=jD,KD=Ne({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=XD({...e,sourcePosition:e.sourcePosition??Te.Bottom,targetPosition:e.targetPosition??Te.Top});return _e(Zc,{path:n,labelX:o,labelY:r,...t,...e})}}}),D1=KD,JD=Ne({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>_e(D1,{...e,...t,borderRadius:0})}}),QD=JD,eO=Ne({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=LD({...e,sourcePosition:e.sourcePosition??Te.Bottom,targetPosition:e.targetPosition??Te.Top});return _e(Zc,{path:n,labelX:o,labelY:r,...t,...e})}}}),tO=eO,nO=Ne({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=UD({...e,sourcePosition:e.sourcePosition??Te.Bottom,targetPosition:e.targetPosition??Te.Top});return _e(Zc,{path:n,labelX:o,labelY:r,...t,...e})}}}),oO=nO,rO={input:DD,default:AD,output:MD},iO={default:tO,straight:qD,step:QD,smoothstep:D1,simplebezier:oO};function sO(e,t,n){const o=J(()=>v=>t.value.get(v)),r=J(()=>v=>n.value.get(v)),i=J(()=>{const v={...iO,...e.edgeTypes},b=Object.keys(v);for(const x of e.edges)x.type&&!b.includes(x.type)&&(v[x.type]=x.type);return v}),s=J(()=>{const v={...rO,...e.nodeTypes},b=Object.keys(v);for(const x of e.nodes)x.type&&!b.includes(x.type)&&(v[x.type]=x.type);return v}),a=J(()=>e.onlyRenderVisibleElements?tD(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),l=J(()=>{if(e.onlyRenderVisibleElements){const v=[];for(const b of e.edges){const x=t.value.get(b.source),N=t.value.get(b.target);iD({sourcePos:x.computedPosition||{x:0,y:0},targetPos:N.computedPosition||{x:0,y:0},sourceWidth:x.dimensions.width,sourceHeight:x.dimensions.height,targetWidth:N.dimensions.width,targetHeight:N.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&v.push(b)}return v}return e.edges}),u=J(()=>[...a.value,...l.value]),c=J(()=>{const v=[];for(const b of e.nodes)b.selected&&v.push(b);return v}),d=J(()=>{const v=[];for(const b of e.edges)b.selected&&v.push(b);return v}),f=J(()=>[...c.value,...d.value]),h=J(()=>{const v=[];for(const b of e.nodes)b.dimensions.width&&b.dimensions.height&&b.handleBounds!==void 0&&v.push(b);return v}),m=J(()=>a.value.length>0&&h.value.length===a.value.length);return{getNode:o,getEdge:r,getElements:u,getEdgeTypes:i,getNodeTypes:s,getEdges:l,getNodes:a,getSelectedElements:f,getSelectedNodes:c,getSelectedEdges:d,getNodesInitialized:h,areNodesInitialized:m}}let aO=class qr{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=jt())==null?void 0:t.appContext.app,o=n?.config.globalProperties.$vueFlowStorage??qr.instance;return qr.instance=o??new qr,n&&(n.config.globalProperties.$vueFlowStorage=qr.instance),qr.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=T1(),r=wo(o),i={};for(const[f,h]of Object.entries(r.hooks)){const m=`on${f.charAt(0).toUpperCase()+f.slice(1)}`;i[m]=h.on}const s={};for(const[f,h]of Object.entries(r.hooks))s[f]=h.trigger;const a=J(()=>{const f=new Map;for(const h of r.nodes)f.set(h.id,h);return f}),l=J(()=>{const f=new Map;for(const h of r.edges)f.set(h.id,h);return f}),u=sO(r,a,l),c=CD(r,a,l);c.setState({...r,...n});const d={...i,...u,...c,...x4(r),nodeLookup:a,edgeLookup:l,emits:s,id:t,vueFlowVersion:"1.47.0",$destroy:()=>{this.remove(t)}};return this.set(t,d),d}getId(){return`vue-flow-${this.currentId++}`}};function Yc(e){const t=aO.getInstance(),n=Gn(),o={id:e},r=o.id,i=r??n?.vueFlowId;let s;if(n){const a=ot(Ny,null);typeof a<"u"&&a!==null&&(!i||a.id===i)&&(s=a)}if(s||i&&(s=t.get(i)),!s||i&&s.id!==i){const a=r??t.getId(),l=t.create(a,o);s=l,(n??Dr(!0)).run(()=>{Se(l.applyDefault,(c,d,f)=>{const h=v=>{l.applyNodeChanges(v)},m=v=>{l.applyEdgeChanges(v)};c?(l.onNodesChange(h),l.onEdgesChange(m)):(l.hooks.value.nodesChange.off(h),l.hooks.value.edgesChange.off(m)),f(()=>{l.hooks.value.nodesChange.off(h),l.hooks.value.edgesChange.off(m)})},{immediate:!0}),Ww(()=>{if(s){const c=t.get(s.id);c?c.$destroy():Fc(`No store instance found for id ${s.id} in storage.`)}})})}return n&&(Ht(Ny,s),n.vueFlowId=s.id),s}var On=(e=>(e.Lines="lines",e.Dots="dots",e))(On||{});const O1=function({dimensions:e,size:t,color:n}){return _e("path",{stroke:n,"stroke-width":t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})},P1=function({radius:e,color:t}){return _e("circle",{cx:e,cy:e,r:e,fill:t})};On.Lines+"",On.Dots+"";const lO={[On.Dots]:"#81818a",[On.Lines]:"#eee"},uO=["id","x","y","width","height","patternTransform"],cO={key:2,height:"100",width:"100"},dO=["fill"],fO=["x","y","fill"],hO={name:"Background",compatConfig:{MODE:3}},gO=Ne({...hO,props:{id:{},variant:{default:()=>On.Dots},gap:{default:20},size:{default:1},lineWidth:{default:1},patternColor:{},color:{},bgColor:{},height:{default:100},width:{default:100},x:{default:0},y:{default:0},offset:{default:0}},setup(e){const{id:t,viewport:n}=Yc(),o=J(()=>{const s=n.value.zoom,[a,l]=Array.isArray(e.gap)?e.gap:[e.gap,e.gap],u=[a*s||1,l*s||1],c=e.size*s,[d,f]=Array.isArray(e.offset)?e.offset:[e.offset,e.offset],h=[d*s||1+u[0]/2,f*s||1+u[1]/2];return{scaledGap:u,offset:h,size:c}}),r=Oe(()=>`pattern-${t}${e.id?`-${e.id}`:""}`),i=Oe(()=>e.color||e.patternColor||lO[e.variant||On.Dots]);return(s,a)=>(L(),X("svg",{class:"vue-flow__background vue-flow__container",style:qe({height:`${s.height>100?100:s.height}%`,width:`${s.width>100?100:s.width}%`})},[Qe(s.$slots,"pattern-container",{id:r.value},()=>[T("pattern",{id:r.value,x:ie(n).x%o.value.scaledGap[0],y:ie(n).y%o.value.scaledGap[1],width:o.value.scaledGap[0],height:o.value.scaledGap[1],patternTransform:`translate(-${o.value.offset[0]},-${o.value.offset[1]})`,patternUnits:"userSpaceOnUse"},[Qe(s.$slots,"pattern",{},()=>[s.variant===ie(On).Lines?(L(),Ye(ie(O1),{key:0,size:s.lineWidth,color:i.value,dimensions:o.value.scaledGap},null,8,["size","color","dimensions"])):s.variant===ie(On).Dots?(L(),Ye(ie(P1),{key:1,color:i.value,radius:o.value.size/2},null,8,["color","radius"])):ve("",!0),s.bgColor?(L(),X("svg",cO,[T("rect",{width:"100%",height:"100%",fill:s.bgColor},null,8,dO)])):ve("",!0)])],8,uO)]),T("rect",{x:s.x,y:s.y,width:"100%",height:"100%",fill:`url(#${r.value})`},null,8,fO),Qe(s.$slots,"default",{id:r.value})],4))}});function R1(e){return Gn()?(Fo(e),!0):!1}function Kr(e){return typeof e=="function"?e():ie(e)}function Ay(e,t=!1,n="Timeout"){return new Promise((o,r)=>{setTimeout(t?()=>r(n):o,e)})}function pO(e,t={}){if(!je(e))return _a(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=yc(()=>({get(){return e.value[o]},set(r){var i;if((i=Kr(t.replaceRef))!=null?i:!0)if(Array.isArray(e.value)){const a=[...e.value];a[o]=r,e.value=a}else{const a={...e.value,[o]:r};Object.setPrototypeOf(a,Object.getPrototypeOf(e.value)),e.value=a}else e.value[o]=r}}));return n}function ah(e,t=!1){function n(d,{flush:f="sync",deep:h=!1,timeout:m,throwOnTimeout:v}={}){let b=null;const N=[new Promise(S=>{b=Se(e,A=>{d(A)!==t&&(b?.(),S(A))},{flush:f,deep:h,immediate:!0})})];return m!=null&&N.push(Ay(m,v).then(()=>Kr(e)).finally(()=>b?.())),Promise.race(N)}function o(d,f){if(!je(d))return n(A=>A===d,f);const{flush:h="sync",deep:m=!1,timeout:v,throwOnTimeout:b}=f??{};let x=null;const S=[new Promise(A=>{x=Se([e,d],([G,W])=>{t!==(G===W)&&(x?.(),A(G))},{flush:h,deep:m,immediate:!0})})];return v!=null&&S.push(Ay(v,b).then(()=>Kr(e)).finally(()=>(x?.(),Kr(e)))),Promise.race(S)}function r(d){return n(f=>!!f,d)}function i(d){return o(null,d)}function s(d){return o(void 0,d)}function a(d){return n(Number.isNaN,d)}function l(d,f){return n(h=>{const m=Array.from(h);return m.includes(d)||m.includes(Kr(d))},f)}function u(d){return c(1,d)}function c(d=1,f){let h=-1;return n(()=>(h+=1,h>=d),f)}return Array.isArray(Kr(e))?{toMatch:n,toContains:l,changed:u,changedTimes:c,get not(){return ah(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:r,toBeNull:i,toBeNaN:a,toBeUndefined:s,changed:u,changedTimes:c,get not(){return ah(e,!t)}}}function My(e){return ah(e)}var mO={value:()=>{}};function z1(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Hl(n)}function Hl(e){this._=e}function yO(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Hl.prototype=z1.prototype={constructor:Hl,on:function(e,t){var n=this._,o=yO(e+"",n),r,i=-1,s=o.length;if(arguments.length<2){for(;++i<s;)if((r=(e=o[i]).type)&&(r=vO(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(r=(e=o[i]).type)n[r]=Dy(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Dy(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Hl(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};function vO(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function Dy(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=mO,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var lh="http://www.w3.org/1999/xhtml";const Oy={svg:"http://www.w3.org/2000/svg",xhtml:lh,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Xc(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Oy.hasOwnProperty(t)?{space:Oy[t],local:e}:e}function _O(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===lh&&t.documentElement.namespaceURI===lh?t.createElement(e):t.createElementNS(n,e)}}function bO(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function V1(e){var t=Xc(e);return(t.local?bO:_O)(t)}function wO(){}function Pg(e){return e==null?wO:function(){return this.querySelector(e)}}function xO(e){typeof e!="function"&&(e=Pg(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=new Array(s),l,u,c=0;c<s;++c)(l=i[c])&&(u=e.call(l,l.__data__,c,i))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new hn(o,this._parents)}function $O(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function EO(){return[]}function H1(e){return e==null?EO:function(){return this.querySelectorAll(e)}}function SO(e){return function(){return $O(e.apply(this,arguments))}}function NO(e){typeof e=="function"?e=SO(e):e=H1(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var s=t[i],a=s.length,l,u=0;u<a;++u)(l=s[u])&&(o.push(e.call(l,l.__data__,u,s)),r.push(l));return new hn(o,r)}function B1(e){return function(){return this.matches(e)}}function F1(e){return function(t){return t.matches(e)}}var kO=Array.prototype.find;function CO(e){return function(){return kO.call(this.children,e)}}function IO(){return this.firstElementChild}function TO(e){return this.select(e==null?IO:CO(typeof e=="function"?e:F1(e)))}var AO=Array.prototype.filter;function MO(){return Array.from(this.children)}function DO(e){return function(){return AO.call(this.children,e)}}function OO(e){return this.selectAll(e==null?MO:DO(typeof e=="function"?e:F1(e)))}function PO(e){typeof e!="function"&&(e=B1(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=[],l,u=0;u<s;++u)(l=i[u])&&e.call(l,l.__data__,u,i)&&a.push(l);return new hn(o,this._parents)}function L1(e){return new Array(e.length)}function RO(){return new hn(this._enter||this._groups.map(L1),this._parents)}function Tu(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Tu.prototype={constructor:Tu,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function zO(e){return function(){return e}}function VO(e,t,n,o,r,i){for(var s=0,a,l=t.length,u=i.length;s<u;++s)(a=t[s])?(a.__data__=i[s],o[s]=a):n[s]=new Tu(e,i[s]);for(;s<l;++s)(a=t[s])&&(r[s]=a)}function HO(e,t,n,o,r,i,s){var a,l,u=new Map,c=t.length,d=i.length,f=new Array(c),h;for(a=0;a<c;++a)(l=t[a])&&(f[a]=h=s.call(l,l.__data__,a,t)+"",u.has(h)?r[a]=l:u.set(h,l));for(a=0;a<d;++a)h=s.call(e,i[a],a,i)+"",(l=u.get(h))?(o[a]=l,l.__data__=i[a],u.delete(h)):n[a]=new Tu(e,i[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(f[a])===l&&(r[a]=l)}function BO(e){return e.__data__}function FO(e,t){if(!arguments.length)return Array.from(this,BO);var n=t?HO:VO,o=this._parents,r=this._groups;typeof e!="function"&&(e=zO(e));for(var i=r.length,s=new Array(i),a=new Array(i),l=new Array(i),u=0;u<i;++u){var c=o[u],d=r[u],f=d.length,h=LO(e.call(c,c&&c.__data__,u,o)),m=h.length,v=a[u]=new Array(m),b=s[u]=new Array(m),x=l[u]=new Array(f);n(c,d,v,b,x,h,t);for(var N=0,S=0,A,G;N<m;++N)if(A=v[N]){for(N>=S&&(S=N+1);!(G=b[S])&&++S<m;);A._next=G||null}}return s=new hn(s,o),s._enter=a,s._exit=l,s}function LO(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function UO(){return new hn(this._exit||this._groups.map(L1),this._parents)}function GO(e,t,n){var o=this.enter(),r=this,i=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function ZO(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,s=Math.min(r,i),a=new Array(r),l=0;l<s;++l)for(var u=n[l],c=o[l],d=u.length,f=a[l]=new Array(d),h,m=0;m<d;++m)(h=u[m]||c[m])&&(f[m]=h);for(;l<r;++l)a[l]=n[l];return new hn(a,this._parents)}function YO(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,i=o[r],s;--r>=0;)(s=o[r])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function XO(e){e||(e=WO);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var s=n[i],a=s.length,l=r[i]=new Array(a),u,c=0;c<a;++c)(u=s[c])&&(l[c]=u);l.sort(t)}return new hn(r,this._parents).order()}function WO(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function jO(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function qO(){return Array.from(this)}function KO(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var s=o[r];if(s)return s}return null}function JO(){let e=0;for(const t of this)++e;return e}function QO(){return!this.node()}function eP(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],i=0,s=r.length,a;i<s;++i)(a=r[i])&&e.call(a,a.__data__,i,r);return this}function tP(e){return function(){this.removeAttribute(e)}}function nP(e){return function(){this.removeAttributeNS(e.space,e.local)}}function oP(e,t){return function(){this.setAttribute(e,t)}}function rP(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function iP(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function sP(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function aP(e,t){var n=Xc(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?nP:tP:typeof t=="function"?n.local?sP:iP:n.local?rP:oP)(n,t))}function U1(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function lP(e){return function(){this.style.removeProperty(e)}}function uP(e,t,n){return function(){this.style.setProperty(e,t,n)}}function cP(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function dP(e,t,n){return arguments.length>1?this.each((t==null?lP:typeof t=="function"?cP:uP)(e,t,n??"")):Ai(this.node(),e)}function Ai(e,t){return e.style.getPropertyValue(t)||U1(e).getComputedStyle(e,null).getPropertyValue(t)}function fP(e){return function(){delete this[e]}}function hP(e,t){return function(){this[e]=t}}function gP(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function pP(e,t){return arguments.length>1?this.each((t==null?fP:typeof t=="function"?gP:hP)(e,t)):this.node()[e]}function G1(e){return e.trim().split(/^|\s+/)}function Rg(e){return e.classList||new Z1(e)}function Z1(e){this._node=e,this._names=G1(e.getAttribute("class")||"")}Z1.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Y1(e,t){for(var n=Rg(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function X1(e,t){for(var n=Rg(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function mP(e){return function(){Y1(this,e)}}function yP(e){return function(){X1(this,e)}}function vP(e,t){return function(){(t.apply(this,arguments)?Y1:X1)(this,e)}}function _P(e,t){var n=G1(e+"");if(arguments.length<2){for(var o=Rg(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?vP:t?mP:yP)(n,t))}function bP(){this.textContent=""}function wP(e){return function(){this.textContent=e}}function xP(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function $P(e){return arguments.length?this.each(e==null?bP:(typeof e=="function"?xP:wP)(e)):this.node().textContent}function EP(){this.innerHTML=""}function SP(e){return function(){this.innerHTML=e}}function NP(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function kP(e){return arguments.length?this.each(e==null?EP:(typeof e=="function"?NP:SP)(e)):this.node().innerHTML}function CP(){this.nextSibling&&this.parentNode.appendChild(this)}function IP(){return this.each(CP)}function TP(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function AP(){return this.each(TP)}function MP(e){var t=typeof e=="function"?e:V1(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function DP(){return null}function OP(e,t){var n=typeof e=="function"?e:V1(e),o=t==null?DP:typeof t=="function"?t:Pg(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function PP(){var e=this.parentNode;e&&e.removeChild(this)}function RP(){return this.each(PP)}function zP(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function VP(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function HP(e){return this.select(e?VP:zP)}function BP(e){return arguments.length?this.property("__data__",e):this.node().__data__}function FP(e){return function(t){e.call(this,t,this.__data__)}}function LP(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function UP(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++o]=i;++o?t.length=o:delete this.__on}}}function GP(e,t,n){return function(){var o=this.__on,r,i=FP(t);if(o){for(var s=0,a=o.length;s<a;++s)if((r=o[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function ZP(e,t,n){var o=LP(e+""),r,i=o.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(r=0,c=a[l];r<i;++r)if((s=o[r]).type===c.type&&s.name===c.name)return c.value}return}for(a=t?GP:UP,r=0;r<i;++r)this.each(a(o[r],t,n));return this}function W1(e,t,n){var o=U1(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function YP(e,t){return function(){return W1(this,e,t)}}function XP(e,t){return function(){return W1(this,e,t.apply(this,arguments))}}function WP(e,t){return this.each((typeof t=="function"?XP:YP)(e,t))}function*jP(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length,s;r<i;++r)(s=o[r])&&(yield s)}var qP=[null];function hn(e,t){this._groups=e,this._parents=t}function Ca(){return new hn([[document.documentElement]],qP)}function KP(){return this}hn.prototype=Ca.prototype={constructor:hn,select:xO,selectAll:NO,selectChild:TO,selectChildren:OO,filter:PO,data:FO,enter:RO,exit:UO,join:GO,merge:ZO,selection:KP,order:YO,sort:XO,call:jO,nodes:qO,node:KO,size:JO,empty:QO,each:eP,attr:aP,style:dP,property:pP,classed:_P,text:$P,html:kP,raise:IP,lower:AP,append:MP,insert:OP,remove:RP,clone:HP,datum:BP,on:ZP,dispatch:WP,[Symbol.iterator]:jP};function zg(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function j1(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Ia(){}var na=.7,Au=1/na,mi="\\s*([+-]?\\d+)\\s*",oa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Bn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",JP=/^#([0-9a-f]{3,8})$/,QP=new RegExp(`^rgb\\(${mi},${mi},${mi}\\)$`),e6=new RegExp(`^rgb\\(${Bn},${Bn},${Bn}\\)$`),t6=new RegExp(`^rgba\\(${mi},${mi},${mi},${oa}\\)$`),n6=new RegExp(`^rgba\\(${Bn},${Bn},${Bn},${oa}\\)$`),o6=new RegExp(`^hsl\\(${oa},${Bn},${Bn}\\)$`),r6=new RegExp(`^hsla\\(${oa},${Bn},${Bn},${oa}\\)$`),Py={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zg(Ia,Cr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ry,formatHex:Ry,formatHex8:i6,formatHsl:s6,formatRgb:zy,toString:zy});function Ry(){return this.rgb().formatHex()}function i6(){return this.rgb().formatHex8()}function s6(){return q1(this).formatHsl()}function zy(){return this.rgb().formatRgb()}function Cr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=JP.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Vy(t):n===3?new Rt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?rl(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?rl(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=QP.exec(e))?new Rt(t[1],t[2],t[3],1):(t=e6.exec(e))?new Rt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=t6.exec(e))?rl(t[1],t[2],t[3],t[4]):(t=n6.exec(e))?rl(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=o6.exec(e))?Fy(t[1],t[2]/100,t[3]/100,1):(t=r6.exec(e))?Fy(t[1],t[2]/100,t[3]/100,t[4]):Py.hasOwnProperty(e)?Vy(Py[e]):e==="transparent"?new Rt(NaN,NaN,NaN,0):null}function Vy(e){return new Rt(e>>16&255,e>>8&255,e&255,1)}function rl(e,t,n,o){return o<=0&&(e=t=n=NaN),new Rt(e,t,n,o)}function a6(e){return e instanceof Ia||(e=Cr(e)),e?(e=e.rgb(),new Rt(e.r,e.g,e.b,e.opacity)):new Rt}function uh(e,t,n,o){return arguments.length===1?a6(e):new Rt(e,t,n,o??1)}function Rt(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}zg(Rt,uh,j1(Ia,{brighter(e){return e=e==null?Au:Math.pow(Au,e),new Rt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?na:Math.pow(na,e),new Rt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Rt(yr(this.r),yr(this.g),yr(this.b),Mu(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Hy,formatHex:Hy,formatHex8:l6,formatRgb:By,toString:By}));function Hy(){return`#${lr(this.r)}${lr(this.g)}${lr(this.b)}`}function l6(){return`#${lr(this.r)}${lr(this.g)}${lr(this.b)}${lr((isNaN(this.opacity)?1:this.opacity)*255)}`}function By(){const e=Mu(this.opacity);return`${e===1?"rgb(":"rgba("}${yr(this.r)}, ${yr(this.g)}, ${yr(this.b)}${e===1?")":`, ${e})`}`}function Mu(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function yr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function lr(e){return e=yr(e),(e<16?"0":"")+e.toString(16)}function Fy(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new tn(e,t,n,o)}function q1(e){if(e instanceof tn)return new tn(e.h,e.s,e.l,e.opacity);if(e instanceof Ia||(e=Cr(e)),!e)return new tn;if(e instanceof tn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),s=NaN,a=i-r,l=(i+r)/2;return a?(t===i?s=(n-o)/a+(n<o)*6:n===i?s=(o-t)/a+2:s=(t-n)/a+4,a/=l<.5?i+r:2-i-r,s*=60):a=l>0&&l<1?0:s,new tn(s,a,l,e.opacity)}function u6(e,t,n,o){return arguments.length===1?q1(e):new tn(e,t,n,o??1)}function tn(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}zg(tn,u6,j1(Ia,{brighter(e){return e=e==null?Au:Math.pow(Au,e),new tn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?na:Math.pow(na,e),new tn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new Rt(Kd(e>=240?e-240:e+120,r,o),Kd(e,r,o),Kd(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new tn(Ly(this.h),il(this.s),il(this.l),Mu(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Mu(this.opacity);return`${e===1?"hsl(":"hsla("}${Ly(this.h)}, ${il(this.s)*100}%, ${il(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ly(e){return e=(e||0)%360,e<0?e+360:e}function il(e){return Math.max(0,Math.min(1,e||0))}function Kd(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Vg=e=>()=>e;function c6(e,t){return function(n){return e+n*t}}function d6(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function f6(e){return(e=+e)==1?K1:function(t,n){return n-t?d6(t,n,e):Vg(isNaN(t)?n:t)}}function K1(e,t){var n=t-e;return n?c6(e,n):Vg(isNaN(e)?t:e)}const Du=(function e(t){var n=f6(t);function o(r,i){var s=n((r=uh(r)).r,(i=uh(i)).r),a=n(r.g,i.g),l=n(r.b,i.b),u=K1(r.opacity,i.opacity);return function(c){return r.r=s(c),r.g=a(c),r.b=l(c),r.opacity=u(c),r+""}}return o.gamma=e,o})(1);function h6(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,o=t.slice(),r;return function(i){for(r=0;r<n;++r)o[r]=e[r]*(1-i)+t[r]*i;return o}}function g6(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function p6(e,t){var n=t?t.length:0,o=e?Math.min(n,e.length):0,r=new Array(o),i=new Array(n),s;for(s=0;s<o;++s)r[s]=Ms(e[s],t[s]);for(;s<n;++s)i[s]=t[s];return function(a){for(s=0;s<o;++s)i[s]=r[s](a);return i}}function m6(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function In(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function y6(e,t){var n={},o={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=Ms(e[r],t[r]):o[r]=t[r];return function(i){for(r in n)o[r]=n[r](i);return o}}var ch=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Jd=new RegExp(ch.source,"g");function v6(e){return function(){return e}}function _6(e){return function(t){return e(t)+""}}function J1(e,t){var n=ch.lastIndex=Jd.lastIndex=0,o,r,i,s=-1,a=[],l=[];for(e=e+"",t=t+"";(o=ch.exec(e))&&(r=Jd.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),a[s]?a[s]+=i:a[++s]=i),(o=o[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:In(o,r)})),n=Jd.lastIndex;return n<t.length&&(i=t.slice(n),a[s]?a[s]+=i:a[++s]=i),a.length<2?l[0]?_6(l[0].x):v6(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}function Ms(e,t){var n=typeof t,o;return t==null||n==="boolean"?Vg(t):(n==="number"?In:n==="string"?(o=Cr(t))?(t=o,Du):J1:t instanceof Cr?Du:t instanceof Date?m6:g6(t)?h6:Array.isArray(t)?p6:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?y6:In)(e,t)}var Uy=180/Math.PI,dh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Q1(e,t,n,o,r,i){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,l/=a),e*o<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*Uy,skewX:Math.atan(l)*Uy,scaleX:s,scaleY:a}}var sl;function b6(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?dh:Q1(t.a,t.b,t.c,t.d,t.e,t.f)}function w6(e){return e==null||(sl||(sl=document.createElementNS("http://www.w3.org/2000/svg","g")),sl.setAttribute("transform",e),!(e=sl.transform.baseVal.consolidate()))?dh:(e=e.matrix,Q1(e.a,e.b,e.c,e.d,e.e,e.f))}function ex(e,t,n,o){function r(u){return u.length?u.pop()+" ":""}function i(u,c,d,f,h,m){if(u!==d||c!==f){var v=h.push("translate(",null,t,null,n);m.push({i:v-4,x:In(u,d)},{i:v-2,x:In(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function s(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(r(d)+"rotate(",null,o)-2,x:In(u,c)})):c&&d.push(r(d)+"rotate("+c+o)}function a(u,c,d,f){u!==c?f.push({i:d.push(r(d)+"skewX(",null,o)-2,x:In(u,c)}):c&&d.push(r(d)+"skewX("+c+o)}function l(u,c,d,f,h,m){if(u!==d||c!==f){var v=h.push(r(h)+"scale(",null,",",null,")");m.push({i:v-4,x:In(u,d)},{i:v-2,x:In(c,f)})}else(d!==1||f!==1)&&h.push(r(h)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),i(u.translateX,u.translateY,c.translateX,c.translateY,d,f),s(u.rotate,c.rotate,d,f),a(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var m=-1,v=f.length,b;++m<v;)d[(b=f[m]).i]=b.x(h);return d.join("")}}}var x6=ex(b6,"px, ","px)","deg)"),$6=ex(w6,", ",")",")"),E6=1e-12;function Gy(e){return((e=Math.exp(e))+1/e)/2}function S6(e){return((e=Math.exp(e))-1/e)/2}function N6(e){return((e=Math.exp(2*e))-1)/(e+1)}const Qd=(function e(t,n,o){function r(i,s){var a=i[0],l=i[1],u=i[2],c=s[0],d=s[1],f=s[2],h=c-a,m=d-l,v=h*h+m*m,b,x;if(v<E6)x=Math.log(f/u)/t,b=function(Z){return[a+Z*h,l+Z*m,u*Math.exp(t*Z*x)]};else{var N=Math.sqrt(v),S=(f*f-u*u+o*v)/(2*u*n*N),A=(f*f-u*u-o*v)/(2*f*n*N),G=Math.log(Math.sqrt(S*S+1)-S),W=Math.log(Math.sqrt(A*A+1)-A);x=(W-G)/t,b=function(Z){var z=Z*x,j=Gy(G),H=u/(n*N)*(j*N6(t*z+G)-S6(G));return[a+H*h,l+H*m,u*j/Gy(t*z+G)]}}return b.duration=x*1e3*t/Math.SQRT2,b}return r.rho=function(i){var s=Math.max(.001,+i),a=s*s,l=a*a;return e(s,a,l)},r})(Math.SQRT2,2,4);var Mi=0,cs=0,qi=0,tx=1e3,Ou,ds,Pu=0,Ir=0,Wc=0,ra=typeof performance=="object"&&performance.now?performance:Date,nx=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Hg(){return Ir||(nx(k6),Ir=ra.now()+Wc)}function k6(){Ir=0}function Ru(){this._call=this._time=this._next=null}Ru.prototype=ox.prototype={constructor:Ru,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Hg():+n)+(t==null?0:+t),!this._next&&ds!==this&&(ds?ds._next=this:Ou=this,ds=this),this._call=e,this._time=n,fh()},stop:function(){this._call&&(this._call=null,this._time=1/0,fh())}};function ox(e,t,n){var o=new Ru;return o.restart(e,t,n),o}function C6(){Hg(),++Mi;for(var e=Ou,t;e;)(t=Ir-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Mi}function Zy(){Ir=(Pu=ra.now())+Wc,Mi=cs=0;try{C6()}finally{Mi=0,T6(),Ir=0}}function I6(){var e=ra.now(),t=e-Pu;t>tx&&(Wc-=t,Pu=e)}function T6(){for(var e,t=Ou,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Ou=n);ds=e,fh(o)}function fh(e){if(!Mi){cs&&(cs=clearTimeout(cs));var t=e-Ir;t>24?(e<1/0&&(cs=setTimeout(Zy,e-ra.now()-Wc)),qi&&(qi=clearInterval(qi))):(qi||(Pu=ra.now(),qi=setInterval(I6,tx)),Mi=1,nx(Zy))}}function Yy(e,t,n){var o=new Ru;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var A6=z1("start","end","cancel","interrupt"),M6=[],rx=0,Xy=1,hh=2,Bl=3,Wy=4,gh=5,Fl=6;function jc(e,t,n,o,r,i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;D6(e,n,{name:t,index:o,group:r,on:A6,tween:M6,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:rx})}function Bg(e,t){var n=vn(e,t);if(n.state>rx)throw new Error("too late; already scheduled");return n}function Xn(e,t){var n=vn(e,t);if(n.state>Bl)throw new Error("too late; already running");return n}function vn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function D6(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=ox(i,0,n.time);function i(u){n.state=Xy,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var c,d,f,h;if(n.state!==Xy)return l();for(c in o)if(h=o[c],h.name===n.name){if(h.state===Bl)return Yy(s);h.state===Wy?(h.state=Fl,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[c]):+c<t&&(h.state=Fl,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[c])}if(Yy(function(){n.state===Bl&&(n.state=Wy,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=hh,n.on.call("start",e,e.__data__,n.index,n.group),n.state===hh){for(n.state=Bl,r=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++d]=h);r.length=d+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=gh,1),d=-1,f=r.length;++d<f;)r[d].call(e,c);n.state===gh&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Fl,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function O6(e,t){var n=e.__transition,o,r,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((o=n[s]).name!==t){i=!1;continue}r=o.state>hh&&o.state<gh,o.state=Fl,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[s]}i&&delete e.__transition}}function P6(e){return this.each(function(){O6(this,e)})}function R6(e,t){var n,o;return function(){var r=Xn(this,e),i=r.tween;if(i!==n){o=n=i;for(var s=0,a=o.length;s<a;++s)if(o[s].name===t){o=o.slice(),o.splice(s,1);break}}r.tween=o}}function z6(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=Xn(this,e),s=i.tween;if(s!==o){r=(o=s).slice();for(var a={name:t,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===t){r[l]=a;break}l===u&&r.push(a)}i.tween=r}}function V6(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=vn(this.node(),n).tween,r=0,i=o.length,s;r<i;++r)if((s=o[r]).name===e)return s.value;return null}return this.each((t==null?R6:z6)(n,e,t))}function Fg(e,t,n){var o=e._id;return e.each(function(){var r=Xn(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return vn(r,o).value[t]}}function ix(e,t){var n;return(typeof t=="number"?In:t instanceof Cr?Du:(n=Cr(t))?(t=n,Du):J1)(e,t)}function H6(e){return function(){this.removeAttribute(e)}}function B6(e){return function(){this.removeAttributeNS(e.space,e.local)}}function F6(e,t,n){var o,r=n+"",i;return function(){var s=this.getAttribute(e);return s===r?null:s===o?i:i=t(o=s,n)}}function L6(e,t,n){var o,r=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===r?null:s===o?i:i=t(o=s,n)}}function U6(e,t,n){var o,r,i;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===o&&l===r?i:(r=l,i=t(o=s,a)))}}function G6(e,t,n){var o,r,i;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===o&&l===r?i:(r=l,i=t(o=s,a)))}}function Z6(e,t){var n=Xc(e),o=n==="transform"?$6:ix;return this.attrTween(e,typeof t=="function"?(n.local?G6:U6)(n,o,Fg(this,"attr."+e,t)):t==null?(n.local?B6:H6)(n):(n.local?L6:F6)(n,o,t))}function Y6(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function X6(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function W6(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&X6(e,i)),n}return r._value=t,r}function j6(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&Y6(e,i)),n}return r._value=t,r}function q6(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Xc(e);return this.tween(n,(o.local?W6:j6)(o,t))}function K6(e,t){return function(){Bg(this,e).delay=+t.apply(this,arguments)}}function J6(e,t){return t=+t,function(){Bg(this,e).delay=t}}function Q6(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?K6:J6)(t,e)):vn(this.node(),t).delay}function eR(e,t){return function(){Xn(this,e).duration=+t.apply(this,arguments)}}function tR(e,t){return t=+t,function(){Xn(this,e).duration=t}}function nR(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?eR:tR)(t,e)):vn(this.node(),t).duration}function oR(e,t){if(typeof t!="function")throw new Error;return function(){Xn(this,e).ease=t}}function rR(e){var t=this._id;return arguments.length?this.each(oR(t,e)):vn(this.node(),t).ease}function iR(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Xn(this,e).ease=n}}function sR(e){if(typeof e!="function")throw new Error;return this.each(iR(this._id,e))}function aR(e){typeof e!="function"&&(e=B1(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=[],l,u=0;u<s;++u)(l=i[u])&&e.call(l,l.__data__,u,i)&&a.push(l);return new vo(o,this._parents,this._name,this._id)}function lR(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),s=new Array(o),a=0;a<i;++a)for(var l=t[a],u=n[a],c=l.length,d=s[a]=new Array(c),f,h=0;h<c;++h)(f=l[h]||u[h])&&(d[h]=f);for(;a<o;++a)s[a]=t[a];return new vo(s,this._parents,this._name,this._id)}function uR(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function cR(e,t,n){var o,r,i=uR(t)?Bg:Xn;return function(){var s=i(this,e),a=s.on;a!==o&&(r=(o=a).copy()).on(t,n),s.on=r}}function dR(e,t){var n=this._id;return arguments.length<2?vn(this.node(),n).on.on(e):this.each(cR(n,e,t))}function fR(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function hR(){return this.on("end.remove",fR(this._id))}function gR(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Pg(e));for(var o=this._groups,r=o.length,i=new Array(r),s=0;s<r;++s)for(var a=o[s],l=a.length,u=i[s]=new Array(l),c,d,f=0;f<l;++f)(c=a[f])&&(d=e.call(c,c.__data__,f,a))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,jc(u[f],t,n,f,u,vn(c,n)));return new vo(i,this._parents,t,n)}function pR(e){var t=this._name,n=this._id;typeof e!="function"&&(e=H1(e));for(var o=this._groups,r=o.length,i=[],s=[],a=0;a<r;++a)for(var l=o[a],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var f=e.call(c,c.__data__,d,l),h,m=vn(c,n),v=0,b=f.length;v<b;++v)(h=f[v])&&jc(h,t,n,v,f,m);i.push(f),s.push(c)}return new vo(i,s,t,n)}var mR=Ca.prototype.constructor;function yR(){return new mR(this._groups,this._parents)}function vR(e,t){var n,o,r;return function(){var i=Ai(this,e),s=(this.style.removeProperty(e),Ai(this,e));return i===s?null:i===n&&s===o?r:r=t(n=i,o=s)}}function sx(e){return function(){this.style.removeProperty(e)}}function _R(e,t,n){var o,r=n+"",i;return function(){var s=Ai(this,e);return s===r?null:s===o?i:i=t(o=s,n)}}function bR(e,t,n){var o,r,i;return function(){var s=Ai(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Ai(this,e))),s===l?null:s===o&&l===r?i:(r=l,i=t(o=s,a))}}function wR(e,t){var n,o,r,i="style."+t,s="end."+i,a;return function(){var l=Xn(this,e),u=l.on,c=l.value[i]==null?a||(a=sx(t)):void 0;(u!==n||r!==c)&&(o=(n=u).copy()).on(s,r=c),l.on=o}}function xR(e,t,n){var o=(e+="")=="transform"?x6:ix;return t==null?this.styleTween(e,vR(e,o)).on("end.style."+e,sx(e)):typeof t=="function"?this.styleTween(e,bR(e,o,Fg(this,"style."+e,t))).each(wR(this._id,e)):this.styleTween(e,_R(e,o,t),n).on("end.style."+e,null)}function $R(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function ER(e,t,n){var o,r;function i(){var s=t.apply(this,arguments);return s!==r&&(o=(r=s)&&$R(e,s,n)),o}return i._value=t,i}function SR(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,ER(e,t,n??""))}function NR(e){return function(){this.textContent=e}}function kR(e){return function(){var t=e(this);this.textContent=t??""}}function CR(e){return this.tween("text",typeof e=="function"?kR(Fg(this,"text",e)):NR(e==null?"":e+""))}function IR(e){return function(t){this.textContent=e.call(this,t)}}function TR(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&IR(r)),t}return o._value=e,o}function AR(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,TR(e))}function MR(){for(var e=this._name,t=this._id,n=ax(),o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],a=s.length,l,u=0;u<a;++u)if(l=s[u]){var c=vn(l,t);jc(l,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new vo(o,this._parents,e,n)}function DR(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i,s){var a={value:s},l={value:function(){--r===0&&i()}};n.each(function(){var u=Xn(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),r===0&&i()})}var OR=0;function vo(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function ax(){return++OR}var Qn=Ca.prototype;vo.prototype={constructor:vo,select:gR,selectAll:pR,selectChild:Qn.selectChild,selectChildren:Qn.selectChildren,filter:aR,merge:lR,selection:yR,transition:MR,call:Qn.call,nodes:Qn.nodes,node:Qn.node,size:Qn.size,empty:Qn.empty,each:Qn.each,on:dR,attr:Z6,attrTween:q6,style:xR,styleTween:SR,text:CR,textTween:AR,remove:hR,tween:V6,delay:Q6,duration:nR,ease:rR,easeVarying:sR,end:DR,[Symbol.iterator]:Qn[Symbol.iterator]};function PR(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var RR={time:null,delay:0,duration:250,ease:PR};function zR(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function VR(e){var t,n;e instanceof vo?(t=e._id,e=e._name):(t=ax(),(n=RR).time=Hg(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],a=s.length,l,u=0;u<a;++u)(l=s[u])&&jc(l,e,t,u,s,n||zR(l,t));return new vo(o,this._parents,e,t)}Ca.prototype.interrupt=P6;Ca.prototype.transition=VR;function ii(e,t,n){this.k=e,this.x=t,this.y=n}ii.prototype={constructor:ii,scale:function(e){return e===1?this:new ii(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new ii(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ph=new ii(1,0,0);ii.prototype;var Ae=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(Ae||{}),lx=(e=>(e.Partial="partial",e.Full="full",e))(lx||{}),ux=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(ux||{}),qc=(e=>(e.Strict="strict",e.Loose="loose",e))(qc||{}),cx=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(cx||{}),dx=(e=>(e.TopLeft="top-left",e.TopCenter="top-center",e.TopRight="top-right",e.BottomLeft="bottom-left",e.BottomCenter="bottom-center",e.BottomRight="bottom-right",e))(dx||{});function zu(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function Vu(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function Lg(e){return{width:e.offsetWidth,height:e.offsetHeight}}function Di(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function HR(e,t){return{x:Di(e.x,t[0][0],t[1][0]),y:Di(e.y,t[0][1],t[1][1])}}function jy(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function jo(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function vr(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!jo(e)}function fs(e){return vr(e)&&"computedPosition"in e}function al(e){return!Number.isNaN(e)&&Number.isFinite(e)}function BR(e){return al(e.width)&&al(e.height)&&al(e.x)&&al(e.y)}function FR(e,t,n){const o={id:e.id.toString(),type:e.type??"default",dimensions:_t({width:0,height:0}),computedPosition:_t({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:Gt(e.data)?e.data:{},events:_t(Gt(e.events)?e.events:{})};return Object.assign(t??o,e,{id:e.id.toString(),parentNode:n})}function fx(e,t,n){var o,r;const i={id:e.id.toString(),type:e.type??t?.type??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(o=e.sourceHandle)==null?void 0:o.toString(),targetHandle:(r=e.targetHandle)==null?void 0:r.toString(),updatable:e.updatable??n?.updatable,selectable:e.selectable??n?.selectable,focusable:e.focusable??n?.focusable,data:Gt(e.data)?e.data:{},events:_t(Gt(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??n?.interactionWidth,...n??{}};return Object.assign(t??i,e,{id:e.id.toString()})}function hx(e,t,n,o){const r=typeof e=="string"?e:e.id,i=new Set,s=o==="source"?"target":"source";for(const a of n)a[s]===r&&i.add(a[o]);return t.filter(a=>i.has(a.id))}function LR(...e){if(e.length===3){const[i,s,a]=e;return hx(i,s,a,"target")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(i=>jo(i)&&i.source===o).map(i=>n.find(s=>vr(s)&&s.id===i.target))}function UR(...e){if(e.length===3){const[i,s,a]=e;return hx(i,s,a,"source")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(i=>jo(i)&&i.target===o).map(i=>n.find(s=>vr(s)&&s.id===i.source))}function gx({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function GR(e,t){return t.some(n=>jo(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function ia({x:e,y:t},{x:n,y:o,zoom:r}){return{x:e*r+n,y:t*r+o}}function Hu({x:e,y:t},{x:n,y:o,zoom:r},i=!1,s=[1,1]){const a={x:(e-n)/r,y:(t-o)/r};return i?ez(a,s):a}function ZR(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function px({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function YR({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function XR(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const o=e[n];t=ZR(t,px({...o.computedPosition,...o.dimensions}))}return YR(t)}function WR(e,t,n={x:0,y:0,zoom:1},o=!1,r=!1){const i={...Hu(t,n),width:t.width/n.zoom,height:t.height/n.zoom},s=[];for(const a of e){const{dimensions:l,selectable:u=!0,hidden:c=!1}=a,d=l.width??a.width??null,f=l.height??a.height??null;if(r&&!u||c)continue;const h=Vu(i,zu(a)),m=d===null||f===null,v=o&&h>0,b=(d??0)*(f??0);(m||v||h>=b||a.dragging)&&s.push(a)}return s}function mx(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter(o=>n.has(o.source)||n.has(o.target))}function Lr(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return Kc(`The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function jR(e,t,n){if(typeof e=="string"||typeof e=="number"){const o=Lr(e,n),r=Lr(e,t);return{top:o,right:r,bottom:o,left:r,x:r*2,y:o*2}}if(typeof e=="object"){const o=Lr(e.top??e.y??0,n),r=Lr(e.bottom??e.y??0,n),i=Lr(e.left??e.x??0,t),s=Lr(e.right??e.x??0,t);return{top:o,right:s,bottom:r,left:i,x:i+s,y:o+r}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function qR(e,t,n,o,r,i){const{x:s,y:a}=ia(e,{x:t,y:n,zoom:o}),{x:l,y:u}=ia({x:e.x+e.width,y:e.y+e.height},{x:t,y:n,zoom:o}),c=r-l,d=i-u;return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(c),bottom:Math.floor(d)}}function qy(e,t,n,o,r,i=.1){const s=jR(i,t,n),a=(t-s.x)/e.width,l=(n-s.y)/e.height,u=Math.min(a,l),c=Di(u,o,r),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*c,m=n/2-f*c,v=qR(e,h,m,c,t,n),b={left:Math.min(v.left-s.left,0),top:Math.min(v.top-s.top,0),right:Math.min(v.right-s.right,0),bottom:Math.min(v.bottom-s.bottom,0)};return{x:h-b.left+b.right,y:m-b.top+b.bottom,zoom:c}}function Ky(e,t,n){return e<t?Di(Math.abs(e-t),1,t)/t:e>n?-Di(Math.abs(e-n),1,t)/t:0}function KR(e,t,n=15,o=40){const r=Ky(e.x,o,t.width-o)*n,i=Ky(e.y,o,t.height-o)*n;return[r,i]}function ef(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let r={};if(typeof t.style=="function"?r={...t.style(t)}:t.style&&(r={...t.style}),r.width=r.width??`${t.dimensions.width}px`,r.height=r.height??`${t.dimensions.height}px`,n>0)if(typeof r.width=="string"){const i=Number(r.width.replace("px",""));r.width=`${i+n}px`}else r.width+=n;if(o>0)if(typeof r.height=="string"){const i=Number(r.height.replace("px",""));r.height=`${i+o}px`}else r.height+=o;if(e.position.x<0){const i=Math.abs(e.position.x);if(t.position.x=t.position.x-i,typeof r.width=="string"){const s=Number(r.width.replace("px",""));r.width=`${s+i}px`}else r.width+=i;e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);if(t.position.y=t.position.y-i,typeof r.height=="string"){const s=Number(r.height.replace("px",""));r.height=`${s+i}px`}else r.height+=i;e.position.y=0}t.dimensions.width=Number(r.width.toString().replace("px","")),t.dimensions.height=Number(r.height.toString().replace("px","")),typeof t.style=="function"?t.style=i=>{const s=t.style;return{...s(i),...r}}:t.style={...t.style,...r}}}}function Jy(e,t){var n,o;const r=e.filter(s=>s.type==="add"||s.type==="remove");for(const s of r)if(s.type==="add")t.findIndex(l=>l.id===s.item.id)===-1&&t.push(s.item);else if(s.type==="remove"){const a=t.findIndex(l=>l.id===s.id);a!==-1&&t.splice(a,1)}const i=t.map(s=>s.id);for(const s of t)for(const a of e)if(a.id===s.id)switch(a.type){case"select":s.selected=a.selected;break;case"position":if(fs(s)&&(typeof a.position<"u"&&(s.position=a.position),typeof a.dragging<"u"&&(s.dragging=a.dragging),s.expandParent&&s.parentNode)){const l=t[i.indexOf(s.parentNode)];l&&fs(l)&&ef(s,l)}break;case"dimensions":if(fs(s)&&(typeof a.dimensions<"u"&&(s.dimensions=a.dimensions),typeof a.updateStyle<"u"&&a.updateStyle&&(s.style={...s.style||{},width:`${(n=a.dimensions)==null?void 0:n.width}px`,height:`${(o=a.dimensions)==null?void 0:o.height}px`}),typeof a.resizing<"u"&&(s.resizing=a.resizing),s.expandParent&&s.parentNode)){const l=t[i.indexOf(s.parentNode)];l&&fs(l)&&(!!l.dimensions.width&&!!l.dimensions.height?ef(s,l):bt(()=>{ef(s,l)}))}break}return t}function Ao(e,t){return{id:e,type:"select",selected:t}}function Qy(e){return{item:e,type:"add"}}function ev(e){return{id:e,type:"remove"}}function tv(e,t,n,o,r){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:r||null,type:"remove"}}function Ur(e,t=new Set,n=!1){const o=[];for(const[r,i]of e){const s=t.has(r);!(i.selected===void 0&&!s)&&i.selected!==s&&(n&&(i.selected=s),o.push(Ao(i.id,s)))}return o}const nv=()=>{};function Ce(e){const t=new Set;let n=nv,o=()=>!1;const r=()=>t.size>0||o(),i=f=>{n=f},s=()=>{n=nv},a=f=>{o=f},l=()=>{o=()=>!1},u=f=>{t.delete(f)};return{on:f=>{t.add(f);const h=()=>u(f);return R1(h),{off:h}},off:u,trigger:f=>{const h=[n];return r()?h.push(...t):e&&h.push(e),Promise.allSettled(h.map(m=>m(f)))},hasListeners:r,listeners:t,setEmitter:i,removeEmitter:s,setHasEmitListeners:a,removeHasEmitListeners:l}}function Ug(e,t,n=Ae.Left,o=!1){const r=(t?.x??0)+e.computedPosition.x,i=(t?.y??0)+e.computedPosition.y,{width:s,height:a}=t??QR(e);if(o)return{x:r+s/2,y:i+a/2};switch(t?.position??n){case Ae.Top:return{x:r+s/2,y:i};case Ae.Right:return{x:r+s,y:i+a/2};case Ae.Bottom:return{x:r+s/2,y:i+a};case Ae.Left:return{x:r,y:i+a/2}}}function JR({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:i,width:s,height:a,viewport:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+o,t.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=px({x:(0-l.x)/l.zoom,y:(0-l.y)/l.zoom,width:s/l.zoom,height:a/l.zoom}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),f=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(d*f)>0}var an=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(an||{});const ov={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};let Pn=class extends Error{constructor(t,...n){var o;super((o=ov[t])==null?void 0:o.call(ov,...n)),this.name="VueFlowError",this.code=t,this.args=n}};function Gg(e){return"clientX"in e}function Jr(e,t){const n=Gg(e);let o,r;return n?(o=e.clientX,r=e.clientY):"touches"in e&&e.touches.length>0?(o=e.touches[0].clientX,r=e.touches[0].clientY):"changedTouches"in e&&e.changedTouches.length>0?(o=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY):(o=0,r=0),{x:o-(t?.left??0),y:r-(t?.top??0)}}const rv=()=>{var e;return typeof navigator<"u"&&((e=navigator?.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function QR(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function ez(e,t=[1,1]){return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}}const tz=()=>!0;function tf(e){e?.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function nz(e,t,n){const o=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const i of t.values())Vu(r,zu(i))>0&&o.push(i);return o}const oz=250;function rz(e,t,n,o){var r,i;let s=[],a=Number.POSITIVE_INFINITY;const l=nz(e,n,t+oz);for(const u of l){const c=[...((r=u.handleBounds)==null?void 0:r.source)??[],...((i=u.handleBounds)==null?void 0:i.target)??[]];for(const d of c){if(o.nodeId===d.nodeId&&o.type===d.type&&o.id===d.id)continue;const{x:f,y:h}=Ug(u,d,d.position,!0),m=Math.sqrt((f-e.x)**2+(h-e.y)**2);m>t||(m<a?(s=[{...d,x:f,y:h}],a=m):m===a&&s.push({...d,x:f,y:h}))}}if(!s.length)return null;if(s.length>1){const u=o.type==="source"?"target":"source";return s.find(c=>c.type===u)??s[0]}return s[0]}function iv(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:i,doc:s,lib:a,flowId:l,isValidConnection:u=tz},c,d,f,h){const m=i==="target",v=t?s.querySelector(`.${a}-flow__handle[data-id="${l}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:b,y:x}=Jr(e),N=s.elementFromPoint(b,x),S=N?.classList.contains(`${a}-flow__handle`)?N:v,A={handleDomNode:S,isValid:!1,connection:null,toHandle:null};if(S){const G=yx(void 0,S),W=S.getAttribute("data-nodeid"),Z=S.getAttribute("data-handleid"),z=S.classList.contains("connectable"),j=S.classList.contains("connectableend");if(!W||!G)return A;const H={source:m?W:o,sourceHandle:m?Z:r,target:m?o:W,targetHandle:m?r:Z};A.connection=H;const I=z&&j&&(n===qc.Strict?m&&G==="source"||!m&&G==="target":W!==o||Z!==r);A.isValid=I&&u(H,{nodes:d,edges:c,sourceNode:f(H.source),targetNode:f(H.target)}),A.toHandle=vx(W,G,Z,h,n,!0)}return A}function yx(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function iz(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function sz(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}function vx(e,t,n,o,r,i=!1){var s,a,l;const u=o.get(e);if(!u)return null;const c=r===qc.Strict?(s=u.handleBounds)==null?void 0:s[t]:[...((a=u.handleBounds)==null?void 0:a.source)??[],...((l=u.handleBounds)==null?void 0:l.target)??[]],d=(n?c?.find(f=>f.id===n):c?.[0])??null;return d&&i?{...d,...Ug(u,d,d.position,!0)}:d}const sv={[Ae.Left]:Ae.Right,[Ae.Right]:Ae.Left,[Ae.Top]:Ae.Bottom,[Ae.Bottom]:Ae.Top},az=["production","prod"];function Kc(e,...t){lz()&&console.warn(`[Vue Flow]: ${e}`,...t)}function lz(){return!az.includes("production")}function av(e,t,n,o,r){const i=t.querySelectorAll(`.vue-flow__handle.${e}`);return i?.length?Array.from(i).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:r,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/o,y:(a.top-n.top)/o,...Lg(s)}}):null}function Gt(e){return typeof ie(e)<"u"}function uz(e,t,n,o){if(!e||!e.source||!e.target)return n(new Pn(an.EDGE_INVALID,e?.id??"[ID UNKNOWN]")),!1;let r;return jo(e)?r=e:r={...e,id:gx(e)},r=fx(r,void 0,o),GR(r,t)?!1:r}function cz(e,t,n,o,r){if(!t.source||!t.target)return r(new Pn(an.EDGE_INVALID,e.id)),!1;if(!n)return r(new Pn(an.EDGE_NOT_FOUND,e.id)),!1;const{id:i,...s}=e;return{...s,id:o?gx(t):i,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle}}function lv(e,t,n){const o={},r=[];for(let i=0;i<e.length;++i){const s=e[i];if(!vr(s)){n(new Pn(an.NODE_INVALID,s?.id)||`[ID UNKNOWN|INDEX ${i}]`);continue}const a=FR(s,t(s.id),s.parentNode);s.parentNode&&(o[s.parentNode]=!0),r[i]=a}for(const i of r){const s=t(i.parentNode)||r.find(a=>a.id===i.parentNode);i.parentNode&&!s&&n(new Pn(an.NODE_MISSING_PARENT,i.id,i.parentNode)),(i.parentNode||o[i.id])&&(o[i.id]&&(i.isParent=!0),s&&(s.isParent=!0))}return r}function uv(e,t,n,o,r,i){let s=r;const a=o.get(s)||new Map;o.set(s,a.set(n,t)),s=`${r}-${e}`;const l=o.get(s)||new Map;if(o.set(s,l.set(n,t)),i){s=`${r}-${e}-${i}`;const u=o.get(s)||new Map;o.set(s,u.set(n,t))}}function nf(e,t,n){e.clear();for(const o of n){const{source:r,target:i,sourceHandle:s=null,targetHandle:a=null}=o,l={edgeId:o.id,source:r,target:i,sourceHandle:s,targetHandle:a},u=`${r}-${s}--${i}-${a}`,c=`${i}-${a}--${r}-${s}`;uv("source",l,c,e,r,s),uv("target",l,u,e,i,a)}}function of(e,t,n,o,r,i,s,a){const l=[];for(const u of e){const c=jo(u)?u:uz(u,a,r,i);if(!c)continue;const d=n(c.source),f=n(c.target);if(!d||!f){r(new Pn(an.EDGE_SOURCE_TARGET_MISSING,c.id,c.source,c.target));continue}if(!d){r(new Pn(an.EDGE_SOURCE_MISSING,c.id,c.source));continue}if(!f){r(new Pn(an.EDGE_TARGET_MISSING,c.id,c.target));continue}if(t&&!t(c,{edges:a,nodes:s,sourceNode:d,targetNode:f})){r(new Pn(an.EDGE_INVALID,c.id));continue}const h=o(c.id);l.push({...fx(c,h,i),sourceNode:d,targetNode:f})}return l}const cv=Symbol("vueFlow"),dz=Symbol("nodeId"),fz=Symbol("nodeRef");function ll(){return!0}function hz({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:r,onEdgeUpdate:i,onEdgeUpdateEnd:s}){const{id:a,vueFlowRef:l,connectionMode:u,connectionRadius:c,connectOnClick:d,connectionClickStartHandle:f,nodesConnectable:h,autoPanOnConnect:m,autoPanSpeed:v,findNode:b,panBy:x,startConnection:N,updateConnection:S,endConnection:A,emits:G,viewport:W,edges:Z,nodes:z,isValidConnection:j,nodeLookup:H}=Ta();let D=null,I=!1,R=null;function w(C){var F;const Y=ge(n)==="target",Q=Gg(C),q=jy(C.target),ne=C.currentTarget;if(ne&&(Q&&C.button===0||!Q)){let ae=function(V){g=Jr(V,me),le=rz(Hu(g,W.value,!1,[1,1]),c.value,H.value,_),p||($(),p=!0);const U=iv(V,{handle:le,connectionMode:u.value,fromNodeId:ge(t),fromHandleId:ge(e),fromType:Y?"target":"source",isValidConnection:pe,doc:q,lib:"vue",flowId:a,nodeLookup:H.value},Z.value,z.value,b,H.value);R=U.handleDomNode,D=U.connection,I=sz(!!le,U.isValid);const K={...M,isValid:I,to:U.toHandle&&I?ia({x:U.toHandle.x,y:U.toHandle.y},W.value):g,toHandle:U.toHandle,toPosition:I&&U.toHandle?U.toHandle.position:sv[_.position],toNode:U.toHandle?H.value.get(U.toHandle.nodeId):null};if(I&&le&&M?.toHandle&&K.toHandle&&M.toHandle.type===K.toHandle.type&&M.toHandle.nodeId===K.toHandle.nodeId&&M.toHandle.id===K.toHandle.id&&M.to.x===K.to.x&&M.to.y===K.to.y)return;const te=le??U.toHandle;if(S(te&&I?ia({x:te.x,y:te.y},W.value):g,U.toHandle,iz(!!te,I)),M=K,!le&&!I&&!R)return tf(B);D&&D.source!==D.target&&R&&(tf(B),B=R,R.classList.add("connecting","vue-flow__handle-connecting"),R.classList.toggle("valid",!!I),R.classList.toggle("vue-flow__handle-valid",!!I))},fe=function(V){"touches"in V&&V.touches.length>0||((le||R)&&D&&I&&(i?i(V,D):G.connect(D)),G.connectEnd(V),r&&s?.(V),tf(B),cancelAnimationFrame(ee),A(V),p=!1,I=!1,D=null,R=null,q.removeEventListener("mousemove",ae),q.removeEventListener("mouseup",fe),q.removeEventListener("touchmove",ae),q.removeEventListener("touchend",fe))};const se=b(ge(t));let pe=ge(o)||j.value||ll;!pe&&se&&(pe=(Y?se.isValidSourcePos:se.isValidTargetPos)||ll);let le,ee=0;const{x:re,y:oe}=Jr(C),ce=yx(ge(r),ne),me=(F=l.value)==null?void 0:F.getBoundingClientRect();if(!me||!ce)return;const P=vx(ge(t),ce,ge(e),H.value,u.value);if(!P)return;let B,g=Jr(C,me),p=!1;const $=()=>{if(!m.value)return;const[V,U]=KR(g,me,v.value);x({x:V,y:U}),ee=requestAnimationFrame($)},_={...P,nodeId:ge(t),type:ce,position:P.position},y=H.value.get(ge(t)),E={inProgress:!0,isValid:null,from:Ug(y,_,Ae.Left,!0),fromHandle:_,fromPosition:_.position,fromNode:y,to:g,toHandle:null,toPosition:sv[_.position],toNode:null};N({nodeId:ge(t),id:ge(e),type:ce,position:ne?.getAttribute("data-handlepos")||Ae.Top,...g},{x:re-me.left,y:oe-me.top}),G.connectStart({event:C,nodeId:ge(t),handleId:ge(e),handleType:ce});let M=E;q.addEventListener("mousemove",ae),q.addEventListener("mouseup",fe),q.addEventListener("touchmove",ae),q.addEventListener("touchend",fe)}}function O(C){var F,Y;if(!d.value)return;const Q=ge(n)==="target";if(!f.value){G.clickConnectStart({event:C,nodeId:ge(t),handleId:ge(e)}),N({nodeId:ge(t),type:ge(n),id:ge(e),position:Ae.Top,...Jr(C)},void 0,!0);return}let q=ge(o)||j.value||ll;const ne=b(ge(t));if(!q&&ne&&(q=(Q?ne.isValidSourcePos:ne.isValidTargetPos)||ll),ne&&(typeof ne.connectable>"u"?h.value:ne.connectable)===!1)return;const ae=jy(C.target),fe=iv(C,{handle:{nodeId:ge(t),id:ge(e),type:ge(n),position:Ae.Top,...Jr(C)},connectionMode:u.value,fromNodeId:f.value.nodeId,fromHandleId:f.value.id??null,fromType:f.value.type,isValidConnection:q,doc:ae,lib:"vue",flowId:a,nodeLookup:H.value},Z.value,z.value,b,H.value),se=((F=fe.connection)==null?void 0:F.source)===((Y=fe.connection)==null?void 0:Y.target);fe.isValid&&fe.connection&&!se&&G.connect(fe.connection),G.clickConnectEnd(C),A(C,!0)}return{handlePointerDown:w,handleClick:O}}function gz(){return ot(dz,"")}function pz(e){const t=gz()??"",n=ot(fz,de(null)),{findNode:o,edges:r,emits:i}=Ta(),s=o(t);return s||i.error(new Pn(an.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:s,parentNode:J(()=>o(s.parentNode)),connectedEdges:J(()=>mx([s],r.value))}}const ul=.1,mz=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2;function So(){return Kc("Viewport not initialized yet."),Promise.resolve(!1)}const yz={zoomIn:So,zoomOut:So,zoomTo:So,fitView:So,setCenter:So,fitBounds:So,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:So,setTransform:So,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function vz(e){function t(o,r){return new Promise(i=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate(r?.interpolate==="linear"?Ms:Qd).scaleBy(rf(e.d3Selection,r?.duration,r?.ease,()=>{i(!0)}),o):i(!1)})}function n(o,r,i,s){return new Promise(a=>{var l;const{x:u,y:c}=HR({x:-o,y:-r},e.translateExtent),d=ph.translate(-u,-c).scale(i);e.d3Selection&&e.d3Zoom?(l=e.d3Zoom)==null||l.interpolate(s?.interpolate==="linear"?Ms:Qd).transform(rf(e.d3Selection,s?.duration,s?.ease,()=>{a(!0)}),d):a(!1)})}return J(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:r=>t(1.2,r),zoomOut:r=>t(1/1.2,r),zoomTo:(r,i)=>new Promise(s=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate(i?.interpolate==="linear"?Ms:Qd).scaleTo(rf(e.d3Selection,i?.duration,i?.ease,()=>{s(!0)}),r):s(!1)}),setViewport:(r,i)=>n(r.x,r.y,r.zoom,i),setTransform:(r,i)=>n(r.x,r.y,r.zoom,i),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(r={padding:ul,includeHiddenNodes:!1,duration:0})=>{var i,s;const a=[];for(const f of e.nodes)f.dimensions.width&&f.dimensions.height&&(r?.includeHiddenNodes||!f.hidden)&&(!((i=r.nodes)!=null&&i.length)||(s=r.nodes)!=null&&s.length&&r.nodes.includes(f.id))&&a.push(f);if(!a.length)return Promise.resolve(!1);const l=XR(a),{x:u,y:c,zoom:d}=qy(l,e.dimensions.width,e.dimensions.height,r.minZoom??e.minZoom,r.maxZoom??e.maxZoom,r.padding??ul);return n(u,c,d,r)},setCenter:(r,i,s)=>{const a=typeof s?.zoom<"u"?s.zoom:e.maxZoom,l=e.dimensions.width/2-r*a,u=e.dimensions.height/2-i*a;return n(l,u,a,s)},fitBounds:(r,i={padding:ul})=>{const{x:s,y:a,zoom:l}=qy(r,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,i.padding??ul);return n(s,a,l,i)},project:r=>Hu(r,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:r=>{if(e.vueFlowRef){const{x:i,y:s}=e.vueFlowRef.getBoundingClientRect(),a={x:r.x-i,y:r.y-s};return Hu(a,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:r=>{if(e.vueFlowRef){const{x:i,y:s}=e.vueFlowRef.getBoundingClientRect(),a={x:r.x+i,y:r.y+s};return ia(a,e.viewport)}return{x:0,y:0}}}:yz)}function rf(e,t=0,n=mz,o=()=>{}){const r=typeof t=="number"&&t>0;return r||o(),r?e.transition().duration(t).ease(n).on("end",o):e}function _z(){return{edgesChange:Ce(),nodesChange:Ce(),nodeDoubleClick:Ce(),nodeClick:Ce(),nodeMouseEnter:Ce(),nodeMouseMove:Ce(),nodeMouseLeave:Ce(),nodeContextMenu:Ce(),nodeDragStart:Ce(),nodeDrag:Ce(),nodeDragStop:Ce(),nodesInitialized:Ce(),miniMapNodeClick:Ce(),miniMapNodeDoubleClick:Ce(),miniMapNodeMouseEnter:Ce(),miniMapNodeMouseMove:Ce(),miniMapNodeMouseLeave:Ce(),connect:Ce(),connectStart:Ce(),connectEnd:Ce(),clickConnectStart:Ce(),clickConnectEnd:Ce(),paneReady:Ce(),init:Ce(),move:Ce(),moveStart:Ce(),moveEnd:Ce(),selectionDragStart:Ce(),selectionDrag:Ce(),selectionDragStop:Ce(),selectionContextMenu:Ce(),selectionStart:Ce(),selectionEnd:Ce(),viewportChangeStart:Ce(),viewportChange:Ce(),viewportChangeEnd:Ce(),paneScroll:Ce(),paneClick:Ce(),paneContextMenu:Ce(),paneMouseEnter:Ce(),paneMouseMove:Ce(),paneMouseLeave:Ce(),edgeContextMenu:Ce(),edgeMouseEnter:Ce(),edgeMouseMove:Ce(),edgeMouseLeave:Ce(),edgeDoubleClick:Ce(),edgeClick:Ce(),edgeUpdateStart:Ce(),edgeUpdate:Ce(),edgeUpdateEnd:Ce(),updateNodeInternals:Ce(),error:Ce(e=>Kc(e.message))}}function _x(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:lx.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:cx.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:ux.Bezier,style:{}},connectionMode:qc.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:rv()?"Meta":"Control",zoomActivationKeyCode:rv()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:_z(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const bz=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function wz(e,t,n){const o=vz(e),r=g=>{const p=g??[];e.hooks.updateNodeInternals.trigger(p)},i=g=>UR(g,e.nodes,e.edges),s=g=>LR(g,e.nodes,e.edges),a=g=>mx(g,e.edges),l=({id:g,type:p,nodeId:$})=>{var _;const y=g?`-${p}-${g}`:`-${p}`;return Array.from(((_=e.connectionLookup.get(`${$}${y}`))==null?void 0:_.values())??[])},u=g=>{if(g)return t.value.get(g)},c=g=>{if(g)return n.value.get(g)},d=(g,p,$)=>{var _,y;const k=[];for(const E of g){const M={id:E.id,type:"position",dragging:$,from:E.from};if(p&&(M.position=E.position,E.parentNode)){const V=u(E.parentNode);M.position={x:M.position.x-(((_=V?.computedPosition)==null?void 0:_.x)??0),y:M.position.y-(((y=V?.computedPosition)==null?void 0:y.y)??0)}}k.push(M)}k?.length&&e.hooks.nodesChange.trigger(k)},f=g=>{if(!e.vueFlowRef)return;const p=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!p)return;const $=window.getComputedStyle(p),{m22:_}=new window.DOMMatrixReadOnly($.transform),y=[];for(const k of g){const E=k,M=u(E.id);if(M){const V=Lg(E.nodeElement);if(!!(V.width&&V.height&&(M.dimensions.width!==V.width||M.dimensions.height!==V.height||E.forceUpdate))){const K=E.nodeElement.getBoundingClientRect();M.dimensions=V,M.handleBounds.source=av("source",E.nodeElement,K,_,M.id),M.handleBounds.target=av("target",E.nodeElement,K,_,M.id),y.push({id:M.id,type:"dimensions",dimensions:V})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&o.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),y.length&&e.hooks.nodesChange.trigger(y)},h=(g,p)=>{const $=new Set,_=new Set;for(const E of g)vr(E)?$.add(E.id):jo(E)&&_.add(E.id);const y=Ur(t.value,$,!0),k=Ur(n.value,_);if(e.multiSelectionActive){for(const E of $)y.push(Ao(E,p));for(const E of _)k.push(Ao(E,p))}y.length&&e.hooks.nodesChange.trigger(y),k.length&&e.hooks.edgesChange.trigger(k)},m=g=>{if(e.multiSelectionActive){const p=g.map($=>Ao($.id,!0));e.hooks.nodesChange.trigger(p);return}e.hooks.nodesChange.trigger(Ur(t.value,new Set(g.map(p=>p.id)),!0)),e.hooks.edgesChange.trigger(Ur(n.value))},v=g=>{if(e.multiSelectionActive){const p=g.map($=>Ao($.id,!0));e.hooks.edgesChange.trigger(p);return}e.hooks.edgesChange.trigger(Ur(n.value,new Set(g.map(p=>p.id)))),e.hooks.nodesChange.trigger(Ur(t.value,new Set,!0))},b=g=>{h(g,!0)},x=g=>{const $=(g||e.nodes).map(_=>(_.selected=!1,Ao(_.id,!1)));e.hooks.nodesChange.trigger($)},N=g=>{const $=(g||e.edges).map(_=>(_.selected=!1,Ao(_.id,!1)));e.hooks.edgesChange.trigger($)},S=g=>{if(!g||!g.length)return h([],!1);const p=g.reduce(($,_)=>{const y=Ao(_.id,!1);return vr(_)?$.nodes.push(y):$.edges.push(y),$},{nodes:[],edges:[]});p.nodes.length&&e.hooks.nodesChange.trigger(p.nodes),p.edges.length&&e.hooks.edgesChange.trigger(p.edges)},A=g=>{var p;(p=e.d3Zoom)==null||p.scaleExtent([g,e.maxZoom]),e.minZoom=g},G=g=>{var p;(p=e.d3Zoom)==null||p.scaleExtent([e.minZoom,g]),e.maxZoom=g},W=g=>{var p;(p=e.d3Zoom)==null||p.translateExtent(g),e.translateExtent=g},Z=g=>{e.nodeExtent=g,r()},z=g=>{var p;(p=e.d3Zoom)==null||p.clickDistance(g)},j=g=>{e.nodesDraggable=g,e.nodesConnectable=g,e.elementsSelectable=g},H=g=>{const p=g instanceof Function?g(e.nodes):g;!e.initialized&&!p.length||(e.nodes=lv(p,u,e.hooks.error.trigger))},D=g=>{const p=g instanceof Function?g(e.edges):g;if(!e.initialized&&!p.length)return;const $=of(p,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);nf(e.connectionLookup,n.value,$),e.edges=$},I=g=>{const p=g instanceof Function?g([...e.nodes,...e.edges]):g;!e.initialized&&!p.length||(H(p.filter(vr)),D(p.filter(jo)))},R=g=>{let p=g instanceof Function?g(e.nodes):g;p=Array.isArray(p)?p:[p];const $=lv(p,u,e.hooks.error.trigger),_=[];for(const y of $)_.push(Qy(y));_.length&&e.hooks.nodesChange.trigger(_)},w=g=>{let p=g instanceof Function?g(e.edges):g;p=Array.isArray(p)?p:[p];const $=of(p,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),_=[];for(const y of $)_.push(Qy(y));_.length&&e.hooks.edgesChange.trigger(_)},O=(g,p=!0,$=!1)=>{const _=g instanceof Function?g(e.nodes):g,y=Array.isArray(_)?_:[_],k=[],E=[];function M(U){const K=a(U);for(const te of K)(!Gt(te.deletable)||te.deletable)&&E.push(tv(te.id,te.source,te.target,te.sourceHandle,te.targetHandle))}function V(U){const K=[];for(const te of e.nodes)te.parentNode===U&&K.push(te);if(K.length){for(const te of K)k.push(ev(te.id));p&&M(K);for(const te of K)V(te.id)}}for(const U of y){const K=typeof U=="string"?u(U):U;K&&(Gt(K.deletable)&&!K.deletable||(k.push(ev(K.id)),p&&M([K]),$&&V(K.id)))}E.length&&e.hooks.edgesChange.trigger(E),k.length&&e.hooks.nodesChange.trigger(k)},C=g=>{const p=g instanceof Function?g(e.edges):g,$=Array.isArray(p)?p:[p],_=[];for(const y of $){const k=typeof y=="string"?c(y):y;k&&(Gt(k.deletable)&&!k.deletable||_.push(tv(typeof y=="string"?y:y.id,k.source,k.target,k.sourceHandle,k.targetHandle)))}e.hooks.edgesChange.trigger(_)},F=(g,p,$=!0)=>{const _=c(g.id);if(!_)return!1;const y=e.edges.indexOf(_),k=cz(g,p,_,$,e.hooks.error.trigger);if(k){const[E]=of([k],e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);return e.edges=e.edges.map((M,V)=>V===y?E:M),nf(e.connectionLookup,n.value,[E]),E}return!1},Y=(g,p,$={replace:!1})=>{const _=c(g);if(!_)return;const y=typeof p=="function"?p(_):p;_.data=$.replace?y:{..._.data,...y}},Q=g=>Jy(g,e.nodes),q=g=>{const p=Jy(g,e.edges);return nf(e.connectionLookup,n.value,p),p},ne=(g,p,$={replace:!1})=>{const _=u(g);if(!_)return;const y=typeof p=="function"?p(_):p;$.replace?e.nodes.splice(e.nodes.indexOf(_),1,y):Object.assign(_,y)},ae=(g,p,$={replace:!1})=>{const _=u(g);if(!_)return;const y=typeof p=="function"?p(_):p;_.data=$.replace?y:{..._.data,...y}},fe=(g,p,$=!1)=>{$?e.connectionClickStartHandle=g:e.connectionStartHandle=g,e.connectionEndHandle=null,e.connectionStatus=null,p&&(e.connectionPosition=p)},se=(g,p=null,$=null)=>{e.connectionStartHandle&&(e.connectionPosition=g,e.connectionEndHandle=p,e.connectionStatus=$)},pe=(g,p)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,p?e.connectionClickStartHandle=null:e.connectionStartHandle=null},le=g=>{const p=BR(g),$=p?null:fs(g)?g:u(g.id);return!p&&!$?[null,null,p]:[p?g:zu($),$,p]},ee=(g,p=!0,$=e.nodes)=>{const[_,y,k]=le(g);if(!_)return[];const E=[];for(const M of $||e.nodes){if(!k&&(M.id===y.id||!M.computedPosition))continue;const V=zu(M),U=Vu(V,_);(p&&U>0||U>=V.width*V.height||U>=Number(_.width)*Number(_.height))&&E.push(M)}return E},re=(g,p,$=!0)=>{const[_]=le(g);if(!_)return!1;const y=Vu(_,p);return $&&y>0||y>=Number(_.width)*Number(_.height)},oe=g=>{const{viewport:p,dimensions:$,d3Zoom:_,d3Selection:y,translateExtent:k}=e;if(!_||!y||!g.x&&!g.y)return!1;const E=ph.translate(p.x+g.x,p.y+g.y).scale(p.zoom),M=[[0,0],[$.width,$.height]],V=_.constrain()(E,M,k),U=e.viewport.x!==V.x||e.viewport.y!==V.y||e.viewport.zoom!==V.k;return _.transform(y,V),U},ce=g=>{const p=g instanceof Function?g(e):g,$=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];Gt(p.defaultEdgeOptions)&&(e.defaultEdgeOptions=p.defaultEdgeOptions);const _=p.modelValue||p.nodes||p.edges?[]:void 0;_&&(p.modelValue&&_.push(...p.modelValue),p.nodes&&_.push(...p.nodes),p.edges&&_.push(...p.edges),I(_));const y=()=>{Gt(p.maxZoom)&&G(p.maxZoom),Gt(p.minZoom)&&A(p.minZoom),Gt(p.translateExtent)&&W(p.translateExtent)};for(const k of Object.keys(p)){const E=k,M=p[E];![...bz,...$].includes(E)&&Gt(M)&&(e[E]=M)}My(()=>e.d3Zoom).not.toBeNull().then(y),e.initialized||(e.initialized=!0)};return{updateNodePositions:d,updateNodeDimensions:f,setElements:I,setNodes:H,setEdges:D,addNodes:R,addEdges:w,removeNodes:O,removeEdges:C,findNode:u,findEdge:c,updateEdge:F,updateEdgeData:Y,updateNode:ne,updateNodeData:ae,applyEdgeChanges:q,applyNodeChanges:Q,addSelectedElements:b,addSelectedNodes:m,addSelectedEdges:v,setMinZoom:A,setMaxZoom:G,setTranslateExtent:W,setNodeExtent:Z,setPaneClickDistance:z,removeSelectedElements:S,removeSelectedNodes:x,removeSelectedEdges:N,startConnection:fe,updateConnection:se,endConnection:pe,setInteractive:j,setState:ce,getIntersectingNodes:ee,getIncomers:i,getOutgoers:s,getConnectedEdges:a,getHandleConnections:l,isNodeIntersecting:re,panBy:oe,fitView:g=>o.value.fitView(g),zoomIn:g=>o.value.zoomIn(g),zoomOut:g=>o.value.zoomOut(g),zoomTo:(g,p)=>o.value.zoomTo(g,p),setViewport:(g,p)=>o.value.setViewport(g,p),setTransform:(g,p)=>o.value.setTransform(g,p),getViewport:()=>o.value.getViewport(),getTransform:()=>o.value.getTransform(),setCenter:(g,p,$)=>o.value.setCenter(g,p,$),fitBounds:(g,p)=>o.value.fitBounds(g,p),project:g=>o.value.project(g),screenToFlowCoordinate:g=>o.value.screenToFlowCoordinate(g),flowToScreenCoordinate:g=>o.value.flowToScreenCoordinate(g),toObject:()=>{const g=[],p=[];for(const $ of e.nodes){const{computedPosition:_,handleBounds:y,selected:k,dimensions:E,isParent:M,resizing:V,dragging:U,events:K,...te}=$;g.push(te)}for(const $ of e.edges){const{selected:_,sourceNode:y,targetNode:k,events:E,...M}=$;p.push(M)}return JSON.parse(JSON.stringify({nodes:g,edges:p,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:g=>new Promise(p=>{const{nodes:$,edges:_,position:y,zoom:k,viewport:E}=g;if($&&H($),_&&D(_),E?.x&&E?.y||y){const M=E?.x||y[0],V=E?.y||y[1],U=E?.zoom||k||e.viewport.zoom;return My(()=>o.value.viewportInitialized).toBe(!0).then(()=>{o.value.setViewport({x:M,y:V,zoom:U}).then(()=>{p(!0)})})}else p(!0)}),updateNodeInternals:r,viewportHelper:o,$reset:()=>{const g=_x();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const p=ph.translate(g.defaultViewport.x??0,g.defaultViewport.y??0).scale(Di(g.defaultViewport.zoom??1,g.minZoom,g.maxZoom)),$=e.viewportRef.getBoundingClientRect(),_=[[0,0],[$.width,$.height]],y=e.d3Zoom.constrain()(p,_,g.translateExtent);e.d3Zoom.transform(e.d3Selection,y)}ce(g)},$destroy:()=>{}}}const xz=["data-id","data-handleid","data-nodeid","data-handlepos"],$z={name:"Handle",compatConfig:{MODE:3}},Bu=Ne({...$z,props:{id:{default:null},type:{},position:{default:()=>Ae.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=bc(e,["position","connectable","connectableStart","connectableEnd","id"]),o=Oe(()=>n.type??"source"),r=Oe(()=>n.isValidConnection??null),{id:i,connectionStartHandle:s,connectionClickStartHandle:a,connectionEndHandle:l,vueFlowRef:u,nodesConnectable:c,noDragClassName:d,noPanClassName:f}=Ta(),{id:h,node:m,nodeEl:v,connectedEdges:b}=pz(),x=de(),N=Oe(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),S=Oe(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),A=Oe(()=>{var D,I,R,w,O,C;return((D=s.value)==null?void 0:D.nodeId)===h&&((I=s.value)==null?void 0:I.id)===e.id&&((R=s.value)==null?void 0:R.type)===o.value||((w=l.value)==null?void 0:w.nodeId)===h&&((O=l.value)==null?void 0:O.id)===e.id&&((C=l.value)==null?void 0:C.type)===o.value}),G=Oe(()=>{var D,I,R;return((D=a.value)==null?void 0:D.nodeId)===h&&((I=a.value)==null?void 0:I.id)===e.id&&((R=a.value)==null?void 0:R.type)===o.value}),{handlePointerDown:W,handleClick:Z}=hz({nodeId:h,handleId:e.id,isValidConnection:r,type:o}),z=J(()=>typeof e.connectable=="string"&&e.connectable==="single"?!b.value.some(D=>{const I=D[`${o.value}Handle`];return D[o.value]!==h?!1:I?I===e.id:!0}):typeof e.connectable=="number"?b.value.filter(D=>{const I=D[`${o.value}Handle`];return D[o.value]!==h?!1:I?I===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(m,b.value):Gt(e.connectable)?e.connectable:c.value);tt(()=>{var D;if(!m.dimensions.width||!m.dimensions.height)return;const I=(D=m.handleBounds[o.value])==null?void 0:D.find(Q=>Q.id===e.id);if(!u.value||I)return;const R=u.value.querySelector(".vue-flow__transformationpane");if(!v.value||!x.value||!R||!e.id)return;const w=v.value.getBoundingClientRect(),O=x.value.getBoundingClientRect(),C=window.getComputedStyle(R),{m22:F}=new window.DOMMatrixReadOnly(C.transform),Y={id:e.id,position:e.position,x:(O.left-w.left)/F,y:(O.top-w.top)/F,type:o.value,nodeId:h,...Lg(x.value)};m.handleBounds[o.value]=[...m.handleBounds[o.value]??[],Y]});function j(D){const I=Gg(D);z.value&&N.value&&(I&&D.button===0||!I)&&W(D)}function H(D){!h||!a.value&&!N.value||z.value&&Z(D)}return t({handleClick:Z,handlePointerDown:W,onClick:H,onPointerDown:j}),(D,I)=>(L(),X("div",{ref_key:"handle",ref:x,"data-id":`${ie(i)}-${ie(h)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":ie(h),"data-handlepos":D.position,class:We(["vue-flow__handle",[`vue-flow__handle-${D.position}`,`vue-flow__handle-${e.id}`,ie(d),ie(f),o.value,{connectable:z.value,connecting:G.value,connectablestart:N.value,connectableend:S.value,connectionindicator:z.value&&(N.value&&!A.value||S.value&&A.value)}]]),onMousedown:j,onTouchstartPassive:j,onClick:H},[Qe(D.$slots,"default",{id:D.id})],42,xz))}}),Jc=function({sourcePosition:e=Ae.Bottom,targetPosition:t=Ae.Top,label:n,connectable:o=!0,isValidTargetPos:r,isValidSourcePos:i,data:s}){const a=s.label??n;return[_e(Bu,{type:"target",position:t,connectable:o,isValidConnection:r}),typeof a!="string"&&a?_e(a):_e(xe,[a]),_e(Bu,{type:"source",position:e,connectable:o,isValidConnection:i})]};Jc.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];Jc.inheritAttrs=!1;Jc.compatConfig={MODE:3};const Ez=Jc,Qc=function({targetPosition:e=Ae.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:r}){const i=r.label??t;return[_e(Bu,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof i!="string"&&i?_e(i):_e(xe,[i])]};Qc.props=["targetPosition","label","isValidTargetPos","connectable","data"];Qc.inheritAttrs=!1;Qc.compatConfig={MODE:3};const Sz=Qc,ed=function({sourcePosition:e=Ae.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:r}){const i=r.label??t;return[typeof i!="string"&&i?_e(i):_e(xe,[i]),_e(Bu,{type:"source",position:e,connectable:n,isValidConnection:o})]};ed.props=["sourcePosition","label","isValidSourcePos","connectable","data"];ed.inheritAttrs=!1;ed.compatConfig={MODE:3};const Nz=ed,kz=["transform"],Cz=["width","height","x","y","rx","ry"],Iz=["y"],Tz={name:"EdgeText",compatConfig:{MODE:3}},Az=Ne({...Tz,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=de({x:0,y:0,width:0,height:0}),n=de(null),o=J(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);tt(r),Se([()=>e.x,()=>e.y,n,()=>e.label],r);function r(){if(!n.value)return;const i=n.value.getBBox();(i.width!==t.value.width||i.height!==t.value.height)&&(t.value=i)}return(i,s)=>(L(),X("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[i.labelShowBg?(L(),X("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*i.labelBgPadding[0]}px`,height:`${t.value.height+2*i.labelBgPadding[1]}px`,x:-i.labelBgPadding[0],y:-i.labelBgPadding[1],style:qe(i.labelBgStyle),rx:i.labelBgBorderRadius,ry:i.labelBgBorderRadius},null,12,Cz)):ve("",!0),T("text",dn(i.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:i.labelStyle}),[Qe(i.$slots,"default",{},()=>[typeof i.label!="string"?(L(),Ye(Kt(i.label),{key:0})):(L(),X(xe,{key:1},[Ze(ye(i.label),1)],64))])],16,Iz)],8,kz))}}),Mz=["id","d","marker-end","marker-start"],Dz=["d","stroke-width"],Oz={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},td=Ne({...Oz,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=de(null),o=de(null),r=de(null),i=Li();return t({pathEl:n,interactionEl:o,labelEl:r}),(s,a)=>(L(),X(xe,null,[T("path",dn(ie(i),{id:s.id,ref_key:"pathEl",ref:n,d:s.path,class:"vue-flow__edge-path","marker-end":s.markerEnd,"marker-start":s.markerStart}),null,16,Mz),s.interactionWidth?(L(),X("path",{key:0,ref_key:"interactionEl",ref:o,fill:"none",d:s.path,"stroke-width":s.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,Dz)):ve("",!0),s.label&&s.labelX&&s.labelY?(L(),Ye(Az,{key:1,ref_key:"labelEl",ref:r,x:s.labelX,y:s.labelY,label:s.label,"label-show-bg":s.labelShowBg,"label-bg-style":s.labelBgStyle,"label-bg-padding":s.labelBgPadding,"label-bg-border-radius":s.labelBgBorderRadius,"label-style":s.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):ve("",!0)],64))}});function bx({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,s=Math.abs(o-t)/2,a=o<t?o+s:o-s;return[i,a,r,s]}function wx({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:s,targetControlY:a}){const l=e*.125+r*.375+s*.375+n*.125,u=t*.125+i*.375+a*.375+o*.125,c=Math.abs(l-e),d=Math.abs(u-t);return[l,u,c,d]}function cl(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function dv({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){let s,a;switch(e){case Ae.Left:s=t-cl(t-o,i),a=n;break;case Ae.Right:s=t+cl(o-t,i),a=n;break;case Ae.Top:s=t,a=n-cl(n-r,i);break;case Ae.Bottom:s=t,a=n+cl(r-n,i);break}return[s,a]}function Pz(e){const{sourceX:t,sourceY:n,sourcePosition:o=Ae.Bottom,targetX:r,targetY:i,targetPosition:s=Ae.Top,curvature:a=.25}=e,[l,u]=dv({pos:o,x1:t,y1:n,x2:r,y2:i,c:a}),[c,d]=dv({pos:s,x1:r,y1:i,x2:t,y2:n,c:a}),[f,h,m,v]=wx({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:c,targetControlY:d});return[`M${t},${n} C${l},${u} ${c},${d} ${r},${i}`,f,h,m,v]}function fv({pos:e,x1:t,y1:n,x2:o,y2:r}){let i,s;switch(e){case Ae.Left:case Ae.Right:i=.5*(t+o),s=n;break;case Ae.Top:case Ae.Bottom:i=t,s=.5*(n+r);break}return[i,s]}function Rz(e){const{sourceX:t,sourceY:n,sourcePosition:o=Ae.Bottom,targetX:r,targetY:i,targetPosition:s=Ae.Top}=e,[a,l]=fv({pos:o,x1:t,y1:n,x2:r,y2:i}),[u,c]=fv({pos:s,x1:r,y1:i,x2:t,y2:n}),[d,f,h,m]=wx({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${t},${n} C${a},${l} ${u},${c} ${r},${i}`,d,f,h,m]}const hv={[Ae.Left]:{x:-1,y:0},[Ae.Right]:{x:1,y:0},[Ae.Top]:{x:0,y:-1},[Ae.Bottom]:{x:0,y:1}};function zz({source:e,sourcePosition:t=Ae.Bottom,target:n}){return t===Ae.Left||t===Ae.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function gv(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function Vz({source:e,sourcePosition:t=Ae.Bottom,target:n,targetPosition:o=Ae.Top,center:r,offset:i}){const s=hv[t],a=hv[o],l={x:e.x+s.x*i,y:e.y+s.y*i},u={x:n.x+a.x*i,y:n.y+a.y*i},c=zz({source:l,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",f=c[d];let h,m,v;const b={x:0,y:0},x={x:0,y:0},[N,S,A,G]=bx({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[d]*a[d]===-1){m=r.x??N,v=r.y??S;const Z=[{x:m,y:l.y},{x:m,y:u.y}],z=[{x:l.x,y:v},{x:u.x,y:v}];s[d]===f?h=d==="x"?Z:z:h=d==="x"?z:Z}else{const Z=[{x:l.x,y:u.y}],z=[{x:u.x,y:l.y}];if(d==="x"?h=s.x===f?z:Z:h=s.y===f?Z:z,t===o){const R=Math.abs(e[d]-n[d]);if(R<=i){const w=Math.min(i-1,i-R);s[d]===f?b[d]=(l[d]>e[d]?-1:1)*w:x[d]=(u[d]>n[d]?-1:1)*w}}if(t!==o){const R=d==="x"?"y":"x",w=s[d]===a[R],O=l[R]>u[R],C=l[R]<u[R];(s[d]===1&&(!w&&O||w&&C)||s[d]!==1&&(!w&&C||w&&O))&&(h=d==="x"?Z:z)}const j={x:l.x+b.x,y:l.y+b.y},H={x:u.x+x.x,y:u.y+x.y},D=Math.max(Math.abs(j.x-h[0].x),Math.abs(H.x-h[0].x)),I=Math.max(Math.abs(j.y-h[0].y),Math.abs(H.y-h[0].y));D>=I?(m=(j.x+H.x)/2,v=h[0].y):(m=h[0].x,v=(j.y+H.y)/2)}return[[e,{x:l.x+b.x,y:l.y+b.y},...h,{x:u.x+x.x,y:u.y+x.y},n],m,v,A,G]}function Hz(e,t,n,o){const r=Math.min(gv(e,t)/2,gv(t,n)/2,o),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${i+r*u},${s}Q ${i},${s} ${i},${s+r*c}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${i},${s+r*l}Q ${i},${s} ${i+r*a},${s}`}function Bz(e){const{sourceX:t,sourceY:n,sourcePosition:o=Ae.Bottom,targetX:r,targetY:i,targetPosition:s=Ae.Top,borderRadius:a=5,centerX:l,centerY:u,offset:c=20}=e,[d,f,h,m,v]=Vz({source:{x:t,y:n},sourcePosition:o,target:{x:r,y:i},targetPosition:s,center:{x:l,y:u},offset:c});return[d.reduce((x,N,S)=>{let A;return S>0&&S<d.length-1?A=Hz(d[S-1],N,d[S+1],a):A=`${S===0?"M":"L"}${N.x} ${N.y}`,x+=A,x},""),f,h,m,v]}function Fz(e){const{sourceX:t,sourceY:n,targetX:o,targetY:r}=e,[i,s,a,l]=bx({sourceX:t,sourceY:n,targetX:o,targetY:r});return[`M ${t},${n}L ${o},${r}`,i,s,a,l]}const Lz=Ne({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=Fz(e);return _e(td,{path:n,labelX:o,labelY:r,...t,...e})}}}),Uz=Lz,Gz=Ne({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=Bz({...e,sourcePosition:e.sourcePosition??Ae.Bottom,targetPosition:e.targetPosition??Ae.Top});return _e(td,{path:n,labelX:o,labelY:r,...t,...e})}}}),xx=Gz,Zz=Ne({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>_e(xx,{...e,...t,borderRadius:0})}}),Yz=Zz,Xz=Ne({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=Pz({...e,sourcePosition:e.sourcePosition??Ae.Bottom,targetPosition:e.targetPosition??Ae.Top});return _e(td,{path:n,labelX:o,labelY:r,...t,...e})}}}),Wz=Xz,jz=Ne({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=Rz({...e,sourcePosition:e.sourcePosition??Ae.Bottom,targetPosition:e.targetPosition??Ae.Top});return _e(td,{path:n,labelX:o,labelY:r,...t,...e})}}}),qz=jz,Kz={input:Nz,default:Ez,output:Sz},Jz={default:Wz,straight:Uz,step:Yz,smoothstep:xx,simplebezier:qz};function Qz(e,t,n){const o=J(()=>v=>t.value.get(v)),r=J(()=>v=>n.value.get(v)),i=J(()=>{const v={...Jz,...e.edgeTypes},b=Object.keys(v);for(const x of e.edges)x.type&&!b.includes(x.type)&&(v[x.type]=x.type);return v}),s=J(()=>{const v={...Kz,...e.nodeTypes},b=Object.keys(v);for(const x of e.nodes)x.type&&!b.includes(x.type)&&(v[x.type]=x.type);return v}),a=J(()=>e.onlyRenderVisibleElements?WR(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),l=J(()=>{if(e.onlyRenderVisibleElements){const v=[];for(const b of e.edges){const x=t.value.get(b.source),N=t.value.get(b.target);JR({sourcePos:x.computedPosition||{x:0,y:0},targetPos:N.computedPosition||{x:0,y:0},sourceWidth:x.dimensions.width,sourceHeight:x.dimensions.height,targetWidth:N.dimensions.width,targetHeight:N.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&v.push(b)}return v}return e.edges}),u=J(()=>[...a.value,...l.value]),c=J(()=>{const v=[];for(const b of e.nodes)b.selected&&v.push(b);return v}),d=J(()=>{const v=[];for(const b of e.edges)b.selected&&v.push(b);return v}),f=J(()=>[...c.value,...d.value]),h=J(()=>{const v=[];for(const b of e.nodes)b.dimensions.width&&b.dimensions.height&&b.handleBounds!==void 0&&v.push(b);return v}),m=J(()=>a.value.length>0&&h.value.length===a.value.length);return{getNode:o,getEdge:r,getElements:u,getEdgeTypes:i,getNodeTypes:s,getEdges:l,getNodes:a,getSelectedElements:f,getSelectedNodes:c,getSelectedEdges:d,getNodesInitialized:h,areNodesInitialized:m}}let eV=class Qr{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=jt())==null?void 0:t.appContext.app,o=n?.config.globalProperties.$vueFlowStorage??Qr.instance;return Qr.instance=o??new Qr,n&&(n.config.globalProperties.$vueFlowStorage=Qr.instance),Qr.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=_x(),r=wo(o),i={};for(const[f,h]of Object.entries(r.hooks)){const m=`on${f.charAt(0).toUpperCase()+f.slice(1)}`;i[m]=h.on}const s={};for(const[f,h]of Object.entries(r.hooks))s[f]=h.trigger;const a=J(()=>{const f=new Map;for(const h of r.nodes)f.set(h.id,h);return f}),l=J(()=>{const f=new Map;for(const h of r.edges)f.set(h.id,h);return f}),u=Qz(r,a,l),c=wz(r,a,l);c.setState({...r,...n});const d={...i,...u,...c,...pO(r),nodeLookup:a,edgeLookup:l,emits:s,id:t,vueFlowVersion:"1.47.0",$destroy:()=>{this.remove(t)}};return this.set(t,d),d}getId(){return`vue-flow-${this.currentId++}`}};function Ta(e){const t=eV.getInstance(),n=Gn(),o={id:e},r=o.id,i=r??n?.vueFlowId;let s;if(n){const a=ot(cv,null);typeof a<"u"&&a!==null&&(!i||a.id===i)&&(s=a)}if(s||i&&(s=t.get(i)),!s||i&&s.id!==i){const a=r??t.getId(),l=t.create(a,o);s=l,(n??Dr(!0)).run(()=>{Se(l.applyDefault,(c,d,f)=>{const h=v=>{l.applyNodeChanges(v)},m=v=>{l.applyEdgeChanges(v)};c?(l.onNodesChange(h),l.onEdgesChange(m)):(l.hooks.value.nodesChange.off(h),l.hooks.value.edgesChange.off(m)),f(()=>{l.hooks.value.nodesChange.off(h),l.hooks.value.edgesChange.off(m)})},{immediate:!0}),R1(()=>{if(s){const c=t.get(s.id);c?c.$destroy():Kc(`No store instance found for id ${s.id} in storage.`)}})})}return n&&(Ht(cv,s),n.vueFlowId=s.id),s}const tV={name:"Panel",compatConfig:{MODE:3}},nV=Ne({...tV,props:{position:{}},setup(e){const t=e,{userSelectionActive:n}=Ta(),o=J(()=>`${t.position}`.split("-"));return(r,i)=>(L(),X("div",{class:We(["vue-flow__panel",o.value]),style:qe({pointerEvents:ie(n)?"none":"all"})},[Qe(r.$slots,"default")],6))}}),oV={name:"ControlButton",compatConfig:{MODE:3}},rV=(e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n},iV={type:"button",class:"vue-flow__controls-button"};function sV(e,t,n,o,r,i){return L(),X("button",iV,[Qe(e.$slots,"default")])}const dl=rV(oV,[["render",sV]]),aV={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},lV=T("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"},null,-1),uV=[lV];function cV(e,t){return L(),X("svg",aV,uV)}const dV={render:cV},fV={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},hV=T("path",{d:"M0 0h32v4.2H0z"},null,-1),gV=[hV];function pV(e,t){return L(),X("svg",fV,gV)}const mV={render:pV},yV={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},vV=T("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"},null,-1),_V=[vV];function bV(e,t){return L(),X("svg",yV,_V)}const wV={render:bV},xV={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},$V=T("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"},null,-1),EV=[$V];function SV(e,t){return L(),X("svg",xV,EV)}const NV={render:SV},kV={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},CV=T("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"},null,-1),IV=[CV];function TV(e,t){return L(),X("svg",kV,IV)}const AV={render:TV},MV={name:"Controls",compatConfig:{MODE:3}},DV=Ne({...MV,props:{showZoom:{type:Boolean,default:!0},showFitView:{type:Boolean,default:!0},showInteractive:{type:Boolean,default:!0},fitViewParams:{},position:{default:()=>dx.BottomLeft}},emits:["zoomIn","zoomOut","fitView","interactionChange"],setup(e,{emit:t}){const{nodesDraggable:n,nodesConnectable:o,elementsSelectable:r,setInteractive:i,zoomIn:s,zoomOut:a,fitView:l,viewport:u,minZoom:c,maxZoom:d}=Ta(),f=Oe(()=>n.value||o.value||r.value),h=Oe(()=>u.value.zoom<=c.value),m=Oe(()=>u.value.zoom>=d.value);function v(){s(),t("zoomIn")}function b(){a(),t("zoomOut")}function x(){l(e.fitViewParams),t("fitView")}function N(){i(!f.value),t("interactionChange",!f.value)}return(S,A)=>(L(),Ye(ie(nV),{class:"vue-flow__controls",position:S.position},{default:Pe(()=>[Qe(S.$slots,"top"),S.showZoom?(L(),X(xe,{key:0},[Qe(S.$slots,"control-zoom-in",{},()=>[ue(dl,{class:"vue-flow__controls-zoomin",disabled:m.value,onClick:v},{default:Pe(()=>[Qe(S.$slots,"icon-zoom-in",{},()=>[(L(),Ye(Kt(ie(dV))))])]),_:3},8,["disabled"])]),Qe(S.$slots,"control-zoom-out",{},()=>[ue(dl,{class:"vue-flow__controls-zoomout",disabled:h.value,onClick:b},{default:Pe(()=>[Qe(S.$slots,"icon-zoom-out",{},()=>[(L(),Ye(Kt(ie(mV))))])]),_:3},8,["disabled"])])],64)):ve("",!0),S.showFitView?Qe(S.$slots,"control-fit-view",{key:1},()=>[ue(dl,{class:"vue-flow__controls-fitview",onClick:x},{default:Pe(()=>[Qe(S.$slots,"icon-fit-view",{},()=>[(L(),Ye(Kt(ie(wV))))])]),_:3})]):ve("",!0),S.showInteractive?Qe(S.$slots,"control-interactive",{key:2},()=>[S.showInteractive?(L(),Ye(dl,{key:0,class:"vue-flow__controls-interactive",onClick:N},{default:Pe(()=>[f.value?Qe(S.$slots,"icon-unlock",{key:0},()=>[(L(),Ye(Kt(ie(AV))))]):ve("",!0),f.value?ve("",!0):Qe(S.$slots,"icon-lock",{key:1},()=>[(L(),Ye(Kt(ie(NV))))])]),_:3})):ve("",!0)]):ve("",!0),Qe(S.$slots,"default")]),_:3},8,["position"]))}});function $x(e){return Gn()?(Fo(e),!0):!1}function ei(e){return typeof e=="function"?e():ie(e)}function pv(e,t=!1,n="Timeout"){return new Promise((o,r)=>{setTimeout(t?()=>r(n):o,e)})}function OV(e,t={}){if(!je(e))return _a(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=yc(()=>({get(){return e.value[o]},set(r){var i;if((i=ei(t.replaceRef))!=null?i:!0)if(Array.isArray(e.value)){const a=[...e.value];a[o]=r,e.value=a}else{const a={...e.value,[o]:r};Object.setPrototypeOf(a,Object.getPrototypeOf(e.value)),e.value=a}else e.value[o]=r}}));return n}function mh(e,t=!1){function n(d,{flush:f="sync",deep:h=!1,timeout:m,throwOnTimeout:v}={}){let b=null;const N=[new Promise(S=>{b=Se(e,A=>{d(A)!==t&&(b?.(),S(A))},{flush:f,deep:h,immediate:!0})})];return m!=null&&N.push(pv(m,v).then(()=>ei(e)).finally(()=>b?.())),Promise.race(N)}function o(d,f){if(!je(d))return n(A=>A===d,f);const{flush:h="sync",deep:m=!1,timeout:v,throwOnTimeout:b}=f??{};let x=null;const S=[new Promise(A=>{x=Se([e,d],([G,W])=>{t!==(G===W)&&(x?.(),A(G))},{flush:h,deep:m,immediate:!0})})];return v!=null&&S.push(pv(v,b).then(()=>ei(e)).finally(()=>(x?.(),ei(e)))),Promise.race(S)}function r(d){return n(f=>!!f,d)}function i(d){return o(null,d)}function s(d){return o(void 0,d)}function a(d){return n(Number.isNaN,d)}function l(d,f){return n(h=>{const m=Array.from(h);return m.includes(d)||m.includes(ei(d))},f)}function u(d){return c(1,d)}function c(d=1,f){let h=-1;return n(()=>(h+=1,h>=d),f)}return Array.isArray(ei(e))?{toMatch:n,toContains:l,changed:u,changedTimes:c,get not(){return mh(e,!t)}}:{toMatch:n,toBe:o,toBeTruthy:r,toBeNull:i,toBeNaN:a,toBeUndefined:s,changed:u,changedTimes:c,get not(){return mh(e,!t)}}}function mv(e){return mh(e)}var PV={value:()=>{}};function Ex(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Ll(n)}function Ll(e){this._=e}function RV(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Ll.prototype=Ex.prototype={constructor:Ll,on:function(e,t){var n=this._,o=RV(e+"",n),r,i=-1,s=o.length;if(arguments.length<2){for(;++i<s;)if((r=(e=o[i]).type)&&(r=zV(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(r=(e=o[i]).type)n[r]=yv(n[r],e.name,t);else if(t==null)for(r in n)n[r]=yv(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ll(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};function zV(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function yv(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=PV,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var yh="http://www.w3.org/1999/xhtml";const vv={svg:"http://www.w3.org/2000/svg",xhtml:yh,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function nd(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),vv.hasOwnProperty(t)?{space:vv[t],local:e}:e}function VV(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===yh&&t.documentElement.namespaceURI===yh?t.createElement(e):t.createElementNS(n,e)}}function HV(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Sx(e){var t=nd(e);return(t.local?HV:VV)(t)}function BV(){}function Zg(e){return e==null?BV:function(){return this.querySelector(e)}}function FV(e){typeof e!="function"&&(e=Zg(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=new Array(s),l,u,c=0;c<s;++c)(l=i[c])&&(u=e.call(l,l.__data__,c,i))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new gn(o,this._parents)}function LV(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function UV(){return[]}function Nx(e){return e==null?UV:function(){return this.querySelectorAll(e)}}function GV(e){return function(){return LV(e.apply(this,arguments))}}function ZV(e){typeof e=="function"?e=GV(e):e=Nx(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var s=t[i],a=s.length,l,u=0;u<a;++u)(l=s[u])&&(o.push(e.call(l,l.__data__,u,s)),r.push(l));return new gn(o,r)}function kx(e){return function(){return this.matches(e)}}function Cx(e){return function(t){return t.matches(e)}}var YV=Array.prototype.find;function XV(e){return function(){return YV.call(this.children,e)}}function WV(){return this.firstElementChild}function jV(e){return this.select(e==null?WV:XV(typeof e=="function"?e:Cx(e)))}var qV=Array.prototype.filter;function KV(){return Array.from(this.children)}function JV(e){return function(){return qV.call(this.children,e)}}function QV(e){return this.selectAll(e==null?KV:JV(typeof e=="function"?e:Cx(e)))}function e7(e){typeof e!="function"&&(e=kx(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=[],l,u=0;u<s;++u)(l=i[u])&&e.call(l,l.__data__,u,i)&&a.push(l);return new gn(o,this._parents)}function Ix(e){return new Array(e.length)}function t7(){return new gn(this._enter||this._groups.map(Ix),this._parents)}function Fu(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Fu.prototype={constructor:Fu,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function n7(e){return function(){return e}}function o7(e,t,n,o,r,i){for(var s=0,a,l=t.length,u=i.length;s<u;++s)(a=t[s])?(a.__data__=i[s],o[s]=a):n[s]=new Fu(e,i[s]);for(;s<l;++s)(a=t[s])&&(r[s]=a)}function r7(e,t,n,o,r,i,s){var a,l,u=new Map,c=t.length,d=i.length,f=new Array(c),h;for(a=0;a<c;++a)(l=t[a])&&(f[a]=h=s.call(l,l.__data__,a,t)+"",u.has(h)?r[a]=l:u.set(h,l));for(a=0;a<d;++a)h=s.call(e,i[a],a,i)+"",(l=u.get(h))?(o[a]=l,l.__data__=i[a],u.delete(h)):n[a]=new Fu(e,i[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(f[a])===l&&(r[a]=l)}function i7(e){return e.__data__}function s7(e,t){if(!arguments.length)return Array.from(this,i7);var n=t?r7:o7,o=this._parents,r=this._groups;typeof e!="function"&&(e=n7(e));for(var i=r.length,s=new Array(i),a=new Array(i),l=new Array(i),u=0;u<i;++u){var c=o[u],d=r[u],f=d.length,h=a7(e.call(c,c&&c.__data__,u,o)),m=h.length,v=a[u]=new Array(m),b=s[u]=new Array(m),x=l[u]=new Array(f);n(c,d,v,b,x,h,t);for(var N=0,S=0,A,G;N<m;++N)if(A=v[N]){for(N>=S&&(S=N+1);!(G=b[S])&&++S<m;);A._next=G||null}}return s=new gn(s,o),s._enter=a,s._exit=l,s}function a7(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function l7(){return new gn(this._exit||this._groups.map(Ix),this._parents)}function u7(e,t,n){var o=this.enter(),r=this,i=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function c7(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,s=Math.min(r,i),a=new Array(r),l=0;l<s;++l)for(var u=n[l],c=o[l],d=u.length,f=a[l]=new Array(d),h,m=0;m<d;++m)(h=u[m]||c[m])&&(f[m]=h);for(;l<r;++l)a[l]=n[l];return new gn(a,this._parents)}function d7(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,i=o[r],s;--r>=0;)(s=o[r])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function f7(e){e||(e=h7);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var s=n[i],a=s.length,l=r[i]=new Array(a),u,c=0;c<a;++c)(u=s[c])&&(l[c]=u);l.sort(t)}return new gn(r,this._parents).order()}function h7(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function g7(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function p7(){return Array.from(this)}function m7(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var s=o[r];if(s)return s}return null}function y7(){let e=0;for(const t of this)++e;return e}function v7(){return!this.node()}function _7(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],i=0,s=r.length,a;i<s;++i)(a=r[i])&&e.call(a,a.__data__,i,r);return this}function b7(e){return function(){this.removeAttribute(e)}}function w7(e){return function(){this.removeAttributeNS(e.space,e.local)}}function x7(e,t){return function(){this.setAttribute(e,t)}}function $7(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function E7(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function S7(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function N7(e,t){var n=nd(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?w7:b7:typeof t=="function"?n.local?S7:E7:n.local?$7:x7)(n,t))}function Tx(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function k7(e){return function(){this.style.removeProperty(e)}}function C7(e,t,n){return function(){this.style.setProperty(e,t,n)}}function I7(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function T7(e,t,n){return arguments.length>1?this.each((t==null?k7:typeof t=="function"?I7:C7)(e,t,n??"")):Oi(this.node(),e)}function Oi(e,t){return e.style.getPropertyValue(t)||Tx(e).getComputedStyle(e,null).getPropertyValue(t)}function A7(e){return function(){delete this[e]}}function M7(e,t){return function(){this[e]=t}}function D7(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function O7(e,t){return arguments.length>1?this.each((t==null?A7:typeof t=="function"?D7:M7)(e,t)):this.node()[e]}function Ax(e){return e.trim().split(/^|\s+/)}function Yg(e){return e.classList||new Mx(e)}function Mx(e){this._node=e,this._names=Ax(e.getAttribute("class")||"")}Mx.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Dx(e,t){for(var n=Yg(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function Ox(e,t){for(var n=Yg(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function P7(e){return function(){Dx(this,e)}}function R7(e){return function(){Ox(this,e)}}function z7(e,t){return function(){(t.apply(this,arguments)?Dx:Ox)(this,e)}}function V7(e,t){var n=Ax(e+"");if(arguments.length<2){for(var o=Yg(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?z7:t?P7:R7)(n,t))}function H7(){this.textContent=""}function B7(e){return function(){this.textContent=e}}function F7(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function L7(e){return arguments.length?this.each(e==null?H7:(typeof e=="function"?F7:B7)(e)):this.node().textContent}function U7(){this.innerHTML=""}function G7(e){return function(){this.innerHTML=e}}function Z7(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Y7(e){return arguments.length?this.each(e==null?U7:(typeof e=="function"?Z7:G7)(e)):this.node().innerHTML}function X7(){this.nextSibling&&this.parentNode.appendChild(this)}function W7(){return this.each(X7)}function j7(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function q7(){return this.each(j7)}function K7(e){var t=typeof e=="function"?e:Sx(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function J7(){return null}function Q7(e,t){var n=typeof e=="function"?e:Sx(e),o=t==null?J7:typeof t=="function"?t:Zg(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function e8(){var e=this.parentNode;e&&e.removeChild(this)}function t8(){return this.each(e8)}function n8(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function o8(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function r8(e){return this.select(e?o8:n8)}function i8(e){return arguments.length?this.property("__data__",e):this.node().__data__}function s8(e){return function(t){e.call(this,t,this.__data__)}}function a8(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function l8(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++o]=i;++o?t.length=o:delete this.__on}}}function u8(e,t,n){return function(){var o=this.__on,r,i=s8(t);if(o){for(var s=0,a=o.length;s<a;++s)if((r=o[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function c8(e,t,n){var o=a8(e+""),r,i=o.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(r=0,c=a[l];r<i;++r)if((s=o[r]).type===c.type&&s.name===c.name)return c.value}return}for(a=t?u8:l8,r=0;r<i;++r)this.each(a(o[r],t,n));return this}function Px(e,t,n){var o=Tx(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function d8(e,t){return function(){return Px(this,e,t)}}function f8(e,t){return function(){return Px(this,e,t.apply(this,arguments))}}function h8(e,t){return this.each((typeof t=="function"?f8:d8)(e,t))}function*g8(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length,s;r<i;++r)(s=o[r])&&(yield s)}var p8=[null];function gn(e,t){this._groups=e,this._parents=t}function Aa(){return new gn([[document.documentElement]],p8)}function m8(){return this}gn.prototype=Aa.prototype={constructor:gn,select:FV,selectAll:ZV,selectChild:jV,selectChildren:QV,filter:e7,data:s7,enter:t7,exit:l7,join:u7,merge:c7,selection:m8,order:d7,sort:f7,call:g7,nodes:p7,node:m7,size:y7,empty:v7,each:_7,attr:N7,style:T7,property:O7,classed:V7,text:L7,html:Y7,raise:W7,lower:q7,append:K7,insert:Q7,remove:t8,clone:r8,datum:i8,on:c8,dispatch:h8,[Symbol.iterator]:g8};function Xg(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Rx(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Ma(){}var sa=.7,Lu=1/sa,yi="\\s*([+-]?\\d+)\\s*",aa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",y8=/^#([0-9a-f]{3,8})$/,v8=new RegExp(`^rgb\\(${yi},${yi},${yi}\\)$`),_8=new RegExp(`^rgb\\(${Fn},${Fn},${Fn}\\)$`),b8=new RegExp(`^rgba\\(${yi},${yi},${yi},${aa}\\)$`),w8=new RegExp(`^rgba\\(${Fn},${Fn},${Fn},${aa}\\)$`),x8=new RegExp(`^hsl\\(${aa},${Fn},${Fn}\\)$`),$8=new RegExp(`^hsla\\(${aa},${Fn},${Fn},${aa}\\)$`),_v={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Xg(Ma,Tr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:bv,formatHex:bv,formatHex8:E8,formatHsl:S8,formatRgb:wv,toString:wv});function bv(){return this.rgb().formatHex()}function E8(){return this.rgb().formatHex8()}function S8(){return zx(this).formatHsl()}function wv(){return this.rgb().formatRgb()}function Tr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=y8.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?xv(t):n===3?new zt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?fl(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?fl(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=v8.exec(e))?new zt(t[1],t[2],t[3],1):(t=_8.exec(e))?new zt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=b8.exec(e))?fl(t[1],t[2],t[3],t[4]):(t=w8.exec(e))?fl(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=x8.exec(e))?Sv(t[1],t[2]/100,t[3]/100,1):(t=$8.exec(e))?Sv(t[1],t[2]/100,t[3]/100,t[4]):_v.hasOwnProperty(e)?xv(_v[e]):e==="transparent"?new zt(NaN,NaN,NaN,0):null}function xv(e){return new zt(e>>16&255,e>>8&255,e&255,1)}function fl(e,t,n,o){return o<=0&&(e=t=n=NaN),new zt(e,t,n,o)}function N8(e){return e instanceof Ma||(e=Tr(e)),e?(e=e.rgb(),new zt(e.r,e.g,e.b,e.opacity)):new zt}function vh(e,t,n,o){return arguments.length===1?N8(e):new zt(e,t,n,o??1)}function zt(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}Xg(zt,vh,Rx(Ma,{brighter(e){return e=e==null?Lu:Math.pow(Lu,e),new zt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?sa:Math.pow(sa,e),new zt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new zt(_r(this.r),_r(this.g),_r(this.b),Uu(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$v,formatHex:$v,formatHex8:k8,formatRgb:Ev,toString:Ev}));function $v(){return`#${ur(this.r)}${ur(this.g)}${ur(this.b)}`}function k8(){return`#${ur(this.r)}${ur(this.g)}${ur(this.b)}${ur((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ev(){const e=Uu(this.opacity);return`${e===1?"rgb(":"rgba("}${_r(this.r)}, ${_r(this.g)}, ${_r(this.b)}${e===1?")":`, ${e})`}`}function Uu(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function _r(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ur(e){return e=_r(e),(e<16?"0":"")+e.toString(16)}function Sv(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new nn(e,t,n,o)}function zx(e){if(e instanceof nn)return new nn(e.h,e.s,e.l,e.opacity);if(e instanceof Ma||(e=Tr(e)),!e)return new nn;if(e instanceof nn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),s=NaN,a=i-r,l=(i+r)/2;return a?(t===i?s=(n-o)/a+(n<o)*6:n===i?s=(o-t)/a+2:s=(t-n)/a+4,a/=l<.5?i+r:2-i-r,s*=60):a=l>0&&l<1?0:s,new nn(s,a,l,e.opacity)}function C8(e,t,n,o){return arguments.length===1?zx(e):new nn(e,t,n,o??1)}function nn(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}Xg(nn,C8,Rx(Ma,{brighter(e){return e=e==null?Lu:Math.pow(Lu,e),new nn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?sa:Math.pow(sa,e),new nn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new zt(sf(e>=240?e-240:e+120,r,o),sf(e,r,o),sf(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new nn(Nv(this.h),hl(this.s),hl(this.l),Uu(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Uu(this.opacity);return`${e===1?"hsl(":"hsla("}${Nv(this.h)}, ${hl(this.s)*100}%, ${hl(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Nv(e){return e=(e||0)%360,e<0?e+360:e}function hl(e){return Math.max(0,Math.min(1,e||0))}function sf(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Wg=e=>()=>e;function I8(e,t){return function(n){return e+n*t}}function T8(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function A8(e){return(e=+e)==1?Vx:function(t,n){return n-t?T8(t,n,e):Wg(isNaN(t)?n:t)}}function Vx(e,t){var n=t-e;return n?I8(e,n):Wg(isNaN(e)?t:e)}const Gu=(function e(t){var n=A8(t);function o(r,i){var s=n((r=vh(r)).r,(i=vh(i)).r),a=n(r.g,i.g),l=n(r.b,i.b),u=Vx(r.opacity,i.opacity);return function(c){return r.r=s(c),r.g=a(c),r.b=l(c),r.opacity=u(c),r+""}}return o.gamma=e,o})(1);function M8(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,o=t.slice(),r;return function(i){for(r=0;r<n;++r)o[r]=e[r]*(1-i)+t[r]*i;return o}}function D8(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function O8(e,t){var n=t?t.length:0,o=e?Math.min(n,e.length):0,r=new Array(o),i=new Array(n),s;for(s=0;s<o;++s)r[s]=Ds(e[s],t[s]);for(;s<n;++s)i[s]=t[s];return function(a){for(s=0;s<o;++s)i[s]=r[s](a);return i}}function P8(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function Tn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function R8(e,t){var n={},o={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=Ds(e[r],t[r]):o[r]=t[r];return function(i){for(r in n)o[r]=n[r](i);return o}}var _h=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,af=new RegExp(_h.source,"g");function z8(e){return function(){return e}}function V8(e){return function(t){return e(t)+""}}function Hx(e,t){var n=_h.lastIndex=af.lastIndex=0,o,r,i,s=-1,a=[],l=[];for(e=e+"",t=t+"";(o=_h.exec(e))&&(r=af.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),a[s]?a[s]+=i:a[++s]=i),(o=o[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:Tn(o,r)})),n=af.lastIndex;return n<t.length&&(i=t.slice(n),a[s]?a[s]+=i:a[++s]=i),a.length<2?l[0]?V8(l[0].x):z8(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}function Ds(e,t){var n=typeof t,o;return t==null||n==="boolean"?Wg(t):(n==="number"?Tn:n==="string"?(o=Tr(t))?(t=o,Gu):Hx:t instanceof Tr?Gu:t instanceof Date?P8:D8(t)?M8:Array.isArray(t)?O8:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?R8:Tn)(e,t)}var kv=180/Math.PI,bh={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Bx(e,t,n,o,r,i){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,l/=a),e*o<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*kv,skewX:Math.atan(l)*kv,scaleX:s,scaleY:a}}var gl;function H8(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?bh:Bx(t.a,t.b,t.c,t.d,t.e,t.f)}function B8(e){return e==null||(gl||(gl=document.createElementNS("http://www.w3.org/2000/svg","g")),gl.setAttribute("transform",e),!(e=gl.transform.baseVal.consolidate()))?bh:(e=e.matrix,Bx(e.a,e.b,e.c,e.d,e.e,e.f))}function Fx(e,t,n,o){function r(u){return u.length?u.pop()+" ":""}function i(u,c,d,f,h,m){if(u!==d||c!==f){var v=h.push("translate(",null,t,null,n);m.push({i:v-4,x:Tn(u,d)},{i:v-2,x:Tn(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function s(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(r(d)+"rotate(",null,o)-2,x:Tn(u,c)})):c&&d.push(r(d)+"rotate("+c+o)}function a(u,c,d,f){u!==c?f.push({i:d.push(r(d)+"skewX(",null,o)-2,x:Tn(u,c)}):c&&d.push(r(d)+"skewX("+c+o)}function l(u,c,d,f,h,m){if(u!==d||c!==f){var v=h.push(r(h)+"scale(",null,",",null,")");m.push({i:v-4,x:Tn(u,d)},{i:v-2,x:Tn(c,f)})}else(d!==1||f!==1)&&h.push(r(h)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),i(u.translateX,u.translateY,c.translateX,c.translateY,d,f),s(u.rotate,c.rotate,d,f),a(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var m=-1,v=f.length,b;++m<v;)d[(b=f[m]).i]=b.x(h);return d.join("")}}}var F8=Fx(H8,"px, ","px)","deg)"),L8=Fx(B8,", ",")",")"),U8=1e-12;function Cv(e){return((e=Math.exp(e))+1/e)/2}function G8(e){return((e=Math.exp(e))-1/e)/2}function Z8(e){return((e=Math.exp(2*e))-1)/(e+1)}const lf=(function e(t,n,o){function r(i,s){var a=i[0],l=i[1],u=i[2],c=s[0],d=s[1],f=s[2],h=c-a,m=d-l,v=h*h+m*m,b,x;if(v<U8)x=Math.log(f/u)/t,b=function(Z){return[a+Z*h,l+Z*m,u*Math.exp(t*Z*x)]};else{var N=Math.sqrt(v),S=(f*f-u*u+o*v)/(2*u*n*N),A=(f*f-u*u-o*v)/(2*f*n*N),G=Math.log(Math.sqrt(S*S+1)-S),W=Math.log(Math.sqrt(A*A+1)-A);x=(W-G)/t,b=function(Z){var z=Z*x,j=Cv(G),H=u/(n*N)*(j*Z8(t*z+G)-G8(G));return[a+H*h,l+H*m,u*j/Cv(t*z+G)]}}return b.duration=x*1e3*t/Math.SQRT2,b}return r.rho=function(i){var s=Math.max(.001,+i),a=s*s,l=a*a;return e(s,a,l)},r})(Math.SQRT2,2,4);var Pi=0,hs=0,Ki=0,Lx=1e3,Zu,gs,Yu=0,Ar=0,od=0,la=typeof performance=="object"&&performance.now?performance:Date,Ux=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function jg(){return Ar||(Ux(Y8),Ar=la.now()+od)}function Y8(){Ar=0}function Xu(){this._call=this._time=this._next=null}Xu.prototype=Gx.prototype={constructor:Xu,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?jg():+n)+(t==null?0:+t),!this._next&&gs!==this&&(gs?gs._next=this:Zu=this,gs=this),this._call=e,this._time=n,wh()},stop:function(){this._call&&(this._call=null,this._time=1/0,wh())}};function Gx(e,t,n){var o=new Xu;return o.restart(e,t,n),o}function X8(){jg(),++Pi;for(var e=Zu,t;e;)(t=Ar-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Pi}function Iv(){Ar=(Yu=la.now())+od,Pi=hs=0;try{X8()}finally{Pi=0,j8(),Ar=0}}function W8(){var e=la.now(),t=e-Yu;t>Lx&&(od-=t,Yu=e)}function j8(){for(var e,t=Zu,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Zu=n);gs=e,wh(o)}function wh(e){if(!Pi){hs&&(hs=clearTimeout(hs));var t=e-Ar;t>24?(e<1/0&&(hs=setTimeout(Iv,e-la.now()-od)),Ki&&(Ki=clearInterval(Ki))):(Ki||(Yu=la.now(),Ki=setInterval(W8,Lx)),Pi=1,Ux(Iv))}}function Tv(e,t,n){var o=new Xu;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var q8=Ex("start","end","cancel","interrupt"),K8=[],Zx=0,Av=1,xh=2,Ul=3,Mv=4,$h=5,Gl=6;function rd(e,t,n,o,r,i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;J8(e,n,{name:t,index:o,group:r,on:q8,tween:K8,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Zx})}function qg(e,t){var n=_n(e,t);if(n.state>Zx)throw new Error("too late; already scheduled");return n}function Wn(e,t){var n=_n(e,t);if(n.state>Ul)throw new Error("too late; already running");return n}function _n(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function J8(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=Gx(i,0,n.time);function i(u){n.state=Av,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var c,d,f,h;if(n.state!==Av)return l();for(c in o)if(h=o[c],h.name===n.name){if(h.state===Ul)return Tv(s);h.state===Mv?(h.state=Gl,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[c]):+c<t&&(h.state=Gl,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[c])}if(Tv(function(){n.state===Ul&&(n.state=Mv,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=xh,n.on.call("start",e,e.__data__,n.index,n.group),n.state===xh){for(n.state=Ul,r=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++d]=h);r.length=d+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=$h,1),d=-1,f=r.length;++d<f;)r[d].call(e,c);n.state===$h&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Gl,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function Q8(e,t){var n=e.__transition,o,r,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((o=n[s]).name!==t){i=!1;continue}r=o.state>xh&&o.state<$h,o.state=Gl,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[s]}i&&delete e.__transition}}function eH(e){return this.each(function(){Q8(this,e)})}function tH(e,t){var n,o;return function(){var r=Wn(this,e),i=r.tween;if(i!==n){o=n=i;for(var s=0,a=o.length;s<a;++s)if(o[s].name===t){o=o.slice(),o.splice(s,1);break}}r.tween=o}}function nH(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=Wn(this,e),s=i.tween;if(s!==o){r=(o=s).slice();for(var a={name:t,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===t){r[l]=a;break}l===u&&r.push(a)}i.tween=r}}function oH(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=_n(this.node(),n).tween,r=0,i=o.length,s;r<i;++r)if((s=o[r]).name===e)return s.value;return null}return this.each((t==null?tH:nH)(n,e,t))}function Kg(e,t,n){var o=e._id;return e.each(function(){var r=Wn(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return _n(r,o).value[t]}}function Yx(e,t){var n;return(typeof t=="number"?Tn:t instanceof Tr?Gu:(n=Tr(t))?(t=n,Gu):Hx)(e,t)}function rH(e){return function(){this.removeAttribute(e)}}function iH(e){return function(){this.removeAttributeNS(e.space,e.local)}}function sH(e,t,n){var o,r=n+"",i;return function(){var s=this.getAttribute(e);return s===r?null:s===o?i:i=t(o=s,n)}}function aH(e,t,n){var o,r=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===r?null:s===o?i:i=t(o=s,n)}}function lH(e,t,n){var o,r,i;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===o&&l===r?i:(r=l,i=t(o=s,a)))}}function uH(e,t,n){var o,r,i;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===o&&l===r?i:(r=l,i=t(o=s,a)))}}function cH(e,t){var n=nd(e),o=n==="transform"?L8:Yx;return this.attrTween(e,typeof t=="function"?(n.local?uH:lH)(n,o,Kg(this,"attr."+e,t)):t==null?(n.local?iH:rH)(n):(n.local?aH:sH)(n,o,t))}function dH(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function fH(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function hH(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&fH(e,i)),n}return r._value=t,r}function gH(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&dH(e,i)),n}return r._value=t,r}function pH(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=nd(e);return this.tween(n,(o.local?hH:gH)(o,t))}function mH(e,t){return function(){qg(this,e).delay=+t.apply(this,arguments)}}function yH(e,t){return t=+t,function(){qg(this,e).delay=t}}function vH(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?mH:yH)(t,e)):_n(this.node(),t).delay}function _H(e,t){return function(){Wn(this,e).duration=+t.apply(this,arguments)}}function bH(e,t){return t=+t,function(){Wn(this,e).duration=t}}function wH(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?_H:bH)(t,e)):_n(this.node(),t).duration}function xH(e,t){if(typeof t!="function")throw new Error;return function(){Wn(this,e).ease=t}}function $H(e){var t=this._id;return arguments.length?this.each(xH(t,e)):_n(this.node(),t).ease}function EH(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Wn(this,e).ease=n}}function SH(e){if(typeof e!="function")throw new Error;return this.each(EH(this._id,e))}function NH(e){typeof e!="function"&&(e=kx(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=[],l,u=0;u<s;++u)(l=i[u])&&e.call(l,l.__data__,u,i)&&a.push(l);return new _o(o,this._parents,this._name,this._id)}function kH(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),s=new Array(o),a=0;a<i;++a)for(var l=t[a],u=n[a],c=l.length,d=s[a]=new Array(c),f,h=0;h<c;++h)(f=l[h]||u[h])&&(d[h]=f);for(;a<o;++a)s[a]=t[a];return new _o(s,this._parents,this._name,this._id)}function CH(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function IH(e,t,n){var o,r,i=CH(t)?qg:Wn;return function(){var s=i(this,e),a=s.on;a!==o&&(r=(o=a).copy()).on(t,n),s.on=r}}function TH(e,t){var n=this._id;return arguments.length<2?_n(this.node(),n).on.on(e):this.each(IH(n,e,t))}function AH(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function MH(){return this.on("end.remove",AH(this._id))}function DH(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Zg(e));for(var o=this._groups,r=o.length,i=new Array(r),s=0;s<r;++s)for(var a=o[s],l=a.length,u=i[s]=new Array(l),c,d,f=0;f<l;++f)(c=a[f])&&(d=e.call(c,c.__data__,f,a))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,rd(u[f],t,n,f,u,_n(c,n)));return new _o(i,this._parents,t,n)}function OH(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Nx(e));for(var o=this._groups,r=o.length,i=[],s=[],a=0;a<r;++a)for(var l=o[a],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var f=e.call(c,c.__data__,d,l),h,m=_n(c,n),v=0,b=f.length;v<b;++v)(h=f[v])&&rd(h,t,n,v,f,m);i.push(f),s.push(c)}return new _o(i,s,t,n)}var PH=Aa.prototype.constructor;function RH(){return new PH(this._groups,this._parents)}function zH(e,t){var n,o,r;return function(){var i=Oi(this,e),s=(this.style.removeProperty(e),Oi(this,e));return i===s?null:i===n&&s===o?r:r=t(n=i,o=s)}}function Xx(e){return function(){this.style.removeProperty(e)}}function VH(e,t,n){var o,r=n+"",i;return function(){var s=Oi(this,e);return s===r?null:s===o?i:i=t(o=s,n)}}function HH(e,t,n){var o,r,i;return function(){var s=Oi(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Oi(this,e))),s===l?null:s===o&&l===r?i:(r=l,i=t(o=s,a))}}function BH(e,t){var n,o,r,i="style."+t,s="end."+i,a;return function(){var l=Wn(this,e),u=l.on,c=l.value[i]==null?a||(a=Xx(t)):void 0;(u!==n||r!==c)&&(o=(n=u).copy()).on(s,r=c),l.on=o}}function FH(e,t,n){var o=(e+="")=="transform"?F8:Yx;return t==null?this.styleTween(e,zH(e,o)).on("end.style."+e,Xx(e)):typeof t=="function"?this.styleTween(e,HH(e,o,Kg(this,"style."+e,t))).each(BH(this._id,e)):this.styleTween(e,VH(e,o,t),n).on("end.style."+e,null)}function LH(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function UH(e,t,n){var o,r;function i(){var s=t.apply(this,arguments);return s!==r&&(o=(r=s)&&LH(e,s,n)),o}return i._value=t,i}function GH(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,UH(e,t,n??""))}function ZH(e){return function(){this.textContent=e}}function YH(e){return function(){var t=e(this);this.textContent=t??""}}function XH(e){return this.tween("text",typeof e=="function"?YH(Kg(this,"text",e)):ZH(e==null?"":e+""))}function WH(e){return function(t){this.textContent=e.call(this,t)}}function jH(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&WH(r)),t}return o._value=e,o}function qH(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,jH(e))}function KH(){for(var e=this._name,t=this._id,n=Wx(),o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],a=s.length,l,u=0;u<a;++u)if(l=s[u]){var c=_n(l,t);rd(l,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new _o(o,this._parents,e,n)}function JH(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i,s){var a={value:s},l={value:function(){--r===0&&i()}};n.each(function(){var u=Wn(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),r===0&&i()})}var QH=0;function _o(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Wx(){return++QH}var eo=Aa.prototype;_o.prototype={constructor:_o,select:DH,selectAll:OH,selectChild:eo.selectChild,selectChildren:eo.selectChildren,filter:NH,merge:kH,selection:RH,transition:KH,call:eo.call,nodes:eo.nodes,node:eo.node,size:eo.size,empty:eo.empty,each:eo.each,on:TH,attr:cH,attrTween:pH,style:FH,styleTween:GH,text:XH,textTween:qH,remove:MH,tween:oH,delay:vH,duration:wH,ease:$H,easeVarying:SH,end:JH,[Symbol.iterator]:eo[Symbol.iterator]};function e9(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var t9={time:null,delay:0,duration:250,ease:e9};function n9(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function o9(e){var t,n;e instanceof _o?(t=e._id,e=e._name):(t=Wx(),(n=t9).time=jg(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],a=s.length,l,u=0;u<a;++u)(l=s[u])&&rd(l,e,t,u,s,n||n9(l,t));return new _o(o,this._parents,e,t)}Aa.prototype.interrupt=eH;Aa.prototype.transition=o9;function si(e,t,n){this.k=e,this.x=t,this.y=n}si.prototype={constructor:si,scale:function(e){return e===1?this:new si(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new si(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Eh=new si(1,0,0);si.prototype;var Me=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(Me||{}),jx=(e=>(e.Partial="partial",e.Full="full",e))(jx||{}),qx=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(qx||{}),id=(e=>(e.Strict="strict",e.Loose="loose",e))(id||{}),Kx=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(Kx||{});function Wu(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function ju(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function Jg(e){return{width:e.offsetWidth,height:e.offsetHeight}}function Ri(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function r9(e,t){return{x:Ri(e.x,t[0][0],t[1][0]),y:Ri(e.y,t[0][1],t[1][1])}}function Dv(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function qo(e){return e&&typeof e=="object"&&"id"in e&&"source"in e&&"target"in e}function br(e){return e&&typeof e=="object"&&"id"in e&&"position"in e&&!qo(e)}function ps(e){return br(e)&&"computedPosition"in e}function pl(e){return!Number.isNaN(e)&&Number.isFinite(e)}function i9(e){return pl(e.width)&&pl(e.height)&&pl(e.x)&&pl(e.y)}function s9(e,t,n){const o={id:e.id.toString(),type:e.type??"default",dimensions:_t({width:0,height:0}),computedPosition:_t({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:Zt(e.data)?e.data:{},events:_t(Zt(e.events)?e.events:{})};return Object.assign(t??o,e,{id:e.id.toString(),parentNode:n})}function Jx(e,t,n){var o,r;const i={id:e.id.toString(),type:e.type??t?.type??"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:(o=e.sourceHandle)==null?void 0:o.toString(),targetHandle:(r=e.targetHandle)==null?void 0:r.toString(),updatable:e.updatable??n?.updatable,selectable:e.selectable??n?.selectable,focusable:e.focusable??n?.focusable,data:Zt(e.data)?e.data:{},events:_t(Zt(e.events)?e.events:{}),label:e.label??"",interactionWidth:e.interactionWidth??n?.interactionWidth,...n??{}};return Object.assign(t??i,e,{id:e.id.toString()})}function Qx(e,t,n,o){const r=typeof e=="string"?e:e.id,i=new Set,s=o==="source"?"target":"source";for(const a of n)a[s]===r&&i.add(a[o]);return t.filter(a=>i.has(a.id))}function a9(...e){if(e.length===3){const[i,s,a]=e;return Qx(i,s,a,"target")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(i=>qo(i)&&i.source===o).map(i=>n.find(s=>br(s)&&s.id===i.target))}function l9(...e){if(e.length===3){const[i,s,a]=e;return Qx(i,s,a,"source")}const[t,n]=e,o=typeof t=="string"?t:t.id;return n.filter(i=>qo(i)&&i.target===o).map(i=>n.find(s=>br(s)&&s.id===i.source))}function e$({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${t??""}-${n}${o??""}`}function u9(e,t){return t.some(n=>qo(n)&&n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle))}function ua({x:e,y:t},{x:n,y:o,zoom:r}){return{x:e*r+n,y:t*r+o}}function qu({x:e,y:t},{x:n,y:o,zoom:r},i=!1,s=[1,1]){const a={x:(e-n)/r,y:(t-o)/r};return i?v9(a,s):a}function t$(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function Ku({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function n$({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}function c9(e,t){return n$(t$(Ku(e),Ku(t)))}function o$(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let n=0;n<e.length;n++){const o=e[n];t=t$(t,Ku({...o.computedPosition,...o.dimensions}))}return n$(t)}function d9(e,t,n={x:0,y:0,zoom:1},o=!1,r=!1){const i={...qu(t,n),width:t.width/n.zoom,height:t.height/n.zoom},s=[];for(const a of e){const{dimensions:l,selectable:u=!0,hidden:c=!1}=a,d=l.width??a.width??null,f=l.height??a.height??null;if(r&&!u||c)continue;const h=ju(i,Wu(a)),m=d===null||f===null,v=o&&h>0,b=(d??0)*(f??0);(m||v||h>=b||a.dragging)&&s.push(a)}return s}function rr(e,t){const n=new Set;if(typeof e=="string")n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter(o=>n.has(o.source)||n.has(o.target))}function Gr(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return sd(`The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function f9(e,t,n){if(typeof e=="string"||typeof e=="number"){const o=Gr(e,n),r=Gr(e,t);return{top:o,right:r,bottom:o,left:r,x:r*2,y:o*2}}if(typeof e=="object"){const o=Gr(e.top??e.y??0,n),r=Gr(e.bottom??e.y??0,n),i=Gr(e.left??e.x??0,t),s=Gr(e.right??e.x??0,t);return{top:o,right:s,bottom:r,left:i,x:i+s,y:o+r}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function h9(e,t,n,o,r,i){const{x:s,y:a}=ua(e,{x:t,y:n,zoom:o}),{x:l,y:u}=ua({x:e.x+e.width,y:e.y+e.height},{x:t,y:n,zoom:o}),c=r-l,d=i-u;return{left:Math.floor(s),top:Math.floor(a),right:Math.floor(c),bottom:Math.floor(d)}}function Ov(e,t,n,o,r,i=.1){const s=f9(i,t,n),a=(t-s.x)/e.width,l=(n-s.y)/e.height,u=Math.min(a,l),c=Ri(u,o,r),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*c,m=n/2-f*c,v=h9(e,h,m,c,t,n),b={left:Math.min(v.left-s.left,0),top:Math.min(v.top-s.top,0),right:Math.min(v.right-s.right,0),bottom:Math.min(v.bottom-s.bottom,0)};return{x:h-b.left+b.right,y:m-b.top+b.bottom,zoom:c}}function g9(e){const t=e.ctrlKey&&Ju()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t}function Pv(e,t,n){return e<t?Ri(Math.abs(e-t),1,t)/t:e>n?-Ri(Math.abs(e-n),1,t)/t:0}function p9(e,t,n=15,o=40){const r=Pv(e.x,o,t.width-o)*n,i=Pv(e.y,o,t.height-o)*n;return[r,i]}function uf(e,t){if(t){const n=e.position.x+e.dimensions.width-t.dimensions.width,o=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||o>0||e.position.x<0||e.position.y<0){let r={};if(typeof t.style=="function"?r={...t.style(t)}:t.style&&(r={...t.style}),r.width=r.width??`${t.dimensions.width}px`,r.height=r.height??`${t.dimensions.height}px`,n>0)if(typeof r.width=="string"){const i=Number(r.width.replace("px",""));r.width=`${i+n}px`}else r.width+=n;if(o>0)if(typeof r.height=="string"){const i=Number(r.height.replace("px",""));r.height=`${i+o}px`}else r.height+=o;if(e.position.x<0){const i=Math.abs(e.position.x);if(t.position.x=t.position.x-i,typeof r.width=="string"){const s=Number(r.width.replace("px",""));r.width=`${s+i}px`}else r.width+=i;e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);if(t.position.y=t.position.y-i,typeof r.height=="string"){const s=Number(r.height.replace("px",""));r.height=`${s+i}px`}else r.height+=i;e.position.y=0}t.dimensions.width=Number(r.width.toString().replace("px","")),t.dimensions.height=Number(r.height.toString().replace("px","")),typeof t.style=="function"?t.style=i=>{const s=t.style;return{...s(i),...r}}:t.style={...t.style,...r}}}}function Rv(e,t){var n,o;const r=e.filter(s=>s.type==="add"||s.type==="remove");for(const s of r)if(s.type==="add")t.findIndex(l=>l.id===s.item.id)===-1&&t.push(s.item);else if(s.type==="remove"){const a=t.findIndex(l=>l.id===s.id);a!==-1&&t.splice(a,1)}const i=t.map(s=>s.id);for(const s of t)for(const a of e)if(a.id===s.id)switch(a.type){case"select":s.selected=a.selected;break;case"position":if(ps(s)&&(typeof a.position<"u"&&(s.position=a.position),typeof a.dragging<"u"&&(s.dragging=a.dragging),s.expandParent&&s.parentNode)){const l=t[i.indexOf(s.parentNode)];l&&ps(l)&&uf(s,l)}break;case"dimensions":if(ps(s)&&(typeof a.dimensions<"u"&&(s.dimensions=a.dimensions),typeof a.updateStyle<"u"&&a.updateStyle&&(s.style={...s.style||{},width:`${(n=a.dimensions)==null?void 0:n.width}px`,height:`${(o=a.dimensions)==null?void 0:o.height}px`}),typeof a.resizing<"u"&&(s.resizing=a.resizing),s.expandParent&&s.parentNode)){const l=t[i.indexOf(s.parentNode)];l&&ps(l)&&(!!l.dimensions.width&&!!l.dimensions.height?uf(s,l):bt(()=>{uf(s,l)}))}break}return t}function Mo(e,t){return{id:e,type:"select",selected:t}}function zv(e){return{item:e,type:"add"}}function Vv(e){return{id:e,type:"remove"}}function Hv(e,t,n,o,r){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:r||null,type:"remove"}}function Zr(e,t=new Set,n=!1){const o=[];for(const[r,i]of e){const s=t.has(r);!(i.selected===void 0&&!s)&&i.selected!==s&&(n&&(i.selected=s),o.push(Mo(i.id,s)))}return o}const Bv=()=>{};function Ie(e){const t=new Set;let n=Bv,o=()=>!1;const r=()=>t.size>0||o(),i=f=>{n=f},s=()=>{n=Bv},a=f=>{o=f},l=()=>{o=()=>!1},u=f=>{t.delete(f)};return{on:f=>{t.add(f);const h=()=>u(f);return $x(h),{off:h}},off:u,trigger:f=>{const h=[n];return r()?h.push(...t):e&&h.push(e),Promise.allSettled(h.map(m=>m(f)))},hasListeners:r,listeners:t,setEmitter:i,removeEmitter:s,setHasEmitListeners:a,removeHasEmitListeners:l}}function Qg(e,t,n=Me.Left,o=!1){const r=(t?.x??0)+e.computedPosition.x,i=(t?.y??0)+e.computedPosition.y,{width:s,height:a}=t??y9(e);if(o)return{x:r+s/2,y:i+a/2};switch(t?.position??n){case Me.Top:return{x:r+s/2,y:i};case Me.Right:return{x:r+s,y:i+a/2};case Me.Bottom:return{x:r+s/2,y:i+a};case Me.Left:return{x:r,y:i+a/2}}}function m9({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:i,width:s,height:a,viewport:l}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+o,t.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const c=Ku({x:(0-l.x)/l.zoom,y:(0-l.y)/l.zoom,width:s/l.zoom,height:a/l.zoom}),d=Math.max(0,Math.min(c.x2,u.x2)-Math.max(c.x,u.x)),f=Math.max(0,Math.min(c.y2,u.y2)-Math.max(c.y,u.y));return Math.ceil(d*f)>0}var ln=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(ln||{});const Fv={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class Rn extends Error{constructor(t,...n){var o;super((o=Fv[t])==null?void 0:o.call(Fv,...n)),this.name="VueFlowError",this.code=t,this.args=n}}function ep(e){return"clientX"in e}function ti(e,t){const n=ep(e);let o,r;return n?(o=e.clientX,r=e.clientY):"touches"in e&&e.touches.length>0?(o=e.touches[0].clientX,r=e.touches[0].clientY):"changedTouches"in e&&e.changedTouches.length>0?(o=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY):(o=0,r=0),{x:o-(t?.left??0),y:r-(t?.top??0)}}const Ju=()=>{var e;return typeof navigator<"u"&&((e=navigator?.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function y9(e){var t,n;return{width:((t=e.dimensions)==null?void 0:t.width)??e.width??0,height:((n=e.dimensions)==null?void 0:n.height)??e.height??0}}function v9(e,t=[1,1]){return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}}const _9=()=>!0;function cf(e){e?.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function b9(e,t,n){const o=[],r={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const i of t.values())ju(r,Wu(i))>0&&o.push(i);return o}const w9=250;function x9(e,t,n,o){var r,i;let s=[],a=Number.POSITIVE_INFINITY;const l=b9(e,n,t+w9);for(const u of l){const c=[...((r=u.handleBounds)==null?void 0:r.source)??[],...((i=u.handleBounds)==null?void 0:i.target)??[]];for(const d of c){if(o.nodeId===d.nodeId&&o.type===d.type&&o.id===d.id)continue;const{x:f,y:h}=Qg(u,d,d.position,!0),m=Math.sqrt((f-e.x)**2+(h-e.y)**2);m>t||(m<a?(s=[{...d,x:f,y:h}],a=m):m===a&&s.push({...d,x:f,y:h}))}}if(!s.length)return null;if(s.length>1){const u=o.type==="source"?"target":"source";return s.find(c=>c.type===u)??s[0]}return s[0]}function Lv(e,{handle:t,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:i,doc:s,lib:a,flowId:l,isValidConnection:u=_9},c,d,f,h){const m=i==="target",v=t?s.querySelector(`.${a}-flow__handle[data-id="${l}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:b,y:x}=ti(e),N=s.elementFromPoint(b,x),S=N?.classList.contains(`${a}-flow__handle`)?N:v,A={handleDomNode:S,isValid:!1,connection:null,toHandle:null};if(S){const G=r$(void 0,S),W=S.getAttribute("data-nodeid"),Z=S.getAttribute("data-handleid"),z=S.classList.contains("connectable"),j=S.classList.contains("connectableend");if(!W||!G)return A;const H={source:m?W:o,sourceHandle:m?Z:r,target:m?o:W,targetHandle:m?r:Z};A.connection=H;const I=z&&j&&(n===id.Strict?m&&G==="source"||!m&&G==="target":W!==o||Z!==r);A.isValid=I&&u(H,{nodes:d,edges:c,sourceNode:f(H.source),targetNode:f(H.target)}),A.toHandle=i$(W,G,Z,h,n,!0)}return A}function r$(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function $9(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function E9(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}function i$(e,t,n,o,r,i=!1){var s,a,l;const u=o.get(e);if(!u)return null;const c=r===id.Strict?(s=u.handleBounds)==null?void 0:s[t]:[...((a=u.handleBounds)==null?void 0:a.source)??[],...((l=u.handleBounds)==null?void 0:l.target)??[]],d=(n?c?.find(f=>f.id===n):c?.[0])??null;return d&&i?{...d,...Qg(u,d,d.position,!0)}:d}const Uv={[Me.Left]:Me.Right,[Me.Right]:Me.Left,[Me.Top]:Me.Bottom,[Me.Bottom]:Me.Top},S9=["production","prod"];function sd(e,...t){N9()&&console.warn(`[Vue Flow]: ${e}`,...t)}function N9(){return!S9.includes("production")}function Gv(e,t,n,o,r){const i=t.querySelectorAll(`.vue-flow__handle.${e}`);return i?.length?Array.from(i).map(s=>{const a=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:r,position:s.getAttribute("data-handlepos"),x:(a.left-n.left)/o,y:(a.top-n.top)/o,...Jg(s)}}):null}function Zt(e){return typeof ie(e)<"u"}function k9(e,t,n,o){if(!e||!e.source||!e.target)return n(new Rn(ln.EDGE_INVALID,e?.id??"[ID UNKNOWN]")),!1;let r;return qo(e)?r=e:r={...e,id:e$(e)},r=Jx(r,void 0,o),u9(r,t)?!1:r}function C9(e,t,n,o,r){if(!t.source||!t.target)return r(new Rn(ln.EDGE_INVALID,e.id)),!1;if(!n)return r(new Rn(ln.EDGE_NOT_FOUND,e.id)),!1;const{id:i,...s}=e;return{...s,id:o?e$(t):i,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle}}function Zv(e,t,n){const o={},r=[];for(let i=0;i<e.length;++i){const s=e[i];if(!br(s)){n(new Rn(ln.NODE_INVALID,s?.id)||`[ID UNKNOWN|INDEX ${i}]`);continue}const a=s9(s,t(s.id),s.parentNode);s.parentNode&&(o[s.parentNode]=!0),r[i]=a}for(const i of r){const s=t(i.parentNode)||r.find(a=>a.id===i.parentNode);i.parentNode&&!s&&n(new Rn(ln.NODE_MISSING_PARENT,i.id,i.parentNode)),(i.parentNode||o[i.id])&&(o[i.id]&&(i.isParent=!0),s&&(s.isParent=!0))}return r}function Yv(e,t,n,o,r,i){let s=r;const a=o.get(s)||new Map;o.set(s,a.set(n,t)),s=`${r}-${e}`;const l=o.get(s)||new Map;if(o.set(s,l.set(n,t)),i){s=`${r}-${e}-${i}`;const u=o.get(s)||new Map;o.set(s,u.set(n,t))}}function df(e,t,n){e.clear();for(const o of n){const{source:r,target:i,sourceHandle:s=null,targetHandle:a=null}=o,l={edgeId:o.id,source:r,target:i,sourceHandle:s,targetHandle:a},u=`${r}-${s}--${i}-${a}`,c=`${i}-${a}--${r}-${s}`;Yv("source",l,c,e,r,s),Yv("target",l,u,e,i,a)}}function ff(e,t,n,o,r,i,s,a){const l=[];for(const u of e){const c=qo(u)?u:k9(u,a,r,i);if(!c)continue;const d=n(c.source),f=n(c.target);if(!d||!f){r(new Rn(ln.EDGE_SOURCE_TARGET_MISSING,c.id,c.source,c.target));continue}if(!d){r(new Rn(ln.EDGE_SOURCE_MISSING,c.id,c.source));continue}if(!f){r(new Rn(ln.EDGE_TARGET_MISSING,c.id,c.target));continue}if(t&&!t(c,{edges:a,nodes:s,sourceNode:d,targetNode:f})){r(new Rn(ln.EDGE_INVALID,c.id));continue}const h=o(c.id);l.push({...Jx(c,h,i),sourceNode:d,targetNode:f})}return l}const Xv=Symbol("vueFlow"),I9=Symbol("nodeId"),T9=Symbol("nodeRef");function ml(){return!0}function A9({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:r,onEdgeUpdate:i,onEdgeUpdateEnd:s}){const{id:a,vueFlowRef:l,connectionMode:u,connectionRadius:c,connectOnClick:d,connectionClickStartHandle:f,nodesConnectable:h,autoPanOnConnect:m,autoPanSpeed:v,findNode:b,panBy:x,startConnection:N,updateConnection:S,endConnection:A,emits:G,viewport:W,edges:Z,nodes:z,isValidConnection:j,nodeLookup:H}=Da();let D=null,I=!1,R=null;function w(C){var F;const Y=ge(n)==="target",Q=ep(C),q=Dv(C.target),ne=C.currentTarget;if(ne&&(Q&&C.button===0||!Q)){let ae=function(V){g=ti(V,me),le=x9(qu(g,W.value,!1,[1,1]),c.value,H.value,_),p||($(),p=!0);const U=Lv(V,{handle:le,connectionMode:u.value,fromNodeId:ge(t),fromHandleId:ge(e),fromType:Y?"target":"source",isValidConnection:pe,doc:q,lib:"vue",flowId:a,nodeLookup:H.value},Z.value,z.value,b,H.value);R=U.handleDomNode,D=U.connection,I=E9(!!le,U.isValid);const K={...M,isValid:I,to:U.toHandle&&I?ua({x:U.toHandle.x,y:U.toHandle.y},W.value):g,toHandle:U.toHandle,toPosition:I&&U.toHandle?U.toHandle.position:Uv[_.position],toNode:U.toHandle?H.value.get(U.toHandle.nodeId):null};if(I&&le&&M?.toHandle&&K.toHandle&&M.toHandle.type===K.toHandle.type&&M.toHandle.nodeId===K.toHandle.nodeId&&M.toHandle.id===K.toHandle.id&&M.to.x===K.to.x&&M.to.y===K.to.y)return;const te=le??U.toHandle;if(S(te&&I?ua({x:te.x,y:te.y},W.value):g,U.toHandle,$9(!!te,I)),M=K,!le&&!I&&!R)return cf(B);D&&D.source!==D.target&&R&&(cf(B),B=R,R.classList.add("connecting","vue-flow__handle-connecting"),R.classList.toggle("valid",!!I),R.classList.toggle("vue-flow__handle-valid",!!I))},fe=function(V){"touches"in V&&V.touches.length>0||((le||R)&&D&&I&&(i?i(V,D):G.connect(D)),G.connectEnd(V),r&&s?.(V),cf(B),cancelAnimationFrame(ee),A(V),p=!1,I=!1,D=null,R=null,q.removeEventListener("mousemove",ae),q.removeEventListener("mouseup",fe),q.removeEventListener("touchmove",ae),q.removeEventListener("touchend",fe))};const se=b(ge(t));let pe=ge(o)||j.value||ml;!pe&&se&&(pe=(Y?se.isValidSourcePos:se.isValidTargetPos)||ml);let le,ee=0;const{x:re,y:oe}=ti(C),ce=r$(ge(r),ne),me=(F=l.value)==null?void 0:F.getBoundingClientRect();if(!me||!ce)return;const P=i$(ge(t),ce,ge(e),H.value,u.value);if(!P)return;let B,g=ti(C,me),p=!1;const $=()=>{if(!m.value)return;const[V,U]=p9(g,me,v.value);x({x:V,y:U}),ee=requestAnimationFrame($)},_={...P,nodeId:ge(t),type:ce,position:P.position},y=H.value.get(ge(t)),E={inProgress:!0,isValid:null,from:Qg(y,_,Me.Left,!0),fromHandle:_,fromPosition:_.position,fromNode:y,to:g,toHandle:null,toPosition:Uv[_.position],toNode:null};N({nodeId:ge(t),id:ge(e),type:ce,position:ne?.getAttribute("data-handlepos")||Me.Top,...g},{x:re-me.left,y:oe-me.top}),G.connectStart({event:C,nodeId:ge(t),handleId:ge(e),handleType:ce});let M=E;q.addEventListener("mousemove",ae),q.addEventListener("mouseup",fe),q.addEventListener("touchmove",ae),q.addEventListener("touchend",fe)}}function O(C){var F,Y;if(!d.value)return;const Q=ge(n)==="target";if(!f.value){G.clickConnectStart({event:C,nodeId:ge(t),handleId:ge(e)}),N({nodeId:ge(t),type:ge(n),id:ge(e),position:Me.Top,...ti(C)},void 0,!0);return}let q=ge(o)||j.value||ml;const ne=b(ge(t));if(!q&&ne&&(q=(Q?ne.isValidSourcePos:ne.isValidTargetPos)||ml),ne&&(typeof ne.connectable>"u"?h.value:ne.connectable)===!1)return;const ae=Dv(C.target),fe=Lv(C,{handle:{nodeId:ge(t),id:ge(e),type:ge(n),position:Me.Top,...ti(C)},connectionMode:u.value,fromNodeId:f.value.nodeId,fromHandleId:f.value.id??null,fromType:f.value.type,isValidConnection:q,doc:ae,lib:"vue",flowId:a,nodeLookup:H.value},Z.value,z.value,b,H.value),se=((F=fe.connection)==null?void 0:F.source)===((Y=fe.connection)==null?void 0:Y.target);fe.isValid&&fe.connection&&!se&&G.connect(fe.connection),G.clickConnectEnd(C),A(C,!0)}return{handlePointerDown:w,handleClick:O}}function M9(){return ot(I9,"")}function D9(e){const t=M9()??"",n=ot(T9,de(null)),{findNode:o,edges:r,emits:i}=Da(),s=o(t);return s||i.error(new Rn(ln.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:s,parentNode:J(()=>o(s.parentNode)),connectedEdges:J(()=>rr([s],r.value))}}const yl=.1,O9=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2;function No(){return sd("Viewport not initialized yet."),Promise.resolve(!1)}const P9={zoomIn:No,zoomOut:No,zoomTo:No,fitView:No,setCenter:No,fitBounds:No,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:No,setTransform:No,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function R9(e){function t(o,r){return new Promise(i=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate(r?.interpolate==="linear"?Ds:lf).scaleBy(hf(e.d3Selection,r?.duration,r?.ease,()=>{i(!0)}),o):i(!1)})}function n(o,r,i,s){return new Promise(a=>{var l;const{x:u,y:c}=r9({x:-o,y:-r},e.translateExtent),d=Eh.translate(-u,-c).scale(i);e.d3Selection&&e.d3Zoom?(l=e.d3Zoom)==null||l.interpolate(s?.interpolate==="linear"?Ds:lf).transform(hf(e.d3Selection,s?.duration,s?.ease,()=>{a(!0)}),d):a(!1)})}return J(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:r=>t(1.2,r),zoomOut:r=>t(1/1.2,r),zoomTo:(r,i)=>new Promise(s=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate(i?.interpolate==="linear"?Ds:lf).scaleTo(hf(e.d3Selection,i?.duration,i?.ease,()=>{s(!0)}),r):s(!1)}),setViewport:(r,i)=>n(r.x,r.y,r.zoom,i),setTransform:(r,i)=>n(r.x,r.y,r.zoom,i),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(r={padding:yl,includeHiddenNodes:!1,duration:0})=>{var i,s;const a=[];for(const f of e.nodes)f.dimensions.width&&f.dimensions.height&&(r?.includeHiddenNodes||!f.hidden)&&(!((i=r.nodes)!=null&&i.length)||(s=r.nodes)!=null&&s.length&&r.nodes.includes(f.id))&&a.push(f);if(!a.length)return Promise.resolve(!1);const l=o$(a),{x:u,y:c,zoom:d}=Ov(l,e.dimensions.width,e.dimensions.height,r.minZoom??e.minZoom,r.maxZoom??e.maxZoom,r.padding??yl);return n(u,c,d,r)},setCenter:(r,i,s)=>{const a=typeof s?.zoom<"u"?s.zoom:e.maxZoom,l=e.dimensions.width/2-r*a,u=e.dimensions.height/2-i*a;return n(l,u,a,s)},fitBounds:(r,i={padding:yl})=>{const{x:s,y:a,zoom:l}=Ov(r,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,i.padding??yl);return n(s,a,l,i)},project:r=>qu(r,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:r=>{if(e.vueFlowRef){const{x:i,y:s}=e.vueFlowRef.getBoundingClientRect(),a={x:r.x-i,y:r.y-s};return qu(a,e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:r=>{if(e.vueFlowRef){const{x:i,y:s}=e.vueFlowRef.getBoundingClientRect(),a={x:r.x+i,y:r.y+s};return ua(a,e.viewport)}return{x:0,y:0}}}:P9)}function hf(e,t=0,n=O9,o=()=>{}){const r=typeof t=="number"&&t>0;return r||o(),r?e.transition().duration(t).ease(n).on("end",o):e}function z9(){return{edgesChange:Ie(),nodesChange:Ie(),nodeDoubleClick:Ie(),nodeClick:Ie(),nodeMouseEnter:Ie(),nodeMouseMove:Ie(),nodeMouseLeave:Ie(),nodeContextMenu:Ie(),nodeDragStart:Ie(),nodeDrag:Ie(),nodeDragStop:Ie(),nodesInitialized:Ie(),miniMapNodeClick:Ie(),miniMapNodeDoubleClick:Ie(),miniMapNodeMouseEnter:Ie(),miniMapNodeMouseMove:Ie(),miniMapNodeMouseLeave:Ie(),connect:Ie(),connectStart:Ie(),connectEnd:Ie(),clickConnectStart:Ie(),clickConnectEnd:Ie(),paneReady:Ie(),init:Ie(),move:Ie(),moveStart:Ie(),moveEnd:Ie(),selectionDragStart:Ie(),selectionDrag:Ie(),selectionDragStop:Ie(),selectionContextMenu:Ie(),selectionStart:Ie(),selectionEnd:Ie(),viewportChangeStart:Ie(),viewportChange:Ie(),viewportChangeEnd:Ie(),paneScroll:Ie(),paneClick:Ie(),paneContextMenu:Ie(),paneMouseEnter:Ie(),paneMouseMove:Ie(),paneMouseLeave:Ie(),edgeContextMenu:Ie(),edgeMouseEnter:Ie(),edgeMouseMove:Ie(),edgeMouseLeave:Ie(),edgeDoubleClick:Ie(),edgeClick:Ie(),edgeUpdateStart:Ie(),edgeUpdate:Ie(),edgeUpdateEnd:Ie(),updateNodeInternals:Ie(),error:Ie(e=>sd(e.message))}}function s$(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:jx.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:Kx.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:qx.Bezier,style:{}},connectionMode:id.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:Ju()?"Meta":"Control",zoomActivationKeyCode:Ju()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:z9(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const V9=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function H9(e,t,n){const o=R9(e),r=g=>{const p=g??[];e.hooks.updateNodeInternals.trigger(p)},i=g=>l9(g,e.nodes,e.edges),s=g=>a9(g,e.nodes,e.edges),a=g=>rr(g,e.edges),l=({id:g,type:p,nodeId:$})=>{var _;const y=g?`-${p}-${g}`:`-${p}`;return Array.from(((_=e.connectionLookup.get(`${$}${y}`))==null?void 0:_.values())??[])},u=g=>{if(g)return t.value.get(g)},c=g=>{if(g)return n.value.get(g)},d=(g,p,$)=>{var _,y;const k=[];for(const E of g){const M={id:E.id,type:"position",dragging:$,from:E.from};if(p&&(M.position=E.position,E.parentNode)){const V=u(E.parentNode);M.position={x:M.position.x-(((_=V?.computedPosition)==null?void 0:_.x)??0),y:M.position.y-(((y=V?.computedPosition)==null?void 0:y.y)??0)}}k.push(M)}k?.length&&e.hooks.nodesChange.trigger(k)},f=g=>{if(!e.vueFlowRef)return;const p=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!p)return;const $=window.getComputedStyle(p),{m22:_}=new window.DOMMatrixReadOnly($.transform),y=[];for(const k of g){const E=k,M=u(E.id);if(M){const V=Jg(E.nodeElement);if(!!(V.width&&V.height&&(M.dimensions.width!==V.width||M.dimensions.height!==V.height||E.forceUpdate))){const K=E.nodeElement.getBoundingClientRect();M.dimensions=V,M.handleBounds.source=Gv("source",E.nodeElement,K,_,M.id),M.handleBounds.target=Gv("target",E.nodeElement,K,_,M.id),y.push({id:M.id,type:"dimensions",dimensions:V})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&o.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),y.length&&e.hooks.nodesChange.trigger(y)},h=(g,p)=>{const $=new Set,_=new Set;for(const E of g)br(E)?$.add(E.id):qo(E)&&_.add(E.id);const y=Zr(t.value,$,!0),k=Zr(n.value,_);if(e.multiSelectionActive){for(const E of $)y.push(Mo(E,p));for(const E of _)k.push(Mo(E,p))}y.length&&e.hooks.nodesChange.trigger(y),k.length&&e.hooks.edgesChange.trigger(k)},m=g=>{if(e.multiSelectionActive){const p=g.map($=>Mo($.id,!0));e.hooks.nodesChange.trigger(p);return}e.hooks.nodesChange.trigger(Zr(t.value,new Set(g.map(p=>p.id)),!0)),e.hooks.edgesChange.trigger(Zr(n.value))},v=g=>{if(e.multiSelectionActive){const p=g.map($=>Mo($.id,!0));e.hooks.edgesChange.trigger(p);return}e.hooks.edgesChange.trigger(Zr(n.value,new Set(g.map(p=>p.id)))),e.hooks.nodesChange.trigger(Zr(t.value,new Set,!0))},b=g=>{h(g,!0)},x=g=>{const $=(g||e.nodes).map(_=>(_.selected=!1,Mo(_.id,!1)));e.hooks.nodesChange.trigger($)},N=g=>{const $=(g||e.edges).map(_=>(_.selected=!1,Mo(_.id,!1)));e.hooks.edgesChange.trigger($)},S=g=>{if(!g||!g.length)return h([],!1);const p=g.reduce(($,_)=>{const y=Mo(_.id,!1);return br(_)?$.nodes.push(y):$.edges.push(y),$},{nodes:[],edges:[]});p.nodes.length&&e.hooks.nodesChange.trigger(p.nodes),p.edges.length&&e.hooks.edgesChange.trigger(p.edges)},A=g=>{var p;(p=e.d3Zoom)==null||p.scaleExtent([g,e.maxZoom]),e.minZoom=g},G=g=>{var p;(p=e.d3Zoom)==null||p.scaleExtent([e.minZoom,g]),e.maxZoom=g},W=g=>{var p;(p=e.d3Zoom)==null||p.translateExtent(g),e.translateExtent=g},Z=g=>{e.nodeExtent=g,r()},z=g=>{var p;(p=e.d3Zoom)==null||p.clickDistance(g)},j=g=>{e.nodesDraggable=g,e.nodesConnectable=g,e.elementsSelectable=g},H=g=>{const p=g instanceof Function?g(e.nodes):g;!e.initialized&&!p.length||(e.nodes=Zv(p,u,e.hooks.error.trigger))},D=g=>{const p=g instanceof Function?g(e.edges):g;if(!e.initialized&&!p.length)return;const $=ff(p,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);df(e.connectionLookup,n.value,$),e.edges=$},I=g=>{const p=g instanceof Function?g([...e.nodes,...e.edges]):g;!e.initialized&&!p.length||(H(p.filter(br)),D(p.filter(qo)))},R=g=>{let p=g instanceof Function?g(e.nodes):g;p=Array.isArray(p)?p:[p];const $=Zv(p,u,e.hooks.error.trigger),_=[];for(const y of $)_.push(zv(y));_.length&&e.hooks.nodesChange.trigger(_)},w=g=>{let p=g instanceof Function?g(e.edges):g;p=Array.isArray(p)?p:[p];const $=ff(p,e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),_=[];for(const y of $)_.push(zv(y));_.length&&e.hooks.edgesChange.trigger(_)},O=(g,p=!0,$=!1)=>{const _=g instanceof Function?g(e.nodes):g,y=Array.isArray(_)?_:[_],k=[],E=[];function M(U){const K=a(U);for(const te of K)(!Zt(te.deletable)||te.deletable)&&E.push(Hv(te.id,te.source,te.target,te.sourceHandle,te.targetHandle))}function V(U){const K=[];for(const te of e.nodes)te.parentNode===U&&K.push(te);if(K.length){for(const te of K)k.push(Vv(te.id));p&&M(K);for(const te of K)V(te.id)}}for(const U of y){const K=typeof U=="string"?u(U):U;K&&(Zt(K.deletable)&&!K.deletable||(k.push(Vv(K.id)),p&&M([K]),$&&V(K.id)))}E.length&&e.hooks.edgesChange.trigger(E),k.length&&e.hooks.nodesChange.trigger(k)},C=g=>{const p=g instanceof Function?g(e.edges):g,$=Array.isArray(p)?p:[p],_=[];for(const y of $){const k=typeof y=="string"?c(y):y;k&&(Zt(k.deletable)&&!k.deletable||_.push(Hv(typeof y=="string"?y:y.id,k.source,k.target,k.sourceHandle,k.targetHandle)))}e.hooks.edgesChange.trigger(_)},F=(g,p,$=!0)=>{const _=c(g.id);if(!_)return!1;const y=e.edges.indexOf(_),k=C9(g,p,_,$,e.hooks.error.trigger);if(k){const[E]=ff([k],e.isValidConnection,u,c,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);return e.edges=e.edges.map((M,V)=>V===y?E:M),df(e.connectionLookup,n.value,[E]),E}return!1},Y=(g,p,$={replace:!1})=>{const _=c(g);if(!_)return;const y=typeof p=="function"?p(_):p;_.data=$.replace?y:{..._.data,...y}},Q=g=>Rv(g,e.nodes),q=g=>{const p=Rv(g,e.edges);return df(e.connectionLookup,n.value,p),p},ne=(g,p,$={replace:!1})=>{const _=u(g);if(!_)return;const y=typeof p=="function"?p(_):p;$.replace?e.nodes.splice(e.nodes.indexOf(_),1,y):Object.assign(_,y)},ae=(g,p,$={replace:!1})=>{const _=u(g);if(!_)return;const y=typeof p=="function"?p(_):p;_.data=$.replace?y:{..._.data,...y}},fe=(g,p,$=!1)=>{$?e.connectionClickStartHandle=g:e.connectionStartHandle=g,e.connectionEndHandle=null,e.connectionStatus=null,p&&(e.connectionPosition=p)},se=(g,p=null,$=null)=>{e.connectionStartHandle&&(e.connectionPosition=g,e.connectionEndHandle=p,e.connectionStatus=$)},pe=(g,p)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,p?e.connectionClickStartHandle=null:e.connectionStartHandle=null},le=g=>{const p=i9(g),$=p?null:ps(g)?g:u(g.id);return!p&&!$?[null,null,p]:[p?g:Wu($),$,p]},ee=(g,p=!0,$=e.nodes)=>{const[_,y,k]=le(g);if(!_)return[];const E=[];for(const M of $||e.nodes){if(!k&&(M.id===y.id||!M.computedPosition))continue;const V=Wu(M),U=ju(V,_);(p&&U>0||U>=V.width*V.height||U>=Number(_.width)*Number(_.height))&&E.push(M)}return E},re=(g,p,$=!0)=>{const[_]=le(g);if(!_)return!1;const y=ju(_,p);return $&&y>0||y>=Number(_.width)*Number(_.height)},oe=g=>{const{viewport:p,dimensions:$,d3Zoom:_,d3Selection:y,translateExtent:k}=e;if(!_||!y||!g.x&&!g.y)return!1;const E=Eh.translate(p.x+g.x,p.y+g.y).scale(p.zoom),M=[[0,0],[$.width,$.height]],V=_.constrain()(E,M,k),U=e.viewport.x!==V.x||e.viewport.y!==V.y||e.viewport.zoom!==V.k;return _.transform(y,V),U},ce=g=>{const p=g instanceof Function?g(e):g,$=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];Zt(p.defaultEdgeOptions)&&(e.defaultEdgeOptions=p.defaultEdgeOptions);const _=p.modelValue||p.nodes||p.edges?[]:void 0;_&&(p.modelValue&&_.push(...p.modelValue),p.nodes&&_.push(...p.nodes),p.edges&&_.push(...p.edges),I(_));const y=()=>{Zt(p.maxZoom)&&G(p.maxZoom),Zt(p.minZoom)&&A(p.minZoom),Zt(p.translateExtent)&&W(p.translateExtent)};for(const k of Object.keys(p)){const E=k,M=p[E];![...V9,...$].includes(E)&&Zt(M)&&(e[E]=M)}mv(()=>e.d3Zoom).not.toBeNull().then(y),e.initialized||(e.initialized=!0)};return{updateNodePositions:d,updateNodeDimensions:f,setElements:I,setNodes:H,setEdges:D,addNodes:R,addEdges:w,removeNodes:O,removeEdges:C,findNode:u,findEdge:c,updateEdge:F,updateEdgeData:Y,updateNode:ne,updateNodeData:ae,applyEdgeChanges:q,applyNodeChanges:Q,addSelectedElements:b,addSelectedNodes:m,addSelectedEdges:v,setMinZoom:A,setMaxZoom:G,setTranslateExtent:W,setNodeExtent:Z,setPaneClickDistance:z,removeSelectedElements:S,removeSelectedNodes:x,removeSelectedEdges:N,startConnection:fe,updateConnection:se,endConnection:pe,setInteractive:j,setState:ce,getIntersectingNodes:ee,getIncomers:i,getOutgoers:s,getConnectedEdges:a,getHandleConnections:l,isNodeIntersecting:re,panBy:oe,fitView:g=>o.value.fitView(g),zoomIn:g=>o.value.zoomIn(g),zoomOut:g=>o.value.zoomOut(g),zoomTo:(g,p)=>o.value.zoomTo(g,p),setViewport:(g,p)=>o.value.setViewport(g,p),setTransform:(g,p)=>o.value.setTransform(g,p),getViewport:()=>o.value.getViewport(),getTransform:()=>o.value.getTransform(),setCenter:(g,p,$)=>o.value.setCenter(g,p,$),fitBounds:(g,p)=>o.value.fitBounds(g,p),project:g=>o.value.project(g),screenToFlowCoordinate:g=>o.value.screenToFlowCoordinate(g),flowToScreenCoordinate:g=>o.value.flowToScreenCoordinate(g),toObject:()=>{const g=[],p=[];for(const $ of e.nodes){const{computedPosition:_,handleBounds:y,selected:k,dimensions:E,isParent:M,resizing:V,dragging:U,events:K,...te}=$;g.push(te)}for(const $ of e.edges){const{selected:_,sourceNode:y,targetNode:k,events:E,...M}=$;p.push(M)}return JSON.parse(JSON.stringify({nodes:g,edges:p,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:g=>new Promise(p=>{const{nodes:$,edges:_,position:y,zoom:k,viewport:E}=g;if($&&H($),_&&D(_),E?.x&&E?.y||y){const M=E?.x||y[0],V=E?.y||y[1],U=E?.zoom||k||e.viewport.zoom;return mv(()=>o.value.viewportInitialized).toBe(!0).then(()=>{o.value.setViewport({x:M,y:V,zoom:U}).then(()=>{p(!0)})})}else p(!0)}),updateNodeInternals:r,viewportHelper:o,$reset:()=>{const g=s$();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const p=Eh.translate(g.defaultViewport.x??0,g.defaultViewport.y??0).scale(Ri(g.defaultViewport.zoom??1,g.minZoom,g.maxZoom)),$=e.viewportRef.getBoundingClientRect(),_=[[0,0],[$.width,$.height]],y=e.d3Zoom.constrain()(p,_,g.translateExtent);e.d3Zoom.transform(e.d3Selection,y)}ce(g)},$destroy:()=>{}}}const B9=["data-id","data-handleid","data-nodeid","data-handlepos"],F9={name:"Handle",compatConfig:{MODE:3}},Qu=Ne({...F9,props:{id:{default:null},type:{},position:{default:()=>Me.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=bc(e,["position","connectable","connectableStart","connectableEnd","id"]),o=Oe(()=>n.type??"source"),r=Oe(()=>n.isValidConnection??null),{id:i,connectionStartHandle:s,connectionClickStartHandle:a,connectionEndHandle:l,vueFlowRef:u,nodesConnectable:c,noDragClassName:d,noPanClassName:f}=Da(),{id:h,node:m,nodeEl:v,connectedEdges:b}=D9(),x=de(),N=Oe(()=>typeof e.connectableStart<"u"?e.connectableStart:!0),S=Oe(()=>typeof e.connectableEnd<"u"?e.connectableEnd:!0),A=Oe(()=>{var D,I,R,w,O,C;return((D=s.value)==null?void 0:D.nodeId)===h&&((I=s.value)==null?void 0:I.id)===e.id&&((R=s.value)==null?void 0:R.type)===o.value||((w=l.value)==null?void 0:w.nodeId)===h&&((O=l.value)==null?void 0:O.id)===e.id&&((C=l.value)==null?void 0:C.type)===o.value}),G=Oe(()=>{var D,I,R;return((D=a.value)==null?void 0:D.nodeId)===h&&((I=a.value)==null?void 0:I.id)===e.id&&((R=a.value)==null?void 0:R.type)===o.value}),{handlePointerDown:W,handleClick:Z}=A9({nodeId:h,handleId:e.id,isValidConnection:r,type:o}),z=J(()=>typeof e.connectable=="string"&&e.connectable==="single"?!b.value.some(D=>{const I=D[`${o.value}Handle`];return D[o.value]!==h?!1:I?I===e.id:!0}):typeof e.connectable=="number"?b.value.filter(D=>{const I=D[`${o.value}Handle`];return D[o.value]!==h?!1:I?I===e.id:!0}).length<e.connectable:typeof e.connectable=="function"?e.connectable(m,b.value):Zt(e.connectable)?e.connectable:c.value);tt(()=>{var D;if(!m.dimensions.width||!m.dimensions.height)return;const I=(D=m.handleBounds[o.value])==null?void 0:D.find(Q=>Q.id===e.id);if(!u.value||I)return;const R=u.value.querySelector(".vue-flow__transformationpane");if(!v.value||!x.value||!R||!e.id)return;const w=v.value.getBoundingClientRect(),O=x.value.getBoundingClientRect(),C=window.getComputedStyle(R),{m22:F}=new window.DOMMatrixReadOnly(C.transform),Y={id:e.id,position:e.position,x:(O.left-w.left)/F,y:(O.top-w.top)/F,type:o.value,nodeId:h,...Jg(x.value)};m.handleBounds[o.value]=[...m.handleBounds[o.value]??[],Y]});function j(D){const I=ep(D);z.value&&N.value&&(I&&D.button===0||!I)&&W(D)}function H(D){!h||!a.value&&!N.value||z.value&&Z(D)}return t({handleClick:Z,handlePointerDown:W,onClick:H,onPointerDown:j}),(D,I)=>(L(),X("div",{ref_key:"handle",ref:x,"data-id":`${ie(i)}-${ie(h)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":ie(h),"data-handlepos":D.position,class:We(["vue-flow__handle",[`vue-flow__handle-${D.position}`,`vue-flow__handle-${e.id}`,ie(d),ie(f),o.value,{connectable:z.value,connecting:G.value,connectablestart:N.value,connectableend:S.value,connectionindicator:z.value&&(N.value&&!A.value||S.value&&A.value)}]]),onMousedown:j,onTouchstartPassive:j,onClick:H},[Qe(D.$slots,"default",{id:D.id})],42,B9))}}),ad=function({sourcePosition:e=Me.Bottom,targetPosition:t=Me.Top,label:n,connectable:o=!0,isValidTargetPos:r,isValidSourcePos:i,data:s}){const a=s.label??n;return[_e(Qu,{type:"target",position:t,connectable:o,isValidConnection:r}),typeof a!="string"&&a?_e(a):_e(xe,[a]),_e(Qu,{type:"source",position:e,connectable:o,isValidConnection:i})]};ad.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"];ad.inheritAttrs=!1;ad.compatConfig={MODE:3};const L9=ad,ld=function({targetPosition:e=Me.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:r}){const i=r.label??t;return[_e(Qu,{type:"target",position:e,connectable:n,isValidConnection:o}),typeof i!="string"&&i?_e(i):_e(xe,[i])]};ld.props=["targetPosition","label","isValidTargetPos","connectable","data"];ld.inheritAttrs=!1;ld.compatConfig={MODE:3};const U9=ld,ud=function({sourcePosition:e=Me.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:r}){const i=r.label??t;return[typeof i!="string"&&i?_e(i):_e(xe,[i]),_e(Qu,{type:"source",position:e,connectable:n,isValidConnection:o})]};ud.props=["sourcePosition","label","isValidSourcePos","connectable","data"];ud.inheritAttrs=!1;ud.compatConfig={MODE:3};const G9=ud,Z9=["transform"],Y9=["width","height","x","y","rx","ry"],X9=["y"],W9={name:"EdgeText",compatConfig:{MODE:3}},j9=Ne({...W9,props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=de({x:0,y:0,width:0,height:0}),n=de(null),o=J(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);tt(r),Se([()=>e.x,()=>e.y,n,()=>e.label],r);function r(){if(!n.value)return;const i=n.value.getBBox();(i.width!==t.value.width||i.height!==t.value.height)&&(t.value=i)}return(i,s)=>(L(),X("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[i.labelShowBg?(L(),X("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*i.labelBgPadding[0]}px`,height:`${t.value.height+2*i.labelBgPadding[1]}px`,x:-i.labelBgPadding[0],y:-i.labelBgPadding[1],style:qe(i.labelBgStyle),rx:i.labelBgBorderRadius,ry:i.labelBgBorderRadius},null,12,Y9)):ve("",!0),T("text",dn(i.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:i.labelStyle}),[Qe(i.$slots,"default",{},()=>[typeof i.label!="string"?(L(),Ye(Kt(i.label),{key:0})):(L(),X(xe,{key:1},[Ze(ye(i.label),1)],64))])],16,X9)],8,Z9))}}),q9=["id","d","marker-end","marker-start"],K9=["d","stroke-width"],J9={name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}},cd=Ne({...J9,props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=de(null),o=de(null),r=de(null),i=Li();return t({pathEl:n,interactionEl:o,labelEl:r}),(s,a)=>(L(),X(xe,null,[T("path",dn(ie(i),{id:s.id,ref_key:"pathEl",ref:n,d:s.path,class:"vue-flow__edge-path","marker-end":s.markerEnd,"marker-start":s.markerStart}),null,16,q9),s.interactionWidth?(L(),X("path",{key:0,ref_key:"interactionEl",ref:o,fill:"none",d:s.path,"stroke-width":s.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,K9)):ve("",!0),s.label&&s.labelX&&s.labelY?(L(),Ye(j9,{key:1,ref_key:"labelEl",ref:r,x:s.labelX,y:s.labelY,label:s.label,"label-show-bg":s.labelShowBg,"label-bg-style":s.labelBgStyle,"label-bg-padding":s.labelBgPadding,"label-bg-border-radius":s.labelBgBorderRadius,"label-style":s.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):ve("",!0)],64))}});function a$({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,s=Math.abs(o-t)/2,a=o<t?o+s:o-s;return[i,a,r,s]}function l$({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:s,targetControlY:a}){const l=e*.125+r*.375+s*.375+n*.125,u=t*.125+i*.375+a*.375+o*.125,c=Math.abs(l-e),d=Math.abs(u-t);return[l,u,c,d]}function vl(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Wv({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){let s,a;switch(e){case Me.Left:s=t-vl(t-o,i),a=n;break;case Me.Right:s=t+vl(o-t,i),a=n;break;case Me.Top:s=t,a=n-vl(n-r,i);break;case Me.Bottom:s=t,a=n+vl(r-n,i);break}return[s,a]}function Q9(e){const{sourceX:t,sourceY:n,sourcePosition:o=Me.Bottom,targetX:r,targetY:i,targetPosition:s=Me.Top,curvature:a=.25}=e,[l,u]=Wv({pos:o,x1:t,y1:n,x2:r,y2:i,c:a}),[c,d]=Wv({pos:s,x1:r,y1:i,x2:t,y2:n,c:a}),[f,h,m,v]=l$({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:c,targetControlY:d});return[`M${t},${n} C${l},${u} ${c},${d} ${r},${i}`,f,h,m,v]}function jv({pos:e,x1:t,y1:n,x2:o,y2:r}){let i,s;switch(e){case Me.Left:case Me.Right:i=.5*(t+o),s=n;break;case Me.Top:case Me.Bottom:i=t,s=.5*(n+r);break}return[i,s]}function eB(e){const{sourceX:t,sourceY:n,sourcePosition:o=Me.Bottom,targetX:r,targetY:i,targetPosition:s=Me.Top}=e,[a,l]=jv({pos:o,x1:t,y1:n,x2:r,y2:i}),[u,c]=jv({pos:s,x1:r,y1:i,x2:t,y2:n}),[d,f,h,m]=l$({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:a,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${t},${n} C${a},${l} ${u},${c} ${r},${i}`,d,f,h,m]}const qv={[Me.Left]:{x:-1,y:0},[Me.Right]:{x:1,y:0},[Me.Top]:{x:0,y:-1},[Me.Bottom]:{x:0,y:1}};function tB({source:e,sourcePosition:t=Me.Bottom,target:n}){return t===Me.Left||t===Me.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function Kv(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function nB({source:e,sourcePosition:t=Me.Bottom,target:n,targetPosition:o=Me.Top,center:r,offset:i}){const s=qv[t],a=qv[o],l={x:e.x+s.x*i,y:e.y+s.y*i},u={x:n.x+a.x*i,y:n.y+a.y*i},c=tB({source:l,sourcePosition:t,target:u}),d=c.x!==0?"x":"y",f=c[d];let h,m,v;const b={x:0,y:0},x={x:0,y:0},[N,S,A,G]=a$({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[d]*a[d]===-1){m=r.x??N,v=r.y??S;const Z=[{x:m,y:l.y},{x:m,y:u.y}],z=[{x:l.x,y:v},{x:u.x,y:v}];s[d]===f?h=d==="x"?Z:z:h=d==="x"?z:Z}else{const Z=[{x:l.x,y:u.y}],z=[{x:u.x,y:l.y}];if(d==="x"?h=s.x===f?z:Z:h=s.y===f?Z:z,t===o){const R=Math.abs(e[d]-n[d]);if(R<=i){const w=Math.min(i-1,i-R);s[d]===f?b[d]=(l[d]>e[d]?-1:1)*w:x[d]=(u[d]>n[d]?-1:1)*w}}if(t!==o){const R=d==="x"?"y":"x",w=s[d]===a[R],O=l[R]>u[R],C=l[R]<u[R];(s[d]===1&&(!w&&O||w&&C)||s[d]!==1&&(!w&&C||w&&O))&&(h=d==="x"?Z:z)}const j={x:l.x+b.x,y:l.y+b.y},H={x:u.x+x.x,y:u.y+x.y},D=Math.max(Math.abs(j.x-h[0].x),Math.abs(H.x-h[0].x)),I=Math.max(Math.abs(j.y-h[0].y),Math.abs(H.y-h[0].y));D>=I?(m=(j.x+H.x)/2,v=h[0].y):(m=h[0].x,v=(j.y+H.y)/2)}return[[e,{x:l.x+b.x,y:l.y+b.y},...h,{x:u.x+x.x,y:u.y+x.y},n],m,v,A,G]}function oB(e,t,n,o){const r=Math.min(Kv(e,t)/2,Kv(t,n)/2,o),{x:i,y:s}=t;if(e.x===i&&i===n.x||e.y===s&&s===n.y)return`L${i} ${s}`;if(e.y===s){const u=e.x<n.x?-1:1,c=e.y<n.y?1:-1;return`L ${i+r*u},${s}Q ${i},${s} ${i},${s+r*c}`}const a=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${i},${s+r*l}Q ${i},${s} ${i+r*a},${s}`}function rB(e){const{sourceX:t,sourceY:n,sourcePosition:o=Me.Bottom,targetX:r,targetY:i,targetPosition:s=Me.Top,borderRadius:a=5,centerX:l,centerY:u,offset:c=20}=e,[d,f,h,m,v]=nB({source:{x:t,y:n},sourcePosition:o,target:{x:r,y:i},targetPosition:s,center:{x:l,y:u},offset:c});return[d.reduce((x,N,S)=>{let A;return S>0&&S<d.length-1?A=oB(d[S-1],N,d[S+1],a):A=`${S===0?"M":"L"}${N.x} ${N.y}`,x+=A,x},""),f,h,m,v]}function iB(e){const{sourceX:t,sourceY:n,targetX:o,targetY:r}=e,[i,s,a,l]=a$({sourceX:t,sourceY:n,targetX:o,targetY:r});return[`M ${t},${n}L ${o},${r}`,i,s,a,l]}const sB=Ne({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=iB(e);return _e(cd,{path:n,labelX:o,labelY:r,...t,...e})}}}),aB=sB,lB=Ne({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=rB({...e,sourcePosition:e.sourcePosition??Me.Bottom,targetPosition:e.targetPosition??Me.Top});return _e(cd,{path:n,labelX:o,labelY:r,...t,...e})}}}),u$=lB,uB=Ne({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup(e,{attrs:t}){return()=>_e(u$,{...e,...t,borderRadius:0})}}),cB=uB,dB=Ne({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=Q9({...e,sourcePosition:e.sourcePosition??Me.Bottom,targetPosition:e.targetPosition??Me.Top});return _e(cd,{path:n,labelX:o,labelY:r,...t,...e})}}}),fB=dB,hB=Ne({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{const[n,o,r]=eB({...e,sourcePosition:e.sourcePosition??Me.Bottom,targetPosition:e.targetPosition??Me.Top});return _e(cd,{path:n,labelX:o,labelY:r,...t,...e})}}}),gB=hB,pB={input:G9,default:L9,output:U9},mB={default:fB,straight:aB,step:cB,smoothstep:u$,simplebezier:gB};function yB(e,t,n){const o=J(()=>v=>t.value.get(v)),r=J(()=>v=>n.value.get(v)),i=J(()=>{const v={...mB,...e.edgeTypes},b=Object.keys(v);for(const x of e.edges)x.type&&!b.includes(x.type)&&(v[x.type]=x.type);return v}),s=J(()=>{const v={...pB,...e.nodeTypes},b=Object.keys(v);for(const x of e.nodes)x.type&&!b.includes(x.type)&&(v[x.type]=x.type);return v}),a=J(()=>e.onlyRenderVisibleElements?d9(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),l=J(()=>{if(e.onlyRenderVisibleElements){const v=[];for(const b of e.edges){const x=t.value.get(b.source),N=t.value.get(b.target);m9({sourcePos:x.computedPosition||{x:0,y:0},targetPos:N.computedPosition||{x:0,y:0},sourceWidth:x.dimensions.width,sourceHeight:x.dimensions.height,targetWidth:N.dimensions.width,targetHeight:N.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&v.push(b)}return v}return e.edges}),u=J(()=>[...a.value,...l.value]),c=J(()=>{const v=[];for(const b of e.nodes)b.selected&&v.push(b);return v}),d=J(()=>{const v=[];for(const b of e.edges)b.selected&&v.push(b);return v}),f=J(()=>[...c.value,...d.value]),h=J(()=>{const v=[];for(const b of e.nodes)b.dimensions.width&&b.dimensions.height&&b.handleBounds!==void 0&&v.push(b);return v}),m=J(()=>a.value.length>0&&h.value.length===a.value.length);return{getNode:o,getEdge:r,getElements:u,getEdgeTypes:i,getNodeTypes:s,getEdges:l,getNodes:a,getSelectedElements:f,getSelectedNodes:c,getSelectedEdges:d,getNodesInitialized:h,areNodesInitialized:m}}class ir{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var t;const n=(t=jt())==null?void 0:t.appContext.app,o=n?.config.globalProperties.$vueFlowStorage??ir.instance;return ir.instance=o??new ir,n&&(n.config.globalProperties.$vueFlowStorage=ir.instance),ir.instance}set(t,n){return this.flows.set(t,n)}get(t){return this.flows.get(t)}remove(t){return this.flows.delete(t)}create(t,n){const o=s$(),r=wo(o),i={};for(const[f,h]of Object.entries(r.hooks)){const m=`on${f.charAt(0).toUpperCase()+f.slice(1)}`;i[m]=h.on}const s={};for(const[f,h]of Object.entries(r.hooks))s[f]=h.trigger;const a=J(()=>{const f=new Map;for(const h of r.nodes)f.set(h.id,h);return f}),l=J(()=>{const f=new Map;for(const h of r.edges)f.set(h.id,h);return f}),u=yB(r,a,l),c=H9(r,a,l);c.setState({...r,...n});const d={...i,...u,...c,...OV(r),nodeLookup:a,edgeLookup:l,emits:s,id:t,vueFlowVersion:"1.47.0",$destroy:()=>{this.remove(t)}};return this.set(t,d),d}getId(){return`vue-flow-${this.currentId++}`}}function Da(e){const t=ir.getInstance(),n=Gn(),o={id:e},r=o.id,i=r??n?.vueFlowId;let s;if(n){const a=ot(Xv,null);typeof a<"u"&&a!==null&&(!i||a.id===i)&&(s=a)}if(s||i&&(s=t.get(i)),!s||i&&s.id!==i){const a=r??t.getId(),l=t.create(a,o);s=l,(n??Dr(!0)).run(()=>{Se(l.applyDefault,(c,d,f)=>{const h=v=>{l.applyNodeChanges(v)},m=v=>{l.applyEdgeChanges(v)};c?(l.onNodesChange(h),l.onEdgesChange(m)):(l.hooks.value.nodesChange.off(h),l.hooks.value.edgesChange.off(m)),f(()=>{l.hooks.value.nodesChange.off(h),l.hooks.value.edgesChange.off(m)})},{immediate:!0}),$x(()=>{if(s){const c=t.get(s.id);c?c.$destroy():sd(`No store instance found for id ${s.id} in storage.`)}})})}return n&&(Ht(Xv,s),n.vueFlowId=s.id),s}const vB={name:"Panel",compatConfig:{MODE:3}},_B=Ne({...vB,props:{position:{}},setup(e){const t=e,{userSelectionActive:n}=Da(),o=J(()=>`${t.position}`.split("-"));return(r,i)=>(L(),X("div",{class:We(["vue-flow__panel",o.value]),style:qe({pointerEvents:ie(n)?"none":"all"})},[Qe(r.$slots,"default")],6))}});var bB={value:()=>{}};function tp(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Zl(n)}function Zl(e){this._=e}function wB(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Zl.prototype=tp.prototype={constructor:Zl,on:function(e,t){var n=this._,o=wB(e+"",n),r,i=-1,s=o.length;if(arguments.length<2){for(;++i<s;)if((r=(e=o[i]).type)&&(r=xB(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<s;)if(r=(e=o[i]).type)n[r]=Jv(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Jv(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Zl(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],o=0,r=i.length;o<r;++o)i[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};function xB(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function Jv(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=bB,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Sh="http://www.w3.org/1999/xhtml";const Qv={svg:"http://www.w3.org/2000/svg",xhtml:Sh,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function dd(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Qv.hasOwnProperty(t)?{space:Qv[t],local:e}:e}function $B(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Sh&&t.documentElement.namespaceURI===Sh?t.createElement(e):t.createElementNS(n,e)}}function EB(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function c$(e){var t=dd(e);return(t.local?EB:$B)(t)}function SB(){}function np(e){return e==null?SB:function(){return this.querySelector(e)}}function NB(e){typeof e!="function"&&(e=np(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=new Array(s),l,u,c=0;c<s;++c)(l=i[c])&&(u=e.call(l,l.__data__,c,i))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new Xt(o,this._parents)}function kB(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function CB(){return[]}function d$(e){return e==null?CB:function(){return this.querySelectorAll(e)}}function IB(e){return function(){return kB(e.apply(this,arguments))}}function TB(e){typeof e=="function"?e=IB(e):e=d$(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var s=t[i],a=s.length,l,u=0;u<a;++u)(l=s[u])&&(o.push(e.call(l,l.__data__,u,s)),r.push(l));return new Xt(o,r)}function f$(e){return function(){return this.matches(e)}}function h$(e){return function(t){return t.matches(e)}}var AB=Array.prototype.find;function MB(e){return function(){return AB.call(this.children,e)}}function DB(){return this.firstElementChild}function OB(e){return this.select(e==null?DB:MB(typeof e=="function"?e:h$(e)))}var PB=Array.prototype.filter;function RB(){return Array.from(this.children)}function zB(e){return function(){return PB.call(this.children,e)}}function VB(e){return this.selectAll(e==null?RB:zB(typeof e=="function"?e:h$(e)))}function HB(e){typeof e!="function"&&(e=f$(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=[],l,u=0;u<s;++u)(l=i[u])&&e.call(l,l.__data__,u,i)&&a.push(l);return new Xt(o,this._parents)}function g$(e){return new Array(e.length)}function BB(){return new Xt(this._enter||this._groups.map(g$),this._parents)}function ec(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ec.prototype={constructor:ec,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function FB(e){return function(){return e}}function LB(e,t,n,o,r,i){for(var s=0,a,l=t.length,u=i.length;s<u;++s)(a=t[s])?(a.__data__=i[s],o[s]=a):n[s]=new ec(e,i[s]);for(;s<l;++s)(a=t[s])&&(r[s]=a)}function UB(e,t,n,o,r,i,s){var a,l,u=new Map,c=t.length,d=i.length,f=new Array(c),h;for(a=0;a<c;++a)(l=t[a])&&(f[a]=h=s.call(l,l.__data__,a,t)+"",u.has(h)?r[a]=l:u.set(h,l));for(a=0;a<d;++a)h=s.call(e,i[a],a,i)+"",(l=u.get(h))?(o[a]=l,l.__data__=i[a],u.delete(h)):n[a]=new ec(e,i[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(f[a])===l&&(r[a]=l)}function GB(e){return e.__data__}function ZB(e,t){if(!arguments.length)return Array.from(this,GB);var n=t?UB:LB,o=this._parents,r=this._groups;typeof e!="function"&&(e=FB(e));for(var i=r.length,s=new Array(i),a=new Array(i),l=new Array(i),u=0;u<i;++u){var c=o[u],d=r[u],f=d.length,h=YB(e.call(c,c&&c.__data__,u,o)),m=h.length,v=a[u]=new Array(m),b=s[u]=new Array(m),x=l[u]=new Array(f);n(c,d,v,b,x,h,t);for(var N=0,S=0,A,G;N<m;++N)if(A=v[N]){for(N>=S&&(S=N+1);!(G=b[S])&&++S<m;);A._next=G||null}}return s=new Xt(s,o),s._enter=a,s._exit=l,s}function YB(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function XB(){return new Xt(this._exit||this._groups.map(g$),this._parents)}function WB(e,t,n){var o=this.enter(),r=this,i=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function jB(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,s=Math.min(r,i),a=new Array(r),l=0;l<s;++l)for(var u=n[l],c=o[l],d=u.length,f=a[l]=new Array(d),h,m=0;m<d;++m)(h=u[m]||c[m])&&(f[m]=h);for(;l<r;++l)a[l]=n[l];return new Xt(a,this._parents)}function qB(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,i=o[r],s;--r>=0;)(s=o[r])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function KB(e){e||(e=JB);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var s=n[i],a=s.length,l=r[i]=new Array(a),u,c=0;c<a;++c)(u=s[c])&&(l[c]=u);l.sort(t)}return new Xt(r,this._parents).order()}function JB(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function QB(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function eF(){return Array.from(this)}function tF(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var s=o[r];if(s)return s}return null}function nF(){let e=0;for(const t of this)++e;return e}function oF(){return!this.node()}function rF(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],i=0,s=r.length,a;i<s;++i)(a=r[i])&&e.call(a,a.__data__,i,r);return this}function iF(e){return function(){this.removeAttribute(e)}}function sF(e){return function(){this.removeAttributeNS(e.space,e.local)}}function aF(e,t){return function(){this.setAttribute(e,t)}}function lF(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function uF(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function cF(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function dF(e,t){var n=dd(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?sF:iF:typeof t=="function"?n.local?cF:uF:n.local?lF:aF)(n,t))}function p$(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function fF(e){return function(){this.style.removeProperty(e)}}function hF(e,t,n){return function(){this.style.setProperty(e,t,n)}}function gF(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function pF(e,t,n){return arguments.length>1?this.each((t==null?fF:typeof t=="function"?gF:hF)(e,t,n??"")):zi(this.node(),e)}function zi(e,t){return e.style.getPropertyValue(t)||p$(e).getComputedStyle(e,null).getPropertyValue(t)}function mF(e){return function(){delete this[e]}}function yF(e,t){return function(){this[e]=t}}function vF(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function _F(e,t){return arguments.length>1?this.each((t==null?mF:typeof t=="function"?vF:yF)(e,t)):this.node()[e]}function m$(e){return e.trim().split(/^|\s+/)}function op(e){return e.classList||new y$(e)}function y$(e){this._node=e,this._names=m$(e.getAttribute("class")||"")}y$.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function v$(e,t){for(var n=op(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function _$(e,t){for(var n=op(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function bF(e){return function(){v$(this,e)}}function wF(e){return function(){_$(this,e)}}function xF(e,t){return function(){(t.apply(this,arguments)?v$:_$)(this,e)}}function $F(e,t){var n=m$(e+"");if(arguments.length<2){for(var o=op(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?xF:t?bF:wF)(n,t))}function EF(){this.textContent=""}function SF(e){return function(){this.textContent=e}}function NF(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function kF(e){return arguments.length?this.each(e==null?EF:(typeof e=="function"?NF:SF)(e)):this.node().textContent}function CF(){this.innerHTML=""}function IF(e){return function(){this.innerHTML=e}}function TF(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function AF(e){return arguments.length?this.each(e==null?CF:(typeof e=="function"?TF:IF)(e)):this.node().innerHTML}function MF(){this.nextSibling&&this.parentNode.appendChild(this)}function DF(){return this.each(MF)}function OF(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function PF(){return this.each(OF)}function RF(e){var t=typeof e=="function"?e:c$(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function zF(){return null}function VF(e,t){var n=typeof e=="function"?e:c$(e),o=t==null?zF:typeof t=="function"?t:np(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function HF(){var e=this.parentNode;e&&e.removeChild(this)}function BF(){return this.each(HF)}function FF(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function LF(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function UF(e){return this.select(e?LF:FF)}function GF(e){return arguments.length?this.property("__data__",e):this.node().__data__}function ZF(e){return function(t){e.call(this,t,this.__data__)}}function YF(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function XF(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,i;n<r;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++o]=i;++o?t.length=o:delete this.__on}}}function WF(e,t,n){return function(){var o=this.__on,r,i=ZF(t);if(o){for(var s=0,a=o.length;s<a;++s)if((r=o[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=t;return}}this.addEventListener(e.type,i,n),r={type:e.type,name:e.name,value:t,listener:i,options:n},o?o.push(r):this.__on=[r]}}function jF(e,t,n){var o=YF(e+""),r,i=o.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(r=0,c=a[l];r<i;++r)if((s=o[r]).type===c.type&&s.name===c.name)return c.value}return}for(a=t?WF:XF,r=0;r<i;++r)this.each(a(o[r],t,n));return this}function b$(e,t,n){var o=p$(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function qF(e,t){return function(){return b$(this,e,t)}}function KF(e,t){return function(){return b$(this,e,t.apply(this,arguments))}}function JF(e,t){return this.each((typeof t=="function"?KF:qF)(e,t))}function*QF(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length,s;r<i;++r)(s=o[r])&&(yield s)}var w$=[null];function Xt(e,t){this._groups=e,this._parents=t}function Oa(){return new Xt([[document.documentElement]],w$)}function eL(){return this}Xt.prototype=Oa.prototype={constructor:Xt,select:NB,selectAll:TB,selectChild:OB,selectChildren:VB,filter:HB,data:ZB,enter:BB,exit:XB,join:WB,merge:jB,selection:eL,order:qB,sort:KB,call:QB,nodes:eF,node:tF,size:nF,empty:oF,each:rF,attr:dF,style:pF,property:_F,classed:$F,text:kF,html:AF,raise:DF,lower:PF,append:RF,insert:VF,remove:BF,clone:UF,datum:GF,on:jF,dispatch:JF,[Symbol.iterator]:QF};function Bo(e){return typeof e=="string"?new Xt([[document.querySelector(e)]],[document.documentElement]):new Xt([[e]],w$)}function tL(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Do(e,t){if(e=tL(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const Nh={capture:!0,passive:!1};function kh(e){e.preventDefault(),e.stopImmediatePropagation()}function nL(e){var t=e.document.documentElement,n=Bo(e).on("dragstart.drag",kh,Nh);"onselectstart"in t?n.on("selectstart.drag",kh,Nh):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function oL(e,t){var n=e.document.documentElement,o=Bo(e).on("dragstart.drag",null);t&&(o.on("click.drag",kh,Nh),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function rp(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function x$(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Pa(){}var ca=.7,tc=1/ca,vi="\\s*([+-]?\\d+)\\s*",da="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ln="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rL=/^#([0-9a-f]{3,8})$/,iL=new RegExp(`^rgb\\(${vi},${vi},${vi}\\)$`),sL=new RegExp(`^rgb\\(${Ln},${Ln},${Ln}\\)$`),aL=new RegExp(`^rgba\\(${vi},${vi},${vi},${da}\\)$`),lL=new RegExp(`^rgba\\(${Ln},${Ln},${Ln},${da}\\)$`),uL=new RegExp(`^hsl\\(${da},${Ln},${Ln}\\)$`),cL=new RegExp(`^hsla\\(${da},${Ln},${Ln},${da}\\)$`),e0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rp(Pa,fa,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:t0,formatHex:t0,formatHex8:dL,formatHsl:fL,formatRgb:n0,toString:n0});function t0(){return this.rgb().formatHex()}function dL(){return this.rgb().formatHex8()}function fL(){return $$(this).formatHsl()}function n0(){return this.rgb().formatRgb()}function fa(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=rL.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?o0(t):n===3?new Vt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?_l(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?_l(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=iL.exec(e))?new Vt(t[1],t[2],t[3],1):(t=sL.exec(e))?new Vt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=aL.exec(e))?_l(t[1],t[2],t[3],t[4]):(t=lL.exec(e))?_l(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=uL.exec(e))?s0(t[1],t[2]/100,t[3]/100,1):(t=cL.exec(e))?s0(t[1],t[2]/100,t[3]/100,t[4]):e0.hasOwnProperty(e)?o0(e0[e]):e==="transparent"?new Vt(NaN,NaN,NaN,0):null}function o0(e){return new Vt(e>>16&255,e>>8&255,e&255,1)}function _l(e,t,n,o){return o<=0&&(e=t=n=NaN),new Vt(e,t,n,o)}function hL(e){return e instanceof Pa||(e=fa(e)),e?(e=e.rgb(),new Vt(e.r,e.g,e.b,e.opacity)):new Vt}function Ch(e,t,n,o){return arguments.length===1?hL(e):new Vt(e,t,n,o??1)}function Vt(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}rp(Vt,Ch,x$(Pa,{brighter(e){return e=e==null?tc:Math.pow(tc,e),new Vt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ca:Math.pow(ca,e),new Vt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Vt(wr(this.r),wr(this.g),wr(this.b),nc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:r0,formatHex:r0,formatHex8:gL,formatRgb:i0,toString:i0}));function r0(){return`#${cr(this.r)}${cr(this.g)}${cr(this.b)}`}function gL(){return`#${cr(this.r)}${cr(this.g)}${cr(this.b)}${cr((isNaN(this.opacity)?1:this.opacity)*255)}`}function i0(){const e=nc(this.opacity);return`${e===1?"rgb(":"rgba("}${wr(this.r)}, ${wr(this.g)}, ${wr(this.b)}${e===1?")":`, ${e})`}`}function nc(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function wr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function cr(e){return e=wr(e),(e<16?"0":"")+e.toString(16)}function s0(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new on(e,t,n,o)}function $$(e){if(e instanceof on)return new on(e.h,e.s,e.l,e.opacity);if(e instanceof Pa||(e=fa(e)),!e)return new on;if(e instanceof on)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),s=NaN,a=i-r,l=(i+r)/2;return a?(t===i?s=(n-o)/a+(n<o)*6:n===i?s=(o-t)/a+2:s=(t-n)/a+4,a/=l<.5?i+r:2-i-r,s*=60):a=l>0&&l<1?0:s,new on(s,a,l,e.opacity)}function pL(e,t,n,o){return arguments.length===1?$$(e):new on(e,t,n,o??1)}function on(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}rp(on,pL,x$(Pa,{brighter(e){return e=e==null?tc:Math.pow(tc,e),new on(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ca:Math.pow(ca,e),new on(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new Vt(gf(e>=240?e-240:e+120,r,o),gf(e,r,o),gf(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new on(a0(this.h),bl(this.s),bl(this.l),nc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=nc(this.opacity);return`${e===1?"hsl(":"hsla("}${a0(this.h)}, ${bl(this.s)*100}%, ${bl(this.l)*100}%${e===1?")":`, ${e})`}`}}));function a0(e){return e=(e||0)%360,e<0?e+360:e}function bl(e){return Math.max(0,Math.min(1,e||0))}function gf(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const E$=e=>()=>e;function mL(e,t){return function(n){return e+n*t}}function yL(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function vL(e){return(e=+e)==1?S$:function(t,n){return n-t?yL(t,n,e):E$(isNaN(t)?n:t)}}function S$(e,t){var n=t-e;return n?mL(e,n):E$(isNaN(e)?t:e)}const l0=(function e(t){var n=vL(t);function o(r,i){var s=n((r=Ch(r)).r,(i=Ch(i)).r),a=n(r.g,i.g),l=n(r.b,i.b),u=S$(r.opacity,i.opacity);return function(c){return r.r=s(c),r.g=a(c),r.b=l(c),r.opacity=u(c),r+""}}return o.gamma=e,o})(1);function zo(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Ih=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pf=new RegExp(Ih.source,"g");function _L(e){return function(){return e}}function bL(e){return function(t){return e(t)+""}}function wL(e,t){var n=Ih.lastIndex=pf.lastIndex=0,o,r,i,s=-1,a=[],l=[];for(e=e+"",t=t+"";(o=Ih.exec(e))&&(r=pf.exec(t));)(i=r.index)>n&&(i=t.slice(n,i),a[s]?a[s]+=i:a[++s]=i),(o=o[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:zo(o,r)})),n=pf.lastIndex;return n<t.length&&(i=t.slice(n),a[s]?a[s]+=i:a[++s]=i),a.length<2?l[0]?bL(l[0].x):_L(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}var u0=180/Math.PI,Th={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function N$(e,t,n,o,r,i){var s,a,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,l/=a),e*o<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*u0,skewX:Math.atan(l)*u0,scaleX:s,scaleY:a}}var wl;function xL(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Th:N$(t.a,t.b,t.c,t.d,t.e,t.f)}function $L(e){return e==null||(wl||(wl=document.createElementNS("http://www.w3.org/2000/svg","g")),wl.setAttribute("transform",e),!(e=wl.transform.baseVal.consolidate()))?Th:(e=e.matrix,N$(e.a,e.b,e.c,e.d,e.e,e.f))}function k$(e,t,n,o){function r(u){return u.length?u.pop()+" ":""}function i(u,c,d,f,h,m){if(u!==d||c!==f){var v=h.push("translate(",null,t,null,n);m.push({i:v-4,x:zo(u,d)},{i:v-2,x:zo(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function s(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(r(d)+"rotate(",null,o)-2,x:zo(u,c)})):c&&d.push(r(d)+"rotate("+c+o)}function a(u,c,d,f){u!==c?f.push({i:d.push(r(d)+"skewX(",null,o)-2,x:zo(u,c)}):c&&d.push(r(d)+"skewX("+c+o)}function l(u,c,d,f,h,m){if(u!==d||c!==f){var v=h.push(r(h)+"scale(",null,",",null,")");m.push({i:v-4,x:zo(u,d)},{i:v-2,x:zo(c,f)})}else(d!==1||f!==1)&&h.push(r(h)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),i(u.translateX,u.translateY,c.translateX,c.translateY,d,f),s(u.rotate,c.rotate,d,f),a(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var m=-1,v=f.length,b;++m<v;)d[(b=f[m]).i]=b.x(h);return d.join("")}}}var EL=k$(xL,"px, ","px)","deg)"),SL=k$($L,", ",")",")"),NL=1e-12;function c0(e){return((e=Math.exp(e))+1/e)/2}function kL(e){return((e=Math.exp(e))-1/e)/2}function CL(e){return((e=Math.exp(2*e))-1)/(e+1)}const IL=(function e(t,n,o){function r(i,s){var a=i[0],l=i[1],u=i[2],c=s[0],d=s[1],f=s[2],h=c-a,m=d-l,v=h*h+m*m,b,x;if(v<NL)x=Math.log(f/u)/t,b=function(Z){return[a+Z*h,l+Z*m,u*Math.exp(t*Z*x)]};else{var N=Math.sqrt(v),S=(f*f-u*u+o*v)/(2*u*n*N),A=(f*f-u*u-o*v)/(2*f*n*N),G=Math.log(Math.sqrt(S*S+1)-S),W=Math.log(Math.sqrt(A*A+1)-A);x=(W-G)/t,b=function(Z){var z=Z*x,j=c0(G),H=u/(n*N)*(j*CL(t*z+G)-kL(G));return[a+H*h,l+H*m,u*j/c0(t*z+G)]}}return b.duration=x*1e3*t/Math.SQRT2,b}return r.rho=function(i){var s=Math.max(.001,+i),a=s*s,l=a*a;return e(s,a,l)},r})(Math.SQRT2,2,4);var Vi=0,ms=0,Ji=0,C$=1e3,oc,ys,rc=0,Mr=0,fd=0,ha=typeof performance=="object"&&performance.now?performance:Date,I$=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ip(){return Mr||(I$(TL),Mr=ha.now()+fd)}function TL(){Mr=0}function ic(){this._call=this._time=this._next=null}ic.prototype=T$.prototype={constructor:ic,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ip():+n)+(t==null?0:+t),!this._next&&ys!==this&&(ys?ys._next=this:oc=this,ys=this),this._call=e,this._time=n,Ah()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ah())}};function T$(e,t,n){var o=new ic;return o.restart(e,t,n),o}function AL(){ip(),++Vi;for(var e=oc,t;e;)(t=Mr-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Vi}function d0(){Mr=(rc=ha.now())+fd,Vi=ms=0;try{AL()}finally{Vi=0,DL(),Mr=0}}function ML(){var e=ha.now(),t=e-rc;t>C$&&(fd-=t,rc=e)}function DL(){for(var e,t=oc,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:oc=n);ys=e,Ah(o)}function Ah(e){if(!Vi){ms&&(ms=clearTimeout(ms));var t=e-Mr;t>24?(e<1/0&&(ms=setTimeout(d0,e-ha.now()-fd)),Ji&&(Ji=clearInterval(Ji))):(Ji||(rc=ha.now(),Ji=setInterval(ML,C$)),Vi=1,I$(d0))}}function f0(e,t,n){var o=new ic;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var OL=tp("start","end","cancel","interrupt"),PL=[],A$=0,h0=1,Mh=2,Yl=3,g0=4,Dh=5,Xl=6;function hd(e,t,n,o,r,i){var s=e.__transition;if(!s)e.__transition={};else if(n in s)return;RL(e,n,{name:t,index:o,group:r,on:OL,tween:PL,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:A$})}function sp(e,t){var n=bn(e,t);if(n.state>A$)throw new Error("too late; already scheduled");return n}function jn(e,t){var n=bn(e,t);if(n.state>Yl)throw new Error("too late; already running");return n}function bn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function RL(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=T$(i,0,n.time);function i(u){n.state=h0,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var c,d,f,h;if(n.state!==h0)return l();for(c in o)if(h=o[c],h.name===n.name){if(h.state===Yl)return f0(s);h.state===g0?(h.state=Xl,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[c]):+c<t&&(h.state=Xl,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[c])}if(f0(function(){n.state===Yl&&(n.state=g0,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Mh,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Mh){for(n.state=Yl,r=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(r[++d]=h);r.length=d+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Dh,1),d=-1,f=r.length;++d<f;)r[d].call(e,c);n.state===Dh&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Xl,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function Wl(e,t){var n=e.__transition,o,r,i=!0,s;if(n){t=t==null?null:t+"";for(s in n){if((o=n[s]).name!==t){i=!1;continue}r=o.state>Mh&&o.state<Dh,o.state=Xl,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[s]}i&&delete e.__transition}}function zL(e){return this.each(function(){Wl(this,e)})}function VL(e,t){var n,o;return function(){var r=jn(this,e),i=r.tween;if(i!==n){o=n=i;for(var s=0,a=o.length;s<a;++s)if(o[s].name===t){o=o.slice(),o.splice(s,1);break}}r.tween=o}}function HL(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=jn(this,e),s=i.tween;if(s!==o){r=(o=s).slice();for(var a={name:t,value:n},l=0,u=r.length;l<u;++l)if(r[l].name===t){r[l]=a;break}l===u&&r.push(a)}i.tween=r}}function BL(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=bn(this.node(),n).tween,r=0,i=o.length,s;r<i;++r)if((s=o[r]).name===e)return s.value;return null}return this.each((t==null?VL:HL)(n,e,t))}function ap(e,t,n){var o=e._id;return e.each(function(){var r=jn(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return bn(r,o).value[t]}}function M$(e,t){var n;return(typeof t=="number"?zo:t instanceof fa?l0:(n=fa(t))?(t=n,l0):wL)(e,t)}function FL(e){return function(){this.removeAttribute(e)}}function LL(e){return function(){this.removeAttributeNS(e.space,e.local)}}function UL(e,t,n){var o,r=n+"",i;return function(){var s=this.getAttribute(e);return s===r?null:s===o?i:i=t(o=s,n)}}function GL(e,t,n){var o,r=n+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===r?null:s===o?i:i=t(o=s,n)}}function ZL(e,t,n){var o,r,i;return function(){var s,a=n(this),l;return a==null?void this.removeAttribute(e):(s=this.getAttribute(e),l=a+"",s===l?null:s===o&&l===r?i:(r=l,i=t(o=s,a)))}}function YL(e,t,n){var o,r,i;return function(){var s,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),l=a+"",s===l?null:s===o&&l===r?i:(r=l,i=t(o=s,a)))}}function XL(e,t){var n=dd(e),o=n==="transform"?SL:M$;return this.attrTween(e,typeof t=="function"?(n.local?YL:ZL)(n,o,ap(this,"attr."+e,t)):t==null?(n.local?LL:FL)(n):(n.local?GL:UL)(n,o,t))}function WL(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function jL(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function qL(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&jL(e,i)),n}return r._value=t,r}function KL(e,t){var n,o;function r(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&WL(e,i)),n}return r._value=t,r}function JL(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=dd(e);return this.tween(n,(o.local?qL:KL)(o,t))}function QL(e,t){return function(){sp(this,e).delay=+t.apply(this,arguments)}}function eU(e,t){return t=+t,function(){sp(this,e).delay=t}}function tU(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?QL:eU)(t,e)):bn(this.node(),t).delay}function nU(e,t){return function(){jn(this,e).duration=+t.apply(this,arguments)}}function oU(e,t){return t=+t,function(){jn(this,e).duration=t}}function rU(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?nU:oU)(t,e)):bn(this.node(),t).duration}function iU(e,t){if(typeof t!="function")throw new Error;return function(){jn(this,e).ease=t}}function sU(e){var t=this._id;return arguments.length?this.each(iU(t,e)):bn(this.node(),t).ease}function aU(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;jn(this,e).ease=n}}function lU(e){if(typeof e!="function")throw new Error;return this.each(aU(this._id,e))}function uU(e){typeof e!="function"&&(e=f$(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i=t[r],s=i.length,a=o[r]=[],l,u=0;u<s;++u)(l=i[u])&&e.call(l,l.__data__,u,i)&&a.push(l);return new bo(o,this._parents,this._name,this._id)}function cU(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),s=new Array(o),a=0;a<i;++a)for(var l=t[a],u=n[a],c=l.length,d=s[a]=new Array(c),f,h=0;h<c;++h)(f=l[h]||u[h])&&(d[h]=f);for(;a<o;++a)s[a]=t[a];return new bo(s,this._parents,this._name,this._id)}function dU(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function fU(e,t,n){var o,r,i=dU(t)?sp:jn;return function(){var s=i(this,e),a=s.on;a!==o&&(r=(o=a).copy()).on(t,n),s.on=r}}function hU(e,t){var n=this._id;return arguments.length<2?bn(this.node(),n).on.on(e):this.each(fU(n,e,t))}function gU(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function pU(){return this.on("end.remove",gU(this._id))}function mU(e){var t=this._name,n=this._id;typeof e!="function"&&(e=np(e));for(var o=this._groups,r=o.length,i=new Array(r),s=0;s<r;++s)for(var a=o[s],l=a.length,u=i[s]=new Array(l),c,d,f=0;f<l;++f)(c=a[f])&&(d=e.call(c,c.__data__,f,a))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,hd(u[f],t,n,f,u,bn(c,n)));return new bo(i,this._parents,t,n)}function yU(e){var t=this._name,n=this._id;typeof e!="function"&&(e=d$(e));for(var o=this._groups,r=o.length,i=[],s=[],a=0;a<r;++a)for(var l=o[a],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var f=e.call(c,c.__data__,d,l),h,m=bn(c,n),v=0,b=f.length;v<b;++v)(h=f[v])&&hd(h,t,n,v,f,m);i.push(f),s.push(c)}return new bo(i,s,t,n)}var vU=Oa.prototype.constructor;function _U(){return new vU(this._groups,this._parents)}function bU(e,t){var n,o,r;return function(){var i=zi(this,e),s=(this.style.removeProperty(e),zi(this,e));return i===s?null:i===n&&s===o?r:r=t(n=i,o=s)}}function D$(e){return function(){this.style.removeProperty(e)}}function wU(e,t,n){var o,r=n+"",i;return function(){var s=zi(this,e);return s===r?null:s===o?i:i=t(o=s,n)}}function xU(e,t,n){var o,r,i;return function(){var s=zi(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),zi(this,e))),s===l?null:s===o&&l===r?i:(r=l,i=t(o=s,a))}}function $U(e,t){var n,o,r,i="style."+t,s="end."+i,a;return function(){var l=jn(this,e),u=l.on,c=l.value[i]==null?a||(a=D$(t)):void 0;(u!==n||r!==c)&&(o=(n=u).copy()).on(s,r=c),l.on=o}}function EU(e,t,n){var o=(e+="")=="transform"?EL:M$;return t==null?this.styleTween(e,bU(e,o)).on("end.style."+e,D$(e)):typeof t=="function"?this.styleTween(e,xU(e,o,ap(this,"style."+e,t))).each($U(this._id,e)):this.styleTween(e,wU(e,o,t),n).on("end.style."+e,null)}function SU(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function NU(e,t,n){var o,r;function i(){var s=t.apply(this,arguments);return s!==r&&(o=(r=s)&&SU(e,s,n)),o}return i._value=t,i}function kU(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,NU(e,t,n??""))}function CU(e){return function(){this.textContent=e}}function IU(e){return function(){var t=e(this);this.textContent=t??""}}function TU(e){return this.tween("text",typeof e=="function"?IU(ap(this,"text",e)):CU(e==null?"":e+""))}function AU(e){return function(t){this.textContent=e.call(this,t)}}function MU(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&AU(r)),t}return o._value=e,o}function DU(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,MU(e))}function OU(){for(var e=this._name,t=this._id,n=O$(),o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],a=s.length,l,u=0;u<a;++u)if(l=s[u]){var c=bn(l,t);hd(l,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new bo(o,this._parents,e,n)}function PU(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(i,s){var a={value:s},l={value:function(){--r===0&&i()}};n.each(function(){var u=jn(this,o),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),r===0&&i()})}var RU=0;function bo(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function O$(){return++RU}var to=Oa.prototype;bo.prototype={constructor:bo,select:mU,selectAll:yU,selectChild:to.selectChild,selectChildren:to.selectChildren,filter:uU,merge:cU,selection:_U,transition:OU,call:to.call,nodes:to.nodes,node:to.node,size:to.size,empty:to.empty,each:to.each,on:hU,attr:XL,attrTween:JL,style:EU,styleTween:kU,text:TU,textTween:DU,remove:pU,tween:BL,delay:tU,duration:rU,ease:sU,easeVarying:lU,end:PU,[Symbol.iterator]:to[Symbol.iterator]};function zU(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var VU={time:null,delay:0,duration:250,ease:zU};function HU(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function BU(e){var t,n;e instanceof bo?(t=e._id,e=e._name):(t=O$(),(n=VU).time=ip(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],a=s.length,l,u=0;u<a;++u)(l=s[u])&&hd(l,e,t,u,s,n||HU(l,t));return new bo(o,this._parents,e,t)}Oa.prototype.interrupt=zL;Oa.prototype.transition=BU;const xl=e=>()=>e;function FU(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function lo(e,t,n){this.k=e,this.x=t,this.y=n}lo.prototype={constructor:lo,scale:function(e){return e===1?this:new lo(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new lo(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var lp=new lo(1,0,0);lo.prototype;function mf(e){e.stopImmediatePropagation()}function Qi(e){e.preventDefault(),e.stopImmediatePropagation()}function LU(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function UU(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function p0(){return this.__zoom||lp}function GU(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function ZU(){return navigator.maxTouchPoints||"ontouchstart"in this}function YU(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function XU(){var e=LU,t=UU,n=YU,o=GU,r=ZU,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=IL,u=tp("start","zoom","end"),c,d,f,h=500,m=150,v=0,b=10;function x(w){w.property("__zoom",p0).on("wheel.zoom",z,{passive:!1}).on("mousedown.zoom",j).on("dblclick.zoom",H).filter(r).on("touchstart.zoom",D).on("touchmove.zoom",I).on("touchend.zoom touchcancel.zoom",R).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(w,O,C,F){var Y=w.selection?w.selection():w;Y.property("__zoom",p0),w!==Y?G(w,O,C,F):Y.interrupt().each(function(){W(this,arguments).event(F).start().zoom(null,typeof O=="function"?O.apply(this,arguments):O).end()})},x.scaleBy=function(w,O,C,F){x.scaleTo(w,function(){var Y=this.__zoom.k,Q=typeof O=="function"?O.apply(this,arguments):O;return Y*Q},C,F)},x.scaleTo=function(w,O,C,F){x.transform(w,function(){var Y=t.apply(this,arguments),Q=this.__zoom,q=C==null?A(Y):typeof C=="function"?C.apply(this,arguments):C,ne=Q.invert(q),ae=typeof O=="function"?O.apply(this,arguments):O;return n(S(N(Q,ae),q,ne),Y,s)},C,F)},x.translateBy=function(w,O,C,F){x.transform(w,function(){return n(this.__zoom.translate(typeof O=="function"?O.apply(this,arguments):O,typeof C=="function"?C.apply(this,arguments):C),t.apply(this,arguments),s)},null,F)},x.translateTo=function(w,O,C,F,Y){x.transform(w,function(){var Q=t.apply(this,arguments),q=this.__zoom,ne=F==null?A(Q):typeof F=="function"?F.apply(this,arguments):F;return n(lp.translate(ne[0],ne[1]).scale(q.k).translate(typeof O=="function"?-O.apply(this,arguments):-O,typeof C=="function"?-C.apply(this,arguments):-C),Q,s)},F,Y)};function N(w,O){return O=Math.max(i[0],Math.min(i[1],O)),O===w.k?w:new lo(O,w.x,w.y)}function S(w,O,C){var F=O[0]-C[0]*w.k,Y=O[1]-C[1]*w.k;return F===w.x&&Y===w.y?w:new lo(w.k,F,Y)}function A(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function G(w,O,C,F){w.on("start.zoom",function(){W(this,arguments).event(F).start()}).on("interrupt.zoom end.zoom",function(){W(this,arguments).event(F).end()}).tween("zoom",function(){var Y=this,Q=arguments,q=W(Y,Q).event(F),ne=t.apply(Y,Q),ae=C==null?A(ne):typeof C=="function"?C.apply(Y,Q):C,fe=Math.max(ne[1][0]-ne[0][0],ne[1][1]-ne[0][1]),se=Y.__zoom,pe=typeof O=="function"?O.apply(Y,Q):O,le=l(se.invert(ae).concat(fe/se.k),pe.invert(ae).concat(fe/pe.k));return function(ee){if(ee===1)ee=pe;else{var re=le(ee),oe=fe/re[2];ee=new lo(oe,ae[0]-re[0]*oe,ae[1]-re[1]*oe)}q.zoom(null,ee)}})}function W(w,O,C){return!C&&w.__zooming||new Z(w,O)}function Z(w,O){this.that=w,this.args=O,this.active=0,this.sourceEvent=null,this.extent=t.apply(w,O),this.taps=0}Z.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,O){return this.mouse&&w!=="mouse"&&(this.mouse[1]=O.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=O.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=O.invert(this.touch1[0])),this.that.__zoom=O,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var O=Bo(this.that).datum();u.call(w,this.that,new FU(w,{sourceEvent:this.sourceEvent,target:x,transform:this.that.__zoom,dispatch:u}),O)}};function z(w,...O){if(!e.apply(this,arguments))return;var C=W(this,O).event(w),F=this.__zoom,Y=Math.max(i[0],Math.min(i[1],F.k*Math.pow(2,o.apply(this,arguments)))),Q=Do(w);if(C.wheel)(C.mouse[0][0]!==Q[0]||C.mouse[0][1]!==Q[1])&&(C.mouse[1]=F.invert(C.mouse[0]=Q)),clearTimeout(C.wheel);else{if(F.k===Y)return;C.mouse=[Q,F.invert(Q)],Wl(this),C.start()}Qi(w),C.wheel=setTimeout(q,m),C.zoom("mouse",n(S(N(F,Y),C.mouse[0],C.mouse[1]),C.extent,s));function q(){C.wheel=null,C.end()}}function j(w,...O){if(f||!e.apply(this,arguments))return;var C=w.currentTarget,F=W(this,O,!0).event(w),Y=Bo(w.view).on("mousemove.zoom",ae,!0).on("mouseup.zoom",fe,!0),Q=Do(w,C),q=w.clientX,ne=w.clientY;nL(w.view),mf(w),F.mouse=[Q,this.__zoom.invert(Q)],Wl(this),F.start();function ae(se){if(Qi(se),!F.moved){var pe=se.clientX-q,le=se.clientY-ne;F.moved=pe*pe+le*le>v}F.event(se).zoom("mouse",n(S(F.that.__zoom,F.mouse[0]=Do(se,C),F.mouse[1]),F.extent,s))}function fe(se){Y.on("mousemove.zoom mouseup.zoom",null),oL(se.view,F.moved),Qi(se),F.event(se).end()}}function H(w,...O){if(e.apply(this,arguments)){var C=this.__zoom,F=Do(w.changedTouches?w.changedTouches[0]:w,this),Y=C.invert(F),Q=C.k*(w.shiftKey?.5:2),q=n(S(N(C,Q),F,Y),t.apply(this,O),s);Qi(w),a>0?Bo(this).transition().duration(a).call(G,q,F,w):Bo(this).call(x.transform,q,F,w)}}function D(w,...O){if(e.apply(this,arguments)){var C=w.touches,F=C.length,Y=W(this,O,w.changedTouches.length===F).event(w),Q,q,ne,ae;for(mf(w),q=0;q<F;++q)ne=C[q],ae=Do(ne,this),ae=[ae,this.__zoom.invert(ae),ne.identifier],Y.touch0?!Y.touch1&&Y.touch0[2]!==ae[2]&&(Y.touch1=ae,Y.taps=0):(Y.touch0=ae,Q=!0,Y.taps=1+!!c);c&&(c=clearTimeout(c)),Q&&(Y.taps<2&&(d=ae[0],c=setTimeout(function(){c=null},h)),Wl(this),Y.start())}}function I(w,...O){if(this.__zooming){var C=W(this,O).event(w),F=w.changedTouches,Y=F.length,Q,q,ne,ae;for(Qi(w),Q=0;Q<Y;++Q)q=F[Q],ne=Do(q,this),C.touch0&&C.touch0[2]===q.identifier?C.touch0[0]=ne:C.touch1&&C.touch1[2]===q.identifier&&(C.touch1[0]=ne);if(q=C.that.__zoom,C.touch1){var fe=C.touch0[0],se=C.touch0[1],pe=C.touch1[0],le=C.touch1[1],ee=(ee=pe[0]-fe[0])*ee+(ee=pe[1]-fe[1])*ee,re=(re=le[0]-se[0])*re+(re=le[1]-se[1])*re;q=N(q,Math.sqrt(ee/re)),ne=[(fe[0]+pe[0])/2,(fe[1]+pe[1])/2],ae=[(se[0]+le[0])/2,(se[1]+le[1])/2]}else if(C.touch0)ne=C.touch0[0],ae=C.touch0[1];else return;C.zoom("touch",n(S(q,ne,ae),C.extent,s))}}function R(w,...O){if(this.__zooming){var C=W(this,O).event(w),F=w.changedTouches,Y=F.length,Q,q;for(mf(w),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),Q=0;Q<Y;++Q)q=F[Q],C.touch0&&C.touch0[2]===q.identifier?delete C.touch0:C.touch1&&C.touch1[2]===q.identifier&&delete C.touch1;if(C.touch1&&!C.touch0&&(C.touch0=C.touch1,delete C.touch1),C.touch0)C.touch0[1]=this.__zoom.invert(C.touch0[0]);else if(C.end(),C.taps===2&&(q=Do(q,this),Math.hypot(d[0]-q[0],d[1]-q[1])<b)){var ne=Bo(this).on("dblclick.zoom");ne&&ne.apply(this,arguments)}}}return x.wheelDelta=function(w){return arguments.length?(o=typeof w=="function"?w:xl(+w),x):o},x.filter=function(w){return arguments.length?(e=typeof w=="function"?w:xl(!!w),x):e},x.touchable=function(w){return arguments.length?(r=typeof w=="function"?w:xl(!!w),x):r},x.extent=function(w){return arguments.length?(t=typeof w=="function"?w:xl([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),x):t},x.scaleExtent=function(w){return arguments.length?(i[0]=+w[0],i[1]=+w[1],x):[i[0],i[1]]},x.translateExtent=function(w){return arguments.length?(s[0][0]=+w[0][0],s[1][0]=+w[1][0],s[0][1]=+w[0][1],s[1][1]=+w[1][1],x):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},x.constrain=function(w){return arguments.length?(n=w,x):n},x.duration=function(w){return arguments.length?(a=+w,x):a},x.interpolate=function(w){return arguments.length?(l=w,x):l},x.on=function(){var w=u.on.apply(u,arguments);return w===u?x:w},x.clickDistance=function(w){return arguments.length?(v=(w=+w)*w,x):Math.sqrt(v)},x.tapDistance=function(w){return arguments.length?(b=+w,x):b},x}const P$=Symbol("MiniMapSlots"),WU=["id","x","y","rx","ry","width","height","fill","stroke","stroke-width","shape-rendering"],jU={name:"MiniMapNode",compatConfig:{MODE:3},inheritAttrs:!1},qU=Ne({...jU,props:{id:{},type:{},selected:{type:Boolean},dragging:{type:Boolean},position:{},dimensions:{},borderRadius:{},color:{},shapeRendering:{},strokeColor:{},strokeWidth:{},hidden:{type:Boolean}},emits:["click","dblclick","mouseenter","mousemove","mouseleave"],setup(e,{emit:t}){const n=e,o=ot(P$),r=Li(),i=Oe(()=>r.style??{});function s(d){t("click",d)}function a(d){t("dblclick",d)}function l(d){t("mouseenter",d)}function u(d){t("mousemove",d)}function c(d){t("mouseleave",d)}return(d,f)=>!d.hidden&&d.dimensions.width!==0&&d.dimensions.height!==0?(L(),X(xe,{key:0},[ie(o)[`node-${n.type}`]?(L(),Ye(Kt(ie(o)[`node-${n.type}`]),Fe(dn({key:0},{...n,...d.$attrs})),null,16)):(L(),X("rect",dn({key:1,id:d.id},d.$attrs,{class:["vue-flow__minimap-node",{selected:d.selected,dragging:d.dragging}],x:d.position.x,y:d.position.y,rx:d.borderRadius,ry:d.borderRadius,width:d.dimensions.width,height:d.dimensions.height,fill:d.color||i.value.background||i.value.backgroundColor,stroke:d.strokeColor,"stroke-width":d.strokeWidth,"shape-rendering":d.shapeRendering,onClick:s,onDblclick:a,onMouseenter:l,onMousemove:u,onMouseleave:c}),null,16,WU))],64)):ve("",!0)}}),KU=["width","height","viewBox","aria-labelledby"],JU=["id"],QU=["d","fill","stroke","stroke-width"],eG={name:"MiniMap",compatConfig:{MODE:3}},tG=Ne({...eG,props:{nodeColor:{type:[String,Function],default:"#e2e2e2"},nodeStrokeColor:{type:[String,Function],default:"transparent"},nodeClassName:{type:[String,Function]},nodeBorderRadius:{default:5},nodeStrokeWidth:{default:2},maskColor:{default:"rgb(240, 240, 240, 0.6)"},maskStrokeColor:{default:"none"},maskStrokeWidth:{default:1},position:{default:"bottom-right"},pannable:{type:Boolean,default:!1},zoomable:{type:Boolean,default:!1},width:{},height:{},ariaLabel:{default:"Vue Flow mini map"},inversePan:{type:Boolean,default:!1},zoomStep:{default:1},offsetScale:{default:5},maskBorderRadius:{default:0}},emits:["click","nodeClick","nodeDblclick","nodeMouseenter","nodeMousemove","nodeMouseleave"],setup(e,{emit:t}){const n=ub(),o=Li(),r=200,i=150,{id:s,edges:a,viewport:l,translateExtent:u,dimensions:c,emits:d,d3Selection:f,d3Zoom:h,getNodesInitialized:m}=Da(),v=de();Ht(P$,n);const b=Oe(()=>{var Y;return e.width??((Y=o.style)==null?void 0:Y.width)??r}),x=Oe(()=>{var Y;return e.height??((Y=o.style)==null?void 0:Y.height)??i}),N=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision",S=J(()=>typeof e.nodeColor=="string"?()=>e.nodeColor:e.nodeColor),A=J(()=>typeof e.nodeStrokeColor=="string"?()=>e.nodeStrokeColor:e.nodeStrokeColor),G=J(()=>typeof e.nodeClassName=="string"?()=>e.nodeClassName:typeof e.nodeClassName=="function"?e.nodeClassName:()=>""),W=J(()=>o$(m.value.filter(Y=>!Y.hidden))),Z=J(()=>({x:-l.value.x/l.value.zoom,y:-l.value.y/l.value.zoom,width:c.value.width/l.value.zoom,height:c.value.height/l.value.zoom})),z=J(()=>m.value&&m.value.length?c9(W.value,Z.value):Z.value),j=J(()=>{const Y=z.value.width/b.value,Q=z.value.height/x.value;return Math.max(Y,Q)}),H=J(()=>{const Y=j.value*b.value,Q=j.value*x.value,q=e.offsetScale*j.value;return{offset:q,x:z.value.x-(Y-z.value.width)/2-q,y:z.value.y-(Q-z.value.height)/2-q,width:Y+q*2,height:Q+q*2}}),D=J(()=>!H.value.x||!H.value.y?"":`
    M${H.value.x-H.value.offset},${H.value.y-H.value.offset}
    h${H.value.width+H.value.offset*2}
    v${H.value.height+H.value.offset*2}
    h${-H.value.width-H.value.offset*2}z
    M${Z.value.x+e.maskBorderRadius},${Z.value.y}
    h${Z.value.width-2*e.maskBorderRadius}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 ${e.maskBorderRadius},${e.maskBorderRadius}
    v${Z.value.height-2*e.maskBorderRadius}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 -${e.maskBorderRadius},${e.maskBorderRadius}
    h${-(Z.value.width-2*e.maskBorderRadius)}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 -${e.maskBorderRadius},-${e.maskBorderRadius}
    v${-(Z.value.height-2*e.maskBorderRadius)}
    a${e.maskBorderRadius},${e.maskBorderRadius} 0 0 1 ${e.maskBorderRadius},-${e.maskBorderRadius}z`);QS(Y=>{if(v.value){const Q=Bo(v.value),q=fe=>{if(fe.sourceEvent.type!=="wheel"||!f.value||!h.value)return;const se=fe.sourceEvent.ctrlKey&&Ju()?10:1,pe=-fe.sourceEvent.deltaY*(fe.sourceEvent.deltaMode===1?.05:fe.sourceEvent.deltaMode?1:.002)*e.zoomStep,le=l.value.zoom*2**(pe*se);h.value.scaleTo(f.value,le)},ne=fe=>{if(fe.sourceEvent.type!=="mousemove"||!f.value||!h.value)return;const se=j.value*Math.max(1,l.value.zoom)*(e.inversePan?-1:1),pe={x:l.value.x-fe.sourceEvent.movementX*se,y:l.value.y-fe.sourceEvent.movementY*se},le=[[0,0],[c.value.width,c.value.height]],ee=lp.translate(pe.x,pe.y).scale(l.value.zoom),re=h.value.constrain()(ee,le,u.value);h.value.transform(f.value,re)},ae=XU().wheelDelta(fe=>g9(fe)*(e.zoomStep/10)).on("zoom",e.pannable?ne:()=>{}).on("zoom.wheel",e.zoomable?q:()=>{});Q.call(ae),Y(()=>{Q.on("zoom",null)})}},{flush:"post"});function I(Y){const[Q,q]=Do(Y);t("click",{event:Y,position:{x:Q,y:q}})}function R(Y,Q){const q={event:Y,node:Q,connectedEdges:rr([Q],a.value)};d.miniMapNodeClick(q),t("nodeClick",q)}function w(Y,Q){const q={event:Y,node:Q,connectedEdges:rr([Q],a.value)};d.miniMapNodeDoubleClick(q),t("nodeDblclick",q)}function O(Y,Q){const q={event:Y,node:Q,connectedEdges:rr([Q],a.value)};d.miniMapNodeMouseEnter(q),t("nodeMouseenter",q)}function C(Y,Q){const q={event:Y,node:Q,connectedEdges:rr([Q],a.value)};d.miniMapNodeMouseMove(q),t("nodeMousemove",q)}function F(Y,Q){const q={event:Y,node:Q,connectedEdges:rr([Q],a.value)};d.miniMapNodeMouseLeave(q),t("nodeMouseleave",q)}return(Y,Q)=>(L(),Ye(ie(_B),{position:Y.position,class:We(["vue-flow__minimap",{pannable:Y.pannable,zoomable:Y.zoomable}])},{default:Pe(()=>[(L(),X("svg",{ref_key:"el",ref:v,width:b.value,height:x.value,viewBox:[H.value.x,H.value.y,H.value.width,H.value.height].join(" "),role:"img","aria-labelledby":`vue-flow__minimap-${ie(s)}`,onClick:I},[Y.ariaLabel?(L(),X("title",{key:0,id:`vue-flow__minimap-${ie(s)}`},ye(Y.ariaLabel),9,JU)):ve("",!0),(L(!0),X(xe,null,nt(ie(m),q=>(L(),Ye(qU,{id:q.id,key:q.id,f:"",position:q.computedPosition,dimensions:q.dimensions,selected:q.selected,dragging:q.dragging,style:qe(q.style),class:We(G.value(q)),color:S.value(q),"border-radius":Y.nodeBorderRadius,"stroke-color":A.value(q),"stroke-width":Y.nodeStrokeWidth,"shape-rendering":ie(N),type:q.type,hidden:q.hidden,onClick:ne=>R(ne,q),onDblclick:ne=>w(ne,q),onMouseenter:ne=>O(ne,q),onMousemove:ne=>C(ne,q),onMouseleave:ne=>F(ne,q)},null,8,["id","position","dimensions","selected","dragging","style","class","color","border-radius","stroke-color","stroke-width","shape-rendering","type","hidden","onClick","onDblclick","onMouseenter","onMousemove","onMouseleave"]))),128)),T("path",{class:"vue-flow__minimap-mask",d:D.value,fill:Y.maskColor,stroke:Y.maskStrokeColor,"stroke-width":Y.maskStrokeWidth,"fill-rule":"evenodd"},null,8,QU)],8,KU))]),_:1},8,["position","class"]))}}),nG="modulepreload",oG=function(e){return"/editor/"+e},m0={},Ue=function(t,n,o){let r=Promise.resolve();if(n&&n.length>0){let l=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=s?.nonce||s?.getAttribute("nonce");r=l(n.map(u=>{if(u=oG(u),u in m0)return;m0[u]=!0;const c=u.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":nG,c||(f.as="script"),f.crossOrigin="",f.href=u,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return r.then(s=>{for(const a of s||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})};function rG(e,t){const n={},o={};e.forEach(a=>{n[a.id]=[],o[a.id]=0}),t.filter(a=>a.edgeType==="data"||!a.sourceHandle?.startsWith("exec-")&&!a.targetHandle?.startsWith("exec-")).forEach(a=>{n[a.source].push(a.target),o[a.target]++});const i=[],s=[];for(Object.keys(o).forEach(a=>{o[a]===0&&i.push(a)});i.length>0;){const a=i.shift(),l=e.find(u=>u.id===a);l&&s.push(l),n[a].forEach(u=>{o[u]--,o[u]===0&&i.push(u)})}return s}class iG{constructor(t=null,n=null){this.executionResults=new Map,this.executingNodes=new Set,this.executedNodes=new Set,this.errorNodes=new Set,this.executeTimers=new Map,this.apiConfig=null,this.globalVariables={},this.nodeData=new Map,this.onStateChange=null,this.executeNodeFn=t,this.extractOutputsFn=n}setConfig(t,n={}){this.apiConfig=t,this.globalVariables=n}setNodeData(t,n){this.nodeData.set(t,n)}getNodeData(t){return this.nodeData.get(t)||{}}clearExecutionResults(){this.executionResults.clear(),this.executedNodes.clear(),this.executingNodes.clear(),this.errorNodes.clear();for(const t of this.executeTimers.values())clearTimeout(t);this.executeTimers.clear(),this._notifyStateChange()}async executeNode(t,n={}){const o=this.getNodeData(t.id);this.executingNodes.add(t.id),this.errorNodes.delete(t.id),this._notifyStateChange();try{const r={apiConfig:this.apiConfig,globalVariables:this.globalVariables,nodeId:t.id,updateNodeData:s=>{const a=this.getNodeData(t.id);this.setNodeData(t.id,{...a,...s})}},i=await this.executeNodeFn(t,o,n,r);return this.executingNodes.delete(t.id),this.executedNodes.add(t.id),this._notifyStateChange(),i}catch(r){throw this.executingNodes.delete(t.id),this.errorNodes.add(t.id),this._notifyStateChange(),console.error(`
❌ Execution Error`),console.error("━".repeat(50)),console.error(`Node: ${t.data?.label||t.type} (${t.id})`),console.error(`Type: ${t.type}`),console.error(`Message: ${r.message}`),r.stack&&(console.error(`
Stack trace:`),console.error(r.stack)),console.error("━".repeat(50)+`
`),r}}async executeFlow(t,n){this.clearExecutionResults();const o=rG(t,n),r=new Set(o.map(a=>a.id)),i=o.length+1;let s=0;for(;r.size>0&&s<i;){s++;let a=!1;for(const l of o){if(!r.has(l.id))continue;if(this._shouldSkipNode(l,n)){r.delete(l.id),a=!0;continue}if(this._hasPendingDependencies(l,n))continue;const u=this._gatherInputs(l,n);try{const c=await this.executeNode(l,u),d=this.extractOutputsFn?this.extractOutputsFn(l,c):c;this.executionResults.set(l.id,d)}catch(c){this.executionResults.set(l.id,{error:c.message}),this._notifyStateChange();return}r.delete(l.id),a=!0}if(!a)break}this._notifyStateChange()}async executeConnectedNodes(t,n,o,r=null){const i=o.filter(s=>s.source===t&&s.edgeType==="exec"&&(r===null||s.sourceHandle===r));if(i.length!==0)for(const s of i){const a=n.find(u=>u.id===s.target);if(!a)continue;const l=this._gatherInputs(a,o);try{const u=await this.executeNode(a,l);if(this.executionResults.set(a.id,u),a.type==="conditionalBranch"){const c=u?.branch;c&&await this.executeConnectedNodes(a.id,n,o,`exec-${c}`)}else a.type==="forEach"||a.type==="whileLoop"||await this.executeConnectedNodes(a.id,n,o)}catch(u){this.executionResults.set(a.id,{error:u.message})}}}async executeWhileLoop(t,n,o,r,i=1e3){let s=0,a=r;for(;a&&s<i&&(s++,await this.executeConnectedNodes(t,n,o,"exec-loop"),a=this.executionResults.get(t)?.condition??!1,!(s>=i)););await this.executeConnectedNodes(t,n,o,"exec-done")}async executeForEachLoop(t,n,o,r){const i=[];for(let s=0;s<r.length;s++){const a=r[s];this.executionResults.set(t,{currentItem:a,currentIndex:s,totalItems:r.length}),await this.executeConnectedNodes(t,n,o,"exec-loop"),i.push(a)}this.executionResults.set(t,{results:i}),await this.executeConnectedNodes(t,n,o,"exec-done")}getResult(t){return this.executionResults.get(t)}getAllResults(){return Object.fromEntries(this.executionResults)}isExecuting(t){return this.executingNodes.has(t)}hasExecuted(t){return this.executedNodes.has(t)}hasError(t){return this.errorNodes.has(t)}_gatherInputs(t,n){const o={},r=n.filter(i=>i.target===t.id&&i.edgeType==="data");for(const i of r){const s=this.executionResults.get(i.source);if(!s)continue;const a=s[i.sourceHandle];o[i.targetHandle]=a}return o}_hasPendingDependencies(t,n){const o=n.filter(r=>r.target!==t.id?!1:r.edgeType==="data"||!r.sourceHandle?.startsWith("exec-"));for(const r of o)if(!this.executionResults.get(r.source))return!0;return!1}_shouldSkipNode(t,n){return n.some(r=>r.target===t.id&&r.edgeType==="exec")}_notifyStateChange(){this.onStateChange&&this.onStateChange({executionResults:this.getAllResults(),executingNodes:Array.from(this.executingNodes),executedNodes:Array.from(this.executedNodes),errorNodes:Array.from(this.errorNodes)})}}let vs=null;async function sG(){if(vs)return vs;try{return vs=await(await fetch("/config/dataTypes.json")).json(),vs}catch{return R$()}}function R$(){return{types:{any:{label:"Any",color:"#3b82f6"},string:{label:"String",color:"#10b981"},number:{label:"Number",color:"#f59e0b"},integer:{label:"Integer",color:"#f97316"},float:{label:"Float",color:"#fb923c"},boolean:{label:"Boolean",color:"#8b5cf6"},array:{label:"Array",color:"#ec4899"},object:{label:"Object",color:"#06b6d4"},date:{label:"Date",color:"#14b8a6"},null:{label:"Null",color:"#6b7280"}},compatibility:{any:["any","string","number","integer","float","boolean","array","object","date","null"],string:["any","string"],number:["any","number","integer","float"],integer:["any","number","integer"],float:["any","number","float"],boolean:["any","boolean"],array:["any","array"],object:["any","object"],date:["any","date","string"],null:["any","null"]}}}function sc(e){return(vs||R$()).types[e]?.color||"#3b82f6"}function ac(e){return e===null||e===void 0?"null":typeof e=="string"?"string":typeof e=="boolean"?"boolean":Array.isArray(e)?"array":e instanceof Date?"date":typeof e=="object"?"object":typeof e=="number"?Number.isInteger(e)?"integer":"float":"any"}const aG=Object.assign({});let lG=class{constructor(){this.nodes=new Map,this.categories=new Map,this.methodCache=new Map}registerNode(t,n){this.nodes.set(t,n)}registerCategory(t,n){this.categories.set(t,n)}getNodeDefinition(t){const n=this.nodes.get(t);return n||null}getAllNodes(){return Array.from(this.nodes.values())}getNodesByCategory(t){return this.getAllNodes().filter(n=>n.category===t)}getAllCategories(){return Array.from(this.categories.values())}hasNode(t){return this.nodes.has(t)}async getNodeFunction(t,n="method"){const o=this.getNodeDefinition(t);if(!o)return null;const r=o[n];if(!r)return null;const i=`${t}:${n}`;if(this.methodCache.has(i))return this.methodCache.get(i);try{const[s,a]=r.split(":"),l=`../../${s}`,u=aG[l];if(!u)throw new Error(`Módulo "${s}" não encontrado no registry`);const c=await u();if(!c[a])throw new Error(`Função "${a}" não encontrada no módulo "${s}"`);const d=c[a];return this.methodCache.set(i,d),d}catch{return null}}validateNodeConfig(t,n){const o=this.getNodeDefinition(t);if(!o)return{valid:!1,errors:[`Node type "${t}" não existe`]};const r=[],i=o.config||{};for(const[s,a]of Object.entries(i))if(a.required&&(n[s]===void 0||n[s]===null||n[s]==="")&&r.push(`Campo obrigatório "${s}" está vazio`),a.condition&&n[s]!==void 0){const[l,u]=Object.entries(a.condition)[0],c=n[l];if(Array.isArray(u)){if(!u.includes(c))continue}else if(c!==u)continue}return{valid:r.length===0,errors:r}}getNodeHandles(t){const n=this.getNodeDefinition(t);return n?n.handles||{inputs:{execution:[],data:[]},outputs:{execution:[],data:[]}}:null}clear(){this.nodes.clear(),this.categories.clear(),this.methodCache.clear()}getStats(){return{totalNodes:this.nodes.size,totalCategories:this.categories.size,cachedMethods:this.methodCache.size,nodesByCategory:Array.from(this.categories.keys()).reduce((t,n)=>(t[n]=this.getNodesByCategory(n).length,t),{})}}};const uG=new lG,z$=e=>uG.getNodeDefinition(e);function cG(e,t,n){if(n?.executionResults?.[e]){const o=n.executionResults[e][t];if(o!==void 0)return ac(o)}return n?.savedDetectedTypes?.[e]?.[t]?n.savedDetectedTypes[e][t]:"any"}function dG(e,t,n){if(!n?.edges||!n?.nodes)return"any";const o=n.edges.find(s=>s.target===e&&s.targetHandle===t&&!s.sourceHandle?.startsWith("exec-"));if(!o)return"any";const r=n.nodes.find(s=>s.id===o.source);if(!r)return"any";const i=n.nodeData?.[r.id]||{};return fo(r.type,i,o.sourceHandle,"source",n)}function fG(e,t){const n=e?.[t];return n&&{number:"number",string:"string",boolean:"boolean",object:"object",array:"array",null:"any",integer:"integer",float:"float",date:"date"}[n]||"any"}function hG(e,t,n,o){const r=e?._nodeId,i=e?.variableName,s=e?.mode||"get";if(!o||!r)return"any";if(n==="source"&&t==="data-out"){if(s==="set"){const a=o.edges.filter(l=>l.target===r&&l.targetHandle==="data-input"&&!l.sourceHandle?.startsWith("exec-"));if(a.length>0){const l=o.nodes.find(u=>u.id===a[0].source);if(l){const u=o.nodeData[l.id];return fo(l.type,u,a[0].sourceHandle,"source",o)}}}if(s==="get"&&i){const a=o.nodes.filter(l=>l.type==="variable"&&l.id!==r&&o.nodeData[l.id]?.mode==="set"&&o.nodeData[l.id]?.variableName===i);for(const l of a){const u=o.edges.filter(c=>c.target===l.id&&c.targetHandle==="data-input"&&!c.sourceHandle?.startsWith("exec-"));if(u.length>0){const c=o.nodes.find(d=>d.id===u[0].source);if(c){const d=o.nodeData[c.id];return fo(c.type,d,u[0].sourceHandle,"source",o)}}}}}return"any"}function gG(e,t,n,o,r,i){const s=r?.dynamic;if(!s)return r?.type||"any";const a=t?._nodeId;switch(s.mode){case"runtime-detection":return cG(a,n,i);case"input-inference":return dG(a,s.inferFrom||n,i);case"config-based":return fG(t,s.configField);case"wildcard":return hG(t,n,o,i);default:return r?.type||"any"}}function fo(e,t,n,o,r=null){if(e==="field-extractor"){if(n==="all-data")return"object";const l=t?.fieldTypes||{},u=n.replace("field-","").replace(/-/g,".");return l[u]||"any"}if(e==="output"){const l=t?.customInputs||[],u=parseInt(n.replace("data-input-",""));return l[u]?.type||"any"}if(e==="input"){const l=t?.parameters||[],u=parseInt(n.replace("param-output-",""));return l[u]?.type||"any"}const i=z$(e);if(!i||!i.handles)return"any";const s=o==="source"?i.handles.outputs:i.handles.inputs;if(!s||!s.data)return"any";const a=s.data.find(l=>l.id===n);return a?a.dynamic?gG(e,t,n,o,a,r):a.type||"any":"any"}function Oh(e,t){if(t.startsWith("exec-"))return["exec"];const n=z$(e);if(!n||!n.handles||!n.handles.inputs||!n.handles.inputs.data)return["any"];const o=n.handles.inputs.data.find(r=>r.id===t);return!o||!o.type?["any"]:Array.isArray(o.type)?o.type:[o.type]}function V$(e,t){if(e==="exec"||t.includes("exec"))return e==="exec"&&t.includes("exec");if(t.includes("any"))return!0;if(e==="any")return t.includes("any");if(t.includes(e))return!0;const n=["number","integer","float"];return n.includes(e)?t.some(o=>n.includes(o)):!1}function pG(e,t,n,o,r){const i={...r.nodeData[e.id]||{},_nodeId:e.id};if({...r.nodeData[n.id]||{},_nodeId:n.id},t.startsWith("exec-"))return!0;const s=fo(e.type,i,t,"source",r),a=Oh(n.type,o);return V$(s,a)}class mG{constructor(){this.detectedTypes=new Map}detectType(t,n,o){const r=ac(o);return this.detectedTypes.has(t)||this.detectedTypes.set(t,new Map),this.detectedTypes.get(t).set(n,r),r}detectAllTypes(t){const n={};for(const[o,r]of Object.entries(t))if(!(!r||typeof r!="object")){n[o]={};for(const i in r){if(i.startsWith("exec-"))continue;const s=r[i],a=this.detectType(o,i,s);n[o][i]=a}}return n}getDetectedType(t,n){const o=this.detectedTypes.get(t);return o&&o.get(n)||null}getNodeDetectedTypes(t){const n=this.detectedTypes.get(t);return n?Object.fromEntries(n):{}}loadDetectedTypes(t){this.detectedTypes.clear();for(const n in t){const o=new Map;for(const r in t[n])o.set(r,t[n][r]);this.detectedTypes.set(n,o)}}exportDetectedTypes(){const t={};for(const[n,o]of this.detectedTypes)t[n]=Object.fromEntries(o);return t}clearDetectedTypes(){this.detectedTypes.clear()}getHandleType(t,n,o={}){const r=this.getDetectedType(t.id,n.id);return r||fo(t,n,o)}isTypeCompatible(t,n){if(t==="any"||n==="any"||t===n)return!0;const o=["number","integer","float"];return!!(o.includes(t)&&o.includes(n)||t.startsWith("array")&&n==="array"||t==="array"&&n.startsWith("array")||t.startsWith("object")&&n==="object"||t==="object"&&n.startsWith("object"))}getTypeColor(t){const n={string:"#10b981",number:"#3b82f6",integer:"#3b82f6",float:"#3b82f6",boolean:"#f59e0b",array:"#8b5cf6",object:"#ec4899",date:"#14b8a6",any:"#6b7280",exec:"#ef4444",null:"#6b7280"};return t.startsWith("array")?n.array:t.startsWith("object")?n.object:n[t]||n.any}inferTypeFromInputs(t){if(!t||Object.keys(t).length===0)return"any";const n=Object.values(t)[0];return ac(n)}getTypeStats(){const t={totalNodes:this.detectedTypes.size,totalHandles:0,typeDistribution:{}};for(const n of this.detectedTypes.values()){t.totalHandles+=n.size;for(const o of n.values())t.typeDistribution[o]=(t.typeDistribution[o]||0)+1}return t}}class yG{constructor(){this.autoExecuteDelay=500,this.autoExecuteOnCreate=["input","constant","variable","arrayCreate","objectCreate"],this.autoExecuteOnConfigChange=["input","constant","variable","dataConnector","arrayCreate","objectCreate","arraySlice","comparison","logic","math","stringOps","typeConversion"],this.autoExecuteOnDataReceived=["arrayFilter","arrayMap","arraySort","arrayAggregate","arrayMerge","arrayDistinct","arrayGroupBy","arraySlice","objectFilter","objectPick","objectMerge","objectTransform","objectRename","objectSetProperty","objectToArray","objectKeysValues","fieldExtractor","comparison","logic","math","stringOps","typeConversion","debugViewer"]}shouldAutoExecuteOnCreate(t){return this.autoExecuteOnCreate.includes(t)}shouldAutoExecuteOnConfigChange(t){return this.autoExecuteOnConfigChange.includes(t)}shouldAutoExecuteOnDataReceived(t){return this.autoExecuteOnDataReceived.includes(t)}shouldAutoExecute(t,n){switch(n){case"create":return this.shouldAutoExecuteOnCreate(t);case"config":return this.shouldAutoExecuteOnConfigChange(t);case"data":return this.shouldAutoExecuteOnDataReceived(t);default:return!1}}getDelay(){return this.autoExecuteDelay}setDelay(t){this.autoExecuteDelay=t}hasExecInputs(t,n){return n.some(o=>o.target===t&&o.edgeType==="exec")}getAffectedNodes(t,n,o){const r=[],i=new Set,s=a=>{if(i.has(a))return;i.add(a);const l=o.filter(u=>u.source===a&&u.edgeType==="data");for(const u of l){const c=n.find(d=>d.id===u.target);c&&this.shouldAutoExecuteOnDataReceived(c.type)&&(this.hasExecInputs(c.id,o)||(r.push(c.id),s(c.id)))}};return s(t),r}determineTrigger(t,n,o){if(this.hasExecInputs(t.id,n))return null;switch(o){case"create":return this.shouldAutoExecuteOnCreate(t.type)?"create":null;case"config-change":return this.shouldAutoExecuteOnConfigChange(t.type)?"config":null;case"upstream-execution":return this.shouldAutoExecuteOnDataReceived(t.type)?"data":null;default:return null}}getExecutionPlan(t,n,o,r){const i=[];if(r==="create"||r==="config-change"){const s=n.find(a=>a.id===t);s&&this.determineTrigger(s,o,r)&&i.push(t)}if(r==="upstream-execution"){const s=this.getAffectedNodes(t,n,o);i.push(...s)}return i}addAutoExecuteRule(t,n){switch(n){case"create":this.autoExecuteOnCreate.includes(t)||this.autoExecuteOnCreate.push(t);break;case"config":this.autoExecuteOnConfigChange.includes(t)||this.autoExecuteOnConfigChange.push(t);break;case"data":this.autoExecuteOnDataReceived.includes(t)||this.autoExecuteOnDataReceived.push(t);break}}removeAutoExecuteRule(t,n){switch(n){case"create":this.autoExecuteOnCreate=this.autoExecuteOnCreate.filter(o=>o!==t);break;case"config":this.autoExecuteOnConfigChange=this.autoExecuteOnConfigChange.filter(o=>o!==t);break;case"data":this.autoExecuteOnDataReceived=this.autoExecuteOnDataReceived.filter(o=>o!==t);break}}getRules(){return{onCreate:[...this.autoExecuteOnCreate],onConfigChange:[...this.autoExecuteOnConfigChange],onDataReceived:[...this.autoExecuteOnDataReceived]}}}function lc(e){if(e===null||typeof e!="object")return e;if(e instanceof Date)return new Date(e.getTime());if(Array.isArray(e))return e.map(n=>lc(n));const t={};for(const n in e)e.hasOwnProperty(n)&&(t[n]=lc(e[n]));return t}function vG(e,t){Array.isArray(e)&&e.length>0&&(e=e[0]);const n=t.split(".");let o=e;for(const r of n)if(o&&typeof o=="object"&&r in o)o=o[r];else return;return o}function he(e,t,n){function o(a,l){var u;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(u=a._zod).traits??(u.traits=new Set),a._zod.traits.add(e),t(a,l);for(const c in s.prototype)c in a||Object.defineProperty(a,c,{value:s.prototype[c].bind(a)});a._zod.constr=s,a._zod.def=l}const r=n?.Parent??Object;class i extends r{}Object.defineProperty(i,"name",{value:e});function s(a){var l;const u=n?.Parent?new i:this;o(u,a),(l=u._zod).deferred??(l.deferred=[]);for(const c of u._zod.deferred)c();return u}return Object.defineProperty(s,"init",{value:o}),Object.defineProperty(s,Symbol.hasInstance,{value:a=>n?.Parent&&a instanceof n.Parent?!0:a?._zod?.traits?.has(e)}),Object.defineProperty(s,"name",{value:e}),s}class _i extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class H$ extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const _G={};function Ko(e){return _G}function Ph(e,t){return typeof t=="bigint"?t.toString():t}function up(e){return e==null}function cp(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function bG(e,t){const n=(e.toString().split(".")[1]||"").length,o=t.toString();let r=(o.split(".")[1]||"").length;if(r===0&&/\d?e-\d?/.test(o)){const l=o.match(/\d?e-(\d?)/);l?.[1]&&(r=Number.parseInt(l[1]))}const i=n>r?n:r,s=Number.parseInt(e.toFixed(i).replace(".","")),a=Number.parseInt(t.toFixed(i).replace(".",""));return s%a/10**i}const y0=Symbol("evaluating");function et(e,t,n){let o;Object.defineProperty(e,t,{get(){if(o!==y0)return o===void 0&&(o=y0,o=n()),o},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function wG(...e){const t={};for(const n of e){const o=Object.getOwnPropertyDescriptors(n);Object.assign(t,o)}return Object.defineProperties({},t)}const B$="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function v0(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function uc(e){if(v0(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(v0(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function F$(e){return uc(e)?{...e}:Array.isArray(e)?[...e]:e}function dp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function xG(e,t,n){const o=new e._zod.constr(t??e._zod.def);return(!t||n?.parent)&&(o._zod.parent=e),o}function De(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}const $G={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function ai(e,t=0){if(e.aborted===!0)return!0;for(let n=t;n<e.issues.length;n++)if(e.issues[n]?.continue!==!0)return!0;return!1}function _s(e,t){return t.map(n=>{var o;return(o=n).path??(o.path=[]),n.path.unshift(e),n})}function $l(e){return typeof e=="string"?e:e?.message}function Jo(e,t,n){const o={...e,path:e.path??[]};if(!e.message){const r=$l(e.inst?._zod.def?.error?.(e))??$l(t?.error?.(e))??$l(n.customError?.(e))??$l(n.localeError?.(e))??"Invalid input";o.message=r}return delete o.inst,delete o.continue,t?.reportInput||delete o.input,o}function fp(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function ga(...e){const[t,n,o]=e;return typeof t=="string"?{message:t,code:"custom",input:n,inst:o}:{...t}}const L$=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,Ph,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},U$=he("$ZodError",L$),G$=he("$ZodError",L$,{Parent:Error});function EG(e,t=n=>n.message){const n={},o=[];for(const r of e.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(t(r))):o.push(t(r));return{formErrors:o,fieldErrors:n}}function SG(e,t=n=>n.message){const n={_errors:[]},o=r=>{for(const i of r.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(s=>o({issues:s}));else if(i.code==="invalid_key")o({issues:i.issues});else if(i.code==="invalid_element")o({issues:i.issues});else if(i.path.length===0)n._errors.push(t(i));else{let s=n,a=0;for(;a<i.path.length;){const l=i.path[a];a===i.path.length-1?(s[l]=s[l]||{_errors:[]},s[l]._errors.push(t(i))):s[l]=s[l]||{_errors:[]},s=s[l],a++}}};return o(e),n}const hp=e=>(t,n,o,r)=>{const i=o?Object.assign(o,{async:!1}):{async:!1},s=t._zod.run({value:n,issues:[]},i);if(s instanceof Promise)throw new _i;if(s.issues.length){const a=new(r?.Err??e)(s.issues.map(l=>Jo(l,i,Ko())));throw B$(a,r?.callee),a}return s.value},gp=e=>async(t,n,o,r)=>{const i=o?Object.assign(o,{async:!0}):{async:!0};let s=t._zod.run({value:n,issues:[]},i);if(s instanceof Promise&&(s=await s),s.issues.length){const a=new(r?.Err??e)(s.issues.map(l=>Jo(l,i,Ko())));throw B$(a,r?.callee),a}return s.value},gd=e=>(t,n,o)=>{const r=o?{...o,async:!1}:{async:!1},i=t._zod.run({value:n,issues:[]},r);if(i instanceof Promise)throw new _i;return i.issues.length?{success:!1,error:new(e??U$)(i.issues.map(s=>Jo(s,r,Ko())))}:{success:!0,data:i.value}},NG=gd(G$),pd=e=>async(t,n,o)=>{const r=o?Object.assign(o,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},r);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(s=>Jo(s,r,Ko())))}:{success:!0,data:i.value}},kG=pd(G$),CG=e=>(t,n,o)=>{const r=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return hp(e)(t,n,r)},IG=e=>(t,n,o)=>hp(e)(t,n,o),TG=e=>async(t,n,o)=>{const r=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return gp(e)(t,n,r)},AG=e=>async(t,n,o)=>gp(e)(t,n,o),MG=e=>(t,n,o)=>{const r=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return gd(e)(t,n,r)},DG=e=>(t,n,o)=>gd(e)(t,n,o),OG=e=>async(t,n,o)=>{const r=o?Object.assign(o,{direction:"backward"}):{direction:"backward"};return pd(e)(t,n,r)},PG=e=>async(t,n,o)=>pd(e)(t,n,o),RG=/^[cC][^\s-]{8,}$/,zG=/^[0-9a-z]+$/,VG=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,HG=/^[0-9a-vA-V]{20}$/,BG=/^[A-Za-z0-9]{27}$/,FG=/^[a-zA-Z0-9_-]{21}$/,LG=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,UG=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,_0=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,GG=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,ZG="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function YG(){return new RegExp(ZG,"u")}const XG=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,WG=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,jG=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,qG=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,KG=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Z$=/^[A-Za-z0-9_-]*$/,JG=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,QG=/^\+(?:[0-9]){6,14}[0-9]$/,Y$="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",eZ=new RegExp(`^${Y$}$`);function X$(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function tZ(e){return new RegExp(`^${X$(e)}$`)}function nZ(e){const t=X$({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const o=`${t}(?:${n.join("|")})`;return new RegExp(`^${Y$}T(?:${o})$`)}const oZ=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},rZ=/^-?\d+$/,iZ=/^-?\d+(?:\.\d+)?/,sZ=/^(?:true|false)$/i,aZ=/^null$/i,lZ=/^[^A-Z]*$/,uZ=/^[^a-z]*$/,Bt=he("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),W$={number:"number",bigint:"bigint",object:"date"},j$=he("$ZodCheckLessThan",(e,t)=>{Bt.init(e,t);const n=W$[typeof t.value];e._zod.onattach.push(o=>{const r=o._zod.bag,i=(t.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<i&&(t.inclusive?r.maximum=t.value:r.exclusiveMaximum=t.value)}),e._zod.check=o=>{(t.inclusive?o.value<=t.value:o.value<t.value)||o.issues.push({origin:n,code:"too_big",maximum:t.value,input:o.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),q$=he("$ZodCheckGreaterThan",(e,t)=>{Bt.init(e,t);const n=W$[typeof t.value];e._zod.onattach.push(o=>{const r=o._zod.bag,i=(t.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>i&&(t.inclusive?r.minimum=t.value:r.exclusiveMinimum=t.value)}),e._zod.check=o=>{(t.inclusive?o.value>=t.value:o.value>t.value)||o.issues.push({origin:n,code:"too_small",minimum:t.value,input:o.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),cZ=he("$ZodCheckMultipleOf",(e,t)=>{Bt.init(e,t),e._zod.onattach.push(n=>{var o;(o=n._zod.bag).multipleOf??(o.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%t.value===BigInt(0):bG(n.value,t.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),dZ=he("$ZodCheckNumberFormat",(e,t)=>{Bt.init(e,t),t.format=t.format||"float64";const n=t.format?.includes("int"),o=n?"int":"number",[r,i]=$G[t.format];e._zod.onattach.push(s=>{const a=s._zod.bag;a.format=t.format,a.minimum=r,a.maximum=i,n&&(a.pattern=rZ)}),e._zod.check=s=>{const a=s.value;if(n){if(!Number.isInteger(a)){s.issues.push({expected:o,format:t.format,code:"invalid_type",continue:!1,input:a,inst:e});return}if(!Number.isSafeInteger(a)){a>0?s.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,continue:!t.abort}):s.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,continue:!t.abort});return}}a<r&&s.issues.push({origin:"number",input:a,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!t.abort}),a>i&&s.issues.push({origin:"number",input:a,code:"too_big",maximum:i,inst:e})}}),fZ=he("$ZodCheckMaxLength",(e,t)=>{var n;Bt.init(e,t),(n=e._zod.def).when??(n.when=o=>{const r=o.value;return!up(r)&&r.length!==void 0}),e._zod.onattach.push(o=>{const r=o._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<r&&(o._zod.bag.maximum=t.maximum)}),e._zod.check=o=>{const r=o.value;if(r.length<=t.maximum)return;const s=fp(r);o.issues.push({origin:s,code:"too_big",maximum:t.maximum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),hZ=he("$ZodCheckMinLength",(e,t)=>{var n;Bt.init(e,t),(n=e._zod.def).when??(n.when=o=>{const r=o.value;return!up(r)&&r.length!==void 0}),e._zod.onattach.push(o=>{const r=o._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>r&&(o._zod.bag.minimum=t.minimum)}),e._zod.check=o=>{const r=o.value;if(r.length>=t.minimum)return;const s=fp(r);o.issues.push({origin:s,code:"too_small",minimum:t.minimum,inclusive:!0,input:r,inst:e,continue:!t.abort})}}),gZ=he("$ZodCheckLengthEquals",(e,t)=>{var n;Bt.init(e,t),(n=e._zod.def).when??(n.when=o=>{const r=o.value;return!up(r)&&r.length!==void 0}),e._zod.onattach.push(o=>{const r=o._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),e._zod.check=o=>{const r=o.value,i=r.length;if(i===t.length)return;const s=fp(r),a=i>t.length;o.issues.push({origin:s,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:o.value,inst:e,continue:!t.abort})}}),md=he("$ZodCheckStringFormat",(e,t)=>{var n,o;Bt.init(e,t),e._zod.onattach.push(r=>{const i=r._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:t.format,input:r.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(o=e._zod).check??(o.check=()=>{})}),pZ=he("$ZodCheckRegex",(e,t)=>{md.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,!t.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),mZ=he("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=lZ),md.init(e,t)}),yZ=he("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=uZ),md.init(e,t)}),vZ=he("$ZodCheckIncludes",(e,t)=>{Bt.init(e,t);const n=dp(t.includes),o=new RegExp(typeof t.position=="number"?`^.{${t.position}}${n}`:n);t.pattern=o,e._zod.onattach.push(r=>{const i=r._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(o)}),e._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:e,continue:!t.abort})}}),_Z=he("$ZodCheckStartsWith",(e,t)=>{Bt.init(e,t);const n=new RegExp(`^${dp(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(o=>{const r=o._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),e._zod.check=o=>{o.value.startsWith(t.prefix)||o.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:o.value,inst:e,continue:!t.abort})}}),bZ=he("$ZodCheckEndsWith",(e,t)=>{Bt.init(e,t);const n=new RegExp(`.*${dp(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(o=>{const r=o._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),e._zod.check=o=>{o.value.endsWith(t.suffix)||o.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:o.value,inst:e,continue:!t.abort})}}),wZ=he("$ZodCheckOverwrite",(e,t)=>{Bt.init(e,t),e._zod.check=n=>{n.value=t.tx(n.value)}}),xZ={major:4,minor:1,patch:12},gt=he("$ZodType",(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=xZ;const o=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&o.unshift(e);for(const r of o)for(const i of r._zod.onattach)i(e);if(o.length===0)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const r=(s,a,l)=>{let u=ai(s),c;for(const d of a){if(d._zod.def.when){if(!d._zod.def.when(s))continue}else if(u)continue;const f=s.issues.length,h=d._zod.check(s);if(h instanceof Promise&&l?.async===!1)throw new _i;if(c||h instanceof Promise)c=(c??Promise.resolve()).then(async()=>{await h,s.issues.length!==f&&(u||(u=ai(s,f)))});else{if(s.issues.length===f)continue;u||(u=ai(s,f))}}return c?c.then(()=>s):s},i=(s,a,l)=>{if(ai(s))return s.aborted=!0,s;const u=r(a,o,l);if(u instanceof Promise){if(l.async===!1)throw new _i;return u.then(c=>e._zod.parse(c,l))}return e._zod.parse(u,l)};e._zod.run=(s,a)=>{if(a.skipChecks)return e._zod.parse(s,a);if(a.direction==="backward"){const u=e._zod.parse({value:s.value,issues:[]},{...a,skipChecks:!0});return u instanceof Promise?u.then(c=>i(c,s,a)):i(u,s,a)}const l=e._zod.parse(s,a);if(l instanceof Promise){if(a.async===!1)throw new _i;return l.then(u=>r(u,o,a))}return r(l,o,a)}}e["~standard"]={validate:r=>{try{const i=NG(e,r);return i.success?{value:i.data}:{issues:i.error?.issues}}catch{return kG(e,r).then(s=>s.success?{value:s.data}:{issues:s.error?.issues})}},vendor:"zod",version:1}}),pp=he("$ZodString",(e,t)=>{gt.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??oZ(e._zod.bag),e._zod.parse=(n,o)=>{if(t.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),dt=he("$ZodStringFormat",(e,t)=>{md.init(e,t),pp.init(e,t)}),$Z=he("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=UG),dt.init(e,t)}),EZ=he("$ZodUUID",(e,t)=>{if(t.version){const o={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(o===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=_0(o))}else t.pattern??(t.pattern=_0());dt.init(e,t)}),SZ=he("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=GG),dt.init(e,t)}),NZ=he("$ZodURL",(e,t)=>{dt.init(e,t),e._zod.check=n=>{try{const o=n.value.trim(),r=new URL(o);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(r.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:JG.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),t.normalize?n.value=r.href:n.value=o;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),kZ=he("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=YG()),dt.init(e,t)}),CZ=he("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=FG),dt.init(e,t)}),IZ=he("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=RG),dt.init(e,t)}),TZ=he("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=zG),dt.init(e,t)}),AZ=he("$ZodULID",(e,t)=>{t.pattern??(t.pattern=VG),dt.init(e,t)}),MZ=he("$ZodXID",(e,t)=>{t.pattern??(t.pattern=HG),dt.init(e,t)}),DZ=he("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=BG),dt.init(e,t)}),OZ=he("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=nZ(t)),dt.init(e,t)}),PZ=he("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=eZ),dt.init(e,t)}),RZ=he("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=tZ(t)),dt.init(e,t)}),zZ=he("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=LG),dt.init(e,t)}),VZ=he("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=XG),dt.init(e,t),e._zod.onattach.push(n=>{const o=n._zod.bag;o.format="ipv4"})}),HZ=he("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=WG),dt.init(e,t),e._zod.onattach.push(n=>{const o=n._zod.bag;o.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),BZ=he("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=jG),dt.init(e,t)}),FZ=he("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=qG),dt.init(e,t),e._zod.check=n=>{const o=n.value.split("/");try{if(o.length!==2)throw new Error;const[r,i]=o;if(!i)throw new Error;const s=Number(i);if(`${s}`!==i)throw new Error;if(s<0||s>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function K$(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const LZ=he("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=KG),dt.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{K$(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}});function UZ(e){if(!Z$.test(e))return!1;const t=e.replace(/[-_]/g,o=>o==="-"?"+":"/"),n=t.padEnd(Math.ceil(t.length/4)*4,"=");return K$(n)}const GZ=he("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Z$),dt.init(e,t),e._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{UZ(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),ZZ=he("$ZodE164",(e,t)=>{t.pattern??(t.pattern=QG),dt.init(e,t)});function YZ(e,t=null){try{const n=e.split(".");if(n.length!==3)return!1;const[o]=n;if(!o)return!1;const r=JSON.parse(atob(o));return!("typ"in r&&r?.typ!=="JWT"||!r.alg||t&&(!("alg"in r)||r.alg!==t))}catch{return!1}}const XZ=he("$ZodJWT",(e,t)=>{dt.init(e,t),e._zod.check=n=>{YZ(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),J$=he("$ZodNumber",(e,t)=>{gt.init(e,t),e._zod.pattern=e._zod.bag.pattern??iZ,e._zod.parse=(n,o)=>{if(t.coerce)try{n.value=Number(n.value)}catch{}const r=n.value;if(typeof r=="number"&&!Number.isNaN(r)&&Number.isFinite(r))return n;const i=typeof r=="number"?Number.isNaN(r)?"NaN":Number.isFinite(r)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:r,inst:e,...i?{received:i}:{}}),n}}),WZ=he("$ZodNumber",(e,t)=>{dZ.init(e,t),J$.init(e,t)}),jZ=he("$ZodBoolean",(e,t)=>{gt.init(e,t),e._zod.pattern=sZ,e._zod.parse=(n,o)=>{if(t.coerce)try{n.value=!!n.value}catch{}const r=n.value;return typeof r=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:r,inst:e}),n}}),qZ=he("$ZodNull",(e,t)=>{gt.init(e,t),e._zod.pattern=aZ,e._zod.values=new Set([null]),e._zod.parse=(n,o)=>{const r=n.value;return r===null||n.issues.push({expected:"null",code:"invalid_type",input:r,inst:e}),n}}),KZ=he("$ZodUnknown",(e,t)=>{gt.init(e,t),e._zod.parse=n=>n});function b0(e,t,n){e.issues.length&&t.issues.push(..._s(n,e.issues)),t.value[n]=e.value}const JZ=he("$ZodArray",(e,t)=>{gt.init(e,t),e._zod.parse=(n,o)=>{const r=n.value;if(!Array.isArray(r))return n.issues.push({expected:"array",code:"invalid_type",input:r,inst:e}),n;n.value=Array(r.length);const i=[];for(let s=0;s<r.length;s++){const a=r[s],l=t.element._zod.run({value:a,issues:[]},o);l instanceof Promise?i.push(l.then(u=>b0(u,n,s))):b0(l,n,s)}return i.length?Promise.all(i).then(()=>n):n}});function w0(e,t,n,o){for(const i of e)if(i.issues.length===0)return t.value=i.value,t;const r=e.filter(i=>!ai(i));return r.length===1?(t.value=r[0].value,r[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(i=>i.issues.map(s=>Jo(s,o,Ko())))}),t)}const QZ=he("$ZodUnion",(e,t)=>{gt.init(e,t),et(e._zod,"optin",()=>t.options.some(r=>r._zod.optin==="optional")?"optional":void 0),et(e._zod,"optout",()=>t.options.some(r=>r._zod.optout==="optional")?"optional":void 0),et(e._zod,"values",()=>{if(t.options.every(r=>r._zod.values))return new Set(t.options.flatMap(r=>Array.from(r._zod.values)))}),et(e._zod,"pattern",()=>{if(t.options.every(r=>r._zod.pattern)){const r=t.options.map(i=>i._zod.pattern);return new RegExp(`^(${r.map(i=>cp(i.source)).join("|")})$`)}});const n=t.options.length===1,o=t.options[0]._zod.run;e._zod.parse=(r,i)=>{if(n)return o(r,i);let s=!1;const a=[];for(const l of t.options){const u=l._zod.run({value:r.value,issues:[]},i);if(u instanceof Promise)a.push(u),s=!0;else{if(u.issues.length===0)return u;a.push(u)}}return s?Promise.all(a).then(l=>w0(l,r,e,i)):w0(a,r,e,i)}}),eY=he("$ZodIntersection",(e,t)=>{gt.init(e,t),e._zod.parse=(n,o)=>{const r=n.value,i=t.left._zod.run({value:r,issues:[]},o),s=t.right._zod.run({value:r,issues:[]},o);return i instanceof Promise||s instanceof Promise?Promise.all([i,s]).then(([l,u])=>x0(n,l,u)):x0(n,i,s)}});function Rh(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(uc(e)&&uc(t)){const n=Object.keys(t),o=Object.keys(e).filter(i=>n.indexOf(i)!==-1),r={...e,...t};for(const i of o){const s=Rh(e[i],t[i]);if(!s.valid)return{valid:!1,mergeErrorPath:[i,...s.mergeErrorPath]};r[i]=s.data}return{valid:!0,data:r}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let o=0;o<e.length;o++){const r=e[o],i=t[o],s=Rh(r,i);if(!s.valid)return{valid:!1,mergeErrorPath:[o,...s.mergeErrorPath]};n.push(s.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function x0(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),ai(e))return e;const o=Rh(t.value,n.value);if(!o.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(o.mergeErrorPath)}`);return e.value=o.data,e}const tY=he("$ZodRecord",(e,t)=>{gt.init(e,t),e._zod.parse=(n,o)=>{const r=n.value;if(!uc(r))return n.issues.push({expected:"record",code:"invalid_type",input:r,inst:e}),n;const i=[];if(t.keyType._zod.values){const s=t.keyType._zod.values;n.value={};for(const l of s)if(typeof l=="string"||typeof l=="number"||typeof l=="symbol"){const u=t.valueType._zod.run({value:r[l],issues:[]},o);u instanceof Promise?i.push(u.then(c=>{c.issues.length&&n.issues.push(..._s(l,c.issues)),n.value[l]=c.value})):(u.issues.length&&n.issues.push(..._s(l,u.issues)),n.value[l]=u.value)}let a;for(const l in r)s.has(l)||(a=a??[],a.push(l));a&&a.length>0&&n.issues.push({code:"unrecognized_keys",input:r,inst:e,keys:a})}else{n.value={};for(const s of Reflect.ownKeys(r)){if(s==="__proto__")continue;const a=t.keyType._zod.run({value:s,issues:[]},o);if(a instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(a.issues.length){n.issues.push({code:"invalid_key",origin:"record",issues:a.issues.map(u=>Jo(u,o,Ko())),input:s,path:[s],inst:e}),n.value[a.value]=a.value;continue}const l=t.valueType._zod.run({value:r[s],issues:[]},o);l instanceof Promise?i.push(l.then(u=>{u.issues.length&&n.issues.push(..._s(s,u.issues)),n.value[a.value]=u.value})):(l.issues.length&&n.issues.push(..._s(s,l.issues)),n.value[a.value]=l.value)}}return i.length?Promise.all(i).then(()=>n):n}}),nY=he("$ZodTransform",(e,t)=>{gt.init(e,t),e._zod.parse=(n,o)=>{if(o.direction==="backward")throw new H$(e.constructor.name);const r=t.transform(n.value,n);if(o.async)return(r instanceof Promise?r:Promise.resolve(r)).then(s=>(n.value=s,n));if(r instanceof Promise)throw new _i;return n.value=r,n}});function $0(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const oY=he("$ZodOptional",(e,t)=>{gt.init(e,t),e._zod.optin="optional",e._zod.optout="optional",et(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),et(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${cp(n.source)})?$`):void 0}),e._zod.parse=(n,o)=>{if(t.innerType._zod.optin==="optional"){const r=t.innerType._zod.run(n,o);return r instanceof Promise?r.then(i=>$0(i,n.value)):$0(r,n.value)}return n.value===void 0?n:t.innerType._zod.run(n,o)}}),rY=he("$ZodNullable",(e,t)=>{gt.init(e,t),et(e._zod,"optin",()=>t.innerType._zod.optin),et(e._zod,"optout",()=>t.innerType._zod.optout),et(e._zod,"pattern",()=>{const n=t.innerType._zod.pattern;return n?new RegExp(`^(${cp(n.source)}|null)$`):void 0}),et(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(n,o)=>n.value===null?n:t.innerType._zod.run(n,o)}),iY=he("$ZodDefault",(e,t)=>{gt.init(e,t),e._zod.optin="optional",et(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,o)=>{if(o.direction==="backward")return t.innerType._zod.run(n,o);if(n.value===void 0)return n.value=t.defaultValue,n;const r=t.innerType._zod.run(n,o);return r instanceof Promise?r.then(i=>E0(i,t)):E0(r,t)}});function E0(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const sY=he("$ZodPrefault",(e,t)=>{gt.init(e,t),e._zod.optin="optional",et(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,o)=>(o.direction==="backward"||n.value===void 0&&(n.value=t.defaultValue),t.innerType._zod.run(n,o))}),aY=he("$ZodNonOptional",(e,t)=>{gt.init(e,t),et(e._zod,"values",()=>{const n=t.innerType._zod.values;return n?new Set([...n].filter(o=>o!==void 0)):void 0}),e._zod.parse=(n,o)=>{const r=t.innerType._zod.run(n,o);return r instanceof Promise?r.then(i=>S0(i,e)):S0(r,e)}});function S0(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const lY=he("$ZodCatch",(e,t)=>{gt.init(e,t),et(e._zod,"optin",()=>t.innerType._zod.optin),et(e._zod,"optout",()=>t.innerType._zod.optout),et(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(n,o)=>{if(o.direction==="backward")return t.innerType._zod.run(n,o);const r=t.innerType._zod.run(n,o);return r instanceof Promise?r.then(i=>(n.value=i.value,i.issues.length&&(n.value=t.catchValue({...n,error:{issues:i.issues.map(s=>Jo(s,o,Ko()))},input:n.value}),n.issues=[]),n)):(n.value=r.value,r.issues.length&&(n.value=t.catchValue({...n,error:{issues:r.issues.map(i=>Jo(i,o,Ko()))},input:n.value}),n.issues=[]),n)}}),uY=he("$ZodPipe",(e,t)=>{gt.init(e,t),et(e._zod,"values",()=>t.in._zod.values),et(e._zod,"optin",()=>t.in._zod.optin),et(e._zod,"optout",()=>t.out._zod.optout),et(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(n,o)=>{if(o.direction==="backward"){const i=t.out._zod.run(n,o);return i instanceof Promise?i.then(s=>El(s,t.in,o)):El(i,t.in,o)}const r=t.in._zod.run(n,o);return r instanceof Promise?r.then(i=>El(i,t.out,o)):El(r,t.out,o)}});function El(e,t,n){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},n)}const cY=he("$ZodReadonly",(e,t)=>{gt.init(e,t),et(e._zod,"propValues",()=>t.innerType._zod.propValues),et(e._zod,"values",()=>t.innerType._zod.values),et(e._zod,"optin",()=>t.innerType._zod.optin),et(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(n,o)=>{if(o.direction==="backward")return t.innerType._zod.run(n,o);const r=t.innerType._zod.run(n,o);return r instanceof Promise?r.then(N0):N0(r)}});function N0(e){return e.value=Object.freeze(e.value),e}const dY=he("$ZodLazy",(e,t)=>{gt.init(e,t),et(e._zod,"innerType",()=>t.getter()),et(e._zod,"pattern",()=>e._zod.innerType._zod.pattern),et(e._zod,"propValues",()=>e._zod.innerType._zod.propValues),et(e._zod,"optin",()=>e._zod.innerType._zod.optin??void 0),et(e._zod,"optout",()=>e._zod.innerType._zod.optout??void 0),e._zod.parse=(n,o)=>e._zod.innerType._zod.run(n,o)}),fY=he("$ZodCustom",(e,t)=>{Bt.init(e,t),gt.init(e,t),e._zod.parse=(n,o)=>n,e._zod.check=n=>{const o=n.value,r=t.fn(o);if(r instanceof Promise)return r.then(i=>k0(i,n,o,e));k0(r,n,o,e)}});function k0(e,t,n,o){if(!e){const r={code:"custom",input:n,inst:o,path:[...o._zod.def.path??[]],continue:!o._zod.def.abort};o._zod.def.params&&(r.params=o._zod.def.params),t.issues.push(ga(r))}}class hY{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...n){const o=n[0];if(this._map.set(t,o),o&&typeof o=="object"&&"id"in o){if(this._idmap.has(o.id))throw new Error(`ID ${o.id} already exists in the registry`);this._idmap.set(o.id,t)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const n=this._map.get(t);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(t),this}get(t){const n=t._zod.parent;if(n){const o={...this.get(n)??{}};delete o.id;const r={...o,...this._map.get(t)};return Object.keys(r).length?r:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function gY(){return new hY}const Sl=gY();function pY(e,t){return new e({type:"string",...De(t)})}function mY(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...De(t)})}function C0(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...De(t)})}function yY(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...De(t)})}function vY(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...De(t)})}function _Y(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...De(t)})}function bY(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...De(t)})}function wY(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...De(t)})}function xY(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...De(t)})}function $Y(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...De(t)})}function EY(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...De(t)})}function SY(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...De(t)})}function NY(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...De(t)})}function kY(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...De(t)})}function CY(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...De(t)})}function IY(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...De(t)})}function TY(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...De(t)})}function AY(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...De(t)})}function MY(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...De(t)})}function DY(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...De(t)})}function OY(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...De(t)})}function PY(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...De(t)})}function RY(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...De(t)})}function zY(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...De(t)})}function VY(e,t){return new e({type:"string",format:"date",check:"string_format",...De(t)})}function HY(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...De(t)})}function BY(e,t){return new e({type:"string",format:"duration",check:"string_format",...De(t)})}function FY(e,t){return new e({type:"number",checks:[],...De(t)})}function LY(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...De(t)})}function UY(e,t){return new e({type:"boolean",...De(t)})}function GY(e,t){return new e({type:"null",...De(t)})}function ZY(e){return new e({type:"unknown"})}function I0(e,t){return new j$({check:"less_than",...De(t),value:e,inclusive:!1})}function yf(e,t){return new j$({check:"less_than",...De(t),value:e,inclusive:!0})}function T0(e,t){return new q$({check:"greater_than",...De(t),value:e,inclusive:!1})}function vf(e,t){return new q$({check:"greater_than",...De(t),value:e,inclusive:!0})}function A0(e,t){return new cZ({check:"multiple_of",...De(t),value:e})}function Q$(e,t){return new fZ({check:"max_length",...De(t),maximum:e})}function cc(e,t){return new hZ({check:"min_length",...De(t),minimum:e})}function eE(e,t){return new gZ({check:"length_equals",...De(t),length:e})}function YY(e,t){return new pZ({check:"string_format",format:"regex",...De(t),pattern:e})}function XY(e){return new mZ({check:"string_format",format:"lowercase",...De(e)})}function WY(e){return new yZ({check:"string_format",format:"uppercase",...De(e)})}function jY(e,t){return new vZ({check:"string_format",format:"includes",...De(t),includes:e})}function qY(e,t){return new _Z({check:"string_format",format:"starts_with",...De(t),prefix:e})}function KY(e,t){return new bZ({check:"string_format",format:"ends_with",...De(t),suffix:e})}function Ra(e){return new wZ({check:"overwrite",tx:e})}function JY(e){return Ra(t=>t.normalize(e))}function QY(){return Ra(e=>e.trim())}function eX(){return Ra(e=>e.toLowerCase())}function tX(){return Ra(e=>e.toUpperCase())}function nX(e,t,n){return new e({type:"array",element:t,...De(n)})}function oX(e,t,n){return new e({type:"custom",check:"custom",fn:t,...De(n)})}function rX(e){const t=iX(n=>(n.addIssue=o=>{if(typeof o=="string")n.issues.push(ga(o,n.value,t._zod.def));else{const r=o;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=n.value),r.inst??(r.inst=t),r.continue??(r.continue=!t._zod.def.abort),n.issues.push(ga(r))}},e(n.value,n)));return t}function iX(e,t){const n=new Bt({check:"custom",...De(t)});return n._zod.check=e,n}const sX=he("ZodISODateTime",(e,t)=>{OZ.init(e,t),ft.init(e,t)});function aX(e){return zY(sX,e)}const lX=he("ZodISODate",(e,t)=>{PZ.init(e,t),ft.init(e,t)});function uX(e){return VY(lX,e)}const cX=he("ZodISOTime",(e,t)=>{RZ.init(e,t),ft.init(e,t)});function dX(e){return HY(cX,e)}const fX=he("ZodISODuration",(e,t)=>{zZ.init(e,t),ft.init(e,t)});function hX(e){return BY(fX,e)}const tE=(e,t)=>{U$.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:n=>SG(e,n)},flatten:{value:n=>EG(e,n)},addIssue:{value:n=>{e.issues.push(n),e.message=JSON.stringify(e.issues,Ph,2)}},addIssues:{value:n=>{e.issues.push(...n),e.message=JSON.stringify(e.issues,Ph,2)}},isEmpty:{get(){return e.issues.length===0}}})},gX=he("ZodError",tE),qt=he("ZodError",tE,{Parent:Error}),pX=hp(qt),mX=gp(qt),yX=gd(qt),vX=pd(qt),_X=CG(qt),bX=IG(qt),wX=TG(qt),xX=AG(qt),$X=MG(qt),EX=DG(qt),SX=OG(qt),NX=PG(qt),yt=he("ZodType",(e,t)=>(gt.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone(wG(t,{checks:[...t.checks??[],...n.map(o=>typeof o=="function"?{_zod:{check:o,def:{check:"custom"},onattach:[]}}:o)]})),e.clone=(n,o)=>xG(e,n,o),e.brand=()=>e,e.register=((n,o)=>(n.add(e,o),e)),e.parse=(n,o)=>pX(e,n,o,{callee:e.parse}),e.safeParse=(n,o)=>yX(e,n,o),e.parseAsync=async(n,o)=>mX(e,n,o,{callee:e.parseAsync}),e.safeParseAsync=async(n,o)=>vX(e,n,o),e.spa=e.safeParseAsync,e.encode=(n,o)=>_X(e,n,o),e.decode=(n,o)=>bX(e,n,o),e.encodeAsync=async(n,o)=>wX(e,n,o),e.decodeAsync=async(n,o)=>xX(e,n,o),e.safeEncode=(n,o)=>$X(e,n,o),e.safeDecode=(n,o)=>EX(e,n,o),e.safeEncodeAsync=async(n,o)=>SX(e,n,o),e.safeDecodeAsync=async(n,o)=>NX(e,n,o),e.refine=(n,o)=>e.check(yW(n,o)),e.superRefine=n=>e.check(vW(n)),e.overwrite=n=>e.check(Ra(n)),e.optional=()=>H0(e),e.nullable=()=>B0(e),e.nullish=()=>H0(B0(e)),e.nonoptional=n=>uW(e,n),e.array=()=>zh(e),e.or=n=>Vh([e,n]),e.and=n=>JX(e,n),e.transform=n=>F0(e,tW(n)),e.default=n=>iW(e,n),e.prefault=n=>aW(e,n),e.catch=n=>dW(e,n),e.pipe=n=>F0(e,n),e.readonly=()=>gW(e),e.describe=n=>{const o=e.clone();return Sl.add(o,{description:n}),o},Object.defineProperty(e,"description",{get(){return Sl.get(e)?.description},configurable:!0}),e.meta=(...n)=>{if(n.length===0)return Sl.get(e);const o=e.clone();return Sl.add(o,n[0]),o},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),nE=he("_ZodString",(e,t)=>{pp.init(e,t),yt.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...o)=>e.check(YY(...o)),e.includes=(...o)=>e.check(jY(...o)),e.startsWith=(...o)=>e.check(qY(...o)),e.endsWith=(...o)=>e.check(KY(...o)),e.min=(...o)=>e.check(cc(...o)),e.max=(...o)=>e.check(Q$(...o)),e.length=(...o)=>e.check(eE(...o)),e.nonempty=(...o)=>e.check(cc(1,...o)),e.lowercase=o=>e.check(XY(o)),e.uppercase=o=>e.check(WY(o)),e.trim=()=>e.check(QY()),e.normalize=(...o)=>e.check(JY(...o)),e.toLowerCase=()=>e.check(eX()),e.toUpperCase=()=>e.check(tX())}),kX=he("ZodString",(e,t)=>{pp.init(e,t),nE.init(e,t),e.email=n=>e.check(mY(CX,n)),e.url=n=>e.check(wY(IX,n)),e.jwt=n=>e.check(RY(GX,n)),e.emoji=n=>e.check(xY(TX,n)),e.guid=n=>e.check(C0(D0,n)),e.uuid=n=>e.check(yY(Nl,n)),e.uuidv4=n=>e.check(vY(Nl,n)),e.uuidv6=n=>e.check(_Y(Nl,n)),e.uuidv7=n=>e.check(bY(Nl,n)),e.nanoid=n=>e.check($Y(AX,n)),e.guid=n=>e.check(C0(D0,n)),e.cuid=n=>e.check(EY(MX,n)),e.cuid2=n=>e.check(SY(DX,n)),e.ulid=n=>e.check(NY(OX,n)),e.base64=n=>e.check(DY(FX,n)),e.base64url=n=>e.check(OY(LX,n)),e.xid=n=>e.check(kY(PX,n)),e.ksuid=n=>e.check(CY(RX,n)),e.ipv4=n=>e.check(IY(zX,n)),e.ipv6=n=>e.check(TY(VX,n)),e.cidrv4=n=>e.check(AY(HX,n)),e.cidrv6=n=>e.check(MY(BX,n)),e.e164=n=>e.check(PY(UX,n)),e.datetime=n=>e.check(aX(n)),e.date=n=>e.check(uX(n)),e.time=n=>e.check(dX(n)),e.duration=n=>e.check(hX(n))});function M0(e){return pY(kX,e)}const ft=he("ZodStringFormat",(e,t)=>{dt.init(e,t),nE.init(e,t)}),CX=he("ZodEmail",(e,t)=>{SZ.init(e,t),ft.init(e,t)}),D0=he("ZodGUID",(e,t)=>{$Z.init(e,t),ft.init(e,t)}),Nl=he("ZodUUID",(e,t)=>{EZ.init(e,t),ft.init(e,t)}),IX=he("ZodURL",(e,t)=>{NZ.init(e,t),ft.init(e,t)}),TX=he("ZodEmoji",(e,t)=>{kZ.init(e,t),ft.init(e,t)}),AX=he("ZodNanoID",(e,t)=>{CZ.init(e,t),ft.init(e,t)}),MX=he("ZodCUID",(e,t)=>{IZ.init(e,t),ft.init(e,t)}),DX=he("ZodCUID2",(e,t)=>{TZ.init(e,t),ft.init(e,t)}),OX=he("ZodULID",(e,t)=>{AZ.init(e,t),ft.init(e,t)}),PX=he("ZodXID",(e,t)=>{MZ.init(e,t),ft.init(e,t)}),RX=he("ZodKSUID",(e,t)=>{DZ.init(e,t),ft.init(e,t)}),zX=he("ZodIPv4",(e,t)=>{VZ.init(e,t),ft.init(e,t)}),VX=he("ZodIPv6",(e,t)=>{HZ.init(e,t),ft.init(e,t)}),HX=he("ZodCIDRv4",(e,t)=>{BZ.init(e,t),ft.init(e,t)}),BX=he("ZodCIDRv6",(e,t)=>{FZ.init(e,t),ft.init(e,t)}),FX=he("ZodBase64",(e,t)=>{LZ.init(e,t),ft.init(e,t)}),LX=he("ZodBase64URL",(e,t)=>{GZ.init(e,t),ft.init(e,t)}),UX=he("ZodE164",(e,t)=>{ZZ.init(e,t),ft.init(e,t)}),GX=he("ZodJWT",(e,t)=>{XZ.init(e,t),ft.init(e,t)}),oE=he("ZodNumber",(e,t)=>{J$.init(e,t),yt.init(e,t),e.gt=(o,r)=>e.check(T0(o,r)),e.gte=(o,r)=>e.check(vf(o,r)),e.min=(o,r)=>e.check(vf(o,r)),e.lt=(o,r)=>e.check(I0(o,r)),e.lte=(o,r)=>e.check(yf(o,r)),e.max=(o,r)=>e.check(yf(o,r)),e.int=o=>e.check(P0(o)),e.safe=o=>e.check(P0(o)),e.positive=o=>e.check(T0(0,o)),e.nonnegative=o=>e.check(vf(0,o)),e.negative=o=>e.check(I0(0,o)),e.nonpositive=o=>e.check(yf(0,o)),e.multipleOf=(o,r)=>e.check(A0(o,r)),e.step=(o,r)=>e.check(A0(o,r)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function O0(e){return FY(oE,e)}const ZX=he("ZodNumberFormat",(e,t)=>{WZ.init(e,t),oE.init(e,t)});function P0(e){return LY(ZX,e)}const YX=he("ZodBoolean",(e,t)=>{jZ.init(e,t),yt.init(e,t)});function R0(e){return UY(YX,e)}const XX=he("ZodNull",(e,t)=>{qZ.init(e,t),yt.init(e,t)});function z0(e){return GY(XX,e)}const WX=he("ZodUnknown",(e,t)=>{KZ.init(e,t),yt.init(e,t)});function kl(){return ZY(WX)}const jX=he("ZodArray",(e,t)=>{JZ.init(e,t),yt.init(e,t),e.element=t.element,e.min=(n,o)=>e.check(cc(n,o)),e.nonempty=n=>e.check(cc(1,n)),e.max=(n,o)=>e.check(Q$(n,o)),e.length=(n,o)=>e.check(eE(n,o)),e.unwrap=()=>e.element});function zh(e,t){return nX(jX,e,t)}const qX=he("ZodUnion",(e,t)=>{QZ.init(e,t),yt.init(e,t),e.options=t.options});function Vh(e,t){return new qX({type:"union",options:e,...De(t)})}const KX=he("ZodIntersection",(e,t)=>{eY.init(e,t),yt.init(e,t)});function JX(e,t){return new KX({type:"intersection",left:e,right:t})}const QX=he("ZodRecord",(e,t)=>{tY.init(e,t),yt.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function V0(e,t,n){return new QX({type:"record",keyType:e,valueType:t,...De(n)})}const eW=he("ZodTransform",(e,t)=>{nY.init(e,t),yt.init(e,t),e._zod.parse=(n,o)=>{if(o.direction==="backward")throw new H$(e.constructor.name);n.addIssue=i=>{if(typeof i=="string")n.issues.push(ga(i,n.value,t));else{const s=i;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),n.issues.push(ga(s))}};const r=t.transform(n.value,n);return r instanceof Promise?r.then(i=>(n.value=i,n)):(n.value=r,n)}});function tW(e){return new eW({type:"transform",transform:e})}const nW=he("ZodOptional",(e,t)=>{oY.init(e,t),yt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function H0(e){return new nW({type:"optional",innerType:e})}const oW=he("ZodNullable",(e,t)=>{rY.init(e,t),yt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function B0(e){return new oW({type:"nullable",innerType:e})}const rW=he("ZodDefault",(e,t)=>{iY.init(e,t),yt.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function iW(e,t){return new rW({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():F$(t)}})}const sW=he("ZodPrefault",(e,t)=>{sY.init(e,t),yt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function aW(e,t){return new sW({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():F$(t)}})}const lW=he("ZodNonOptional",(e,t)=>{aY.init(e,t),yt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function uW(e,t){return new lW({type:"nonoptional",innerType:e,...De(t)})}const cW=he("ZodCatch",(e,t)=>{lY.init(e,t),yt.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function dW(e,t){return new cW({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const fW=he("ZodPipe",(e,t)=>{uY.init(e,t),yt.init(e,t),e.in=t.in,e.out=t.out});function F0(e,t){return new fW({type:"pipe",in:e,out:t})}const hW=he("ZodReadonly",(e,t)=>{cY.init(e,t),yt.init(e,t),e.unwrap=()=>e._zod.def.innerType});function gW(e){return new hW({type:"readonly",innerType:e})}const pW=he("ZodLazy",(e,t)=>{dY.init(e,t),yt.init(e,t),e.unwrap=()=>e._zod.def.getter()});function L0(e){return new pW({type:"lazy",getter:e})}const mW=he("ZodCustom",(e,t)=>{fY.init(e,t),yt.init(e,t)});function yW(e,t={}){return oX(mW,e,t)}function vW(e){return rX(e)}const An=10,rE=1024*1024;function _W(e){if(typeof e!="string"||e.length>rE)return!1;try{return JSON.parse(e),!0}catch{return!1}}function xr(e,t=0){if(t>An||e===null||typeof e!="object")return t;if(Array.isArray(e))return e.length===0?t+1:Math.max(...e.map(o=>xr(o,t+1)));const n=Object.values(e);return n.length===0?t+1:Math.max(...n.map(o=>xr(o,t+1)))}function coe(e,t=null,n={}){const o=n.maxDepth||An,r=n.maxSize||rE;if(typeof e!="string")throw new Error("Input must be a string");if(e.length>r)throw new Error(`JSON string exceeds maximum size of ${r} bytes`);if(!_W(e))throw new Error("Invalid JSON syntax");let i;try{i=JSON.parse(e)}catch(a){throw new Error(`JSON parse error: ${a.message}`)}if(xr(i)>o)throw new Error(`Object nesting exceeds maximum depth of ${o}`);if(t)try{return t.parse(i)}catch(a){if(a instanceof gX){const l=a.errors.map(u=>`${u.path.join(".")}: ${u.message}`).join(", ");throw new Error(`Schema validation failed: ${l}`)}throw a}return i}function doe(e){if(typeof e!="string")throw new Error("Input must be a string");return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const foe={safeObject:V0(kl()).refine(e=>xr(e)<=An,{message:`Object depth exceeds ${An} levels`}),safeArray:zh(kl()).refine(e=>xr(e)<=An,{message:`Array depth exceeds ${An} levels`}),primitive:Vh([M0(),O0(),R0(),z0()]),safeValue:Vh([M0(),O0(),R0(),z0(),L0(()=>V0(kl())),L0(()=>zh(kl()))]).refine(e=>xr(e)<=An,{message:`Value depth exceeds ${An} levels`})};function hoe(e){if(xr(e)>An)throw new Error(`Value nesting exceeds maximum depth of ${An}`);if(typeof e=="object"&&e!==null){const n=Object.keys(e),o=["__proto__","constructor","prototype"];for(const r of n)if(o.includes(r))throw new Error(`Dangerous key detected: ${r}`)}}const bW=Object.assign({"../methods/connectors/connector.js":()=>Ue(()=>import("./connector-CuD5U5Ch.js"),[]),"../methods/io/output.js":()=>Ue(()=>import("./output-C7J_a-Mi.js"),__vite__mapDeps([0,1]))}),wW={"lib/methods/comparison/comparison.js":()=>Ue(()=>import("./comparison-C-3EnatI.js"),__vite__mapDeps([2,1])),"lib/methods/constants/constant.js":()=>Ue(()=>import("./constant-CmZz90b6.js"),[]),"lib/methods/conversion/typeConversion.js":()=>Ue(()=>import("./typeConversion-Dht7g6FP.js"),__vite__mapDeps([3,1])),"lib/methods/io/input.js":()=>Ue(()=>import("./input-DVnGe8RW.js"),[]),"lib/methods/iteration/forEach.js":()=>Ue(()=>import("./forEach-9OFFvcAY.js"),__vite__mapDeps([4,1])),"lib/methods/iteration/whileLoop.js":()=>Ue(()=>import("./whileLoop-BWu1MzO-.js"),__vite__mapDeps([5,1])),"lib/methods/logic/conditionalBranch.js":()=>Ue(()=>import("./conditionalBranch-MNsbHuTG.js"),__vite__mapDeps([6,1])),"lib/methods/logic/logic.js":()=>Ue(()=>import("./logic-ePm9P3Wg.js"),__vite__mapDeps([7,1])),"lib/methods/organization/marker.js":()=>Ue(()=>import("./marker-BauP6ejb.js"),[]),"lib/methods/processors/arrayAggregate.js":()=>Ue(()=>import("./arrayAggregate-BkG-WOUC.js"),__vite__mapDeps([8,1,9])),"lib/methods/processors/arrayCreate.js":()=>Ue(()=>import("./arrayCreate-CWf8_DP0.js"),__vite__mapDeps([10,1])),"lib/methods/processors/arrayDistinct.js":()=>Ue(()=>import("./arrayDistinct-lMI3wFHa.js"),__vite__mapDeps([11,1,9])),"lib/methods/processors/arrayFilter.js":()=>Ue(()=>import("./arrayFilter-DDRhseo_.js"),__vite__mapDeps([12,1,9])),"lib/methods/processors/arrayGroupBy.js":()=>Ue(()=>import("./arrayGroupBy-DV61znyX.js"),__vite__mapDeps([13,1,9])),"lib/methods/processors/arrayMap.js":()=>Ue(()=>import("./arrayMap-Dwtf1Unq.js"),__vite__mapDeps([14,1,9])),"lib/methods/processors/arrayMerge.js":()=>Ue(()=>import("./arrayMerge-DTWeiSuC.js"),__vite__mapDeps([15,1])),"lib/methods/processors/arrayProcessor.js":()=>Ue(()=>import("./arrayProcessor-3bzHxIk3.js"),__vite__mapDeps([16,1])),"lib/methods/processors/arraySlice.js":()=>Ue(()=>import("./arraySlice-CQXToVqn.js"),__vite__mapDeps([17,1])),"lib/methods/processors/arraySort.js":()=>Ue(()=>import("./arraySort-Cq4YA2e-.js"),__vite__mapDeps([18,1,9])),"lib/methods/processors/debugViewer.js":()=>Ue(()=>import("./debugViewer-DCC5-KnR.js"),__vite__mapDeps([19,1])),"lib/methods/processors/fieldExtractor.js":()=>Ue(()=>import("./fieldExtractor-M1CRjr1v.js"),__vite__mapDeps([20,1,9])),"lib/methods/processors/math.js":()=>Ue(()=>import("./math-BiuBFSZX.js"),__vite__mapDeps([21,1])),"lib/methods/processors/objectCreate.js":()=>Ue(()=>import("./objectCreate-Cp_MSNis.js"),__vite__mapDeps([22,1])),"lib/methods/processors/objectFilter.js":()=>Ue(()=>import("./objectFilter-EJheFovF.js"),__vite__mapDeps([23,1])),"lib/methods/processors/objectKeysValues.js":()=>Ue(()=>import("./objectKeysValues-DCvxA3oL.js"),__vite__mapDeps([24,1])),"lib/methods/processors/objectMerge.js":()=>Ue(()=>import("./objectMerge-BDO1RdGM.js"),__vite__mapDeps([25,1])),"lib/methods/processors/objectPick.js":()=>Ue(()=>import("./objectPick-DDWram9B.js"),__vite__mapDeps([26,1,9])),"lib/methods/processors/objectRename.js":()=>Ue(()=>import("./objectRename-Txwo_3ZR.js"),__vite__mapDeps([27,1])),"lib/methods/processors/objectSetProperty.js":()=>Ue(()=>import("./objectSetProperty-D743SG3x.js"),__vite__mapDeps([28,1])),"lib/methods/processors/objectToArray.js":()=>Ue(()=>import("./objectToArray-3882GLb-.js"),__vite__mapDeps([29,1])),"lib/methods/processors/objectTransform.js":()=>Ue(()=>import("./objectTransform-C0bQpPW2.js"),__vite__mapDeps([30,1,9])),"lib/methods/storage/variable.js":()=>Ue(()=>import("./variable-CEsy9Cc-.js"),[]),"lib/methods/string/stringOps.js":()=>Ue(()=>import("./stringOps-9GbR4b83.js"),__vite__mapDeps([31,1]))},U0={...wW,...bW};class xW{constructor(){this.nodes=new Map,this.categories=new Map,this.methodCache=new Map}registerNode(t,n){this.nodes.set(t,n)}registerCategory(t,n){this.categories.set(t,n)}getNodeDefinition(t){const n=this.nodes.get(t);return n||null}getAllNodes(){return Array.from(this.nodes.values())}getNodesByCategory(t){return this.getAllNodes().filter(n=>n.category===t)}getAllCategories(){return Array.from(this.categories.values())}hasNode(t){return this.nodes.has(t)}async getNodeFunction(t,n="method"){const o=this.getNodeDefinition(t);if(!o)return null;const r=o[n];if(!r)return null;const i=`${t}:${n}`;if(this.methodCache.has(i))return this.methodCache.get(i);try{const[s,a]=r.split(":");let l=null,u=null;const c=s.replace("lib/methods/","../methods/");if(l=U0[c],u=c,l||(u=s,l=U0[u]),!l)throw new Error(`Módulo "${s}" não encontrado no registry`);const d=await l();if(!d[a])throw new Error(`Função "${a}" não encontrada no módulo "${s}"`);const f=d[a];return this.methodCache.set(i,f),f}catch{return null}}validateNodeConfig(t,n){const o=this.getNodeDefinition(t);if(!o)return{valid:!1,errors:[`Node type "${t}" não existe`]};const r=[],i=o.config||{};for(const[s,a]of Object.entries(i))if(a.required&&(n[s]===void 0||n[s]===null||n[s]==="")&&r.push(`Campo obrigatório "${s}" está vazio`),a.condition&&n[s]!==void 0){const[l,u]=Object.entries(a.condition)[0],c=n[l];if(Array.isArray(u)){if(!u.includes(c))continue}else if(c!==u)continue}return{valid:r.length===0,errors:r}}getNodeHandles(t){const n=this.getNodeDefinition(t);return n?n.handles||{inputs:{execution:[],data:[]},outputs:{execution:[],data:[]}}:null}clear(){this.nodes.clear(),this.categories.clear(),this.methodCache.clear()}getStats(){return{totalNodes:this.nodes.size,totalCategories:this.categories.size,cachedMethods:this.methodCache.size,nodesByCategory:Array.from(this.categories.keys()).reduce((t,n)=>(t[n]=this.getNodesByCategory(n).length,t),{})}}}const Pr=new xW,goe=(e,t)=>Pr.registerNode(e,t),poe=(e,t)=>Pr.registerCategory(e,t),za=e=>Pr.getNodeDefinition(e),$W=()=>Pr.getAllNodes(),EW=e=>Pr.getNodesByCategory(e),iE=()=>Pr.getAllCategories(),SW=(e,t)=>Pr.getNodeFunction(e,t);async function NW(e,t,n,o={}){const{type:r,id:i}=e,s=za(r);if(!s)throw new Error(`Node type "${r}" não encontrado no catálogo`);const a=s.execution?.async!==!1,l=await SW(r,"method");if(!l)throw new Error(`Método de execução não encontrado para node type "${r}"`);try{const u={...t};t.exposedFields&&n&&Object.keys(t.exposedFields).forEach(h=>{const m=`exposed-${h}`.replace("data-","");n[m]!==void 0&&(u[h]=n[m])});const c={nodeData:u,inputs:n,context:o,nodeId:i},d=s.execution?.timeout||3e4;return a?await kW(l(c),d):l(c)}catch(u){throw u}}function kW(e,t){return Promise.race([e,new Promise((n,o)=>setTimeout(()=>o(new Error(`Timeout após ${t}ms`)),t))])}function Hh(e,t){const n=za(e.type);if(!n)return{};const o={};if(e.type==="connector"||["constant","array-filter","array-aggregate","array-slice","array-merge","array-create","object-create"].includes(e.type))return o["data-out"]=t,o;if(e.type==="input")return(e.data?.parameters||[]).forEach((s,a)=>{const l=`param-output-${a}`,u=s.name,c=t[u];o[l]=c}),o;if(e.type==="field-extractor"){const i=e.data?.selectedFields||[],s=t?.__wrapped?t.__originalData:t;return o["data-out"]=t?.__wrapped?t.value:t,i.length>1&&(o["all-data"]=t),i.forEach(a=>{const l=`field-${a.replace(/\./g,"-")}`;let u;if(Array.isArray(s))u=s.map(c=>{const d=a.split(".");let f=c;for(const h of d)f=f?.[h];return f});else if(typeof s=="object"&&s!==null){const c=a.split(".");let d=s;for(const f of c)d=d?.[f];u=d}o[l]=u}),o}let r=n.handles?.outputs?.data||[];if(n.dynamicHandles&&e.data){const i=n.dynamicHandles.mode,s=e.data[i]||i;n.dynamicHandles[s]&&(r=n.dynamicHandles[s].outputs?.data||[])}if(r.length===1){const i=r[0].id;o[i]=t}else r.length>1&&typeof t=="object"&&t!==null&&r.forEach(i=>{const s=i.id.replace("data-","");t[s]!==void 0&&(o[i.id]=t[s])});return o}function CW(e,t,n,o,r){t?.type,e.sourceHandle,e.targetHandle}const St=Lb("flow",()=>{const e=new iG(NW,Hh),t=new mG,n=new yG,o=de([]),r=de([]),i=de({}),s=de({}),a=de(null),l=de(!1),u=de({}),c=de(new Set),d=de(new Set),f=de(new Set),h=de({}),m=de([]),v=de(-1),b=50,x=de(!1),N=de({token:null,flowId:null,flowDataId:null,baseUrl:"http://localhost:3001"}),S=de("offline"),A=de(null);let G=null;const W=1e3,Z=J(()=>r.value.filter(y=>y.edgeType==="flow"||y.sourceHandle?.startsWith("exec-"))),z=J(()=>r.value.filter(y=>y.edgeType==="data"||!y.sourceHandle?.startsWith("exec-"))),j=J(()=>({nodes:$W(),categories:iE()}));e.onStateChange=y=>{u.value=y.executionResults,c.value=new Set(y.executingNodes),d.value=new Set(y.executedNodes),f.value=new Set(y.errorNodes)},Se(i,y=>{for(const k in y)e.setNodeData(k,y[k])},{deep:!0}),Se([N,s],()=>{e.setConfig(N.value,s.value)},{deep:!0}),Se(r,()=>{r.value.forEach(y=>{if(!y.edgeType){const k=y.sourceHandle?.startsWith("exec-")||y.targetHandle?.startsWith("exec-");y.edgeType=k?"flow":"data"}})},{immediate:!0});const D=()=>{if(x.value)return;const y={nodes:JSON.parse(JSON.stringify(o.value)),edges:JSON.parse(JSON.stringify(r.value)),nodeData:JSON.parse(JSON.stringify(i.value))};v.value<m.value.length-1&&(m.value=m.value.slice(0,v.value+1)),m.value.push(y),v.value=m.value.length-1,m.value.length>b&&(m.value.shift(),v.value--)},I=()=>{if(v.value<=0)return!1;x.value=!0,v.value--;const y=m.value[v.value];return o.value=JSON.parse(JSON.stringify(y.nodes)),r.value=JSON.parse(JSON.stringify(y.edges)),i.value=JSON.parse(JSON.stringify(y.nodeData)),x.value=!1,!0},R=()=>{if(v.value>=m.value.length-1)return!1;x.value=!0,v.value++;const y=m.value[v.value];return o.value=JSON.parse(JSON.stringify(y.nodes)),r.value=JSON.parse(JSON.stringify(y.edges)),i.value=JSON.parse(JSON.stringify(y.nodeData)),x.value=!1,!0},w=y=>{o.value.push(y),i.value[y.id]={},D(),n.shouldAutoExecuteOnCreate(y.type)&&setTimeout(()=>fe(y.id),n.getDelay())},O=y=>{o.value=o.value.filter(k=>k.id!==y),delete i.value[y],r.value=r.value.filter(k=>k.source!==y&&k.target!==y),delete u.value[y],D()},C=(y,k)=>{const E=o.value.findIndex(M=>M.id===y);E!==-1&&(o.value[E].position=k)},F=y=>{l.value=y},Y=(y,k)=>{i.value[y]={...i.value[y],...k};const E=o.value.find(M=>M.id===y);E&&n.shouldAutoExecuteOnConfigChange(E.type)&&setTimeout(()=>fe(y),n.getDelay())},Q=y=>{const k=y.sourceHandle?.startsWith("exec-")||y.targetHandle?.startsWith("exec-");if(y.edgeType=k?"flow":"data",r.value.push(y),CW(y,o.value),D(),o.value.find(M=>M.id===y.target)&&y.edgeType==="data"){const M=n.getExecutionPlan(y.source,o.value,r.value,"upstream-execution");for(const V of M)setTimeout(()=>fe(V),n.getDelay())}},q=y=>{r.value=r.value.filter(k=>k.id!==y),D()},ne=y=>{const k={},E=z.value.filter(M=>M.target===y);for(const M of E){const V=u.value[M.source];if(V!==void 0){const U=typeof V=="object"&&V!==null&&M.sourceHandle in V?V[M.sourceHandle]:V,K=M.targetHandle?.replace("data-","")||"input";k[K]=U}}return k},ae=(y,k)=>{u.value[y]=k,e.executionResults.set(y,k)},fe=async y=>{const k=o.value.find(M=>M.id===y);if(!k)return;const E=ne(y);try{const M=await e.executeNode(k,E);if(u.value[y]=M,M&&typeof M=="object")for(const U in M)U.startsWith("exec-")||t.detectType(y,U,M[U]);const V=n.getExecutionPlan(y,o.value,r.value,"upstream-execution");for(const U of V)setTimeout(()=>fe(U),100);return M}catch(M){throw M}},se=async()=>{await e.executeFlow(o.value,r.value),u.value=e.getAllResults(),t.detectAllTypes(u.value),h.value=t.exportDetectedTypes()},pe=async(y=null,k={},E={})=>{const M=N.value.token,V=N.value.baseUrl||"http://localhost:3001",U=y||N.value.flowId;if(!M)throw new Error("Token de autenticação não configurado. Configure apiConfig.token");if(!U)throw new Error("Flow ID não fornecido. Forneça flowId como parâmetro ou configure apiConfig.flowId");try{console.log(`🚀 Executando flow ${U} no backend...`);const K=await fetch(`${V}/api/flows/${U}/execute`,{method:"POST",headers:{Authorization:`Bearer ${M}`,"Content-Type":"application/json"},body:JSON.stringify({inputData:k,options:{saveResult:E.saveResult||!1,includeNodeResults:E.includeNodeResults||!1,timeout:E.timeout||6e4}})});if(!K.ok){const we=await K.json().catch(()=>({message:`Erro HTTP ${K.status}`}));throw new Error(we.message||`Erro ${K.status}: ${K.statusText}`)}const te=await K.json();if(te.success)return console.log("✅ Flow executado com sucesso no backend"),console.log("📊 Tempo de execução:",te.data.executionTime,"ms"),console.log("📦 Nodes executados:",te.data.nodesExecuted),te.data;throw new Error(te.message||"Erro desconhecido na execução")}catch(K){throw console.error("❌ Erro ao executar flow no backend:",K),K}},le=async(y,k=null)=>{await e.executeConnectedNodes(y,o.value,r.value,k),u.value=e.getAllResults()},ee=async(y,k={})=>{try{const E=await e.executeNode(y,k);if(u.value[y.id]=E,E&&typeof E=="object")for(const M in E)M.startsWith("exec-")||t.detectType(y.id,M,E[M]);return E}catch(E){throw E}},re=async y=>{const k=o.value.find(V=>V.id===y.target);if(!k)return;const E=ne(y.target);if(["add","subtract","multiply","divide","variable","field-extractor","connector","input","array-filter","array-aggregate","array-slice","array-sort","array-map","array-groupby","array-distinct","array-merge","array-create","object-merge","object-pick","object-keys-values","object-rename","object-set-property","object-to-array","object-transform","object-create","constant","compare","type-conversion","logic","string-ops","debug-viewer"].includes(k.type))try{const V=await ee(k,E),U={...k,data:i.value[k.id]},K=Hh(U,V);ae(y.target,K);const te=z.value.filter(we=>we.source===y.target);for(const we of te)await re(we)}catch{}},oe=()=>{e.clearExecutionResults(),t.clearDetectedTypes(),u.value={},c.value=new Set,d.value=new Set,f.value=new Set},ce=()=>{const y=t.exportDetectedTypes(),k={nodes:o.value,edges:r.value,nodeData:i.value,detectedTypes:y,timestamp:new Date().toISOString(),version:"2.0"},E=JSON.stringify(k,null,2),M=new Blob([E],{type:"application/json"}),V=URL.createObjectURL(M),U=document.createElement("a");return U.href=V,U.download=`flow-forge-${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.json`,document.body.appendChild(U),U.click(),document.body.removeChild(U),URL.revokeObjectURL(V),k},me=y=>{try{if(!y.nodes||!y.edges)throw new Error("Invalid flow data format");oe(),o.value=[],r.value=[],i.value={},i.value={...y.nodeData||{}},y.detectedTypes&&(t.loadDetectedTypes(y.detectedTypes),h.value=y.detectedTypes),setTimeout(()=>{o.value=y.nodes.map(k=>({...k})),r.value=y.edges.map(k=>({...k}))},100)}catch(k){throw k}},P=async()=>{if(N.value.flowDataId)try{S.value="syncing";const y={nodes:o.value,edges:r.value,nodeData:i.value,detectedTypes:t.exportDetectedTypes()};if(!(await fetch(`${N.value.baseUrl}/api/flow-data/${N.value.flowDataId}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${N.value.token}`},body:JSON.stringify({data:y})})).ok)throw new Error("Sync failed");S.value="synced",A.value=null}catch(y){S.value="error",A.value=y.message}},B=async y=>{try{const k=await fetch(`${N.value.baseUrl}/api/flow-data/${y}`,{headers:{Authorization:`Bearer ${N.value.token}`}});if(!k.ok)throw new Error("Load failed");const E=await k.json();me(E.flowData),N.value.flowDataId=y,S.value="synced"}catch(k){throw k}},g=async()=>{const y=await sG();a.value=y,e.setConfig(N.value,s.value)},p=()=>{const k=new URLSearchParams(window.location.search).get("flowId"),E=localStorage.getItem("accessToken"),M=k;E&&M?(N.value.token=E,N.value.flowId=M,$()):S.value="offline"},$=async()=>{if(!N.value.token||!N.value.flowId)return S.value="offline",!1;S.value="syncing";try{const y=await fetch(`${N.value.baseUrl}/api/flow-data/by-flow/${N.value.flowId}`,{method:"GET",headers:{Authorization:`Bearer ${N.value.token}`,"Content-Type":"application/json"}});if(!y.ok){if(y.status===401||y.status===403)return S.value="error",!1;throw new Error(`HTTP error! status: ${y.status}`)}const k=await y.json();if(k.success&&k.data){if(N.value.flowDataId=k.data._id,k.data.data&&k.data.data.nodes&&k.data.data.edges){const E={nodes:k.data.data.nodes,edges:k.data.data.edges,nodeData:k.data.data.nodeData||{},detectedTypes:k.data.data.detectedTypes||{},variables:k.data.data.variables||{}};me(E),k.data.data.variables&&Object.assign(s.value,k.data.data.variables)}else oe();return S.value="synced",_(),!0}else throw new Error("Invalid response format")}catch(y){return S.value="error",A.value=y.message,!1}},_=()=>{Se([o,r,i],()=>{G&&clearTimeout(G),G=setTimeout(()=>{N.value.flowDataId&&P()},W)},{deep:!0})};return{flowEngine:e,typeEngine:t,autoExecEngine:n,nodes:o,edges:r,nodeData:i,executionResults:u,executingNodes:c,executedNodes:d,errorNodes:f,savedDetectedTypes:h,globalVariables:s,dataTypes:a,isDragging:l,apiConfig:N,syncStatus:S,lastSyncError:A,flowEdges:Z,dataEdges:z,nodeCatalog:j,addNode:w,removeNode:O,updateNodePosition:C,setDragging:F,updateNodeData:Y,addEdge:Q,removeEdge:q,executeNode:ee,executeNodeById:fe,executeFlow:se,executeFlowOnBackend:pe,executeConnectedNodes:le,propagateDataToTarget:re,clearExecutionResults:oe,getNodeDataInputs:ne,setExecutionResult:ae,saveFlow:ce,loadFlow:me,syncToAPI:P,loadFromAPI:B,undo:I,redo:R,saveSnapshot:D,initialize:g,initializeFromUrl:p,fetchFlowData:$}});function IW(){const e=de(!1),t=de({x:0,y:0}),n=de({x:0,y:0}),o=(s,a)=>{t.value={x:s,y:a},n.value={x:s,y:a},e.value=!0};return{showContextMenu:e,contextMenuPosition:t,lastRightClickPosition:n,openContextMenu:o,closeContextMenu:()=>{e.value=!1},handleContextMenu:s=>{s.preventDefault(),o(s.clientX,s.clientY)}}}const rn=de(!1),TW=()=>window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,AW=()=>{const e=localStorage.getItem("flow-forge-theme");e?rn.value=e==="dark":rn.value=TW(),sE()},sE=()=>{const e=document.documentElement;rn.value?e.classList.add("dark"):e.classList.remove("dark")};Se(rn,()=>{localStorage.setItem("flow-forge-theme",rn.value?"dark":"light"),sE()});window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{localStorage.getItem("flow-forge-theme")||(rn.value=e.matches)});const aE=()=>{const e=()=>{rn.value=!rn.value},t=o=>{rn.value=o==="dark"},n=J(()=>rn.value?"dark":"light");return{isDark:rn,theme:n,toggleTheme:e,setTheme:t,initTheme:AW}},lE=/^[a-z0-9]+(-[a-z0-9]+)*$/,yd=(e,t,n,o="")=>{const r=e.split(":");if(e.slice(0,1)==="@"){if(r.length<2||r.length>3)return null;o=r.shift().slice(1)}if(r.length>3||!r.length)return null;if(r.length>1){const a=r.pop(),l=r.pop(),u={provider:r.length>0?r[0]:o,prefix:l,name:a};return t&&!jl(u)?null:u}const i=r[0],s=i.split("-");if(s.length>1){const a={provider:o,prefix:s.shift(),name:s.join("-")};return t&&!jl(a)?null:a}if(n&&o===""){const a={provider:o,prefix:"",name:i};return t&&!jl(a,n)?null:a}return null},jl=(e,t)=>e?!!((t&&e.prefix===""||e.prefix)&&e.name):!1,uE=Object.freeze({left:0,top:0,width:16,height:16}),dc=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),vd=Object.freeze({...uE,...dc}),Bh=Object.freeze({...vd,body:"",hidden:!1});function MW(e,t){const n={};!e.hFlip!=!t.hFlip&&(n.hFlip=!0),!e.vFlip!=!t.vFlip&&(n.vFlip=!0);const o=((e.rotate||0)+(t.rotate||0))%4;return o&&(n.rotate=o),n}function G0(e,t){const n=MW(e,t);for(const o in Bh)o in dc?o in e&&!(o in n)&&(n[o]=dc[o]):o in t?n[o]=t[o]:o in e&&(n[o]=e[o]);return n}function DW(e,t){const n=e.icons,o=e.aliases||Object.create(null),r=Object.create(null);function i(s){if(n[s])return r[s]=[];if(!(s in r)){r[s]=null;const a=o[s]&&o[s].parent,l=a&&i(a);l&&(r[s]=[a].concat(l))}return r[s]}return Object.keys(n).concat(Object.keys(o)).forEach(i),r}function OW(e,t,n){const o=e.icons,r=e.aliases||Object.create(null);let i={};function s(a){i=G0(o[a]||r[a],i)}return s(t),n.forEach(s),G0(e,i)}function cE(e,t){const n=[];if(typeof e!="object"||typeof e.icons!="object")return n;e.not_found instanceof Array&&e.not_found.forEach(r=>{t(r,null),n.push(r)});const o=DW(e);for(const r in o){const i=o[r];i&&(t(r,OW(e,r,i)),n.push(r))}return n}const PW={provider:"",aliases:{},not_found:{},...uE};function _f(e,t){for(const n in t)if(n in e&&typeof e[n]!=typeof t[n])return!1;return!0}function dE(e){if(typeof e!="object"||e===null)return null;const t=e;if(typeof t.prefix!="string"||!e.icons||typeof e.icons!="object"||!_f(e,PW))return null;const n=t.icons;for(const r in n){const i=n[r];if(!r||typeof i.body!="string"||!_f(i,Bh))return null}const o=t.aliases||Object.create(null);for(const r in o){const i=o[r],s=i.parent;if(!r||typeof s!="string"||!n[s]&&!o[s]||!_f(i,Bh))return null}return t}const Z0=Object.create(null);function RW(e,t){return{provider:e,prefix:t,icons:Object.create(null),missing:new Set}}function Hi(e,t){const n=Z0[e]||(Z0[e]=Object.create(null));return n[t]||(n[t]=RW(e,t))}function fE(e,t){return dE(t)?cE(t,(n,o)=>{o?e.icons[n]=o:e.missing.add(n)}):[]}function zW(e,t,n){try{if(typeof n.body=="string")return e.icons[t]={...n},!0}catch{}return!1}let pa=!1;function hE(e){return typeof e=="boolean"&&(pa=e),pa}function VW(e){const t=typeof e=="string"?yd(e,!0,pa):e;if(t){const n=Hi(t.provider,t.prefix),o=t.name;return n.icons[o]||(n.missing.has(o)?null:void 0)}}function HW(e,t){const n=yd(e,!0,pa);if(!n)return!1;const o=Hi(n.provider,n.prefix);return t?zW(o,n.name,t):(o.missing.add(n.name),!0)}function BW(e,t){if(typeof e!="object")return!1;if(typeof t!="string"&&(t=e.provider||""),pa&&!t&&!e.prefix){let r=!1;return dE(e)&&(e.prefix="",cE(e,(i,s)=>{HW(i,s)&&(r=!0)})),r}const n=e.prefix;if(!jl({prefix:n,name:"a"}))return!1;const o=Hi(t,n);return!!fE(o,e)}const gE=Object.freeze({width:null,height:null}),pE=Object.freeze({...gE,...dc}),FW=/(-?[0-9.]*[0-9]+[0-9.]*)/g,LW=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Y0(e,t,n){if(t===1)return e;if(n=n||100,typeof e=="number")return Math.ceil(e*t*n)/n;if(typeof e!="string")return e;const o=e.split(FW);if(o===null||!o.length)return e;const r=[];let i=o.shift(),s=LW.test(i);for(;;){if(s){const a=parseFloat(i);isNaN(a)?r.push(i):r.push(Math.ceil(a*t*n)/n)}else r.push(i);if(i=o.shift(),i===void 0)return r.join("");s=!s}}function UW(e,t="defs"){let n="";const o=e.indexOf("<"+t);for(;o>=0;){const r=e.indexOf(">",o),i=e.indexOf("</"+t);if(r===-1||i===-1)break;const s=e.indexOf(">",i);if(s===-1)break;n+=e.slice(r+1,i).trim(),e=e.slice(0,o).trim()+e.slice(s+1)}return{defs:n,content:e}}function GW(e,t){return e?"<defs>"+e+"</defs>"+t:t}function ZW(e,t,n){const o=UW(e);return GW(o.defs,t+o.content+n)}const YW=e=>e==="unset"||e==="undefined"||e==="none";function XW(e,t){const n={...vd,...e},o={...pE,...t},r={left:n.left,top:n.top,width:n.width,height:n.height};let i=n.body;[n,o].forEach(v=>{const b=[],x=v.hFlip,N=v.vFlip;let S=v.rotate;x?N?S+=2:(b.push("translate("+(r.width+r.left).toString()+" "+(0-r.top).toString()+")"),b.push("scale(-1 1)"),r.top=r.left=0):N&&(b.push("translate("+(0-r.left).toString()+" "+(r.height+r.top).toString()+")"),b.push("scale(1 -1)"),r.top=r.left=0);let A;switch(S<0&&(S-=Math.floor(S/4)*4),S=S%4,S){case 1:A=r.height/2+r.top,b.unshift("rotate(90 "+A.toString()+" "+A.toString()+")");break;case 2:b.unshift("rotate(180 "+(r.width/2+r.left).toString()+" "+(r.height/2+r.top).toString()+")");break;case 3:A=r.width/2+r.left,b.unshift("rotate(-90 "+A.toString()+" "+A.toString()+")");break}S%2===1&&(r.left!==r.top&&(A=r.left,r.left=r.top,r.top=A),r.width!==r.height&&(A=r.width,r.width=r.height,r.height=A)),b.length&&(i=ZW(i,'<g transform="'+b.join(" ")+'">',"</g>"))});const s=o.width,a=o.height,l=r.width,u=r.height;let c,d;s===null?(d=a===null?"1em":a==="auto"?u:a,c=Y0(d,l/u)):(c=s==="auto"?l:s,d=a===null?Y0(c,u/l):a==="auto"?u:a);const f={},h=(v,b)=>{YW(b)||(f[v]=b.toString())};h("width",c),h("height",d);const m=[r.left,r.top,l,u];return f.viewBox=m.join(" "),{attributes:f,viewBox:m,body:i}}const WW=/\sid="(\S+)"/g,jW="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let qW=0;function KW(e,t=jW){const n=[];let o;for(;o=WW.exec(e);)n.push(o[1]);if(!n.length)return e;const r="suffix"+(Math.random()*16777216|Date.now()).toString(16);return n.forEach(i=>{const s=typeof t=="function"?t(i):t+(qW++).toString(),a=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+s+r+"$3")}),e=e.replace(new RegExp(r,"g"),""),e}const Fh=Object.create(null);function JW(e,t){Fh[e]=t}function Lh(e){return Fh[e]||Fh[""]}function mp(e){let t;if(typeof e.resources=="string")t=[e.resources];else if(t=e.resources,!(t instanceof Array)||!t.length)return null;return{resources:t,path:e.path||"/",maxURL:e.maxURL||500,rotate:e.rotate||750,timeout:e.timeout||5e3,random:e.random===!0,index:e.index||0,dataAfterTimeout:e.dataAfterTimeout!==!1}}const yp=Object.create(null),es=["https://api.simplesvg.com","https://api.unisvg.com"],ql=[];for(;es.length>0;)es.length===1||Math.random()>.5?ql.push(es.shift()):ql.push(es.pop());yp[""]=mp({resources:["https://api.iconify.design"].concat(ql)});function QW(e,t){const n=mp(t);return n===null?!1:(yp[e]=n,!0)}function vp(e){return yp[e]}const ej=()=>{let e;try{if(e=fetch,typeof e=="function")return e}catch{}};let X0=ej();function tj(e,t){const n=vp(e);if(!n)return 0;let o;if(!n.maxURL)o=0;else{let r=0;n.resources.forEach(s=>{r=Math.max(r,s.length)});const i=t+".json?icons=";o=n.maxURL-r-n.path.length-i.length}return o}function nj(e){return e===404}const oj=(e,t,n)=>{const o=[],r=tj(e,t),i="icons";let s={type:i,provider:e,prefix:t,icons:[]},a=0;return n.forEach((l,u)=>{a+=l.length+1,a>=r&&u>0&&(o.push(s),s={type:i,provider:e,prefix:t,icons:[]},a=l.length),s.icons.push(l)}),o.push(s),o};function rj(e){if(typeof e=="string"){const t=vp(e);if(t)return t.path}return"/"}const ij=(e,t,n)=>{if(!X0){n("abort",424);return}let o=rj(t.provider);switch(t.type){case"icons":{const i=t.prefix,a=t.icons.join(","),l=new URLSearchParams({icons:a});o+=i+".json?"+l.toString();break}case"custom":{const i=t.uri;o+=i.slice(0,1)==="/"?i.slice(1):i;break}default:n("abort",400);return}let r=503;X0(e+o).then(i=>{const s=i.status;if(s!==200){setTimeout(()=>{n(nj(s)?"abort":"next",s)});return}return r=501,i.json()}).then(i=>{if(typeof i!="object"||i===null){setTimeout(()=>{i===404?n("abort",i):n("next",r)});return}setTimeout(()=>{n("success",i)})}).catch(()=>{n("next",r)})},sj={prepare:oj,send:ij};function aj(e){const t={loaded:[],missing:[],pending:[]},n=Object.create(null);e.sort((r,i)=>r.provider!==i.provider?r.provider.localeCompare(i.provider):r.prefix!==i.prefix?r.prefix.localeCompare(i.prefix):r.name.localeCompare(i.name));let o={provider:"",prefix:"",name:""};return e.forEach(r=>{if(o.name===r.name&&o.prefix===r.prefix&&o.provider===r.provider)return;o=r;const i=r.provider,s=r.prefix,a=r.name,l=n[i]||(n[i]=Object.create(null)),u=l[s]||(l[s]=Hi(i,s));let c;a in u.icons?c=t.loaded:s===""||u.missing.has(a)?c=t.missing:c=t.pending;const d={provider:i,prefix:s,name:a};c.push(d)}),t}function mE(e,t){e.forEach(n=>{const o=n.loaderCallbacks;o&&(n.loaderCallbacks=o.filter(r=>r.id!==t))})}function lj(e){e.pendingCallbacksFlag||(e.pendingCallbacksFlag=!0,setTimeout(()=>{e.pendingCallbacksFlag=!1;const t=e.loaderCallbacks?e.loaderCallbacks.slice(0):[];if(!t.length)return;let n=!1;const o=e.provider,r=e.prefix;t.forEach(i=>{const s=i.icons,a=s.pending.length;s.pending=s.pending.filter(l=>{if(l.prefix!==r)return!0;const u=l.name;if(e.icons[u])s.loaded.push({provider:o,prefix:r,name:u});else if(e.missing.has(u))s.missing.push({provider:o,prefix:r,name:u});else return n=!0,!0;return!1}),s.pending.length!==a&&(n||mE([e],i.id),i.callback(s.loaded.slice(0),s.missing.slice(0),s.pending.slice(0),i.abort))})}))}let uj=0;function cj(e,t,n){const o=uj++,r=mE.bind(null,n,o);if(!t.pending.length)return r;const i={id:o,icons:t,callback:e,abort:r};return n.forEach(s=>{(s.loaderCallbacks||(s.loaderCallbacks=[])).push(i)}),r}function dj(e,t=!0,n=!1){const o=[];return e.forEach(r=>{const i=typeof r=="string"?yd(r,t,n):r;i&&o.push(i)}),o}var fj={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function hj(e,t,n,o){const r=e.resources.length,i=e.random?Math.floor(Math.random()*r):e.index;let s;if(e.random){let W=e.resources.slice(0);for(s=[];W.length>1;){const Z=Math.floor(Math.random()*W.length);s.push(W[Z]),W=W.slice(0,Z).concat(W.slice(Z+1))}s=s.concat(W)}else s=e.resources.slice(i).concat(e.resources.slice(0,i));const a=Date.now();let l="pending",u=0,c,d=null,f=[],h=[];typeof o=="function"&&h.push(o);function m(){d&&(clearTimeout(d),d=null)}function v(){l==="pending"&&(l="aborted"),m(),f.forEach(W=>{W.status==="pending"&&(W.status="aborted")}),f=[]}function b(W,Z){Z&&(h=[]),typeof W=="function"&&h.push(W)}function x(){return{startTime:a,payload:t,status:l,queriesSent:u,queriesPending:f.length,subscribe:b,abort:v}}function N(){l="failed",h.forEach(W=>{W(void 0,c)})}function S(){f.forEach(W=>{W.status==="pending"&&(W.status="aborted")}),f=[]}function A(W,Z,z){const j=Z!=="success";switch(f=f.filter(H=>H!==W),l){case"pending":break;case"failed":if(j||!e.dataAfterTimeout)return;break;default:return}if(Z==="abort"){c=z,N();return}if(j){c=z,f.length||(s.length?G():N());return}if(m(),S(),!e.random){const H=e.resources.indexOf(W.resource);H!==-1&&H!==e.index&&(e.index=H)}l="completed",h.forEach(H=>{H(z)})}function G(){if(l!=="pending")return;m();const W=s.shift();if(W===void 0){if(f.length){d=setTimeout(()=>{m(),l==="pending"&&(S(),N())},e.timeout);return}N();return}const Z={status:"pending",resource:W,callback:(z,j)=>{A(Z,z,j)}};f.push(Z),u++,d=setTimeout(G,e.rotate),n(W,t,Z.callback)}return setTimeout(G),x}function yE(e){const t={...fj,...e};let n=[];function o(){n=n.filter(a=>a().status==="pending")}function r(a,l,u){const c=hj(t,a,l,(d,f)=>{o(),u&&u(d,f)});return n.push(c),c}function i(a){return n.find(l=>a(l))||null}return{query:r,find:i,setIndex:a=>{t.index=a},getIndex:()=>t.index,cleanup:o}}function W0(){}const bf=Object.create(null);function gj(e){if(!bf[e]){const t=vp(e);if(!t)return;const n=yE(t),o={config:t,redundancy:n};bf[e]=o}return bf[e]}function pj(e,t,n){let o,r;if(typeof e=="string"){const i=Lh(e);if(!i)return n(void 0,424),W0;r=i.send;const s=gj(e);s&&(o=s.redundancy)}else{const i=mp(e);if(i){o=yE(i);const s=e.resources?e.resources[0]:"",a=Lh(s);a&&(r=a.send)}}return!o||!r?(n(void 0,424),W0):o.query(t,r,n)().abort}function j0(){}function mj(e){e.iconsLoaderFlag||(e.iconsLoaderFlag=!0,setTimeout(()=>{e.iconsLoaderFlag=!1,lj(e)}))}function yj(e){const t=[],n=[];return e.forEach(o=>{(o.match(lE)?t:n).push(o)}),{valid:t,invalid:n}}function ts(e,t,n){function o(){const r=e.pendingIcons;t.forEach(i=>{r&&r.delete(i),e.icons[i]||e.missing.add(i)})}if(n&&typeof n=="object")try{if(!fE(e,n).length){o();return}}catch(r){console.error(r)}o(),mj(e)}function q0(e,t){e instanceof Promise?e.then(n=>{t(n)}).catch(()=>{t(null)}):t(e)}function vj(e,t){e.iconsToLoad?e.iconsToLoad=e.iconsToLoad.concat(t).sort():e.iconsToLoad=t,e.iconsQueueFlag||(e.iconsQueueFlag=!0,setTimeout(()=>{e.iconsQueueFlag=!1;const{provider:n,prefix:o}=e,r=e.iconsToLoad;if(delete e.iconsToLoad,!r||!r.length)return;const i=e.loadIcon;if(e.loadIcons&&(r.length>1||!i)){q0(e.loadIcons(r,o,n),c=>{ts(e,r,c)});return}if(i){r.forEach(c=>{const d=i(c,o,n);q0(d,f=>{const h=f?{prefix:o,icons:{[c]:f}}:null;ts(e,[c],h)})});return}const{valid:s,invalid:a}=yj(r);if(a.length&&ts(e,a,null),!s.length)return;const l=o.match(lE)?Lh(n):null;if(!l){ts(e,s,null);return}l.prepare(n,o,s).forEach(c=>{pj(n,c,d=>{ts(e,c.icons,d)})})}))}const _j=(e,t)=>{const n=dj(e,!0,hE()),o=aj(n);if(!o.pending.length){let l=!0;return t&&setTimeout(()=>{l&&t(o.loaded,o.missing,o.pending,j0)}),()=>{l=!1}}const r=Object.create(null),i=[];let s,a;return o.pending.forEach(l=>{const{provider:u,prefix:c}=l;if(c===a&&u===s)return;s=u,a=c,i.push(Hi(u,c));const d=r[u]||(r[u]=Object.create(null));d[c]||(d[c]=[])}),o.pending.forEach(l=>{const{provider:u,prefix:c,name:d}=l,f=Hi(u,c),h=f.pendingIcons||(f.pendingIcons=new Set);h.has(d)||(h.add(d),r[u][c].push(d))}),i.forEach(l=>{const u=r[l.provider][l.prefix];u.length&&vj(l,u)}),t?cj(t,o,i):j0};function bj(e,t){const n={...e};for(const o in t){const r=t[o],i=typeof r;o in gE?(r===null||r&&(i==="string"||i==="number"))&&(n[o]=r):i===typeof n[o]&&(n[o]=o==="rotate"?r%4:r)}return n}const wj=/[\s,]+/;function xj(e,t){t.split(wj).forEach(n=>{switch(n.trim()){case"horizontal":e.hFlip=!0;break;case"vertical":e.vFlip=!0;break}})}function $j(e,t=0){const n=e.replace(/^-?[0-9.]*/,"");function o(r){for(;r<0;)r+=4;return r%4}if(n===""){const r=parseInt(e);return isNaN(r)?0:o(r)}else if(n!==e){let r=0;switch(n){case"%":r=25;break;case"deg":r=90}if(r){let i=parseFloat(e.slice(0,e.length-n.length));return isNaN(i)?0:(i=i/r,i%1===0?o(i):0)}}return t}function Ej(e,t){let n=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const o in t)n+=" "+o+'="'+t[o]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+e+"</svg>"}function Sj(e){return e.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function Nj(e){return"data:image/svg+xml,"+Sj(e)}function kj(e){return'url("'+Nj(e)+'")'}const K0={...pE,inline:!1},Cj={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},Ij={display:"inline-block"},Uh={backgroundColor:"currentColor"},vE={backgroundColor:"transparent"},J0={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},Q0={webkitMask:Uh,mask:Uh,background:vE};for(const e in Q0){const t=Q0[e];for(const n in J0)t[e+n]=J0[n]}const Kl={};["horizontal","vertical"].forEach(e=>{const t=e.slice(0,1)+"Flip";Kl[e+"-flip"]=t,Kl[e.slice(0,1)+"-flip"]=t,Kl[e+"Flip"]=t});function e_(e){return e+(e.match(/^[-0-9.]+$/)?"px":"")}const t_=(e,t)=>{const n=bj(K0,t),o={...Cj},r=t.mode||"svg",i={},s=t.style,a=typeof s=="object"&&!(s instanceof Array)?s:{};for(let v in t){const b=t[v];if(b!==void 0)switch(v){case"icon":case"style":case"onLoad":case"mode":case"ssr":break;case"inline":case"hFlip":case"vFlip":n[v]=b===!0||b==="true"||b===1;break;case"flip":typeof b=="string"&&xj(n,b);break;case"color":i.color=b;break;case"rotate":typeof b=="string"?n[v]=$j(b):typeof b=="number"&&(n[v]=b);break;case"ariaHidden":case"aria-hidden":b!==!0&&b!=="true"&&delete o["aria-hidden"];break;default:{const x=Kl[v];x?(b===!0||b==="true"||b===1)&&(n[x]=!0):K0[v]===void 0&&(o[v]=b)}}}const l=XW(e,n),u=l.attributes;if(n.inline&&(i.verticalAlign="-0.125em"),r==="svg"){o.style={...i,...a},Object.assign(o,u);let v=0,b=t.id;return typeof b=="string"&&(b=b.replace(/-/g,"_")),o.innerHTML=KW(l.body,b?()=>b+"ID"+v++:"iconifyVue"),_e("svg",o)}const{body:c,width:d,height:f}=e,h=r==="mask"||(r==="bg"?!1:c.indexOf("currentColor")!==-1),m=Ej(c,{...u,width:d+"",height:f+""});return o.style={...i,"--svg":kj(m),width:e_(u.width),height:e_(u.height),...Ij,...h?Uh:vE,...a},_e("span",o)};hE(!0);JW("",sj);if(typeof document<"u"&&typeof window<"u"){const e=window;if(e.IconifyPreload!==void 0){const t=e.IconifyPreload,n="Invalid IconifyPreload syntax.";typeof t=="object"&&t!==null&&(t instanceof Array?t:[t]).forEach(o=>{try{(typeof o!="object"||o===null||o instanceof Array||typeof o.icons!="object"||typeof o.prefix!="string"||!BW(o))&&console.error(n)}catch{console.error(n)}})}if(e.IconifyProviders!==void 0){const t=e.IconifyProviders;if(typeof t=="object"&&t!==null)for(let n in t){const o="IconifyProviders["+n+"] is invalid.";try{const r=t[n];if(typeof r!="object"||!r||r.resources===void 0)continue;QW(n,r)||console.error(o)}catch{console.error(o)}}}}const Tj={...vd,body:""},Aj=Ne((e,{emit:t})=>{const n=de(null);function o(){n.value&&(n.value.abort?.(),n.value=null)}const r=de(!!e.ssr),i=de(""),s=bi(null);function a(){const u=e.icon;if(typeof u=="object"&&u!==null&&typeof u.body=="string")return i.value="",{data:u};let c;if(typeof u!="string"||(c=yd(u,!1,!0))===null)return null;let d=VW(c);if(!d){const m=n.value;return(!m||m.name!==u)&&(d===null?n.value={name:u}:n.value={name:u,abort:_j([c],l)}),null}o(),i.value!==u&&(i.value=u,bt(()=>{t("load",u)}));const f=e.customise;if(f){d=Object.assign({},d);const m=f(d.body,c.name,c.prefix,c.provider);typeof m=="string"&&(d.body=m)}const h=["iconify"];return c.prefix!==""&&h.push("iconify--"+c.prefix),c.provider!==""&&h.push("iconify--"+c.provider),{data:d,classes:h}}function l(){const u=a();u?u.data!==s.value?.data&&(s.value=u):s.value=null}return r.value?l():tt(()=>{r.value=!0,l()}),Se(()=>e.icon,l),Or(o),()=>{const u=s.value;if(!u)return t_(Tj,e);let c=e;return u.classes&&(c={...e,class:u.classes.join(" ")}),t_({...vd,...u.data},c)}},{props:["icon","mode","ssr","width","height","style","color","inline","rotate","hFlip","horizontalFlip","vFlip","verticalFlip","flip","id","ariaHidden","customise","title"],emits:["load"]}),wt=(e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n},Mj={__name:"Icon",props:{icon:{type:String,required:!0},size:{type:[String,Number],default:16},width:{type:[String,Number],default:null},height:{type:[String,Number],default:null},color:{type:String,default:null},className:{type:String,default:""}},setup(e){return(t,n)=>(L(),Ye(ie(Aj),{icon:e.icon,width:e.width||e.size,height:e.height||e.size,class:We(["flow-icon",e.className]),style:qe({color:e.color})},null,8,["icon","width","height","class","style"]))}},He=wt(Mj,[["__scopeId","data-v-4b4f777d"]]),Dj={class:"h-12 bg-flow-surface dark:bg-flow-surface-dark border-b border-flow-border dark:border-flow-border-dark flex items-center justify-between px-4 relative z-[100] backdrop-blur-sm"},Oj={class:"flex items-center gap-2"},Pj={class:"flex items-center gap-3 px-2"},Rj={class:"flex items-center gap-2 flex-1 justify-center"},zj={class:"flex items-center gap-1"},Vj={class:"flex items-center gap-1"},Hj=["disabled"],Bj=["disabled"],Fj={class:"flex items-center gap-1"},Lj={class:"flex items-center gap-2"},Uj=["title"],Gj={key:0,class:"flex items-center gap-1.5 px-3 py-1 bg-surface-hover-light dark:bg-surface-hover-dark rounded-2xl"},Zj={class:"text-xs text-text-muted-light dark:text-text-muted-dark font-medium"},Yj=["title"],Xj={class:"w-7 h-7 flex items-center justify-center bg-primary text-white rounded-md text-xs font-semibold"},Wj={key:0,class:"absolute right-0 top-full mt-2 w-48 bg-flow-surface dark:bg-flow-surface-dark border border-flow-border dark:border-flow-border-dark rounded-lg shadow-lg backdrop-blur-sm z-50 py-1"},jj={class:"px-3 py-2 border-b border-flow-border dark:border-flow-border-dark"},qj={class:"text-xs text-flow-text-muted dark:text-flow-text-muted-dark"},Kj={key:0},Jj={key:1},Qj={__name:"TopToolbar",props:{canUndo:{type:Boolean,default:!1},canRedo:{type:Boolean,default:!1},executionStatus:{type:String,default:null}},emits:["execute","clear","undo","redo","toggleHelp"],setup(e,{emit:t}){const n=e,o=t,r=St(),{isDark:i,toggleTheme:s}=aE(),a=de(!1),l=de(null),u=J(()=>{switch(n.executionStatus){case"running":return"Executing...";case"success":return"Executed";case"error":return"Error";default:return""}}),c=J(()=>r.syncStatus),d=J(()=>{switch(c.value){case"synced":return"material-symbols:cloud-done";case"syncing":return"material-symbols:sync";case"error":return"material-symbols:cloud-off";case"offline":return"material-symbols:wifi-off";default:return"material-symbols:cloud"}}),f=J(()=>{switch(c.value){case"synced":return"Saved";case"syncing":return"Saving...";case"error":return"Error";case"offline":return"Offline";default:return""}}),h=J(()=>{switch(c.value){case"synced":return"All changes saved to cloud";case"syncing":return"Saving changes...";case"error":return"Failed to save changes";case"offline":return"No connection to server";default:return""}}),m=()=>{a.value=!a.value},v=()=>{o("execute")},b=()=>{confirm("Are you sure you want to clear your credentials? You will need to reload with a new token to continue.")&&(r.clearCredentials(),a.value=!1,alert("Credentials cleared. Please reload the page with a valid token to continue."))},x=N=>{l.value&&!l.value.contains(N.target)&&(a.value=!1)};return tt(()=>{document.addEventListener("click",x)}),Or(()=>{document.removeEventListener("click",x)}),(N,S)=>(L(),X("div",Dj,[T("div",Oj,[T("div",Pj,[ue(He,{icon:"material-symbols:hub",size:24,color:"#6366f1"}),S[6]||(S[6]=T("span",{class:"text-lg font-bold text-flow-text dark:text-flow-text-dark tracking-tight"},"FlowForge",-1))])]),T("div",Rj,[T("div",zj,[T("button",{onClick:v,class:"inline-flex items-center gap-1.5 px-4 py-2 bg-primary border border-primary rounded-lg text-white text-sm font-semibold cursor-pointer transition-all duration-200 hover:bg-primary-hover hover:border-primary-hover hover:shadow-lg hover:scale-105 active:scale-95"},[ue(He,{icon:"material-symbols:play-arrow",size:16}),S[7]||(S[7]=Ze(" Execute ",-1))])]),S[9]||(S[9]=T("div",{class:"w-px h-6 bg-flow-border dark:bg-flow-border-dark mx-3 opacity-50"},null,-1)),T("div",Vj,[T("button",{onClick:S[0]||(S[0]=A=>N.$emit("undo")),class:"inline-flex items-center gap-1.5 px-2 py-1.5 bg-surface-light dark:bg-surface-dark border border-border-light dark:border-border-dark rounded-md text-text-secondary-light dark:text-text-secondary-dark text-sm font-medium cursor-pointer transition-all hover:bg-surface-hover-light dark:hover:bg-surface-hover-dark hover:border-border-hover-light dark:hover:border-border-hover-dark disabled:opacity-50 disabled:cursor-not-allowed",title:"Undo (Ctrl+Z)",disabled:!e.canUndo},[ue(He,{icon:"material-symbols:undo",size:16})],8,Hj),T("button",{onClick:S[1]||(S[1]=A=>N.$emit("redo")),class:"inline-flex items-center gap-1.5 px-2 py-1.5 bg-surface-light dark:bg-surface-dark border border-border-light dark:border-border-dark rounded-md text-text-secondary-light dark:text-text-secondary-dark text-sm font-medium cursor-pointer transition-all hover:bg-surface-hover-light dark:hover:bg-surface-hover-dark hover:border-border-hover-light dark:hover:border-border-hover-dark disabled:opacity-50 disabled:cursor-not-allowed",title:"Redo (Ctrl+Y)",disabled:!e.canRedo},[ue(He,{icon:"material-symbols:redo",size:16})],8,Bj)]),S[10]||(S[10]=T("div",{class:"w-px h-6 bg-border-light dark:bg-border-dark mx-2"},null,-1)),T("div",Fj,[T("button",{onClick:S[2]||(S[2]=A=>N.$emit("clear")),class:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-surface-light dark:bg-surface-dark border border-border-light dark:border-border-dark rounded-md text-error text-sm font-medium cursor-pointer transition-all hover:bg-surface-hover-light dark:hover:bg-surface-hover-dark hover:border-border-hover-light dark:hover:border-border-hover-dark",title:"Clear Flow"},[ue(He,{icon:"material-symbols:clear-all",size:16}),S[8]||(S[8]=Ze(" Clear ",-1))])])]),T("div",Lj,[T("div",{class:We(["flex items-center gap-1.5 px-2.5 py-1 rounded-lg",{"bg-green-50 dark:bg-green-900/20":c.value==="synced","bg-blue-50 dark:bg-blue-900/20":c.value==="syncing","bg-red-50 dark:bg-red-900/20":c.value==="error","bg-gray-50 dark:bg-gray-900/20":c.value==="offline"}]),title:h.value},[ue(He,{icon:d.value,size:14,class:We({"text-green-600 dark:text-green-400":c.value==="synced","text-blue-600 dark:text-blue-400 animate-spin":c.value==="syncing","text-red-600 dark:text-red-400":c.value==="error","text-gray-600 dark:text-gray-400":c.value==="offline"})},null,8,["icon","class"]),T("span",{class:We(["text-xs font-medium",{"text-green-700 dark:text-green-300":c.value==="synced","text-blue-700 dark:text-blue-300":c.value==="syncing","text-red-700 dark:text-red-300":c.value==="error","text-gray-700 dark:text-gray-300":c.value==="offline"}])},ye(f.value),3)],10,Uj),e.executionStatus?(L(),X("div",Gj,[T("div",{class:We(["w-2 h-2 rounded-full",{"bg-gray-400":!e.executionStatus,"bg-warning animate-pulse":e.executionStatus==="running","bg-success":e.executionStatus==="success","bg-error":e.executionStatus==="error"}])},null,2),T("span",Zj,ye(u.value),1)])):ve("",!0),T("button",{onClick:S[3]||(S[3]=(...A)=>ie(s)&&ie(s)(...A)),class:"inline-flex items-center gap-1.5 px-2 py-1.5 bg-surface-light dark:bg-surface-dark border border-border-light dark:border-border-dark rounded-md text-text-secondary-light dark:text-text-secondary-dark text-sm font-medium cursor-pointer transition-all hover:bg-surface-hover-light dark:hover:bg-surface-hover-dark hover:border-border-hover-light dark:hover:border-border-hover-dark",title:`Switch to ${ie(i)?"light":"dark"} mode`},[ue(He,{icon:ie(i)?"material-symbols:light-mode":"material-symbols:dark-mode",size:16},null,8,["icon"])],8,Yj),T("button",{onClick:S[4]||(S[4]=A=>N.$emit("toggleHelp")),class:"inline-flex items-center gap-1.5 px-2 py-1.5 bg-surface-light dark:bg-surface-dark border border-border-light dark:border-border-dark rounded-md text-text-secondary-light dark:text-text-secondary-dark text-sm font-medium cursor-pointer transition-all hover:bg-surface-hover-light dark:hover:bg-surface-hover-dark hover:border-border-hover-light dark:hover:border-border-hover-dark",title:"Help"},[ue(He,{icon:"material-symbols:help",size:16})]),T("div",{class:"ml-2 relative",ref_key:"userMenuRef",ref:l},[T("button",{onClick:m,class:"flex items-center gap-1 py-1 px-2 pr-2 bg-transparent border-none rounded-md cursor-pointer transition-colors text-text-muted-light dark:text-text-muted-dark hover:bg-surface-hover-light dark:hover:bg-surface-hover-dark"},[T("div",Xj,[ue(He,{icon:"material-symbols:person",size:14})]),ue(He,{icon:"material-symbols:keyboard-arrow-down",size:12,class:We([{"rotate-180":a.value},"transition-transform duration-200"])},null,8,["class"])]),a.value?(L(),X("div",Wj,[T("div",jj,[T("div",qj,[ie(r).isAuthenticated()?(L(),X("div",Kj," Flow ID: "+ye(ie(r).apiConfig.flowId),1)):(L(),X("div",Jj,"Not authenticated"))])]),ie(r).isAuthenticated()?(L(),X("button",{key:0,onClick:b,class:"w-full flex items-center gap-2 px-3 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors"},[ue(He,{icon:"material-symbols:logout",size:16}),S[11]||(S[11]=Ze(" Clear Credentials ",-1))])):ve("",!0),T("button",{onClick:S[5]||(S[5]=A=>a.value=!1),class:"w-full flex items-center gap-2 px-3 py-2 text-left text-sm text-flow-text-secondary dark:text-flow-text-secondary-dark hover:bg-flow-surface-hover dark:hover:bg-flow-surface-hover-dark transition-colors"},[ue(He,{icon:"material-symbols:close",size:16}),S[12]||(S[12]=Ze(" Close ",-1))])])):ve("",!0)],512)])]))}},eq=wt(Qj,[["__scopeId","data-v-f1cca293"]]),tq={class:"w-70 h-full bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700 flex flex-col overflow-hidden"},nq={class:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"},oq={class:"flex-1 overflow-y-auto p-2"},rq=["onClick"],iq={class:"flex-1 text-sm font-semibold text-gray-700 dark:text-gray-200"},sq={class:"text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full font-medium"},aq={class:"py-1"},lq=["onDragstart","onClick"],uq={class:"flex-1"},cq={class:"text-sm font-semibold text-gray-900 dark:text-gray-100 mb-1"},dq={class:"text-xs text-gray-500 dark:text-gray-400 leading-relaxed"},fq={__name:"NodeSidebar",setup(e){St();const{addNodes:t,project:n}=ct(),o=de(""),r=de({}),i=de([]);tt(()=>{s()});function s(){try{const h=iE();i.value=h.map(m=>{const b=EW(m.id).map(N=>({type:N.type,name:N.label,icon:N.icon,description:N.description,color:N.color})),x=h.indexOf(m)===0;return r.value[m.label]=x,{name:m.label,icon:m.icon,id:m.id,nodes:b}})}catch{i.value=[]}}const a=J(()=>o.value?i.value.map(h=>({...h,nodes:h.nodes.filter(m=>m.name.toLowerCase().includes(o.value.toLowerCase())||m.description.toLowerCase().includes(o.value.toLowerCase()))})).filter(h=>h.nodes.length>0):i.value),l=h=>{r.value[h]=!r.value[h]},u=(h,m)=>{h.dataTransfer.effectAllowed="move",h.dataTransfer.setData("application/vueflow",JSON.stringify(m))},c=h=>{const{x:m,y:v}=n({x:window.innerWidth/2,y:window.innerHeight/2}),b=f(h.type,{x:m,y:v});t([b])},d=h=>({input:"bg-blue-100 dark:bg-blue-800/50 border-blue-200 dark:border-blue-700/50 text-blue-600 dark:text-blue-400",connector:"bg-green-100 dark:bg-green-800/50 border-green-200 dark:border-green-700/50 text-green-600 dark:text-green-400","field-extractor":"bg-cyan-100 dark:bg-cyan-800/50 border-cyan-200 dark:border-cyan-700/50 text-cyan-600 dark:text-cyan-400","array-processor":"bg-orange-100 dark:bg-orange-800/50 border-orange-200 dark:border-orange-700/50 text-orange-600 dark:text-orange-400",add:"bg-purple-100 dark:bg-purple-800/50 border-purple-200 dark:border-purple-700/50 text-purple-600 dark:text-purple-400",subtract:"bg-purple-100 dark:bg-purple-800/50 border-purple-200 dark:border-purple-700/50 text-purple-600 dark:text-purple-400",multiply:"bg-purple-100 dark:bg-purple-800/50 border-purple-200 dark:border-purple-700/50 text-purple-600 dark:text-purple-400",divide:"bg-purple-100 dark:bg-purple-800/50 border-purple-200 dark:border-purple-700/50 text-purple-600 dark:text-purple-400",variable:"bg-pink-100 dark:bg-pink-800/50 border-pink-200 dark:border-pink-700/50 text-pink-600 dark:text-pink-400",output:"bg-red-100 dark:bg-red-800/50 border-red-200 dark:border-red-700/50 text-red-600 dark:text-red-400"})[h]||"bg-gray-100 dark:bg-gray-700 border-gray-200 dark:border-gray-600 text-gray-600 dark:text-gray-300",f=(h,m)=>{const v={id:`${h}_${Date.now()}`,type:h,position:m,data:{}};switch(h){case"input":v.data={label:"API Input",parameters:[]};break;case"connector":v.data={label:"Data Connector",sourceType:"analytics",analyticsType:"sales",selectedApi:"custom",apiUrl:"",dataPath:"",mockData:Math.floor(Math.random()*100)};break;case"field-extractor":v.data={label:"Field Extractor",selectedFields:[]};break;case"array-processor":v.data={label:"Array Processor",operation:"extract",fieldPath:"",filterValue:""};break;case"add":case"subtract":case"multiply":case"divide":v.data={label:h.charAt(0).toUpperCase()+h.slice(1),operation:h};break;case"output":v.data={label:"My Output",outputFields:[]};break;case"variable":v.data={label:"Variable",mode:"set",variableName:"myVariable"};break;default:v.data={label:h.charAt(0).toUpperCase()+h.slice(1)}}return v};return(h,m)=>(L(),X("div",tq,[T("div",nq,[Ve(T("input",{"onUpdate:modelValue":m[0]||(m[0]=v=>o.value=v),type:"text",placeholder:"Search nodes...",class:"w-full px-3 py-2 border border-gray-200 dark:border-gray-700 rounded-lg text-sm bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-all duration-200 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 placeholder-gray-500 dark:placeholder-gray-400"},null,512),[[at,o.value]])]),T("div",oq,[(L(!0),X(xe,null,nt(a.value,v=>(L(),X("div",{key:v.name,class:"mb-1"},[T("div",{class:"flex items-center px-3 py-2 cursor-pointer rounded-lg transition-all duration-200 select-none hover:bg-gray-50 dark:hover:bg-gray-800",onClick:b=>l(v.name)},[ue(He,{icon:r.value[v.name]?"material-symbols:keyboard-arrow-down":"material-symbols:keyboard-arrow-right",size:16,class:"mr-2 transition-transform duration-200 text-gray-500 dark:text-gray-400"},null,8,["icon"]),ue(He,{icon:v.icon,size:16,class:"mr-2 text-gray-600 dark:text-gray-300"},null,8,["icon"]),T("span",iq,ye(v.name),1),T("span",sq,ye(v.nodes.length),1)],8,rq),Ve(T("div",aq,[(L(!0),X(xe,null,nt(v.nodes,b=>(L(),X("div",{key:b.type,class:"flex items-center px-3 py-3 mx-2 my-1 rounded-lg cursor-move transition-all duration-200 bg-gray-50 dark:bg-gray-800 border border-transparent hover:bg-white dark:hover:bg-gray-900 hover:border-gray-200 dark:hover:border-gray-600 hover:shadow-md hover:translate-x-1 active:cursor-grabbing active:scale-95",draggable:"true",onDragstart:x=>u(x,b),onClick:x=>c(b)},[T("div",{class:We(["w-10 h-10 flex items-center justify-center rounded-lg mr-3 shrink-0 shadow-sm border",d(b.type)])},[ue(He,{icon:b.icon,size:20},null,8,["icon"])],2),T("div",uq,[T("div",cq,ye(b.name),1),T("div",dq,ye(b.description),1)])],40,lq))),128))],512),[[HN,r.value[v.name]]])]))),128))])]))}},hq=wt(fq,[["__scopeId","data-v-c1158357"]]),_E=Lb("connection",()=>{const e=de([]),t=de(!1),n=de(null),o=J(()=>e.value.filter(m=>m.serviceType==="analytics")),r=J(()=>e.value.filter(m=>m.serviceType==="sheets")),i=J(()=>o.value.length>0),s=J(()=>r.value.length>0);return{connections:e,loading:t,error:n,getAnalyticsConnections:o,getSheetsConnections:r,hasAnalyticsConnection:i,hasSheetsConnection:s,getConnectionById:h=>e.value.find(m=>m.id===h),getConnectionsByType:h=>e.value.filter(m=>m.serviceType===h),fetchConnections:async h=>{t.value=!0,n.value=null;try{const m=h?.baseUrl||"http://localhost:3001",v=h?.token;if(!v){e.value=[];return}const b=await fetch(`${m}/api/oauth/connections`,{method:"GET",headers:{Authorization:`Bearer ${v}`,"Content-Type":"application/json"}});if(!b.ok)throw new Error(`Failed to fetch connections: ${b.status}`);const x=await b.json();let N=x.data?.connections||x.connections||[];const S=[],A=new Set;for(const G of N){const W=G.id||G._id||G.connectionId;if(!W){S.push(G);continue}A.has(W)||(A.add(W),S.push(G))}e.value=S}catch(m){n.value=m.message,e.value=[]}finally{t.value=!1}},connectGoogle:async(h,m)=>{t.value=!0,n.value=null;try{const v=m?.baseUrl||"http://localhost:3001",b=m?.token;if(!b)throw localStorage.getItem("flowforge_token")?new Error("⚠️ Token não foi passado corretamente. Verifique que flowStore.apiConfig.token está configurado."):new Error("⚠️ Token de autenticação não encontrado. Acesse a aplicação com ?accessToken=SEU_TOKEN&flowId=SEU_FLOW_ID");const N={analytics:"analytics",sheets:"sheets"}[h];if(!N)throw new Error(`Tipo de serviço desconhecido: ${h}`);const S=`${v}/api/oauth/google/authorize?scopes=${N}&purpose=connection&serviceType=${h}`,A=await fetch(S,{method:"GET",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"}});if(!A.ok){let Z=`Erro HTTP ${A.status}`;try{const z=await A.json();Z=z.message||z.error||Z}catch{}throw A.status===404?new Error("❌ Rota OAuth não encontrada no backend. Verifique se o backend está atualizado e rodando."):A.status===401?new Error("❌ Token inválido ou expirado. Configure o token no flowStore."):new Error(`❌ Falha ao iniciar OAuth: ${Z}`)}const G=await A.json(),W=G.data?.authUrl||G.authUrl;if(!W)throw new Error("⚠️ Backend não retornou URL de autorização. Verifique se a rota /api/oauth/google/authorize está implementada no backend.");window.location.href=W}catch(v){throw n.value=v.message,t.value=!1,v}},revokeConnection:async(h,m)=>{t.value=!0,n.value=null;try{const v=m?.baseUrl||"http://localhost:3001",b=m?.token;if(!b)throw new Error("Authentication token required");const x=await fetch(`${v}/api/oauth/connections/${h}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"}});if(!x.ok)throw new Error(`Failed to revoke connection: ${x.status}`);const N=await x.json();if(N.success)e.value=e.value.filter(S=>S.id!==h);else throw new Error(N.error||"Failed to revoke connection")}catch(v){throw n.value=v.message,v}finally{t.value=!1}},handleOAuthCallback:h=>{const m=h.get("success")==="true",v=h.get("serviceType"),b=h.get("email"),x=h.get("error");return m&&v&&b?{success:!0,message:`Google ${v==="analytics"?"Analytics":"Sheets"} conectado com sucesso!`,serviceType:v,email:b}:x?{success:!1,message:`Erro ao conectar: ${x}`}:{success:!1,message:"Erro desconhecido ao conectar"}}}}),gq={class:"connection-select space-y-2"},pq={key:0},mq=["value"],yq=["value"],vq={key:1,class:"text-center py-3 bg-gray-50 dark:bg-gray-800 rounded-md border border-dashed border-gray-300 dark:border-gray-600"},_q={class:"text-sm text-gray-600 dark:text-gray-400 mb-2"},bq=["disabled"],wq={class:"mr-2"},xq=["disabled"],$q={__name:"ConnectionSelect",props:{serviceType:{type:String,required:!0,validator:e=>["analytics","sheets"].includes(e)},modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,o=t,r=_E(),i=St(),s=de(!1),a=de(!1),l=J(()=>n.serviceType==="analytics"?r.getAnalyticsConnections:r.getSheetsConnections),u=J(()=>n.serviceType==="analytics"?"Google Analytics":"Google Sheets"),c=h=>{o("update:modelValue",h.target.value)},d=async()=>{s.value=!0;try{await r.connectGoogle(n.serviceType,i.apiConfig)}catch(h){alert(`Erro ao conectar: ${h.message}`)}finally{s.value=!1}},f=async()=>{a.value=!0;try{await r.fetchConnections(i.apiConfig)}catch{}finally{a.value=!1}};return tt(async()=>{r.connections.length===0&&await r.fetchConnections(i.apiConfig)}),(h,m)=>(L(),X("div",gq,[l.value.length>0?(L(),X("div",pq,[T("select",{value:e.modelValue,onChange:c,class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[m[0]||(m[0]=T("option",{value:""},"Selecione uma conexão...",-1)),(L(!0),X(xe,null,nt(l.value,v=>(L(),X("option",{key:v.id,value:v.id},ye(v.email||v.accountEmail||v.name||`Conexão ${v.id?.substring(0,8)}`),9,yq))),128))],40,mq)])):(L(),X("div",vq,[T("p",_q," Nenhuma conexão "+ye(u.value)+" disponível ",1)])),T("button",{onClick:d,disabled:s.value,type:"button",class:"w-full px-3 py-2 text-sm bg-blue-50 hover:bg-blue-100 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 text-blue-700 dark:text-blue-400 border border-blue-200 dark:border-blue-800 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center"},[T("span",wq,ye(l.value.length>0?"➕":"🔗"),1),Ze(" "+ye(s.value?"Conectando...":`${l.value.length>0?"Adicionar":"Conectar"} ${u.value}`),1)],8,bq),l.value.length>0?(L(),X("button",{key:2,onClick:f,disabled:a.value,type:"button",class:"w-full px-2 py-1.5 text-xs text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors"},ye(a.value?"Atualizando...":"🔄 Atualizar lista"),9,xq)):ve("",!0)]))}},bE=wt($q,[["__scopeId","data-v-6542a43e"]]),Eq={class:"generic-properties space-y-4"},Sq={key:0,class:"mb-4"},Nq=["disabled"],kq={key:0,class:"mt-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-md border border-gray-200 dark:border-gray-700"},Cq={class:"text-xs text-gray-600 dark:text-gray-400 overflow-auto max-h-32"},Iq={key:0,class:"space-y-1"},Tq={class:"flex items-center justify-between"},Aq={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},Mq={key:0,class:"text-red-500"},Dq={key:0,class:"flex items-center gap-1"},Oq=["checked","onChange"],Pq=["onUpdate:modelValue","placeholder","disabled"],Rq={key:1,class:"space-y-1"},zq={class:"flex items-center justify-between"},Vq={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},Hq={key:0,class:"text-red-500"},Bq={key:0,class:"flex items-center gap-1"},Fq=["checked","onChange"],Lq=["onUpdate:modelValue","placeholder","disabled"],Uq={key:2,class:"space-y-1"},Gq={class:"flex items-center justify-between"},Zq={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},Yq={key:0,class:"text-red-500"},Xq={key:0,class:"flex items-center gap-1"},Wq=["checked","onChange"],jq=["onUpdate:modelValue","disabled"],qq=["value"],Kq={key:3,class:"space-y-1"},Jq={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},Qq={key:0,class:"text-red-500"},eK={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mb-2"},tK={key:4,class:"space-y-1"},nK={class:"flex items-center justify-between"},oK={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},rK={key:0,class:"text-red-500"},iK={key:0,class:"flex items-center gap-1"},sK=["checked","onChange"],aK=["onUpdate:modelValue","placeholder","disabled"],lK={key:5,class:"space-y-1"},uK={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},cK={key:0,class:"text-red-500"},dK={class:"flex items-center gap-2"},fK=["onUpdate:modelValue"],hK=["onUpdate:modelValue","placeholder"],gK={key:6,class:"space-y-1"},pK={class:"flex items-center justify-between"},mK={class:"flex items-center space-x-2"},yK=["onUpdate:modelValue","disabled"],vK={class:"text-xs font-medium text-gray-700 dark:text-gray-300"},_K={key:0,class:"flex items-center gap-1"},bK=["checked","onChange"],wK={key:7,class:"space-y-1"},xK={class:"flex items-center justify-between"},$K={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},EK={key:0,class:"text-red-500"},SK={key:0,class:"flex items-center gap-1"},NK=["checked","onChange"],kK=["onUpdate:modelValue","placeholder","disabled"],CK={key:8,class:"space-y-1"},IK={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},TK={key:0,class:"text-red-500"},AK={class:"flex gap-2"},MK=["onUpdate:modelValue"],DK=["value"],OK=["onUpdate:modelValue","placeholder"],PK={key:9,class:"space-y-2"},RK={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},zK={key:0,class:"text-xs text-gray-500 dark:text-gray-400 italic mb-2"},VK={key:1,class:"space-y-2 mb-3"},HK={class:"flex items-center justify-between"},BK={class:"text-xs font-medium text-gray-700 dark:text-gray-300"},FK=["onClick"],LK=["onUpdate:modelValue"],UK=["onUpdate:modelValue"],GK=["onUpdate:modelValue"],ZK=["onUpdate:modelValue","step"],YK={key:2,class:"flex items-center gap-2 px-2 py-1"},XK=["onUpdate:modelValue"],WK={class:"text-xs text-gray-600 dark:text-gray-400"},jK=["onUpdate:modelValue"],qK=["onUpdate:modelValue","placeholder"],KK={class:"flex items-center gap-2"},JK=["onUpdate:modelValue"],QK=["onClick"],eJ={key:10,class:"space-y-1"},tJ={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},nJ={key:0,class:"text-red-500"},oJ={key:11,class:"space-y-2"},rJ={class:"block text-xs font-medium text-gray-700 dark:text-gray-300"},iJ={key:0,class:"text-red-500"},sJ={key:0,class:"text-xs text-gray-500 dark:text-gray-400 italic mb-2"},aJ={key:1,class:"space-y-1 mb-2"},lJ={class:"text-xs font-medium text-gray-600 dark:text-gray-400"},uJ={class:"flex flex-wrap gap-1"},cJ=["onClick","title"],dJ=["title"],fJ=["onClick"],hJ={class:"space-y-1"},gJ={key:0,class:"max-h-40 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded p-2 space-y-1"},pJ=["onClick","disabled"],mJ={key:1,class:"text-xs text-gray-500 dark:text-gray-400 italic p-2 border border-dashed border-gray-300 dark:border-gray-600 rounded"},yJ={key:1,class:"text-center py-8"},vJ={__name:"GenericProperties",props:{nodeId:{type:String,required:!0},localData:{type:Object,default:()=>({})}},emits:["update-node-data"],setup(e,{emit:t}){const n=e,o=t,r=St(),i=de({...n.localData}),s=de(!1),a=de(null),l=J(()=>{const D=r.nodes.find(w=>w.id===n.nodeId);return!D||D.type!=="variable"?[]:r.nodes.filter(w=>w.type==="variable"&&w.id!==n.nodeId&&r.nodeData[w.id]?.mode==="set").map(w=>r.nodeData[w.id]?.variableName).filter(w=>w&&w.trim()!=="").filter((w,O,C)=>C.indexOf(w)===O).sort()}),u=J(()=>{if(!r.nodes.find(C=>C.id===n.nodeId))return[];const I=r.edges.filter(C=>C.target===n.nodeId&&C.targetHandle==="data-input"&&C.edgeType!=="flow");if(I.length===0)return[];const R=I[0],w=r.executionResults[R.source];if(!w)return[];const O=typeof w=="object"&&w!==null&&R.sourceHandle in w?w[R.sourceHandle]:w;return c(O)}),c=(D,I="")=>{const R=[];if(!D||typeof D!="object")return R;if(Array.isArray(D))return D.length>0?c(D[0],I):R;for(const w in D){const O=I?`${I}.${w}`:w;if(R.push(O),D[w]&&typeof D[w]=="object"&&!Array.isArray(D[w])){const C=c(D[w],O);R.push(...C)}}return R},d=J(()=>{const D=r.nodes.find(I=>I.id===n.nodeId);return D?za(D.type):null}),f=J(()=>d.value?.config||{}),h=(D,I)=>{if(!D.condition)return!0;for(const[R,w]of Object.entries(D.condition)){const O=i.value[R];if(Array.isArray(w)){if(!w.includes(O))return!1}else if(O!==w)return!1}return!0},m=J(()=>{const D={};for(const[I,R]of Object.entries(f.value))h(R)&&(D[I]=R);return D});Se(()=>n.localData,D=>{i.value={...D}},{deep:!0,immediate:!0}),tt(()=>{const D=f.value;for(const I in D)i.value[I]===void 0&&D[I].default!==void 0&&(i.value[I]=D[I].default);x()});const v=async()=>{s.value=!0,a.value=null;try{const D=r.nodes.find(Q=>Q.id===n.nodeId);if(!D)throw new Error("Node not found");const I={...i.value},R={apiConfig:{baseUrl:r.apiConfig?.baseUrl||"http://localhost:3001",token:r.apiConfig?.token||""}},w=r.getNodeDataInputs(n.nodeId);r.updateNodeData(n.nodeId,I);const O={...D,data:I},C=await r.executeNode(O,w);a.value=C;const F=Hh(O,C);r.setExecutionResult(n.nodeId,F);const Y=r.edges.filter(Q=>Q.source===n.nodeId&&(Q.edgeType==="data"||!Q.sourceHandle?.startsWith("exec-")));for(const Q of Y)await r.propagateDataToTarget(Q)}catch(D){a.value={error:D.message}}finally{s.value=!1}},b=D=>D?D.error?`Error: ${D.error}`:JSON.stringify(D,null,2):"",x=()=>{const D=f.value;for(const[I,R]of Object.entries(D))R.mapTo&&i.value[I]!==void 0&&(i.value[R.mapTo]=i.value[I]);r.updateNodeData(n.nodeId,i.value),o("update-node-data")},N=(D,I)=>{f.value[D]?.singleSelect===!0?i.value[D]=[I]:(i.value[D]||(i.value[D]=[]),i.value[D].includes(I)||i.value[D].push(I)),d.value?.type==="field-extractor"&&S(I),x()},S=D=>{if(!r.nodes.find(Y=>Y.id===n.nodeId))return;const R=r.edges.filter(Y=>Y.target===n.nodeId&&Y.targetHandle==="data-input"&&Y.edgeType!=="flow");if(R.length===0)return;const w=R[0],O=r.executionResults[w.source];if(!O)return;const C=vG(O,D),F=ac(C);i.value.fieldTypes||(i.value.fieldTypes={}),i.value.fieldTypes[D]=F,x()},A=(D,I)=>{if(i.value[D]){const R=i.value[D][I];i.value[D].splice(I,1),i.value.fieldOutputsEnabled&&R&&delete i.value.fieldOutputsEnabled[R],i.value.fieldTypes&&R&&delete i.value.fieldTypes[R],x()}},G=D=>{i.value[D]||(i.value[D]=[]),i.value[D].push({name:`param${i.value[D].length+1}`,type:"any",required:!1,defaultValue:null}),x()},W=(D,I)=>{i.value[D]&&(i.value[D].splice(I,1),x())},Z=D=>{i.value.fieldOutputsEnabled||(i.value.fieldOutputsEnabled={});const I=i.value.fieldOutputsEnabled[D];i.value.fieldOutputsEnabled[D]=I===!1,x()},z=D=>i.value.fieldOutputsEnabled?i.value.fieldOutputsEnabled[D]!==!1:!0,j=D=>i.value.exposedFields?.[D]!==void 0,H=(D,I)=>{i.value.exposedFields||(i.value.exposedFields={}),i.value.exposedFields[D]?delete i.value.exposedFields[D]:i.value.exposedFields[D]={label:I.label,type:I.type||"any",required:I.required||!1},x()};return(D,I)=>(L(),X("div",Eq,[d.value?.executable?(L(),X("div",Sq,[T("button",{onClick:v,disabled:s.value,class:"w-full px-4 py-2.5 flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white text-sm font-medium rounded-md cursor-pointer transition-colors disabled:cursor-not-allowed"},[ue(He,{icon:s.value?"material-symbols:hourglass-empty":"material-symbols:play-arrow",size:16},null,8,["icon"]),Ze(" "+ye(s.value?"Executing...":"Execute Node"),1)],8,Nq),a.value?(L(),X("div",kq,[I[0]||(I[0]=T("div",{class:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},"Result:",-1)),T("pre",Cq,ye(b(a.value)),1)])):ve("",!0)])):ve("",!0),(L(!0),X(xe,null,nt(m.value,(R,w)=>(L(),X("div",{key:w,class:"form-group"},[R.type==="string"?(L(),X("div",Iq,[T("div",Tq,[T("label",Aq,[Ze(ye(R.label)+" ",1),R.required?(L(),X("span",Mq,"*")):ve("",!0)]),d.value?.type!=="input"?(L(),X("div",Dq,[T("input",{type:"checkbox",checked:j(w),onChange:O=>H(w,R),class:"w-3 h-3 text-blue-600 bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500",title:"Expor como input"},null,40,Oq),I[1]||(I[1]=T("span",{class:"text-[10px] text-gray-500 dark:text-gray-400"},"Expor",-1))])):ve("",!0)]),Ve(T("input",{type:"text","onUpdate:modelValue":O=>i.value[w]=O,onInput:x,placeholder:R.placeholder||"",disabled:j(w),class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},null,40,Pq),[[at,i.value[w]]])])):R.type==="textarea"?(L(),X("div",Rq,[T("div",zq,[T("label",Vq,[Ze(ye(R.label)+" ",1),R.required?(L(),X("span",Hq,"*")):ve("",!0)]),d.value?.type!=="input"?(L(),X("div",Bq,[T("input",{type:"checkbox",checked:j(w),onChange:O=>H(w,R),class:"w-3 h-3 text-blue-600 bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500",title:"Expor como input"},null,40,Fq),I[2]||(I[2]=T("span",{class:"text-[10px] text-gray-500 dark:text-gray-400"},"Expor",-1))])):ve("",!0)]),Ve(T("textarea",{"onUpdate:modelValue":O=>i.value[w]=O,onInput:x,placeholder:R.placeholder||"",disabled:j(w),rows:"4",class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},null,40,Lq),[[at,i.value[w]]])])):R.type==="select"?(L(),X("div",Uq,[T("div",Gq,[T("label",Zq,[Ze(ye(R.label)+" ",1),R.required?(L(),X("span",Yq,"*")):ve("",!0)]),d.value?.type!=="input"?(L(),X("div",Xq,[T("input",{type:"checkbox",checked:j(w),onChange:O=>H(w,R),class:"w-3 h-3 text-blue-600 bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500",title:"Expor como input"},null,40,Wq),I[3]||(I[3]=T("span",{class:"text-[10px] text-gray-500 dark:text-gray-400"},"Expor",-1))])):ve("",!0)]),Ve(T("select",{"onUpdate:modelValue":O=>i.value[w]=O,onChange:x,disabled:j(w),class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[(L(!0),X(xe,null,nt(R.options,O=>(L(),X("option",{key:O.value,value:O.value},ye(O.label),9,qq))),128))],40,jq),[[En,i.value[w]]])])):R.type==="connection-select"?(L(),X("div",Kq,[T("label",Jq,[Ze(ye(R.label)+" ",1),R.required?(L(),X("span",Qq,"*")):ve("",!0)]),R.description?(L(),X("p",eK,ye(R.description),1)):ve("",!0),ue(bE,{"service-type":R.serviceType,modelValue:i.value[w],"onUpdate:modelValue":[O=>i.value[w]=O,x]},null,8,["service-type","modelValue","onUpdate:modelValue"])])):R.type==="number"?(L(),X("div",tK,[T("div",nK,[T("label",oK,[Ze(ye(R.label)+" ",1),R.required?(L(),X("span",rK,"*")):ve("",!0)]),d.value?.type!=="input"?(L(),X("div",iK,[T("input",{type:"checkbox",checked:j(w),onChange:O=>H(w,R),class:"w-3 h-3 text-blue-600 bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500",title:"Expor como input"},null,40,sK),I[4]||(I[4]=T("span",{class:"text-[10px] text-gray-500 dark:text-gray-400"},"Expor",-1))])):ve("",!0)]),Ve(T("input",{type:"number","onUpdate:modelValue":O=>i.value[w]=O,onInput:x,placeholder:R.placeholder||"",disabled:j(w),class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},null,40,aK),[[at,i.value[w],void 0,{number:!0}]])])):R.type==="color"?(L(),X("div",lK,[T("label",uK,[Ze(ye(R.label)+" ",1),R.required?(L(),X("span",cK,"*")):ve("",!0)]),T("div",dK,[Ve(T("input",{type:"color","onUpdate:modelValue":O=>i.value[w]=O,onInput:x,class:"w-12 h-10 border border-gray-300 dark:border-gray-600 rounded cursor-pointer"},null,40,fK),[[at,i.value[w]]]),Ve(T("input",{type:"text","onUpdate:modelValue":O=>i.value[w]=O,onInput:x,placeholder:R.placeholder||"#000000",class:"flex-1 px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono"},null,40,hK),[[at,i.value[w]]])])])):R.type==="boolean"?(L(),X("div",gK,[T("div",pK,[T("div",mK,[Ve(T("input",{type:"checkbox","onUpdate:modelValue":O=>i.value[w]=O,onChange:x,disabled:j(w),class:"w-4 h-4 text-blue-600 bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},null,40,yK),[[Ns,i.value[w]]]),T("label",vK,ye(R.label),1)]),d.value?.type!=="input"?(L(),X("div",_K,[T("input",{type:"checkbox",checked:j(w),onChange:O=>H(w,R),class:"w-3 h-3 text-blue-600 bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500",title:"Expor como input"},null,40,bK),I[5]||(I[5]=T("span",{class:"text-[10px] text-gray-500 dark:text-gray-400"},"Expor",-1))])):ve("",!0)])])):R.type==="date"?(L(),X("div",wK,[T("div",xK,[T("label",$K,[Ze(ye(R.label)+" ",1),R.required?(L(),X("span",EK,"*")):ve("",!0)]),d.value?.type!=="input"?(L(),X("div",SK,[T("input",{type:"checkbox",checked:j(w),onChange:O=>H(w,R),class:"w-3 h-3 text-blue-600 bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500",title:"Expor como input"},null,40,NK),I[6]||(I[6]=T("span",{class:"text-[10px] text-gray-500 dark:text-gray-400"},"Expor",-1))])):ve("",!0)]),Ve(T("input",{type:"date","onUpdate:modelValue":O=>i.value[w]=O,onInput:x,placeholder:R.placeholder||"",disabled:j(w),class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},null,40,kK),[[at,i.value[w]]])])):R.type==="variableSelector"?(L(),X("div",CK,[T("label",IK,[Ze(ye(R.label)+" ",1),R.required?(L(),X("span",TK,"*")):ve("",!0)]),T("div",AK,[Ve(T("select",{"onUpdate:modelValue":O=>i.value[w]=O,onChange:x,class:"flex-1 px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[I[7]||(I[7]=T("option",{value:""},"-- Select or type below --",-1)),(L(!0),X(xe,null,nt(l.value,O=>(L(),X("option",{key:O,value:O},ye(O),9,DK))),128))],40,MK),[[En,i.value[w]]])]),R.allowCustom?Ve((L(),X("input",{key:0,type:"text","onUpdate:modelValue":O=>i.value[w]=O,onInput:x,placeholder:R.placeholder||"Or type custom name",class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,40,OK)),[[at,i.value[w]]]):ve("",!0)])):R.type==="array"&&w==="parameters"&&d.value?.type==="input"?(L(),X("div",PK,[T("label",RK,ye(R.label),1),R.description?(L(),X("div",zK,ye(R.description),1)):ve("",!0),i.value[w]&&i.value[w].length>0?(L(),X("div",VK,[(L(!0),X(xe,null,nt(i.value[w],(O,C)=>(L(),X("div",{key:C,class:"p-3 bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md space-y-2"},[T("div",HK,[T("span",BK,"Parameter "+ye(C+1),1),T("button",{onClick:F=>W(w,C),class:"text-red-500 hover:text-red-700 dark:hover:text-red-400",title:"Remove parameter"},[ue(He,{icon:"material-symbols:delete",size:16})],8,FK)]),Ve(T("input",{type:"text","onUpdate:modelValue":F=>O.name=F,onInput:x,placeholder:"Parameter name",class:"w-full px-2 py-1 text-xs bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"},null,40,LK),[[at,O.name]]),Ve(T("select",{"onUpdate:modelValue":F=>O.type=F,onChange:x,class:"w-full px-2 py-1 text-xs bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"},[...I[8]||(I[8]=[Bs('<option value="any" data-v-30ec1f58>Any</option><option value="string" data-v-30ec1f58>String</option><option value="number" data-v-30ec1f58>Number</option><option value="integer" data-v-30ec1f58>Integer</option><option value="float" data-v-30ec1f58>Float</option><option value="boolean" data-v-30ec1f58>Boolean</option><option value="object" data-v-30ec1f58>Object</option><option value="array" data-v-30ec1f58>Array</option><option value="date" data-v-30ec1f58>Date</option>',9)])],40,UK),[[En,O.type]]),O.type==="string"||O.type==="any"?Ve((L(),X("input",{key:0,type:"text","onUpdate:modelValue":F=>O.defaultValue=F,onInput:x,placeholder:"Default value (optional)",class:"w-full px-2 py-1 text-xs bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"},null,40,GK)),[[at,O.defaultValue]]):O.type==="number"||O.type==="integer"||O.type==="float"?Ve((L(),X("input",{key:1,type:"number","onUpdate:modelValue":F=>O.defaultValue=F,onInput:x,step:O.type==="integer"?"1":"any",placeholder:"Default value (optional)",class:"w-full px-2 py-1 text-xs bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"},null,40,ZK)),[[at,O.defaultValue,void 0,{number:!0}]]):O.type==="boolean"?(L(),X("div",YK,[Ve(T("input",{type:"checkbox","onUpdate:modelValue":F=>O.defaultValue=F,onChange:x,class:"w-3 h-3 text-blue-600 bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500"},null,40,XK),[[Ns,O.defaultValue]]),T("label",WK,"Default: "+ye(O.defaultValue?"true":"false"),1)])):O.type==="date"?Ve((L(),X("input",{key:3,type:"date","onUpdate:modelValue":F=>O.defaultValue=F,onInput:x,class:"w-full px-2 py-1 text-xs bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-1 focus:ring-blue-500"},null,40,jK)),[[at,O.defaultValue]]):O.type==="array"||O.type==="object"?Ve((L(),X("textarea",{key:4,"onUpdate:modelValue":F=>O.defaultValue=F,onInput:x,placeholder:O.type==="array"?"[1, 2, 3]":"{key: value}",rows:"2",class:"w-full px-2 py-1 text-xs bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 font-mono"},null,40,qK)),[[at,O.defaultValue]]):ve("",!0),T("div",KK,[Ve(T("input",{type:"checkbox","onUpdate:modelValue":F=>O.required=F,onChange:x,class:"w-3 h-3 text-blue-600 bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500"},null,40,JK),[[Ns,O.required]]),I[9]||(I[9]=T("label",{class:"text-xs text-gray-600 dark:text-gray-400"},"Required",-1))])]))),128))])):ve("",!0),T("button",{onClick:O=>G(w),class:"w-full px-3 py-2 flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 text-white text-xs font-medium rounded-md transition-colors"},[ue(He,{icon:"material-symbols:add",size:14}),I[10]||(I[10]=Ze(" Add Parameter ",-1))],8,QK)])):R.type==="array"?(L(),X("div",eJ,[T("label",tJ,[Ze(ye(R.label)+" ",1),R.required?(L(),X("span",nJ,"*")):ve("",!0)]),I[11]||(I[11]=T("div",{class:"text-xs text-gray-500 dark:text-gray-400 italic"}," Complex array editing - see node documentation ",-1))])):R.type==="fieldSelector"?(L(),X("div",oJ,[T("label",rJ,[Ze(ye(R.label)+" ",1),R.required?(L(),X("span",iJ,"*")):ve("",!0)]),R.description?(L(),X("div",sJ,ye(R.description),1)):ve("",!0),i.value[w]&&i.value[w].length>0?(L(),X("div",aJ,[T("div",lJ,ye(R.singleSelect?"Selected Field:":"Selected Fields:"),1),T("div",uJ,[(L(!0),X(xe,null,nt(i.value[w],(O,C)=>(L(),X("div",{key:C,class:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 text-xs rounded"},[d.value?.type==="field-extractor"&&!R.singleSelect?(L(),X("button",{key:0,onClick:F=>Z(O),class:"hover:opacity-70 cursor-pointer",title:z(O)?"Disable individual output":"Enable individual output"},[ue(He,{icon:z(O)?"material-symbols:visibility":"material-symbols:visibility-off",size:14},null,8,["icon"])],8,cJ)):ve("",!0),T("span",null,ye(O),1),i.value.fieldTypes&&i.value.fieldTypes[O]?(L(),X("span",{key:1,class:"text-[10px] px-1 py-0.5 bg-white dark:bg-gray-800 rounded opacity-70",title:`Type: ${i.value.fieldTypes[O]}`},ye(i.value.fieldTypes[O]),9,dJ)):ve("",!0),T("button",{onClick:F=>A(w,C),class:"hover:text-red-600 dark:hover:text-red-400 cursor-pointer"}," × ",8,fJ)]))),128))])])):ve("",!0),T("div",hJ,[I[12]||(I[12]=T("div",{class:"text-xs font-medium text-gray-600 dark:text-gray-400"},"Available Fields:",-1)),u.value.length>0?(L(),X("div",gJ,[(L(!0),X(xe,null,nt(u.value,O=>(L(),X("button",{key:O,onClick:C=>N(w,O),disabled:i.value[w]?.includes(O),class:We(["block w-full text-left px-2 py-1 text-xs rounded hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",{"bg-gray-50 dark:bg-gray-800":!i.value[w]?.includes(O),"bg-gray-200 dark:bg-gray-600":i.value[w]?.includes(O)}])},ye(O),11,pJ))),128))])):(L(),X("div",mJ," No data connected. Connect a data source to see available fields. "))])])):ve("",!0)]))),128)),Object.keys(m.value).length===0?(L(),X("div",yJ,[...I[13]||(I[13]=[T("p",{class:"text-sm text-gray-500 dark:text-gray-400 italic"}," No configuration options available for this node. ",-1)])])):ve("",!0)]))}},_J=wt(vJ,[["__scopeId","data-v-30ec1f58"]]),bJ={class:"output-properties space-y-4"},wJ={class:"dynamic-inputs-section"},xJ={key:0,class:"space-y-2 mb-3"},$J=["onUpdate:modelValue"],EJ=["onUpdate:modelValue"],SJ=["onClick"],NJ={key:1,class:"text-center py-4 text-gray-500 dark:text-gray-400 text-sm border border-dashed border-gray-300 dark:border-gray-600 rounded"},kJ={class:"destination-section"},CJ={key:0,class:"destination-config space-y-3"},IJ={key:0},TJ={key:1,class:"space-y-3"},AJ={class:"flex items-center"},MJ={key:2,class:"space-y-3"},DJ={key:3,class:"space-y-3"},OJ={key:4,class:"space-y-3"},PJ={__name:"OutputProperties",props:{nodeId:{type:String,required:!0}},setup(e){const t=e,n=St(),o=de({destination:"display",...n.nodeData[t.nodeId]}),r=de(n.nodeData[t.nodeId]?.dynamicInputs||[]),i=de(n.nodeData[t.nodeId]?.destinationConfig||s(o.value.destination));function s(h){return{apiResponse:{format:"wrapped"},webhook:{url:"",method:"POST",headers:"{}",retry:!0},email:{to:"",subject:"FlowForge Report",format:"html"},googleSheets:{connectionId:"",spreadsheetUrl:"",sheetName:"Sheet1",writeMode:"append"},download:{filename:"output",format:"json"}}[h]||{}}function a(){const h={id:`input-${Date.now()}`,key:"",type:"any"};r.value.push(h),u()}function l(h){r.value.splice(h,1),u()}function u(){const h=r.value.filter(m=>m.key).map(m=>({id:`data-${m.key}`,label:m.key,type:m.type||"any",position:"left"}));n.updateNodeData(t.nodeId,{dynamicInputs:[...r.value],dynamicHandles:{inputs:h,_updated:Date.now()}})}function c(){const h=r.value.filter(m=>m.key).map(m=>({id:`data-${m.key}`,label:m.key,type:m.type||"any",position:"left"}));n.updateNodeData(t.nodeId,{dynamicHandles:{inputs:h,_updated:Date.now()}})}function d(){n.updateNodeData(t.nodeId,{destination:o.value.destination}),i.value=s(o.value.destination),f()}function f(){n.updateNodeData(t.nodeId,{destinationConfig:i.value})}return Se(()=>o.value.destination,h=>{i.value=s(h),f()}),tt(()=>{r.value.length>0&&c()}),(h,m)=>(L(),X("div",bJ,[T("div",wJ,[T("div",{class:"flex items-center justify-between mb-3"},[m[15]||(m[15]=T("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Inputs",-1)),T("button",{onClick:a,class:"px-2 py-1 text-xs bg-blue-600 hover:bg-blue-700 text-white rounded transition-colors"}," ➕ Adicionar Input ")]),r.value.length>0?(L(),X("div",xJ,[(L(!0),X(xe,null,nt(r.value,(v,b)=>(L(),X("div",{key:v.id,class:"flex items-center gap-2 p-2 bg-gray-50 dark:bg-gray-800 rounded"},[Ve(T("input",{"onUpdate:modelValue":x=>v.key=x,onInput:u,placeholder:"Nome do input",class:"flex-1 px-2 py-1 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},null,40,$J),[[at,v.key]]),Ve(T("select",{"onUpdate:modelValue":x=>v.type=x,onChange:u,class:"px-2 py-1 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded"},[...m[16]||(m[16]=[Bs('<option value="any" data-v-4b02722d>Any</option><option value="string" data-v-4b02722d>String</option><option value="number" data-v-4b02722d>Number</option><option value="boolean" data-v-4b02722d>Boolean</option><option value="object" data-v-4b02722d>Object</option><option value="array" data-v-4b02722d>Array</option>',6)])],40,EJ),[[En,v.type]]),T("button",{onClick:x=>l(b),class:"px-2 py-1 text-xs text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors"}," ✕ ",8,SJ)]))),128))])):(L(),X("div",NJ," Nenhum input adicionado "))]),T("div",kJ,[m[18]||(m[18]=T("label",{class:"block text-sm font-semibold text-gray-900 dark:text-white mb-2"}," Destination ",-1)),Ve(T("select",{"onUpdate:modelValue":m[0]||(m[0]=v=>o.value.destination=v),onChange:d,class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[...m[17]||(m[17]=[Bs('<option value="display" data-v-4b02722d>Display Only</option><option value="apiResponse" data-v-4b02722d>API Response</option><option value="webhook" data-v-4b02722d>Webhook</option><option value="email" data-v-4b02722d>Email</option><option value="googleSheets" data-v-4b02722d>Google Sheets</option><option value="download" data-v-4b02722d>Download</option>',6)])],544),[[En,o.value.destination]])]),o.value.destination&&o.value.destination!=="display"?(L(),X("div",CJ,[m[38]||(m[38]=T("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Configuração do Destination",-1)),o.value.destination==="apiResponse"?(L(),X("div",IJ,[m[20]||(m[20]=T("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"}," Formato de Resposta ",-1)),Ve(T("select",{"onUpdate:modelValue":m[1]||(m[1]=v=>i.value.format=v),onChange:f,class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md"},[...m[19]||(m[19]=[T("option",{value:"data_only"},"Só dados",-1),T("option",{value:"wrapped"},"{ success, data }",-1),T("option",{value:"full"},"{ success, flowId, executedAt, data }",-1)])],544),[[En,i.value.format]])])):o.value.destination==="webhook"?(L(),X("div",TJ,[T("div",null,[m[21]||(m[21]=T("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},[Ze(" URL "),T("span",{class:"text-red-500"},"*")],-1)),Ve(T("input",{"onUpdate:modelValue":m[2]||(m[2]=v=>i.value.url=v),onInput:f,placeholder:"https://...",class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md"},null,544),[[at,i.value.url]])]),T("div",null,[m[23]||(m[23]=T("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"}," Método HTTP ",-1)),Ve(T("select",{"onUpdate:modelValue":m[3]||(m[3]=v=>i.value.method=v),onChange:f,class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md"},[...m[22]||(m[22]=[T("option",{value:"POST"},"POST",-1),T("option",{value:"PUT"},"PUT",-1),T("option",{value:"PATCH"},"PATCH",-1)])],544),[[En,i.value.method]])]),T("div",null,[m[24]||(m[24]=T("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"}," Headers (JSON) ",-1)),Ve(T("textarea",{"onUpdate:modelValue":m[4]||(m[4]=v=>i.value.headers=v),onInput:f,rows:"3",placeholder:'{"Authorization": "Bearer ..."}',class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md font-mono"},null,544),[[at,i.value.headers]])]),T("div",null,[T("label",AJ,[Ve(T("input",{type:"checkbox","onUpdate:modelValue":m[5]||(m[5]=v=>i.value.retry=v),onChange:f,class:"w-4 h-4 text-blue-600 bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600 rounded"},null,544),[[Ns,i.value.retry]]),m[25]||(m[25]=T("span",{class:"ml-2 text-xs text-gray-700 dark:text-gray-300"},"Retry em caso de erro",-1))])])])):o.value.destination==="email"?(L(),X("div",MJ,[T("div",null,[m[26]||(m[26]=T("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},[Ze(" Para (emails separados por vírgula) "),T("span",{class:"text-red-500"},"*")],-1)),Ve(T("input",{"onUpdate:modelValue":m[6]||(m[6]=v=>i.value.to=v),onInput:f,placeholder:"user@example.com, other@example.com",class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md"},null,544),[[at,i.value.to]])]),T("div",null,[m[27]||(m[27]=T("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"}," Assunto ",-1)),Ve(T("input",{"onUpdate:modelValue":m[7]||(m[7]=v=>i.value.subject=v),onInput:f,placeholder:"Relatório FlowForge",class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md"},null,544),[[at,i.value.subject]])]),T("div",null,[m[29]||(m[29]=T("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"}," Formato ",-1)),Ve(T("select",{"onUpdate:modelValue":m[8]||(m[8]=v=>i.value.format=v),onChange:f,class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md"},[...m[28]||(m[28]=[T("option",{value:"html"},"HTML (tabela)",-1),T("option",{value:"json"},"JSON (anexo)",-1),T("option",{value:"csv"},"CSV (anexo)",-1)])],544),[[En,i.value.format]])])])):o.value.destination==="googleSheets"?(L(),X("div",DJ,[T("div",null,[m[30]||(m[30]=T("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},[Ze(" Conexão Google "),T("span",{class:"text-red-500"},"*")],-1)),ue(bE,{"service-type":"sheets",modelValue:i.value.connectionId,"onUpdate:modelValue":[m[9]||(m[9]=v=>i.value.connectionId=v),f]},null,8,["modelValue"])]),T("div",null,[m[31]||(m[31]=T("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"},[Ze(" URL da Planilha "),T("span",{class:"text-red-500"},"*")],-1)),Ve(T("input",{"onUpdate:modelValue":m[10]||(m[10]=v=>i.value.spreadsheetUrl=v),onInput:f,placeholder:"https://docs.google.com/spreadsheets/d/...",class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md"},null,544),[[at,i.value.spreadsheetUrl]])]),T("div",null,[m[32]||(m[32]=T("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"}," Nome da Aba ",-1)),Ve(T("input",{"onUpdate:modelValue":m[11]||(m[11]=v=>i.value.sheetName=v),onInput:f,placeholder:"Sheet1",class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md"},null,544),[[at,i.value.sheetName]])]),T("div",null,[m[34]||(m[34]=T("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"}," Modo de Escrita ",-1)),Ve(T("select",{"onUpdate:modelValue":m[12]||(m[12]=v=>i.value.writeMode=v),onChange:f,class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md"},[...m[33]||(m[33]=[T("option",{value:"append"},"Adicionar no final",-1),T("option",{value:"replace"},"Substituir tudo",-1),T("option",{value:"update"},"Atualizar a partir de A1",-1)])],544),[[En,i.value.writeMode]])])])):o.value.destination==="download"?(L(),X("div",OJ,[T("div",null,[m[35]||(m[35]=T("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"}," Nome do Arquivo ",-1)),Ve(T("input",{"onUpdate:modelValue":m[13]||(m[13]=v=>i.value.filename=v),onInput:f,placeholder:"output",class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md"},null,544),[[at,i.value.filename]])]),T("div",null,[m[37]||(m[37]=T("label",{class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1"}," Formato ",-1)),Ve(T("select",{"onUpdate:modelValue":m[14]||(m[14]=v=>i.value.format=v),onChange:f,class:"w-full px-3 py-2 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md"},[...m[36]||(m[36]=[T("option",{value:"json"},"JSON",-1),T("option",{value:"csv"},"CSV",-1),T("option",{value:"excel"},"Excel (via CSV)",-1)])],544),[[En,i.value.format]])])])):ve("",!0)])):ve("",!0)]))}},RJ=wt(PJ,[["__scopeId","data-v-4b02722d"]]),zJ={class:"array-merge-properties space-y-4"},VJ={class:"dynamic-inputs-section"},HJ={key:0,class:"space-y-2 mb-3"},BJ={class:"text-xs text-gray-500 dark:text-gray-400 w-8"},FJ=["onUpdate:modelValue"],LJ=["onClick","disabled"],UJ={key:1,class:"w-8"},GJ={class:"remove-duplicates-section"},ZJ={class:"flex items-center cursor-pointer"},YJ={__name:"ArrayMergeProperties",props:{nodeId:{type:String,required:!0}},setup(e){const t=e,n=St(),o=de({removeDuplicates:!1,...n.nodeData[t.nodeId]}),r=de(n.nodeData[t.nodeId]?.arrayInputs||i());function i(){return[{id:"array1",label:"Array 1"},{id:"array2",label:"Array 2"}]}function s(){const d=r.value.length+1,f={id:`array${d}`,label:`Array ${d}`};r.value.push(f),l()}function a(d){r.value.length<=2||(r.value.splice(d,1),l())}function l(){n.updateNodeData(t.nodeId,{arrayInputs:r.value}),u()}function u(){const d=r.value.map(f=>({id:`data-${f.id}`,label:f.label||f.id,type:"array",position:"left",required:!1}));n.updateNodeData(t.nodeId,{dynamicHandles:{inputs:d}})}function c(){n.updateNodeData(t.nodeId,{removeDuplicates:o.value.removeDuplicates})}return tt(()=>{r.value.length>0&&u()}),(d,f)=>(L(),X("div",zJ,[T("div",VJ,[T("div",{class:"flex items-center justify-between mb-3"},[f[1]||(f[1]=T("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Arrays para Mesclar",-1)),T("button",{onClick:s,class:"px-2 py-1 text-xs bg-teal-600 hover:bg-teal-700 text-white rounded transition-colors"}," ➕ Adicionar Array ")]),r.value.length>0?(L(),X("div",HJ,[(L(!0),X(xe,null,nt(r.value,(h,m)=>(L(),X("div",{key:h.id,class:"flex items-center gap-2 p-2 bg-gray-50 dark:bg-gray-800 rounded"},[T("span",BJ,ye(m+1),1),Ve(T("input",{"onUpdate:modelValue":v=>h.label=v,onInput:l,placeholder:"Nome do array",class:"flex-1 px-2 py-1 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-teal-500"},null,40,FJ),[[at,h.label]]),r.value.length>2?(L(),X("button",{key:0,onClick:v=>a(m),class:"px-2 py-1 text-xs text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",disabled:r.value.length<=2}," ✕ ",8,LJ)):(L(),X("span",UJ))]))),128))])):ve("",!0),f[2]||(f[2]=T("div",{class:"text-xs text-gray-500 dark:text-gray-400 mt-2"}," Mínimo de 2 arrays ",-1))]),T("div",GJ,[T("label",ZJ,[Ve(T("input",{type:"checkbox","onUpdate:modelValue":f[0]||(f[0]=h=>o.value.removeDuplicates=h),onChange:c,class:"w-4 h-4 text-teal-600 bg-white dark:bg-gray-900 border-gray-300 dark:border-gray-600 rounded focus:ring-teal-500"},null,544),[[Ns,o.value.removeDuplicates]]),f[3]||(f[3]=T("span",{class:"ml-2 text-sm text-gray-700 dark:text-gray-300"},"Remover Duplicados",-1))]),f[4]||(f[4]=T("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-1 ml-6"}," Remove itens duplicados do array resultante ",-1))])]))}},XJ=wt(YJ,[["__scopeId","data-v-36d74172"]]),WJ={class:"object-create-properties space-y-4"},jJ={class:"dynamic-properties-section"},qJ={key:0,class:"space-y-2 mb-3"},KJ={class:"text-xs text-gray-500 dark:text-gray-400 w-8"},JJ=["onUpdate:modelValue"],QJ=["onClick","disabled"],eQ={key:1,class:"w-8"},tQ={__name:"ObjectCreateProperties",props:{nodeId:{type:String,required:!0}},setup(e){const t=e,n=St(),o=de(n.nodeData[t.nodeId]?.properties||r());function r(){return[{id:"prop1",key:"key1"}]}function i(){const u=o.value.length+1;o.value.push({id:`prop${u}`,key:`key${u}`}),a()}function s(u){o.value.length<=1||(o.value.splice(u,1),a())}function a(){n.updateNodeData(t.nodeId,{properties:o.value}),l()}function l(){const u=o.value.map(c=>({id:`data-${c.id}`,label:c.key||c.id,type:"any",position:"left",required:!1}));n.updateNodeData(t.nodeId,{dynamicHandles:{inputs:u}})}return tt(()=>{o.value.length>0&&l()}),(u,c)=>(L(),X("div",WJ,[T("div",jJ,[T("div",{class:"flex items-center justify-between mb-3"},[c[0]||(c[0]=T("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Propriedades do Objeto",-1)),T("button",{onClick:i,class:"px-2 py-1 text-xs bg-blue-600 hover:bg-blue-700 text-white rounded transition-colors"}," ➕ Adicionar Propriedade ")]),o.value.length>0?(L(),X("div",qJ,[(L(!0),X(xe,null,nt(o.value,(d,f)=>(L(),X("div",{key:d.id,class:"flex items-center gap-2 p-2 bg-gray-50 dark:bg-gray-800 rounded"},[T("span",KJ,ye(f+1),1),Ve(T("input",{"onUpdate:modelValue":h=>d.key=h,onInput:a,placeholder:"Nome da chave",class:"flex-1 px-2 py-1 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},null,40,JJ),[[at,d.key]]),o.value.length>1?(L(),X("button",{key:0,onClick:h=>s(f),class:"px-2 py-1 text-xs text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",disabled:o.value.length<=1}," ✕ ",8,QJ)):(L(),X("span",eQ))]))),128))])):ve("",!0),c[1]||(c[1]=T("div",{class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},"Mínimo de 1 propriedade",-1))])]))}},nQ={class:"array-create-properties space-y-4"},oQ={class:"dynamic-items-section"},rQ={key:0,class:"space-y-2 mb-3"},iQ={class:"text-xs text-gray-500 dark:text-gray-400 w-8"},sQ=["onUpdate:modelValue"],aQ=["onClick","disabled"],lQ={key:1,class:"w-8"},uQ={__name:"ArrayCreateProperties",props:{nodeId:{type:String,required:!0}},setup(e){const t=e,n=St(),o=de(n.nodeData[t.nodeId]?.items||r());function r(){return[{id:"item1",label:"Item 1"}]}function i(){const u=o.value.length+1;o.value.push({id:`item${u}`,label:`Item ${u}`}),a()}function s(u){o.value.length<=1||(o.value.splice(u,1),a())}function a(){n.updateNodeData(t.nodeId,{items:o.value}),l()}function l(){const u=o.value.map(c=>({id:`data-${c.id}`,label:c.label||c.id,type:"any",position:"left",required:!1}));n.updateNodeData(t.nodeId,{dynamicHandles:{inputs:u}})}return tt(()=>{o.value.length>0&&l()}),(u,c)=>(L(),X("div",nQ,[T("div",oQ,[T("div",{class:"flex items-center justify-between mb-3"},[c[0]||(c[0]=T("h4",{class:"text-sm font-semibold text-gray-900 dark:text-white"},"Itens do Array",-1)),T("button",{onClick:i,class:"px-2 py-1 text-xs bg-purple-600 hover:bg-purple-700 text-white rounded transition-colors"}," ➕ Adicionar Item ")]),o.value.length>0?(L(),X("div",rQ,[(L(!0),X(xe,null,nt(o.value,(d,f)=>(L(),X("div",{key:d.id,class:"flex items-center gap-2 p-2 bg-gray-50 dark:bg-gray-800 rounded"},[T("span",iQ,ye(f+1),1),Ve(T("input",{"onUpdate:modelValue":h=>d.label=h,onInput:a,placeholder:"Nome do item",class:"flex-1 px-2 py-1 text-sm bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded focus:outline-none focus:ring-2 focus:ring-purple-500"},null,40,sQ),[[at,d.label]]),o.value.length>1?(L(),X("button",{key:0,onClick:h=>s(f),class:"px-2 py-1 text-xs text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",disabled:o.value.length<=1}," ✕ ",8,aQ)):(L(),X("span",lQ))]))),128))])):ve("",!0),c[1]||(c[1]=T("div",{class:"text-xs text-gray-500 dark:text-gray-400 mt-2"},"Mínimo de 1 item",-1))])]))}},cQ={key:0,class:"flex-1 flex flex-col items-center justify-center p-8"},dQ={key:1,class:"h-full flex flex-col"},fQ={class:"flex items-center p-4 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"},hQ={class:"w-10 h-10 flex items-center justify-center bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg mr-3"},gQ={class:"flex-1"},pQ={class:"text-base font-semibold text-gray-900 dark:text-gray-100 m-0"},mQ={class:"text-xs text-gray-500 dark:text-gray-400 m-0 mt-0.5"},yQ={class:"flex-1 overflow-y-auto p-4"},vQ={key:1,class:"mb-6"},_Q={class:"p-4 border-t border-gray-200 dark:border-gray-700"},bQ={__name:"PropertiesPanel",props:{selectedNode:{type:Object,default:null}},emits:["close","delete"],setup(e,{emit:t}){const n=e,o=t,r=St(),i=J(()=>n.selectedNode?n.selectedNode.type==="output"?RJ:n.selectedNode.type==="array-merge"?XJ:n.selectedNode.type==="object-create"?tQ:n.selectedNode.type==="array-create"?uQ:_J:null),s=J(()=>{if(!n.selectedNode)return{};const d=r.nodeData[n.selectedNode.id],f=d?{...d}:{};return n.selectedNode.type==="field-extractor"&&(f.selectedFields||(f.selectedFields=[]),f.fieldOutputsEnabled||(f.fieldOutputsEnabled={}),f.fieldTypes||(f.fieldTypes={})),n.selectedNode.type==="output"&&!f.outputFields&&(f.outputFields=[]),f}),a=()=>{},l=()=>{n.selectedNode&&(r.removeNode(n.selectedNode.id),o("delete"))},u=d=>({input:"material-symbols:input",connector:"material-symbols:cable","field-extractor":"material-symbols:filter-alt","array-processor":"material-symbols:list",add:"material-symbols:add",subtract:"material-symbols:remove",multiply:"material-symbols:close",divide:"material-symbols:percent",variable:"material-symbols:bookmark",output:"material-symbols:output"})[d]||"material-symbols:view-in-ar",c=d=>({input:"Input Parameters",connector:"Data Connector","field-extractor":"Field Extractor","array-processor":"Array Processor",add:"Addition",subtract:"Subtraction",multiply:"Multiplication",divide:"Division",variable:"Variable",output:"Output"})[d]||d;return(d,f)=>(L(),X("div",{class:We(["w-80 h-full bg-white dark:bg-gray-900 border-l border-gray-200 dark:border-gray-700 flex flex-col transition-transform duration-300",{visible:e.selectedNode}])},[e.selectedNode?(L(),X("div",dQ,[T("div",fQ,[T("div",hQ,[ue(He,{icon:u(e.selectedNode.type),size:20,class:"text-gray-600 dark:text-gray-300"},null,8,["icon"])]),T("div",gQ,[T("h3",pQ,ye(e.selectedNode.data?.label||"Node"),1),T("p",mQ,ye(c(e.selectedNode.type)),1)]),T("button",{onClick:f[0]||(f[0]=h=>d.$emit("close")),class:"w-8 h-8 flex items-center justify-center bg-transparent border-none rounded-md text-gray-500 dark:text-gray-400 cursor-pointer transition-colors duration-200 hover:bg-white dark:hover:bg-gray-900 hover:text-gray-700 dark:hover:text-gray-200"},[ue(He,{icon:"material-symbols:close",size:16})])]),T("div",yQ,[i.value?(L(),Ye(Kt(i.value),{key:0,"node-id":e.selectedNode.id,"local-data":s.value,onUpdateNodeData:a},null,40,["node-id","local-data"])):e.selectedNode?(L(),X("div",vQ,[...f[2]||(f[2]=[T("div",{class:"p-4 text-center text-xs text-gray-500 dark:text-gray-400 italic bg-gray-50 dark:bg-gray-800 rounded-md border border-dashed border-gray-200 dark:border-gray-700"}," No specific properties available for this node type. ",-1)])])):ve("",!0)]),T("div",_Q,[T("button",{onClick:l,class:"w-full px-2.5 py-2.5 flex items-center justify-center gap-2 bg-white dark:bg-gray-900 hover:bg-gray-50 dark:hover:bg-gray-800 border border-red-600 hover:border-red-700 rounded-md text-red-600 hover:text-red-700 text-sm font-medium cursor-pointer transition-colors"},[ue(He,{icon:"material-symbols:delete",size:16}),f[3]||(f[3]=Ze(" Delete Node ",-1))])])])):(L(),X("div",cQ,[ue(He,{icon:"material-symbols:view-in-ar",size:48,class:"text-gray-400 dark:text-gray-500"}),f[1]||(f[1]=T("p",{class:"mt-4 text-gray-500 dark:text-gray-400 text-sm text-center"},"Select a node to view its properties",-1))]))],2))}},wQ=wt(bQ,[["__scopeId","data-v-5072810e"]]),xQ={class:"px-2 py-2"},$Q={class:"relative"},EQ=["onKeydown"],SQ={class:"px-3 py-1 text-11 font-semibold text-flow-text-muted dark:text-flow-text-muted-dark uppercase tracking-wider"},NQ={class:"flex flex-col max-h-[400px] overflow-y-auto"},kQ={key:0,class:"px-3 py-4 text-center text-sm text-flow-text-muted dark:text-flow-text-muted-dark"},CQ=["onClick","onMouseenter"],IQ={class:"flex-1 min-w-0"},TQ=["innerHTML"],AQ={key:0,class:"text-xs text-flow-text-muted dark:text-flow-text-muted-dark truncate"},MQ={class:"text-10 text-flow-text-muted dark:text-flow-text-muted-dark uppercase tracking-wide"},DQ={__name:"ContextMenu",props:{show:{type:Boolean,required:!0},position:{type:Object,required:!0},nodes:{type:Array,required:!0}},emits:["create-node","close"],setup(e,{emit:t}){const n=e,o=t,r=St(),i=de(null),s=de(""),a=de(0),l=J(()=>n.nodes&&n.nodes.length>0?n.nodes:r.nodeCatalog?.nodes||[]),u=J(()=>r.nodeCatalog?.categories||[]),c=J(()=>{if(!s.value.trim())return l.value;const b=s.value.toLowerCase();return l.value.filter(N=>{const S=N.label?.toLowerCase().includes(b),A=N.description?.toLowerCase().includes(b),G=d(N.category).toLowerCase().includes(b),W=N.type?.toLowerCase().includes(b);return S||A||G||W})});function d(b){return u.value.find(N=>N.id===b)?.label||b||""}function f(b){if(!s.value.trim()||!b)return b;const x=s.value,N=new RegExp(`(${x})`,"gi");return b.replace(N,'<mark class="bg-yellow-200 dark:bg-yellow-700 px-0.5 rounded">$1</mark>')}function h(){a.value<c.value.length-1&&a.value++}function m(){a.value>0&&a.value--}function v(){const b=c.value[a.value];b&&o("create-node",b.type)}return Se(()=>n.show,(b,x)=>{b?bt(()=>{i.value?.focus()}):(s.value="",a.value=0)}),Se(s,()=>{a.value=0}),(b,x)=>e.show?(L(),X("div",{key:0,style:qe({position:"fixed",left:e.position.x+"px",top:e.position.y+"px",zIndex:99999,backgroundColor:"white",border:"3px solid red"}),class:"rounded-lg shadow-2xl p-2 min-w-[280px] max-w-[400px]",onClick:x[2]||(x[2]=oi(()=>{},["stop"]))},[T("div",xQ,[T("div",$Q,[ue(He,{icon:"material-symbols:search",size:14,class:"absolute left-2 top-1/2 -translate-y-1/2 text-flow-text-muted dark:text-flow-text-muted-dark"}),Ve(T("input",{ref_key:"searchInput",ref:i,"onUpdate:modelValue":x[0]||(x[0]=N=>s.value=N),type:"text",placeholder:"Buscar nodes...",class:"w-full pl-8 pr-3 py-1.5 text-sm bg-white dark:bg-gray-700 border border-flow-border dark:border-flow-border-dark rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-flow-text dark:text-flow-text-dark",onKeydown:[Fa(oi(h,["prevent"]),["down"]),Fa(oi(m,["prevent"]),["up"]),Fa(oi(v,["prevent"]),["enter"]),x[1]||(x[1]=Fa(N=>b.$emit("close"),["esc"]))]},null,40,EQ),[[at,s.value]])])]),T("div",SQ,ye(s.value?`${c.value.length} encontrado(s)`:"Quick Add"),1),T("div",NQ,[c.value.length===0?(L(),X("div",kQ,' Nenhum node encontrado para "'+ye(s.value)+'" ',1)):ve("",!0),(L(!0),X(xe,null,nt(c.value,(N,S)=>(L(),X("button",{key:N.type,onClick:A=>b.$emit("create-node",N.type),onMouseenter:A=>a.value=S,class:We(["flex items-center gap-2.5 px-3 py-2 bg-transparent border-none rounded text-flow-text-secondary dark:text-flow-text-secondary-dark text-sm text-left cursor-pointer transition-all duration-150",S===a.value?"bg-blue-100 dark:bg-blue-900/30 scale-[1.02]":"hover:bg-flow-surface-hover dark:hover:bg-flow-surface-hover-dark hover:scale-[1.02]"])},[T("div",{class:"w-6 h-6 rounded flex items-center justify-center flex-shrink-0",style:qe({backgroundColor:N.color+"20",color:N.color})},[ue(He,{icon:N.icon,size:14},null,8,["icon"])],4),T("div",IQ,[T("div",{class:"font-medium",innerHTML:f(N.label)},null,8,TQ),N.description?(L(),X("div",AQ,ye(N.description),1)):ve("",!0)]),T("div",MQ,ye(d(N.category)),1)],42,CQ))),128))]),x[3]||(x[3]=T("div",{class:"px-3 py-1.5 border-t border-flow-border dark:border-flow-border-dark text-10 text-flow-text-muted dark:text-flow-text-muted-dark"},[T("span",{class:"inline-flex items-center gap-1"},[T("kbd",{class:"px-1.5 py-0.5 bg-white dark:bg-gray-700 border border-flow-border rounded text-9"},"↑↓"),Ze(" navegar "),T("kbd",{class:"px-1.5 py-0.5 bg-white dark:bg-gray-700 border border-flow-border rounded text-9 ml-2"},"Enter"),Ze(" selecionar ")])],-1))],4)):ve("",!0)}};function OQ(e,t){const n=St();return{dynamicHandles:J(()=>{if(!n.nodes.find(l=>l.id===e))return[];const i=n.nodeData[e];if(!i)return[];const s=[],a=t.value||t;if(a==="field-extractor"){const l=i.selectedFields||[],u=i.fieldOutputsEnabled||{},c=i.fieldTypes||{};let d="any";const f=n.edges.filter(h=>h.target===e&&h.targetHandle==="data-input"&&h.edgeType!=="flow");if(f.length>0){const h=n.executionResults[f[0].source];if(h&&f[0].sourceHandle in h){const m=h[f[0].sourceHandle];Array.isArray(m)?d="array":typeof m=="object"&&m!==null&&(d="object")}}s.push({id:"data-out",label:"Extracted Data",type:d,position:"right"}),l.length>1&&s.push({id:"all-data",label:"All Extracted Data",type:"object",position:"right"}),l.forEach(h=>{const m=`field-${h.replace(/\./g,"-")}`,v=u[h]!==!1,b=c[h]||"any";v&&s.push({id:m,label:h,type:b,position:"right"})})}if(a==="output"){const l=i.dynamicInputs||[],u=i.dynamicHandles?.inputs||[];i.dynamicHandles?._updated,u.length>0?u.forEach(c=>{s.push({...c,position:"left"})}):l.length>0&&l.forEach(c=>{c.key&&s.push({id:`data-${c.key}`,label:c.key,type:c.type||"any",position:"left"})})}if(a==="array-merge"){const l=i.dynamicHandles?.inputs||[];l.length>0?l.forEach(u=>{s.push({...u,position:"left"})}):(i.arrayInputs||[{id:"array1",label:"Array 1"},{id:"array2",label:"Array 2"}]).forEach(c=>{s.push({id:`data-${c.id}`,label:c.label||c.id,type:"array",position:"left",required:!1})})}if(a==="object-create"){const l=i.dynamicHandles?.inputs||[];l.length>0?l.forEach(u=>{s.push({...u,position:"left"})}):(i.properties||[{id:"prop1",key:"key1"}]).forEach(c=>{s.push({id:`data-${c.id}`,label:c.key||c.id,type:"any",position:"left",required:!1})})}if(a==="array-create"){const l=i.dynamicHandles?.inputs||[];l.length>0?l.forEach(u=>{s.push({...u,position:"left"})}):(i.items||[{id:"item1",label:"Item 1"}]).forEach(c=>{s.push({id:`data-${c.id}`,label:c.label||c.id,type:"any",position:"left",required:!1})})}if(a==="input"&&(i.parameters||[]).forEach((u,c)=>{s.push({id:`param-output-${c}`,label:u.name||`Parameter ${c+1}`,type:u.type||"any",position:"right",required:u.required||!1})}),a==="string-ops"&&i.operation==="template"){const l=i.templateString||"",u=/\{([^}]+)\}/g,c=new Set;let d;for(;(d=u.exec(l))!==null;)c.add(d[1]);c.forEach(f=>{s.push({id:f,label:f,type:"any",position:"left",required:!1})})}return a!=="input"&&i.exposedFields&&Object.entries(i.exposedFields).forEach(([l,u])=>{s.push({id:`exposed-${l}`,label:u.label||l,type:u.type||"any",position:"left",required:u.required||!1})}),s})}}const PQ={"data-input":"#3b82f6","logic-control":"#a855f7",operations:"#22c55e","data-processing":"#f97316",debug:"#6b7280",organization:"#6b7280",sources:"#3b82f6",io:"#3b82f6",storage:"#3b82f6",constants:"#3b82f6",comparison:"#a855f7",logic:"#a855f7",iteration:"#a855f7",math:"#22c55e",string:"#22c55e",conversion:"#22c55e",processors:"#f97316","array-processors":"#f97316","object-processors":"#f97316"};function RQ(e){return PQ[e]||"#3b82f6"}const zQ={__name:"DataHandle",props:{type:{type:String,required:!0,validator:e=>["source","target"].includes(e)},position:{type:String,required:!0},id:{type:String,required:!0},dataType:{type:String,default:"any"},color:{type:String,default:null},top:{type:String,default:"50%"}},setup(e){const t=e,n=J(()=>t.color?t.color:sc(t.dataType)),o=J(()=>({top:t.top,[t.type==="source"?"right":"left"]:t.type==="source"?"-10px":"-7px",background:n.value,borderColor:n.value,zIndex:20,pointerEvents:"auto"}));return(r,i)=>(L(),Ye(ie(Xo),{type:e.type,position:e.position,id:e.id,style:qe(o.value),class:"data-handle-minimal"},null,8,["type","position","id","style"]))}},n_=wt(zQ,[["__scopeId","data-v-26f2bbcc"]]),VQ={__name:"ExecHandleInput",props:{position:{type:String,required:!0},id:{type:String,required:!0},top:{type:String,default:"12px"}},setup(e){const t=e,n=J(()=>({top:t.top,left:"-7px",background:"#9ca3af",borderColor:"#9ca3af",zIndex:10,pointerEvents:"auto"}));return tt(()=>{}),(o,r)=>(L(),Ye(ie(Xo),{type:"target",position:e.position,id:e.id,style:qe(n.value),connectable:!0,class:"exec-handle-input"},null,8,["position","id","style"]))}},HQ=wt(VQ,[["__scopeId","data-v-ae9498f1"]]),BQ={__name:"ExecHandleOutput",props:{position:{type:String,required:!0},id:{type:String,required:!0},top:{type:String,default:"12px"}},setup(e){const t=e,n=J(()=>({top:t.top,right:"-10px",background:"#9ca3af",borderColor:"#9ca3af",zIndex:10,pointerEvents:"auto"}));return(o,r)=>(L(),Ye(ie(Xo),{type:"source",position:e.position,id:e.id,style:qe(n.value),connectable:!0,class:"exec-handle-output"},null,8,["position","id","style"]))}},o_=wt(BQ,[["__scopeId","data-v-97a90bc8"]]),FQ={class:"node-row header-row border-b border-gray-200 dark:border-gray-700"},LQ={class:"handle-cell handle-left nodrag"},UQ={class:"content-cell px-3 py-2"},GQ={class:"flex items-center gap-2"},ZQ={class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},YQ={class:"handle-cell handle-right nodrag"},XQ={key:0},WQ={key:1,class:"flex flex-col gap-1"},jQ={class:"text-[10px] text-gray-600 dark:text-gray-400"},qQ={key:0,class:"data-section"},KQ={class:"node-row"},JQ={class:"handle-cell handle-left nodrag"},QQ={class:"content-cell"},eee={class:"content-split"},tee={class:"content-left"},nee={class:"label-list"},oee=["title"],ree={class:"text-xs text-gray-600 dark:text-gray-400"},iee={class:"content-right"},see={class:"label-list"},aee={class:"text-xs text-gray-600 dark:text-gray-400"},lee=["title"],uee={class:"handle-cell handle-right nodrag"},cee={__name:"GenericNode",props:{id:{type:String,required:!0},data:{type:Object,default:()=>({})},selected:{type:Boolean,default:!1}},setup(e){const t=e,n=St(),o=J(()=>n.nodes.find(j=>j.id===t.id)?.type),r=J(()=>{const z=n.nodes.find(j=>j.id===t.id);return z?za(z.type):null}),i=J(()=>t.selected),s=J(()=>n.executingNodes.has(t.id)),a=J(()=>n.executedNodes.has(t.id)),l=J(()=>n.errorNodes.has(t.id)),u=J(()=>{const z=r.value?.category;return z?RQ(z):"#3b82f6"});J(()=>n.executionResults[t.id]);const c=J(()=>n.nodes.find(z=>z.id===t.id)),d=J(()=>{const z=r.value;if(!z)return null;if(z.dynamicHandles&&c.value){let j="mode";const H=z.dynamicHandles.mode;z.dynamicHandles[H]||(j=H);const I=n.nodeData[t.id]?.[j]||H;return z.dynamicHandles[I]||z.handles}return z.handles}),f=J(()=>{const z=d.value;return z?.inputs?.execution&&z.inputs.execution.length>0});J(()=>{const z=d.value;return z?.outputs?.execution&&z.outputs.execution.length>0});const h=J(()=>d.value?.outputs?.execution||[]),m=J(()=>{n.edges.length;const z=v.value.filter(R=>R.position==="left"),H=d.value?.inputs?.data||[],D=n.nodeData[t.id],I=H.map(R=>{if(R.dynamic){const w=fo(o.value,{...D,_nodeId:t.id},R.id,"target",n);return{...R,type:w}}return o.value==="variable"?{...R,type:N(R.id,"target")}:R});return o.value==="string-ops"&&D?.operation==="template"||o.value==="output"||o.value==="array-merge"||o.value==="object-create"||o.value==="array-create"?z:[...I,...z]}),{dynamicHandles:v}=OQ(t.id,o),b=J(()=>{if(n.edges.length,n.savedDetectedTypes[t.id],o.value==="field-extractor"||o.value==="input")return v.value;const j=d.value?.outputs?.data||[],H=n.nodeData[t.id];return j.map(D=>{if(D.dynamic){const R=fo(o.value,{...H,_nodeId:t.id},D.id,"source",n);return{...D,type:R}}return(o.value==="variable"||o.value==="array-slice")&&D.wildcard?{...D,type:N(D.id,"source")}:["array-filter","array-sort","array-distinct","array-map","array-groupby","array-merge"].includes(o.value)&&["array","any"].includes(D.type)?{...D,type:x()}:D})}),x=()=>{const z=n.edges.filter(j=>j.target===t.id&&j.targetHandle==="data-input"&&j.edgeType!=="flow");if(z.length>0){const j=n.executionResults[z[0].source];if(j&&z[0].sourceHandle in j){const H=j[z[0].sourceHandle];if(Array.isArray(H))return"array";if(typeof H=="object"&&H!==null)return"object";if(typeof H=="number")return"number";if(typeof H=="string")return"string";if(typeof H=="boolean")return"boolean"}}return"any"},N=(z,j)=>{if(o.value==="array-slice"&&j==="source"&&z==="data-out"){const w=n.nodeData[t.id]?.operation||"first";if(["take","skip","slice"].includes(w))return"array";const O=n.edges.filter(C=>C.target===t.id&&C.targetHandle==="data-input"&&C.edgeType!=="flow");if(O.length>0){const C=n.executionResults[O[0].source];if(C&&O[0].sourceHandle in C){const F=C[O[0].sourceHandle];if(Array.isArray(F)&&F.length>0){const Y=F[0];if(typeof Y=="object"&&Y!==null)return"object";if(typeof Y=="number")return"number";if(typeof Y=="string")return"string";if(typeof Y=="boolean")return"boolean"}}}return"any"}if(o.value!=="variable")return"any";const H=n.nodeData[t.id],D=H?.variableName,I=H?.mode||"get";if(j==="source"&&z==="data-out"){if(I==="set"){const R=n.edges.filter(w=>w.target===t.id&&w.targetHandle==="data-input"&&w.edgeType!=="flow");if(R.length>0){const w=n.nodes.find(O=>O.id===R[0].source);if(w)return S(w,R[0].sourceHandle)}}if(I==="get"&&D){const R=n.nodes.filter(w=>w.type==="variable"&&w.id!==t.id&&n.nodeData[w.id]?.mode==="set"&&n.nodeData[w.id]?.variableName===D);for(const w of R){const O=n.edges.filter(C=>C.target===w.id&&C.targetHandle==="data-input"&&C.edgeType!=="flow");if(O.length>0){const C=n.nodes.find(F=>F.id===O[0].source);if(C)return S(C,O[0].sourceHandle)}}}}if(j==="target"&&z==="data-input"){const R=n.edges.filter(w=>w.source===t.id&&w.sourceHandle==="data-out"&&w.edgeType!=="flow");if(R.length>0){const w=n.nodes.find(O=>O.id===R[0].target);if(w)return S(w,R[0].targetHandle)}}return"any"},S=(z,j)=>{const H=n.nodeData[z.id];if(!H)return"any";const D={...H,_nodeId:z.id};return fo(z.type,D,j,"source",n)},A=()=>{const z=n.executionResults[t.id],j=n.savedDetectedTypes[t.id]||{},H=n.edges.filter(w=>w.target===t.id&&w.targetHandle==="exec-in"&&w.edgeType==="flow"),D=n.edges.filter(w=>w.source===t.id&&w.sourceHandle==="exec-out"&&w.edgeType==="flow"),I={};m.value.forEach(w=>{const O=n.edges.filter(C=>C.target===t.id&&C.targetHandle===w.id&&C.edgeType!=="flow");if(O.length>0){const C=O[0],F=n.executionResults[C.source],Y=n.savedDetectedTypes[C.source]||{},Q=F?.[C.sourceHandle],q=Y[C.sourceHandle]||w.type||"unknown";I[w.id]={value:Q,type:q,label:w.label}}});const R={};b.value.forEach(w=>{const O=z?.[w.id],F=w.dynamic?.mode==="config-based"?w.type||j[w.id]||"unknown":j[w.id]||w.type||"unknown";R[w.id]={value:O,type:F,label:w.label}}),console.group(`🔍 Node Debug: ${t.id} (${o.value})`),console.log("📥 INPUTS:",I),Object.entries(I).forEach(([w,O])=>{console.log(`  • ${O.label||w}:`,{type:O.type,value:O.value})}),console.log("📤 OUTPUTS:",R),Object.entries(R).forEach(([w,O])=>{console.log(`  • ${O.label||w}:`,{type:O.type,value:O.value})}),console.log("🔗 EXECUTION EDGES:",{inputs:H.length,outputs:D.length}),console.groupEnd()},G=z=>{const j=n.edges.filter(w=>w.target===t.id&&w.targetHandle===z&&w.edgeType!=="flow");if(j.length===0)return null;const H=j[0];if(!n.nodes.find(w=>w.id===H.source))return null;const I=n.executionResults[H.source];if(!I)return null;const R=typeof I=="object"&&I!==null&&H.sourceHandle in I?I[H.sourceHandle]:I;return Z(R)},W=J(()=>{const z=n.executionResults[t.id],j=n.nodes.find(H=>H.id===t.id);return H=>{if(!j||!z)return null;if(j.type==="field-extractor"){if(H.label==="All Extracted Data")return null;const I=`field-${H.label.replace(/\./g,"-")}`,R=z[I];return R==null?null:Z(R)}const D=z[H.id];return D==null?null:Z(D)}}),Z=z=>z==null?null:typeof z=="string"?z.length>15?z.substring(0,15)+"...":z:typeof z=="number"?z.toString():typeof z=="boolean"?z?"true":"false":Array.isArray(z)?`[${z.length}]`:typeof z=="object"?"{...}":String(z).substring(0,15);return(z,j)=>(L(),X("div",{class:We(["generic-node rounded-lg bg-white dark:bg-gray-800 border-2 transition-all",[i.value?"selected-node":"",s.value?"executing-node":"",a.value?"executed-node":"",l.value?"error-node":"",!s.value&&!a.value&&!l.value?"border-gray-300 dark:border-gray-600":"","hover:shadow-xl"]]),style:qe({borderLeftColor:u.value,borderLeftWidth:"4px"}),onClick:A},[T("div",FQ,[T("div",LQ,[f.value?(L(),Ye(HQ,{key:0,position:"left",id:"exec-in",top:"50%"})):ve("",!0)]),T("div",UQ,[T("div",GQ,[ue(He,{icon:r.value?.icon||"material-symbols:view-in-ar",size:16,style:qe({color:r.value?.color||"#3b82f6"})},null,8,["icon","style"]),T("span",ZQ,ye(e.data.label||r.value?.label||"Node"),1)])]),T("div",YQ,[h.value.length===1?(L(),X("div",XQ,[ue(o_,{position:"right",id:h.value[0].id,top:"50%"},null,8,["id"])])):h.value.length>1?(L(),X("div",WQ,[(L(!0),X(xe,null,nt(h.value,(H,D)=>(L(),X("div",{key:H.id,class:"flex items-center gap-1"},[T("span",jQ,ye(H.label),1),ue(o_,{position:"right",id:H.id,top:`${25+D*50}%`},null,8,["id","top"])]))),128))])):ve("",!0)])]),m.value.length>0||b.value.length>0?(L(),X("div",qQ,[T("div",KQ,[T("div",JQ,[(L(!0),X(xe,null,nt(m.value,H=>(L(),X("div",{key:H.id,class:"handle-wrapper"},[ue(n_,{id:H.id,type:"target",position:H.position||"left","data-type":H.type||"any"},null,8,["id","position","data-type"])]))),128))]),T("div",QQ,[T("div",eee,[T("div",tee,[T("div",nee,[(L(!0),X(xe,null,nt(m.value,H=>(L(),X("div",{key:H.id,class:"label-item"},[G(H.id)?(L(),X("span",{key:0,class:"text-[10px] mr-1 px-1 py-0.5 bg-gray-100 dark:bg-gray-700 rounded font-mono text-gray-500 dark:text-gray-400",title:`Value: ${G(H.id)}`},ye(G(H.id)),9,oee)):ve("",!0),T("span",ree,ye(H.label),1)]))),128))])]),T("div",iee,[T("div",see,[(L(!0),X(xe,null,nt(b.value,H=>(L(),X("div",{key:H.id,class:"label-item"},[T("span",aee,ye(H.label),1),W.value(H)?(L(),X("span",{key:0,class:"text-[10px] ml-1 px-1 py-0.5 bg-gray-100 dark:bg-gray-700 rounded font-mono text-gray-500 dark:text-gray-400",title:`Value: ${W.value(H)}`},ye(W.value(H)),9,lee)):ve("",!0)]))),128))])])])]),T("div",uee,[(L(!0),X(xe,null,nt(b.value,H=>(L(),X("div",{key:H.id,class:"handle-wrapper"},[ue(n_,{id:H.id,type:"source",position:H.position||"right","data-type":H.type||"any"},null,8,["id","position","data-type"])]))),128))])])])):ve("",!0)],6))}},Ge=wt(cee,[["__scopeId","data-v-dbc2a586"]]),dee={key:0,class:"primitive-line"},fee={key:1,class:"array-node"},hee={class:"expand-icon"},gee={class:"array-label"},pee={key:0,class:"array-children"},mee={class:"array-index"},yee={key:2,class:"object-node"},vee={class:"expand-icon"},_ee={class:"object-label"},bee={key:0,class:"object-children"},wee={class:"property-key"},xee={__name:"DataNode",props:{value:{required:!0},path:{type:Array,default:()=>[]},depth:{type:Number,default:0}},setup(e){const t=e,n=de(t.depth<2),o=()=>{n.value=!n.value},r=J(()=>{const d=t.value;return d===null?"null":d===void 0?"undefined":Array.isArray(d)?"array":typeof d=="object"?"object":typeof d=="string"?"string":typeof d=="number"?"number":typeof d=="boolean"?"boolean":"unknown"}),i=J(()=>["null","undefined","string","number","boolean"].includes(r.value)),s=J(()=>r.value==="array"),a=J(()=>r.value==="object"),l=J(()=>{const d=t.value;return d===null?"null":d===void 0?"undefined":typeof d=="string"?`"${d}"`:typeof d=="boolean"?d?"true":"false":String(d)}),u=J(()=>a.value?Object.entries(t.value):[]),c=J(()=>`{${Object.keys(t.value).length} props}`);return(d,f)=>{const h=sg("DataNode",!0);return L(),X("div",{class:"data-node",style:qe({paddingLeft:`${e.depth*12}px`})},[i.value?(L(),X("div",dee,[T("span",{class:We(["value",`type-${r.value}`])},ye(l.value),3)])):s.value?(L(),X("div",fee,[T("div",{class:"array-header",onClick:o},[T("button",hee,[ue(He,{icon:n.value?"material-symbols:arrow-drop-down":"material-symbols:arrow-right",size:14},null,8,["icon"])]),T("span",gee,"Array("+ye(e.value.length)+")",1)]),n.value?(L(),X("div",pee,[(L(!0),X(xe,null,nt(e.value,(m,v)=>(L(),X("div",{key:v,class:"array-item-row"},[T("span",mee,ye(v)+":",1),ue(h,{value:m,path:[...e.path,v],depth:e.depth+1},null,8,["value","path","depth"])]))),128))])):ve("",!0)])):a.value?(L(),X("div",yee,[T("div",{class:"object-header",onClick:o},[T("button",vee,[ue(He,{icon:n.value?"material-symbols:arrow-drop-down":"material-symbols:arrow-right",size:14},null,8,["icon"])]),T("span",_ee,ye(c.value),1)]),n.value?(L(),X("div",bee,[(L(!0),X(xe,null,nt(u.value,([m,v])=>(L(),X("div",{key:m,class:"object-property-row"},[T("span",wee,ye(m)+":",1),ue(h,{value:v,path:[...e.path,m],depth:e.depth+1},null,8,["value","path","depth"])]))),128))])):ve("",!0)])):ve("",!0)],4)}}},$ee=wt(xee,[["__scopeId","data-v-b34df0fd"]]),Eee={class:"debug-viewer-node"},See={class:"node-header"},Nee={class:"flex items-center gap-2"},kee={class:"font-medium"},Cee={key:0,class:"data-container"},Iee={key:0,class:"no-data"},Tee={key:1,class:"data-tree"},Aee={key:1,class:"collapsed-preview"},Mee={key:0,class:"preview-text"},Dee={key:1,class:"no-data-text"},Oee={__name:"DebugViewerNode",props:{id:{type:String,required:!0},data:{type:Object,default:()=>({})}},setup(e){const t=e,n=St(),o=J(()=>{const f=n.nodes.find(h=>h.id===t.id);return f?za(f.type):null}),r=J(()=>t.data?.label||o.value?.label||"Debug Viewer"),i=de(t.data?.expanded!==!1),s=()=>{i.value=!i.value},a=J(()=>{const f=n.edges.filter(b=>b.target===t.id&&b.edgeType!=="flow");if(f.length===0)return null;const h=f[0],m=n.executionResults[h.source];return m?typeof m=="object"&&m!==null&&h.sourceHandle in m?m[h.sourceHandle]:m:null}),l=J(()=>a.value!==null&&a.value!==void 0),u=J(()=>{if(!l.value)return"undefined";const f=a.value;return Array.isArray(f)?"array":f===null?"null":typeof f=="object"?"object":typeof f=="string"?"string":typeof f=="number"?"number":typeof f=="boolean"?"boolean":"unknown"}),c=J(()=>({array:"#10b981",object:"#3b82f6",string:"#f59e0b",number:"#8b5cf6",boolean:"#ec4899",null:"#6b7280",undefined:"#6b7280"})[u.value]||"#6b7280"),d=J(()=>{if(!l.value)return"No data";if(u.value==="array")return`Array (${a.value.length})`;if(u.value==="object")return`Object {${Object.keys(a.value).length} props}`;const f=a.value;return f===null?"null":f===void 0?"undefined":typeof f=="string"?`"${f}"`:typeof f=="boolean"?f?"true":"false":String(f)});return Se(()=>t.data?.expanded,f=>{f!==void 0&&(i.value=f)}),(f,h)=>(L(),X("div",Eee,[T("div",See,[T("div",Nee,[ue(He,{icon:o.value?.icon||"material-symbols:bug-report",size:16},null,8,["icon"]),T("span",kee,ye(r.value),1)]),T("button",{onClick:s,class:"expand-btn",title:"Toggle expand/collapse"},[ue(He,{icon:i.value?"material-symbols:expand-less":"material-symbols:expand-more",size:16},null,8,["icon"])])]),ue(ie(Xo),{id:`${e.id}-data-input`,type:"target",position:ie($e).Left,style:qe({background:ie(sc)("any"),top:"50%"}),class:"handle-input"},null,8,["id","position","style"]),i.value?(L(),X("div",Cee,[T("div",{class:"type-badge",style:qe({backgroundColor:c.value})},ye(u.value),5),l.value?(L(),X("div",Tee,[ue($ee,{value:a.value,path:[]},null,8,["value"])])):(L(),X("div",Iee,[ue(He,{icon:"material-symbols:info-outline",size:20}),h[0]||(h[0]=T("span",null,"No data connected",-1))]))])):(L(),X("div",Aee,[l.value?(L(),X("span",Mee,ye(d.value),1)):(L(),X("span",Dee,"No data"))]))]))}},Pee=wt(Oee,[["__scopeId","data-v-7d027dff"]]),Ree={class:"marker-header"},zee={__name:"MarkerNode",props:{id:{type:String,required:!0},selected:{type:Boolean,default:!1}},setup(e){const t=e,n=St(),o=J(()=>n.nodeData[t.id]||{}),r=J(()=>n.nodes.find(W=>W.id===t.id)),i=de(o.value.name||"Frame"),s=de(o.value.width||400),a=de(o.value.height||300),l=J(()=>{const W=o.value.color||"rgba(147, 197, 253, 0.2)";if(W.startsWith("#")){let Z=W.slice(1);Z.length===3&&(Z=Z.split("").map(D=>D+D).join(""));const z=parseInt(Z.slice(0,2),16),j=parseInt(Z.slice(2,4),16),H=parseInt(Z.slice(4,6),16);return`rgba(${z}, ${j}, ${H}, 0.2)`}return W.startsWith("rgba")?W.replace(/[\d.]+\)$/,"0.2)"):W.startsWith("rgb")?W.replace("rgb","rgba").replace(")",", 0.2)"):W}),u=J(()=>t.selected?"#3b82f6":"#d1d5db"),c=()=>{n.updateNodeData(t.id,{name:i.value})};let d=!1,f=null,h=0,m=0,v=0,b=0,x=0,N=0;const S=W=>{d=!0,f=W,h=event.clientX,m=event.clientY,v=s.value,b=a.value,x=r.value?.position?.x||0,N=r.value?.position?.y||0,document.addEventListener("mousemove",A),document.addEventListener("mouseup",G),event.stopPropagation()},A=W=>{if(!d)return;const Z=W.clientX-h,z=W.clientY-m;let j=v,H=b,D=x,I=N;switch(f){case"se":j=Math.max(200,v+Z),H=Math.max(150,b+z);break;case"ne":j=Math.max(200,v+Z),H=Math.max(150,b-z),I=N+z;break;case"sw":j=Math.max(200,v-Z),H=Math.max(150,b+z),D=x+Z;break;case"nw":j=Math.max(200,v-Z),H=Math.max(150,b-z),D=x+Z,I=N+z;break}s.value=j,a.value=H,(D!==x||I!==N)&&n.updateNodePosition(t.id,{x:D,y:I})},G=()=>{d&&n.updateNodeData(t.id,{width:s.value,height:a.value}),d=!1,f=null,document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",G)};return Or(()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",G)}),(W,Z)=>(L(),X("div",{class:"marker-node",style:qe({width:`${s.value}px`,height:`${a.value}px`,backgroundColor:l.value,borderColor:u.value,zIndex:-1})},[T("div",Ree,[Ve(T("input",{"onUpdate:modelValue":Z[0]||(Z[0]=z=>i.value=z),onInput:c,class:"marker-title",placeholder:"Frame name"},null,544),[[at,i.value]])]),T("div",{class:"resize-handle resize-se",onMousedown:Z[1]||(Z[1]=z=>S("se"))},null,32),T("div",{class:"resize-handle resize-ne",onMousedown:Z[2]||(Z[2]=z=>S("ne"))},null,32),T("div",{class:"resize-handle resize-sw",onMousedown:Z[3]||(Z[3]=z=>S("sw"))},null,32),T("div",{class:"resize-handle resize-nw",onMousedown:Z[4]||(Z[4]=z=>S("nw"))},null,32)],4))}},Vee=wt(zee,[["__scopeId","data-v-167e52f1"]]),Hee={class:"h-screen flex flex-col bg-flow-bg dark:bg-flow-bg-dark"},Bee={class:"flex flex-1 overflow-hidden"},Fee={__name:"FlowCanvas",setup(e){const t=St(),{addNodes:n,addEdges:o,project:r,viewportRef:i,updateNode:s,getSelectedEdges:a}=ct(),l=de(null),u=de({visible:!1,x:0,y:0,sourceNodeId:null,sourceHandle:null,compatibleNodes:[]}),c=de({active:!1,sourceNodeId:null,sourceHandle:null}),d=de(!1),f=de(!1),h=J(()=>t.nodes),m=J(()=>t.edges),v=J(()=>m.value.map(k=>{if(!k.source||!k.target)return null;let E={},M={},V="any";if(k.edgeType==="flow")E={stroke:"#9ca3af",strokeWidth:3},M={type:"arrowclosed",width:10,height:10,color:"#9ca3af"};else{const K=t.nodes.find(te=>te.id===k.source);if(K){V=ae(K,k.sourceHandle,"source");const te=sc(V);E={stroke:te,strokeWidth:2.5},M={type:"arrowclosed",width:8,height:8,color:te}}else E={stroke:"#3b82f6",strokeWidth:2.5},M={type:"arrowclosed",width:8,height:8,color:"#3b82f6"}}return{...k,class:k.edgeType==="flow"?"flow-edge":"data-edge",style:E,markerEnd:M,data:{...k.data,edgeType:k.edgeType,dataType:V}}}).filter(Boolean)),b=()=>{const y=new URLSearchParams(window.location.search),k=y.get("success"),E=y.get("error"),M=y.get("email");k==="true"&&(alert(`✅ Successfully connected to Google Analytics!

Account: ${M}`),window.history.replaceState({},document.title,window.location.pathname),window.dispatchEvent(new CustomEvent("oauth-success"))),E&&(alert(`❌ Connection failed: ${E}`),window.history.replaceState({},document.title,window.location.pathname))},x=de(null),N=de(null),S=de([]),A=de({x:0,y:0}),{showContextMenu:G,contextMenuPosition:W,openContextMenu:Z,closeContextMenu:z}=IW(),j=de([{type:"input",label:"Input",icon:"material-symbols:input"},{type:"connector",label:"Data Connector",icon:"material-symbols:cable"},{type:"field-extractor",label:"Field Extractor",icon:"material-symbols:filter-alt"},{type:"add",label:"Add",icon:"material-symbols:add"},{type:"output",label:"Output",icon:"material-symbols:output"}]),H={type:"default",animated:!0,style:{stroke:"#9ca3af",strokeWidth:2},markerEnd:{type:"arrowclosed",width:10,height:10,color:"#9ca3af"}},D=y=>{y.preventDefault();const k=y.dataTransfer.getData("application/vueflow");if(k)try{const E=JSON.parse(k),M=r({x:y.clientX-y.target.getBoundingClientRect().left,y:y.clientY-y.target.getBoundingClientRect().top}),V=I(E.type,M);n([V])}catch{}},I=(y,k)=>{const E={id:`${y}_${Date.now()}`,type:y,position:k,data:{},zIndex:1};switch(y){case"connector":E.data={label:"Data Connector",sourceType:"api",apiUrl:"",dataPath:""};break;case"field-extractor":E.data={label:"Field Extractor",selectedFields:[]};break;case"add":case"subtract":case"multiply":case"divide":E.data={label:y.charAt(0).toUpperCase()+y.slice(1),operation:y};break;case"output":E.data={label:"Output",customInputs:[]};break;case"constant":E.data={label:"Constant",valueType:"number",numberValue:0,stringValue:"",booleanValue:!1,objectValue:"{}",arrayValue:"[]"};break;case"compare":E.data={label:"Compare",operation:"equals"};break;case"type-conversion":E.data={label:"Type Conversion",targetType:"string"};break;case"logic":E.data={label:"Logic Operation",operation:"and"};break;case"string-ops":E.data={label:"String Operations",operation:"concat",templateString:"Hello {name}!"};break;case"marker":E.data={label:"Frame",name:"Frame",color:"rgba(147, 197, 253, 0.2)",width:400,height:300},E.zIndex=-100,E.selectable=!0,E.draggable=!0;break;case"input":E.data={label:"Input",parameters:[{name:"param1",type:"string",required:!1,defaultValue:"Hello World"}]};break;default:E.data={label:y.charAt(0).toUpperCase()+y.slice(1)}}return t.addNode(E),E},R=y=>{x.value=y.node};let w=new Map;const O=y=>{t.setDragging(!0),y.node.type==="marker"&&w.set(y.node.id,{x:y.node.position.x,y:y.node.position.y})},C=y=>{const k={x1:y.position.x,y1:y.position.y,x2:y.position.x+(y.data.width||400),y2:y.position.y+(y.data.height||300)};return h.value.filter(E=>E.id!==y.id&&E.type!=="marker").filter(E=>{E.position.x,E.position.y,E.position.x+200,E.position.y+120;const U=E.position.x+200/2,K=E.position.y+120/2;return U>=k.x1&&U<=k.x2&&K>=k.y1&&K<=k.y2})},F=y=>{},Y=y=>{t.setDragging(!1),y.node&&(t.updateNodePosition(y.node.id,y.node.position),y.node.type==="marker"&&w.has(y.node.id)&&(C(y.node).forEach(E=>{t.updateNodePosition(E.id,E.position)}),w.delete(y.node.id)))},Q=y=>{y.forEach(k=>{if(k.type==="position"&&k.position){const E=h.value.find(V=>V.id===k.id);if(E?.type==="marker"&&t.isDragging&&w.has(k.id)){const V=w.get(k.id),U=k.position.x-V.x,K=k.position.y-V.y;C({...E,position:V}).forEach(we=>{const Ee={x:we.position.x+U,y:we.position.y+K};s(we.id,{position:Ee}),t.updateNodePosition(we.id,Ee)}),w.set(k.id,k.position)}t.updateNodePosition(k.id,k.position)}else if(k.type==="remove")t.removeNode(k.id),x.value?.id===k.id&&(x.value=null);else if(k.type==="select"){const E=h.value.findIndex(M=>M.id===k.id);E!==-1&&(h.value[E].selected=k.selected,k.selected&&(x.value=h.value[E]))}})},q=y=>{y.forEach(k=>{k.type==="remove"&&t.removeEdge(k.id)})},ne=y=>{const k=y.sourceHandle?.startsWith("exec-"),E=y.targetHandle?.startsWith("exec-");if(k!==E)return!1;if(k&&E)return!0;const M=t.nodes.find(K=>K.id===y.source),V=t.nodes.find(K=>K.id===y.target);return!M||!V?!1:pG(M,y.sourceHandle,V,y.targetHandle,t)},ae=(y,k,E)=>{const V={...t.nodeData[y.id]||{},_nodeId:y.id};return fo(y.type,V,k,E,t)},fe=y=>{if(!y.source||!y.target)return;const k=y.sourceHandle?.startsWith("exec-")||y.targetHandle?.startsWith("exec-"),E=y.sourceHandle?.startsWith("exec-"),M=y.targetHandle?.startsWith("exec-");if(E!==M)return;k&&(t.edges.filter(Ee=>Ee.source===y.source&&Ee.sourceHandle===y.sourceHandle&&Ee.edgeType==="flow").forEach(Ee=>{t.removeEdge(Ee.id)}),t.edges.filter(Ee=>Ee.target===y.target&&Ee.targetHandle===y.targetHandle&&Ee.edgeType==="flow").forEach(Ee=>{t.removeEdge(Ee.id)}));let V="#9ca3af",U="any";if(!k){const te=t.nodes.find(we=>we.id===y.source);te&&(U=ae(te,y.sourceHandle,"source"),V=sc(U))}if(!y.source||!y.target)return;const K={id:`edge_${Date.now()}`,source:y.source,target:y.target,sourceHandle:y.sourceHandle,targetHandle:y.targetHandle,edgeType:k?"flow":"data",dataType:U,animated:k,style:{stroke:V,strokeWidth:k?3:2.5},markerEnd:{type:"arrowclosed",width:k?10:8,height:k?10:8,color:V}};if(!k){const te=t.nodes.find(ut=>ut.id===y.source),we=t.nodes.find(ut=>ut.id===y.target),Be=t.executionResults[y.source]?.[y.sourceHandle],it=t.executionResults[y.target]?.[y.targetHandle];console.log(`
🔗 NOVA CONEXÃO
├─ OUTPUT
│  ├─ Node: ${te?.type||"unknown"} (${y.source})
│  ├─ Parâmetro: ${y.sourceHandle}
│  └─ Valor: ${Be!==void 0?JSON.stringify(Be):"não executado ainda"}
│
└─ INPUT
   ├─ Node: ${we?.type||"unknown"} (${y.target})
   ├─ Parâmetro: ${y.targetHandle}
   └─ Valor: ${it!==void 0?JSON.stringify(it):"não executado ainda"}
    `)}t.addEdge(K),d.value=!0,setTimeout(()=>{d.value=!1},100)},se=y=>{c.value={active:!0,sourceNodeId:y.nodeId,sourceHandle:y.handleId},d.value=!1},pe=y=>{if(!c.value.active)return;if(d.value){c.value.active=!1;return}const k=document.elementFromPoint(y.clientX,y.clientY);if(k?.closest(".vue-flow__handle")){c.value.active=!1;return}if(k?.closest(".vue-flow__node")){c.value.active=!1;return}const V=t.nodes.find(Ee=>Ee.id===c.value.sourceNodeId),U=c.value.sourceHandle;if(!V||!U){c.value.active=!1;return}const K=ae(V,U,"source"),te=U.startsWith("exec-"),we=t.nodeCatalog.nodes.filter(Ee=>te?Ee.handles?.inputs?.execution?.some(it=>it.id?.startsWith("exec-")):(Ee.handles?.inputs?.data||[]).some(it=>{const ut=Oh(Ee.type,it.id);return V$(K,ut)}));u.value.sourceNodeId=V.id,u.value.sourceHandle=U,u.value.compatibleNodes=we,j.value=we,Z(y.clientX,y.clientY),f.value=!0,setTimeout(()=>{f.value=!1},100),c.value.active=!1},le=({edge:y})=>{if(!y||y.edgeType==="flow")return;const k=t.nodes.find(ut=>ut.id===y.source),E=t.nodes.find(ut=>ut.id===y.target),M=t.executionResults[y.source];t.executionResults[y.target];const V=t.savedDetectedTypes[y.source]||{},U=t.savedDetectedTypes[y.target]||{},K=M?.[y.sourceHandle],te=V[y.sourceHandle]||"unknown",we=t.getNodeDataInputs?.(y.target)||{},Ee=y.targetHandle?.replace("data-","")||"input",Be=we[Ee],ht=U[y.targetHandle]||"unknown",it=ut=>{if(ut===void 0)return"undefined";if(ut===null)return"null";const It=JSON.stringify(ut);return It.length>38?It.substring(0,38):It};console.log(`
╔═══════════════════════════════════════════════════════════════╗
║           CONEXÃO CLICADA (VALOR SENDO TRANSMITIDO)          ║
╠═══════════════════════════════════════════════════════════════╣
║                                                               ║
║  📤 OUTPUT (ORIGEM)                                           ║
║  ├─ Node: ${(k?.type||"unknown").padEnd(47)}║
║  ├─ ID: ${(y.source||"unknown").padEnd(49)}║
║  ├─ Handle: ${(y.sourceHandle||"unknown").padEnd(45)}║
║  ├─ TIPO: ${te.padEnd(49)}║
║  └─ VALOR: ${it(K).padEnd(47)}║
║                                                               ║
║  📥 INPUT (DESTINO)                                           ║
║  ├─ Node: ${(E?.type||"unknown").padEnd(47)}║
║  ├─ ID: ${(y.target||"unknown").padEnd(49)}║
║  ├─ Handle: ${(y.targetHandle||"unknown").padEnd(45)}║
║  ├─ TIPO: ${ht.padEnd(49)}║
║  └─ VALOR: ${it(Be).padEnd(47)}║
║                                                               ║
╚═══════════════════════════════════════════════════════════════╝
`)},ee=async()=>{N.value="running";try{await t.executeFlow(),N.value="success",setTimeout(()=>{N.value=null},3e3)}catch{N.value="error",setTimeout(()=>{N.value=null},5e3)}},re=()=>{confirm("Are you sure you want to clear the entire flow? This action cannot be undone.")&&(t.clearFlow(),x.value=null)},oe=y=>{if(["INPUT","SELECT","BUTTON","TEXTAREA"].includes(document.activeElement?.tagName)){y.key==="Escape"&&G.value&&z();return}if(y.ctrlKey&&y.key==="c"){y.preventDefault(),g();return}if(y.ctrlKey&&y.key==="v"){y.preventDefault(),p();return}if(y.code==="Space"){y.preventDefault(),Z(A.value.x,A.value.y);return}if(y.key==="Escape"){z();return}},ce=y=>{},me=y=>{if(["INPUT","SELECT","BUTTON","TEXTAREA"].includes(y.target.tagName)||f.value)return;G.value&&z(),u.value.visible&&closeQuickAddMenu(),y.target.closest(".vue-flow__node")||l.value?.focus()},P=y=>{["INPUT","SELECT","BUTTON","TEXTAREA"].includes(y.target.tagName)||(A.value={x:y.clientX,y:y.clientY})},B=y=>{const k=$(A.value.x,A.value.y),E=I(y,k);z(),u.value.sourceNodeId&&u.value.sourceHandle&&setTimeout(()=>{const M=u.value.sourceHandle,V=M.startsWith("exec-"),U=t.nodeCatalog.nodes.find(te=>te.type===y);let K=null;V?K=U?.handles?.inputs?.execution?.[0]?.id||"exec-in":K=(U?.handles?.inputs?.data||[]).find(Ee=>{const Be=Oh(y,Ee.id),ht=ae(t.nodes.find(it=>it.id===u.value.sourceNodeId),M,"source");return Be.includes(ht)||Be.includes("any")})?.id||"data-input",fe({source:u.value.sourceNodeId,sourceHandle:M,target:E.id,targetHandle:K}),u.value.sourceNodeId=null,u.value.sourceHandle=null},100)},g=()=>{const y=h.value.filter(k=>k.selected);y.length!==0&&(S.value=y.map(k=>({...k,data:lc(k.data),position:{...k.position}})))},p=()=>{if(S.value.length===0)return;const y=$(A.value.x,A.value.y),k=30;S.value.forEach((E,M)=>{const V={...E,id:`${E.type}_${Date.now()}_${M} `,position:{x:y.x+M*k,y:y.y+M*k},data:lc(E.data),selected:!1};t.addNode(V)})},$=(y,k)=>{if(!i.value){const M=l.value?.getBoundingClientRect();return M?{x:y-M.left,y:k-M.top}:{x:y,y:k}}const E=i.value.getBoundingClientRect();return r({x:y-E.left,y:k-E.top})},_=y=>{if((y.ctrlKey||y.metaKey)&&y.key==="z"&&!y.shiftKey){y.preventDefault(),t.undo();return}if((y.ctrlKey||y.metaKey)&&(y.key==="y"||y.shiftKey&&y.key==="z")){y.preventDefault(),t.redo();return}};return tt(()=>{l.value?.focus(),b(),t.initializeFromUrl(),window.addEventListener("keydown",_)}),Or(()=>{window.removeEventListener("keydown",_)}),(y,k)=>(L(),X("div",Hee,[ue(eq,{"can-undo":ie(t).canUndo,"can-redo":ie(t).canRedo,"execution-status":N.value,onExecute:ee,onClear:re,onUndo:ie(t).undo,onRedo:ie(t).redo},null,8,["can-undo","can-redo","execution-status","onUndo","onRedo"]),T("div",Bee,[ue(hq),T("div",{class:"flex-1 relative outline-none focus:outline-none",onDrop:D,onDragover:k[0]||(k[0]=oi(()=>{},["prevent"])),onKeydown:oe,onKeyup:ce,onClick:me,onMousemove:P,onContextmenu:k[1]||(k[1]=oi(()=>{},["prevent"])),tabindex:"0",ref_key:"canvasRef",ref:l},[ue(ie(w4),{nodes:h.value,edges:v.value,onNodesChange:Q,onEdgesChange:q,onConnect:fe,onConnectStart:se,onConnectEnd:pe,onEdgeClick:le,onNodeClick:R,onNodeDragStart:O,onNodeDrag:F,onNodeDragStop:Y,"default-edge-options":H,"is-valid-connection":ne,"fit-view-on-init":!1,"zoom-on-scroll":!0,"pan-on-scroll":!1,"pan-on-drag":[1,2],"node-draggable":!0,"nodes-deletable":!0,"edges-deletable":!0,"delete-key-code":"Delete","multi-selection-key-code":"Control","selection-mode":"partial",class:"w-full h-full bg-flow-bg dark:bg-flow-bg-dark"},{"node-connector":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-add":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-subtract":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-multiply":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-divide":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-array-filter":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-array-aggregate":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-array-slice":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-array-sort":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-array-map":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-array-groupby":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-array-distinct":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-array-merge":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-object-create":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-array-create":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-object-merge":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-object-pick":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-object-keys-values":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-object-rename":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-object-set-property":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-object-to-array":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-object-transform":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-field-extractor":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-output":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-variable":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-input":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-constant":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-compare":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-conditional-branch":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-type-conversion":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-logic":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-string-ops":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-for-each":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-while-loop":Pe(E=>[ue(Ge,Fe(Le(E)),null,16)]),"node-marker":Pe(E=>[ue(Vee,Fe(Le(E)),null,16)]),"node-debug-viewer":Pe(E=>[ue(Pee,Fe(Le(E)),null,16)]),default:Pe(()=>[ue(ie(gO),{variant:ie(On).Dots,"pattern-color":"#e5e7eb"},null,8,["variant"]),ue(ie(tG),{pannable:"",zoomable:""}),ue(ie(DV))]),_:1},8,["nodes","edges"]),ue(DQ,{show:ie(G),position:ie(W),nodes:j.value,onCreateNode:B},null,8,["show","position","nodes"])],544),ue(wQ,{"selected-node":x.value,onClose:k[2]||(k[2]=E=>x.value=null),onDelete:k[3]||(k[3]=E=>x.value=null)},null,8,["selected-node"])])]))}},Lee=wt(Fee,[["__scopeId","data-v-e99365e3"]]),Uee={id:"app",class:"h-screen overflow-hidden bg-flow-bg dark:bg-flow-bg-dark text-flow-text dark:text-flow-text-dark font-sans antialiased transition-colors duration-200"},Gee={__name:"App",setup(e){const{initTheme:t}=aE();return tt(()=>{t()}),(n,o)=>(L(),X("div",Uee,[ue(Lee)]))}};/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const ni=typeof document<"u";function wE(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Zee(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&wE(e.default)}const Ke=Object.assign;function wf(e,t){const n={};for(const o in t){const r=t[o];n[o]=pn(r)?r.map(e):e(r)}return n}const Os=()=>{},pn=Array.isArray,xE=/#/g,Yee=/&/g,Xee=/\//g,Wee=/=/g,jee=/\?/g,$E=/\+/g,qee=/%5B/g,Kee=/%5D/g,EE=/%5E/g,Jee=/%60/g,SE=/%7B/g,Qee=/%7C/g,NE=/%7D/g,ete=/%20/g;function _p(e){return encodeURI(""+e).replace(Qee,"|").replace(qee,"[").replace(Kee,"]")}function tte(e){return _p(e).replace(SE,"{").replace(NE,"}").replace(EE,"^")}function Gh(e){return _p(e).replace($E,"%2B").replace(ete,"+").replace(xE,"%23").replace(Yee,"%26").replace(Jee,"`").replace(SE,"{").replace(NE,"}").replace(EE,"^")}function nte(e){return Gh(e).replace(Wee,"%3D")}function ote(e){return _p(e).replace(xE,"%23").replace(jee,"%3F")}function rte(e){return e==null?"":ote(e).replace(Xee,"%2F")}function ma(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const ite=/\/$/,ste=e=>e.replace(ite,"");function xf(e,t,n="/"){let o,r={},i="",s="";const a=t.indexOf("#");let l=t.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(o=t.slice(0,l),i=t.slice(l+1,a>-1?a:t.length),r=e(i)),a>-1&&(o=o||t.slice(0,a),s=t.slice(a,t.length)),o=cte(o??t,n),{fullPath:o+(i&&"?")+i+s,path:o,query:r,hash:ma(s)}}function ate(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function r_(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function lte(e,t,n){const o=t.matched.length-1,r=n.matched.length-1;return o>-1&&o===r&&Bi(t.matched[o],n.matched[r])&&kE(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Bi(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function kE(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!ute(e[n],t[n]))return!1;return!0}function ute(e,t){return pn(e)?i_(e,t):pn(t)?i_(t,e):e===t}function i_(e,t){return pn(t)?e.length===t.length&&e.every((n,o)=>n===t[o]):e.length===1&&e[0]===t}function cte(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),o=e.split("/"),r=o[o.length-1];(r===".."||r===".")&&o.push("");let i=n.length-1,s,a;for(s=0;s<o.length;s++)if(a=o[s],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+o.slice(s).join("/")}const ko={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var ya;(function(e){e.pop="pop",e.push="push"})(ya||(ya={}));var Ps;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Ps||(Ps={}));function dte(e){if(!e)if(ni){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),ste(e)}const fte=/^[^#]+#/;function hte(e,t){return e.replace(fte,"#")+t}function gte(e,t){const n=document.documentElement.getBoundingClientRect(),o=e.getBoundingClientRect();return{behavior:t.behavior,left:o.left-n.left-(t.left||0),top:o.top-n.top-(t.top||0)}}const _d=()=>({left:window.scrollX,top:window.scrollY});function pte(e){let t;if("el"in e){const n=e.el,o=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?o?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;t=gte(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function s_(e,t){return(history.state?history.state.position-t:-1)+e}const Zh=new Map;function mte(e,t){Zh.set(e,t)}function yte(e){const t=Zh.get(e);return Zh.delete(e),t}let vte=()=>location.protocol+"//"+location.host;function CE(e,t){const{pathname:n,search:o,hash:r}=t,i=e.indexOf("#");if(i>-1){let a=r.includes(e.slice(i))?e.slice(i).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),r_(l,"")}return r_(n,e)+o+r}function _te(e,t,n,o){let r=[],i=[],s=null;const a=({state:f})=>{const h=CE(e,location),m=n.value,v=t.value;let b=0;if(f){if(n.value=h,t.value=f,s&&s===m){s=null;return}b=v?f.position-v.position:0}else o(h);r.forEach(x=>{x(n.value,m,{delta:b,type:ya.pop,direction:b?b>0?Ps.forward:Ps.back:Ps.unknown})})};function l(){s=n.value}function u(f){r.push(f);const h=()=>{const m=r.indexOf(f);m>-1&&r.splice(m,1)};return i.push(h),h}function c(){const{history:f}=window;f.state&&f.replaceState(Ke({},f.state,{scroll:_d()}),"")}function d(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:u,destroy:d}}function a_(e,t,n,o=!1,r=!1){return{back:e,current:t,forward:n,replaced:o,position:window.history.length,scroll:r?_d():null}}function bte(e){const{history:t,location:n}=window,o={value:CE(e,n)},r={value:t.state};r.value||i(o.value,{back:null,current:o.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(l,u,c){const d=e.indexOf("#"),f=d>-1?(n.host&&document.querySelector("base")?e:e.slice(d))+l:vte()+e+l;try{t[c?"replaceState":"pushState"](u,"",f),r.value=u}catch(h){console.error(h),n[c?"replace":"assign"](f)}}function s(l,u){const c=Ke({},t.state,a_(r.value.back,l,r.value.forward,!0),u,{position:r.value.position});i(l,c,!0),o.value=l}function a(l,u){const c=Ke({},r.value,t.state,{forward:l,scroll:_d()});i(c.current,c,!0);const d=Ke({},a_(o.value,l,null),{position:c.position+1},u);i(l,d,!1),o.value=l}return{location:o,state:r,push:a,replace:s}}function wte(e){e=dte(e);const t=bte(e),n=_te(e,t.state,t.location,t.replace);function o(i,s=!0){s||n.pauseListeners(),history.go(i)}const r=Ke({location:"",base:e,go:o,createHref:hte.bind(null,e)},t,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function xte(e){return typeof e=="string"||e&&typeof e=="object"}function IE(e){return typeof e=="string"||typeof e=="symbol"}const TE=Symbol("");var l_;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(l_||(l_={}));function Fi(e,t){return Ke(new Error,{type:e,[TE]:!0},t)}function no(e,t){return e instanceof Error&&TE in e&&(t==null||!!(e.type&t))}const u_="[^/]+?",$te={sensitive:!1,strict:!1,start:!0,end:!0},Ete=/[.+*?^${}()[\]/\\]/g;function Ste(e,t){const n=Ke({},$te,t),o=[];let r=n.start?"^":"";const i=[];for(const u of e){const c=u.length?[]:[90];n.strict&&!u.length&&(r+="/");for(let d=0;d<u.length;d++){const f=u[d];let h=40+(n.sensitive?.25:0);if(f.type===0)d||(r+="/"),r+=f.value.replace(Ete,"\\$&"),h+=40;else if(f.type===1){const{value:m,repeatable:v,optional:b,regexp:x}=f;i.push({name:m,repeatable:v,optional:b});const N=x||u_;if(N!==u_){h+=10;try{new RegExp(`(${N})`)}catch(A){throw new Error(`Invalid custom RegExp for param "${m}" (${N}): `+A.message)}}let S=v?`((?:${N})(?:/(?:${N}))*)`:`(${N})`;d||(S=b&&u.length<2?`(?:/${S})`:"/"+S),b&&(S+="?"),r+=S,h+=20,b&&(h+=-8),v&&(h+=-20),N===".*"&&(h+=-50)}c.push(h)}o.push(c)}if(n.strict&&n.end){const u=o.length-1;o[u][o[u].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const s=new RegExp(r,n.sensitive?"":"i");function a(u){const c=u.match(s),d={};if(!c)return null;for(let f=1;f<c.length;f++){const h=c[f]||"",m=i[f-1];d[m.name]=h&&m.repeatable?h.split("/"):h}return d}function l(u){let c="",d=!1;for(const f of e){(!d||!c.endsWith("/"))&&(c+="/"),d=!1;for(const h of f)if(h.type===0)c+=h.value;else if(h.type===1){const{value:m,repeatable:v,optional:b}=h,x=m in u?u[m]:"";if(pn(x)&&!v)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const N=pn(x)?x.join("/"):x;if(!N)if(b)f.length<2&&(c.endsWith("/")?c=c.slice(0,-1):d=!0);else throw new Error(`Missing required param "${m}"`);c+=N}}return c||"/"}return{re:s,score:o,keys:i,parse:a,stringify:l}}function Nte(e,t){let n=0;for(;n<e.length&&n<t.length;){const o=t[n]-e[n];if(o)return o;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function AE(e,t){let n=0;const o=e.score,r=t.score;for(;n<o.length&&n<r.length;){const i=Nte(o[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-o.length)===1){if(c_(o))return 1;if(c_(r))return-1}return r.length-o.length}function c_(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const kte={type:0,value:""},Cte=/[a-zA-Z0-9_]/;function Ite(e){if(!e)return[[]];if(e==="/")return[[kte]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(h){throw new Error(`ERR (${n})/"${u}": ${h}`)}let n=0,o=n;const r=[];let i;function s(){i&&r.push(i),i=[]}let a=0,l,u="",c="";function d(){u&&(n===0?i.push({type:0,value:u}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function f(){u+=l}for(;a<e.length;){if(l=e[a++],l==="\\"&&n!==2){o=n,n=4;continue}switch(n){case 0:l==="/"?(u&&d(),s()):l===":"?(d(),n=1):f();break;case 4:f(),n=o;break;case 1:l==="("?n=2:Cte.test(l)?f():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:n=3:c+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${u}"`),d(),s(),r}function Tte(e,t,n){const o=Ste(Ite(e.path),n),r=Ke(o,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function Ate(e,t){const n=[],o=new Map;t=g_({strict:!1,end:!0,sensitive:!1},t);function r(d){return o.get(d)}function i(d,f,h){const m=!h,v=f_(d);v.aliasOf=h&&h.record;const b=g_(t,d),x=[v];if("alias"in d){const A=typeof d.alias=="string"?[d.alias]:d.alias;for(const G of A)x.push(f_(Ke({},v,{components:h?h.record.components:v.components,path:G,aliasOf:h?h.record:v})))}let N,S;for(const A of x){const{path:G}=A;if(f&&G[0]!=="/"){const W=f.record.path,Z=W[W.length-1]==="/"?"":"/";A.path=f.record.path+(G&&Z+G)}if(N=Tte(A,f,b),h?h.alias.push(N):(S=S||N,S!==N&&S.alias.push(N),m&&d.name&&!h_(N)&&s(d.name)),ME(N)&&l(N),v.children){const W=v.children;for(let Z=0;Z<W.length;Z++)i(W[Z],N,h&&h.children[Z])}h=h||N}return S?()=>{s(S)}:Os}function s(d){if(IE(d)){const f=o.get(d);f&&(o.delete(d),n.splice(n.indexOf(f),1),f.children.forEach(s),f.alias.forEach(s))}else{const f=n.indexOf(d);f>-1&&(n.splice(f,1),d.record.name&&o.delete(d.record.name),d.children.forEach(s),d.alias.forEach(s))}}function a(){return n}function l(d){const f=Ote(d,n);n.splice(f,0,d),d.record.name&&!h_(d)&&o.set(d.record.name,d)}function u(d,f){let h,m={},v,b;if("name"in d&&d.name){if(h=o.get(d.name),!h)throw Fi(1,{location:d});b=h.record.name,m=Ke(d_(f.params,h.keys.filter(S=>!S.optional).concat(h.parent?h.parent.keys.filter(S=>S.optional):[]).map(S=>S.name)),d.params&&d_(d.params,h.keys.map(S=>S.name))),v=h.stringify(m)}else if(d.path!=null)v=d.path,h=n.find(S=>S.re.test(v)),h&&(m=h.parse(v),b=h.record.name);else{if(h=f.name?o.get(f.name):n.find(S=>S.re.test(f.path)),!h)throw Fi(1,{location:d,currentLocation:f});b=h.record.name,m=Ke({},f.params,d.params),v=h.stringify(m)}const x=[];let N=h;for(;N;)x.unshift(N.record),N=N.parent;return{name:b,path:v,params:m,matched:x,meta:Dte(x)}}e.forEach(d=>i(d));function c(){n.length=0,o.clear()}return{addRoute:i,resolve:u,removeRoute:s,clearRoutes:c,getRoutes:a,getRecordMatcher:r}}function d_(e,t){const n={};for(const o of t)o in e&&(n[o]=e[o]);return n}function f_(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Mte(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Mte(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const o in e.components)t[o]=typeof n=="object"?n[o]:n;return t}function h_(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Dte(e){return e.reduce((t,n)=>Ke(t,n.meta),{})}function g_(e,t){const n={};for(const o in e)n[o]=o in t?t[o]:e[o];return n}function Ote(e,t){let n=0,o=t.length;for(;n!==o;){const i=n+o>>1;AE(e,t[i])<0?o=i:n=i+1}const r=Pte(e);return r&&(o=t.lastIndexOf(r,o-1)),o}function Pte(e){let t=e;for(;t=t.parent;)if(ME(t)&&AE(e,t)===0)return t}function ME({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Rte(e){const t={};if(e===""||e==="?")return t;const o=(e[0]==="?"?e.slice(1):e).split("&");for(let r=0;r<o.length;++r){const i=o[r].replace($E," "),s=i.indexOf("="),a=ma(s<0?i:i.slice(0,s)),l=s<0?null:ma(i.slice(s+1));if(a in t){let u=t[a];pn(u)||(u=t[a]=[u]),u.push(l)}else t[a]=l}return t}function p_(e){let t="";for(let n in e){const o=e[n];if(n=nte(n),o==null){o!==void 0&&(t+=(t.length?"&":"")+n);continue}(pn(o)?o.map(i=>i&&Gh(i)):[o&&Gh(o)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function zte(e){const t={};for(const n in e){const o=e[n];o!==void 0&&(t[n]=pn(o)?o.map(r=>r==null?null:""+r):o==null?o:""+o)}return t}const Vte=Symbol(""),m_=Symbol(""),bd=Symbol(""),bp=Symbol(""),Yh=Symbol("");function ns(){let e=[];function t(o){return e.push(o),()=>{const r=e.indexOf(o);r>-1&&e.splice(r,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Vo(e,t,n,o,r,i=s=>s()){const s=o&&(o.enterCallbacks[r]=o.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const u=f=>{f===!1?l(Fi(4,{from:n,to:t})):f instanceof Error?l(f):xte(f)?l(Fi(2,{from:t,to:f})):(s&&o.enterCallbacks[r]===s&&typeof f=="function"&&s.push(f),a())},c=i(()=>e.call(o&&o.instances[r],t,n,u));let d=Promise.resolve(c);e.length<3&&(d=d.then(u)),d.catch(f=>l(f))})}function $f(e,t,n,o,r=i=>i()){const i=[];for(const s of e)for(const a in s.components){let l=s.components[a];if(!(t!=="beforeRouteEnter"&&!s.instances[a]))if(wE(l)){const c=(l.__vccOpts||l)[t];c&&i.push(Vo(c,n,o,s,a,r))}else{let u=l();i.push(()=>u.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${a}" at "${s.path}"`);const d=Zee(c)?c.default:c;s.mods[a]=c,s.components[a]=d;const h=(d.__vccOpts||d)[t];return h&&Vo(h,n,o,s,a,r)()}))}}return i}function y_(e){const t=ot(bd),n=ot(bp),o=J(()=>{const l=ie(e.to);return t.resolve(l)}),r=J(()=>{const{matched:l}=o.value,{length:u}=l,c=l[u-1],d=n.matched;if(!c||!d.length)return-1;const f=d.findIndex(Bi.bind(null,c));if(f>-1)return f;const h=v_(l[u-2]);return u>1&&v_(c)===h&&d[d.length-1].path!==h?d.findIndex(Bi.bind(null,l[u-2])):f}),i=J(()=>r.value>-1&&Ute(n.params,o.value.params)),s=J(()=>r.value>-1&&r.value===n.matched.length-1&&kE(n.params,o.value.params));function a(l={}){if(Lte(l)){const u=t[ie(e.replace)?"replace":"push"](ie(e.to)).catch(Os);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:o,href:J(()=>o.value.href),isActive:i,isExactActive:s,navigate:a}}function Hte(e){return e.length===1?e[0]:e}const Bte=Ne({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:y_,setup(e,{slots:t}){const n=wo(y_(e)),{options:o}=ot(bd),r=J(()=>({[__(e.activeClass,o.linkActiveClass,"router-link-active")]:n.isActive,[__(e.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&Hte(t.default(n));return e.custom?i:_e("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),Fte=Bte;function Lte(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Ute(e,t){for(const n in t){const o=t[n],r=e[n];if(typeof o=="string"){if(o!==r)return!1}else if(!pn(r)||r.length!==o.length||o.some((i,s)=>i!==r[s]))return!1}return!0}function v_(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const __=(e,t,n)=>e??t??n,Gte=Ne({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const o=ot(Yh),r=J(()=>e.route||o.value),i=ot(m_,0),s=J(()=>{let u=ie(i);const{matched:c}=r.value;let d;for(;(d=c[u])&&!d.components;)u++;return u}),a=J(()=>r.value.matched[s.value]);Ht(m_,J(()=>s.value+1)),Ht(Vte,a),Ht(Yh,r);const l=de();return Se(()=>[l.value,a.value,e.name],([u,c,d],[f,h,m])=>{c&&(c.instances[d]=u,h&&h!==c&&u&&u===f&&(c.leaveGuards.size||(c.leaveGuards=h.leaveGuards),c.updateGuards.size||(c.updateGuards=h.updateGuards))),u&&c&&(!h||!Bi(c,h)||!f)&&(c.enterCallbacks[d]||[]).forEach(v=>v(u))},{flush:"post"}),()=>{const u=r.value,c=e.name,d=a.value,f=d&&d.components[c];if(!f)return b_(n.default,{Component:f,route:u});const h=d.props[c],m=h?h===!0?u.params:typeof h=="function"?h(u):h:null,b=_e(f,Ke({},m,t,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(d.instances[c]=null)},ref:l}));return b_(n.default,{Component:b,route:u})||b}}});function b_(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Zte=Gte;function Yte(e){const t=Ate(e.routes,e),n=e.parseQuery||Rte,o=e.stringifyQuery||p_,r=e.history,i=ns(),s=ns(),a=ns(),l=bi(ko);let u=ko;ni&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=wf.bind(null,ee=>""+ee),d=wf.bind(null,rte),f=wf.bind(null,ma);function h(ee,re){let oe,ce;return IE(ee)?(oe=t.getRecordMatcher(ee),ce=re):ce=ee,t.addRoute(ce,oe)}function m(ee){const re=t.getRecordMatcher(ee);re&&t.removeRoute(re)}function v(){return t.getRoutes().map(ee=>ee.record)}function b(ee){return!!t.getRecordMatcher(ee)}function x(ee,re){if(re=Ke({},re||l.value),typeof ee=="string"){const g=xf(n,ee,re.path),p=t.resolve({path:g.path},re),$=r.createHref(g.fullPath);return Ke(g,p,{params:f(p.params),hash:ma(g.hash),redirectedFrom:void 0,href:$})}let oe;if(ee.path!=null)oe=Ke({},ee,{path:xf(n,ee.path,re.path).path});else{const g=Ke({},ee.params);for(const p in g)g[p]==null&&delete g[p];oe=Ke({},ee,{params:d(g)}),re.params=d(re.params)}const ce=t.resolve(oe,re),me=ee.hash||"";ce.params=c(f(ce.params));const P=ate(o,Ke({},ee,{hash:tte(me),path:ce.path})),B=r.createHref(P);return Ke({fullPath:P,hash:me,query:o===p_?zte(ee.query):ee.query||{}},ce,{redirectedFrom:void 0,href:B})}function N(ee){return typeof ee=="string"?xf(n,ee,l.value.path):Ke({},ee)}function S(ee,re){if(u!==ee)return Fi(8,{from:re,to:ee})}function A(ee){return Z(ee)}function G(ee){return A(Ke(N(ee),{replace:!0}))}function W(ee){const re=ee.matched[ee.matched.length-1];if(re&&re.redirect){const{redirect:oe}=re;let ce=typeof oe=="function"?oe(ee):oe;return typeof ce=="string"&&(ce=ce.includes("?")||ce.includes("#")?ce=N(ce):{path:ce},ce.params={}),Ke({query:ee.query,hash:ee.hash,params:ce.path!=null?{}:ee.params},ce)}}function Z(ee,re){const oe=u=x(ee),ce=l.value,me=ee.state,P=ee.force,B=ee.replace===!0,g=W(oe);if(g)return Z(Ke(N(g),{state:typeof g=="object"?Ke({},me,g.state):me,force:P,replace:B}),re||oe);const p=oe;p.redirectedFrom=re;let $;return!P&&lte(o,ce,oe)&&($=Fi(16,{to:p,from:ce}),ne(ce,ce,!0,!1)),($?Promise.resolve($):H(p,ce)).catch(_=>no(_)?no(_,2)?_:q(_):Y(_,p,ce)).then(_=>{if(_){if(no(_,2))return Z(Ke({replace:B},N(_.to),{state:typeof _.to=="object"?Ke({},me,_.to.state):me,force:P}),re||p)}else _=I(p,ce,!0,B,me);return D(p,ce,_),_})}function z(ee,re){const oe=S(ee,re);return oe?Promise.reject(oe):Promise.resolve()}function j(ee){const re=se.values().next().value;return re&&typeof re.runWithContext=="function"?re.runWithContext(ee):ee()}function H(ee,re){let oe;const[ce,me,P]=Xte(ee,re);oe=$f(ce.reverse(),"beforeRouteLeave",ee,re);for(const g of ce)g.leaveGuards.forEach(p=>{oe.push(Vo(p,ee,re))});const B=z.bind(null,ee,re);return oe.push(B),le(oe).then(()=>{oe=[];for(const g of i.list())oe.push(Vo(g,ee,re));return oe.push(B),le(oe)}).then(()=>{oe=$f(me,"beforeRouteUpdate",ee,re);for(const g of me)g.updateGuards.forEach(p=>{oe.push(Vo(p,ee,re))});return oe.push(B),le(oe)}).then(()=>{oe=[];for(const g of P)if(g.beforeEnter)if(pn(g.beforeEnter))for(const p of g.beforeEnter)oe.push(Vo(p,ee,re));else oe.push(Vo(g.beforeEnter,ee,re));return oe.push(B),le(oe)}).then(()=>(ee.matched.forEach(g=>g.enterCallbacks={}),oe=$f(P,"beforeRouteEnter",ee,re,j),oe.push(B),le(oe))).then(()=>{oe=[];for(const g of s.list())oe.push(Vo(g,ee,re));return oe.push(B),le(oe)}).catch(g=>no(g,8)?g:Promise.reject(g))}function D(ee,re,oe){a.list().forEach(ce=>j(()=>ce(ee,re,oe)))}function I(ee,re,oe,ce,me){const P=S(ee,re);if(P)return P;const B=re===ko,g=ni?history.state:{};oe&&(ce||B?r.replace(ee.fullPath,Ke({scroll:B&&g&&g.scroll},me)):r.push(ee.fullPath,me)),l.value=ee,ne(ee,re,oe,B),q()}let R;function w(){R||(R=r.listen((ee,re,oe)=>{if(!pe.listening)return;const ce=x(ee),me=W(ce);if(me){Z(Ke(me,{replace:!0,force:!0}),ce).catch(Os);return}u=ce;const P=l.value;ni&&mte(s_(P.fullPath,oe.delta),_d()),H(ce,P).catch(B=>no(B,12)?B:no(B,2)?(Z(Ke(N(B.to),{force:!0}),ce).then(g=>{no(g,20)&&!oe.delta&&oe.type===ya.pop&&r.go(-1,!1)}).catch(Os),Promise.reject()):(oe.delta&&r.go(-oe.delta,!1),Y(B,ce,P))).then(B=>{B=B||I(ce,P,!1),B&&(oe.delta&&!no(B,8)?r.go(-oe.delta,!1):oe.type===ya.pop&&no(B,20)&&r.go(-1,!1)),D(ce,P,B)}).catch(Os)}))}let O=ns(),C=ns(),F;function Y(ee,re,oe){q(ee);const ce=C.list();return ce.length?ce.forEach(me=>me(ee,re,oe)):console.error(ee),Promise.reject(ee)}function Q(){return F&&l.value!==ko?Promise.resolve():new Promise((ee,re)=>{O.add([ee,re])})}function q(ee){return F||(F=!ee,w(),O.list().forEach(([re,oe])=>ee?oe(ee):re()),O.reset()),ee}function ne(ee,re,oe,ce){const{scrollBehavior:me}=e;if(!ni||!me)return Promise.resolve();const P=!oe&&yte(s_(ee.fullPath,0))||(ce||!oe)&&history.state&&history.state.scroll||null;return bt().then(()=>me(ee,re,P)).then(B=>B&&pte(B)).catch(B=>Y(B,ee,re))}const ae=ee=>r.go(ee);let fe;const se=new Set,pe={currentRoute:l,listening:!0,addRoute:h,removeRoute:m,clearRoutes:t.clearRoutes,hasRoute:b,getRoutes:v,resolve:x,options:e,push:A,replace:G,go:ae,back:()=>ae(-1),forward:()=>ae(1),beforeEach:i.add,beforeResolve:s.add,afterEach:a.add,onError:C.add,isReady:Q,install(ee){const re=this;ee.component("RouterLink",Fte),ee.component("RouterView",Zte),ee.config.globalProperties.$router=re,Object.defineProperty(ee.config.globalProperties,"$route",{enumerable:!0,get:()=>ie(l)}),ni&&!fe&&l.value===ko&&(fe=!0,A(r.location).catch(me=>{}));const oe={};for(const me in ko)Object.defineProperty(oe,me,{get:()=>l.value[me],enumerable:!0});ee.provide(bd,re),ee.provide(bp,Y_(oe)),ee.provide(Yh,l);const ce=ee.unmount;se.add(ee),ee.unmount=function(){se.delete(ee),se.size<1&&(u=ko,R&&R(),R=null,l.value=ko,fe=!1,F=!1),ce()}}};function le(ee){return ee.reduce((re,oe)=>re.then(()=>j(oe)),Promise.resolve())}return pe}function Xte(e,t){const n=[],o=[],r=[],i=Math.max(t.matched.length,e.matched.length);for(let s=0;s<i;s++){const a=t.matched[s];a&&(e.matched.find(u=>Bi(u,a))?o.push(a):n.push(a));const l=e.matched[s];l&&(t.matched.find(u=>Bi(u,l))||r.push(l))}return[n,o,r]}function Wte(){return ot(bd)}function DE(e){return ot(bp)}const jte={};function qte(e,t){return null}const Kte=wt(jte,[["render",qte]]),Jte={class:"min-h-screen bg-gray-50 dark:bg-gray-900 p-8"},Qte={class:"max-w-4xl mx-auto"},ene={key:0,class:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg flex items-center justify-between"},tne={class:"flex items-center gap-3"},nne={class:"w-10 h-10 bg-green-100 dark:bg-green-800 rounded-full flex items-center justify-center"},one={class:"text-sm text-green-700 dark:text-green-300"},rne={key:1,class:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg flex items-center justify-between"},ine={class:"flex items-center gap-3"},sne={class:"w-10 h-10 bg-red-100 dark:bg-red-800 rounded-full flex items-center justify-center"},ane={class:"text-sm text-red-700 dark:text-red-300"},lne={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 mb-6"},une={class:"space-y-3"},cne={class:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600 hover:border-blue-300 dark:hover:border-blue-600 transition-colors"},dne={class:"flex items-center gap-4"},fne={class:"w-12 h-12 bg-blue-100 dark:bg-blue-900/50 rounded-lg flex items-center justify-center"},hne=["disabled"],gne={class:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600 opacity-60"},pne={class:"flex items-center gap-4"},mne={class:"w-12 h-12 bg-green-100 dark:bg-green-900/50 rounded-lg flex items-center justify-center"},yne={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"},vne={key:0,class:"text-center py-8"},_ne={key:1,class:"text-center py-8"},bne={key:2,class:"space-y-3"},wne={class:"flex items-center gap-4"},xne={class:"w-12 h-12 bg-blue-100 dark:bg-blue-900/50 rounded-lg flex items-center justify-center"},$ne={class:"font-medium text-gray-900 dark:text-gray-100"},Ene={class:"text-sm text-gray-600 dark:text-gray-400"},Sne={class:"flex items-center gap-3 mt-1"},Nne={class:"text-xs text-gray-500 dark:text-gray-400"},kne={class:"flex items-center gap-2"},Cne=["onClick"],Ine=["onClick"],Tne={__name:"IntegrationsView",setup(e){const t=DE(),n=Wte(),o=St(),r=de([]),i=de(!0),s=de(!1),a=de(!1),l=de(""),u=de(!1),c=de("");tt(async()=>{const b=t.query.success,x=t.query.error,N=t.query.email;b==="true"&&(a.value=!0,l.value=N||"Unknown",n.replace({query:{}})),x&&(u.value=!0,c.value=x,n.replace({query:{}})),await d()});const d=async()=>{i.value=!0;try{const b=o.apiConfig.baseUrl||"http://localhost:3001",x=await fetch(`${b}/api/oauth/connections`,{headers:{Authorization:`Bearer ${o.apiConfig.token||localStorage.getItem("flowforge_token")}`}});if(!x.ok)throw new Error("Failed to load connections");const N=await x.json();r.value=N.data?.connections||[]}catch{}finally{i.value=!1}},f=async()=>{s.value=!0;try{const b=o.apiConfig.baseUrl||"http://localhost:3001",x=await fetch(`${b}/api/oauth/google_analytics/authorize`,{headers:{Authorization:`Bearer ${o.apiConfig.token||localStorage.getItem("flowforge_token")}`}});if(!x.ok)throw new Error("Failed to get authorization URL");const N=await x.json();window.location.href=N.data.authUrl}catch(b){u.value=!0,c.value=b.message,s.value=!1}},h=async b=>{try{const x=o.apiConfig.baseUrl||"http://localhost:3001",S=await(await fetch(`${x}/api/oauth/connections/${b}/test`,{method:"POST",headers:{Authorization:`Bearer ${o.apiConfig.token||localStorage.getItem("flowforge_token")}`}})).json();S.success?alert("✅ Connection is working!"):alert("❌ Connection test failed: "+(S.error?.message||"Unknown error"))}catch(x){alert("❌ Error: "+x.message)}},m=async b=>{if(confirm("Are you sure you want to disconnect this service?"))try{const x=o.apiConfig.baseUrl||"http://localhost:3001";if(!(await fetch(`${x}/api/oauth/connections/${b}`,{method:"DELETE",headers:{Authorization:`Bearer ${o.apiConfig.token||localStorage.getItem("flowforge_token")}`}})).ok)throw new Error("Failed to disconnect");await d()}catch(x){alert("❌ Error: "+x.message)}},v=b=>b?new Date(b).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A";return(b,x)=>(L(),X("div",Jte,[T("div",Qte,[x[12]||(x[12]=T("div",{class:"mb-8"},[T("h1",{class:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2"},"Integrations"),T("p",{class:"text-gray-600 dark:text-gray-400"},"Connect external services to use in your flows")],-1)),a.value?(L(),X("div",ene,[T("div",tne,[T("div",nne,[ue(He,{icon:"material-symbols:check-circle",size:24,class:"text-green-600 dark:text-green-400"})]),T("div",null,[x[2]||(x[2]=T("p",{class:"font-medium text-green-900 dark:text-green-100"},"Successfully connected!",-1)),T("p",one,ye(l.value),1)])]),T("button",{onClick:x[0]||(x[0]=N=>a.value=!1),class:"text-green-600 dark:text-green-400 hover:text-green-800 dark:hover:text-green-200"},[ue(He,{icon:"material-symbols:close",size:20})])])):ve("",!0),u.value?(L(),X("div",rne,[T("div",ine,[T("div",sne,[ue(He,{icon:"material-symbols:error",size:24,class:"text-red-600 dark:text-red-400"})]),T("div",null,[x[3]||(x[3]=T("p",{class:"font-medium text-red-900 dark:text-red-100"},"Connection failed",-1)),T("p",ane,ye(c.value),1)])]),T("button",{onClick:x[1]||(x[1]=N=>u.value=!1),class:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-200"},[ue(He,{icon:"material-symbols:close",size:20})])])):ve("",!0),T("div",lne,[x[7]||(x[7]=T("h2",{class:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4"},"Available Integrations",-1)),T("div",une,[T("div",cne,[T("div",dne,[T("div",fne,[ue(He,{icon:"logos:google-analytics",size:28})]),x[4]||(x[4]=T("div",null,[T("h3",{class:"font-medium text-gray-900 dark:text-gray-100"},"Google Analytics"),T("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Connect your Google Analytics properties")],-1))]),T("button",{onClick:f,disabled:s.value,class:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white rounded-lg font-medium transition-colors flex items-center gap-2"},[ue(He,{icon:s.value?"material-symbols:hourglass-empty":"material-symbols:link",size:18},null,8,["icon"]),Ze(" "+ye(s.value?"Connecting...":"Connect"),1)],8,hne)]),T("div",gne,[T("div",pne,[T("div",mne,[ue(He,{icon:"logos:google-sheets",size:28})]),x[5]||(x[5]=T("div",null,[T("h3",{class:"font-medium text-gray-900 dark:text-gray-100"},"Google Sheets"),T("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"Coming soon")],-1))]),x[6]||(x[6]=T("button",{disabled:"",class:"px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 rounded-lg font-medium cursor-not-allowed"}," Coming Soon ",-1))])])]),T("div",yne,[x[11]||(x[11]=T("h2",{class:"text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4"},"Your Connections",-1)),i.value?(L(),X("div",vne,[ue(He,{icon:"material-symbols:hourglass-empty",size:32,class:"text-gray-400 animate-spin mx-auto mb-2"}),x[8]||(x[8]=T("p",{class:"text-gray-500 dark:text-gray-400"},"Loading connections...",-1))])):r.value.length===0?(L(),X("div",_ne,[ue(He,{icon:"material-symbols:cloud-off",size:48,class:"text-gray-300 dark:text-gray-600 mx-auto mb-3"}),x[9]||(x[9]=T("p",{class:"text-gray-500 dark:text-gray-400 mb-1"},"No connections yet",-1)),x[10]||(x[10]=T("p",{class:"text-sm text-gray-400 dark:text-gray-500"},"Connect your first service above!",-1))])):(L(),X("div",bne,[(L(!0),X(xe,null,nt(r.value,N=>(L(),X("div",{key:N._id,class:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600"},[T("div",wne,[T("div",xne,[ue(He,{icon:"logos:google-analytics",size:28})]),T("div",null,[T("h3",$ne,ye(N.name),1),T("p",Ene,ye(N.email),1),T("div",Sne,[T("span",{class:We([N.isActive?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400","text-xs font-medium flex items-center gap-1"])},[T("span",{class:We(["w-2 h-2 rounded-full",N.isActive?"bg-green-500":"bg-red-500"])},null,2),Ze(" "+ye(N.isActive?"Active":"Inactive"),1)],2),T("span",Nne," Expires: "+ye(v(N.expiresAt)),1)])])]),T("div",kne,[T("button",{onClick:S=>h(N._id),class:"px-3 py-1.5 bg-gray-200 hover:bg-gray-300 dark:bg-gray-600 dark:hover:bg-gray-500 text-gray-700 dark:text-gray-200 rounded text-sm font-medium transition-colors"}," Test ",8,Cne),T("button",{onClick:S=>m(N._id),class:"px-3 py-1.5 bg-red-100 hover:bg-red-200 dark:bg-red-900/30 dark:hover:bg-red-900/50 text-red-700 dark:text-red-400 rounded text-sm font-medium transition-colors"}," Disconnect ",8,Ine)])]))),128))]))])])]))}},Ane={class:"connections-view min-h-screen bg-gray-50 dark:bg-gray-900 p-6"},Mne={class:"max-w-4xl mx-auto"},Dne={key:0,class:"text-center py-12"},One={key:1,class:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6"},Pne={class:"flex items-center"},Rne={class:"text-red-600 dark:text-red-400 text-sm"},zne={class:"flex items-center"},Vne={class:"text-2xl mr-3"},Hne={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6"},Bne={key:0,class:"space-y-3 mb-4"},Fne={class:"flex items-center"},Lne={class:"font-medium text-gray-900 dark:text-white"},Une={class:"text-xs text-gray-500 dark:text-gray-400"},Gne=["onClick","disabled"],Zne={key:1,class:"text-center py-6 text-gray-500 dark:text-gray-400 text-sm mb-4"},Yne=["disabled"],Xne={class:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6"},Wne={key:0,class:"space-y-3 mb-4"},jne={class:"flex items-center"},qne={class:"font-medium text-gray-900 dark:text-white"},Kne={class:"text-xs text-gray-500 dark:text-gray-400"},Jne=["onClick","disabled"],Qne={key:1,class:"text-center py-6 text-gray-500 dark:text-gray-400 text-sm mb-4"},eoe=["disabled"],toe={__name:"ConnectionsView",setup(e){const t=_E(),n=St();DE();const o=de(!1),r=de(!1),i=de(""),s=de(!1),a=J(()=>t.getAnalyticsConnections),l=J(()=>t.getSheetsConnections),u=async f=>{o.value=!0;try{await t.connectGoogle(f,n.apiConfig)}catch(h){alert(`Erro ao conectar: ${h.message}`)}finally{o.value=!1}},c=async f=>{if(confirm("Tem certeza que deseja desconectar esta conta?")){r.value=!0;try{await t.revokeConnection(f,n.apiConfig),i.value="Conexão removida com sucesso!",s.value=!0,setTimeout(()=>{i.value=""},3e3)}catch(h){alert(`Erro ao desconectar: ${h.message}`)}finally{r.value=!1}}},d=f=>f?new Date(f).toLocaleDateString("pt-BR",{year:"numeric",month:"long",day:"numeric"}):"Data desconhecida";return tt(async()=>{const f=new URLSearchParams(window.location.search);if(f.has("success")||f.has("error")){const m=t.handleOAuthCallback(f);i.value=m.message,s.value=m.success,window.history.replaceState({},document.title,window.location.pathname),setTimeout(()=>{i.value=""},5e3),m.success&&await new Promise(v=>setTimeout(v,1e3))}await t.fetchConnections(n.apiConfig)}),(f,h)=>(L(),X("div",Ane,[T("div",Mne,[h[11]||(h[11]=T("div",{class:"mb-8"},[T("h1",{class:"text-3xl font-bold text-gray-900 dark:text-white mb-2"}," Conexões Google "),T("p",{class:"text-gray-600 dark:text-gray-400"}," Gerencie suas conexões com Google Analytics e Google Sheets ")],-1)),ie(t).loading?(L(),X("div",Dne,[...h[2]||(h[2]=[T("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1),T("p",{class:"mt-4 text-gray-600 dark:text-gray-400"},"Carregando conexões...",-1)])])):ie(t).error?(L(),X("div",One,[T("div",Pne,[h[4]||(h[4]=T("span",{class:"text-red-600 dark:text-red-400 text-xl mr-3"},"⚠️",-1)),T("div",null,[h[3]||(h[3]=T("h3",{class:"text-red-800 dark:text-red-300 font-semibold"},"Erro ao carregar conexões",-1)),T("p",Rne,ye(ie(t).error),1)])])])):ve("",!0),i.value?(L(),X("div",{key:2,class:We(["mb-6 p-4 rounded-lg",s.value?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"])},[T("div",zne,[T("span",Vne,ye(s.value?"✅":"❌"),1),T("p",{class:We(s.value?"text-green-800 dark:text-green-300":"text-red-800 dark:text-red-300")},ye(i.value),3)])],2)):ve("",!0),T("div",Hne,[h[7]||(h[7]=Bs('<div class="flex items-center justify-between mb-4" data-v-dc90dba2><div class="flex items-center" data-v-dc90dba2><span class="text-3xl mr-3" data-v-dc90dba2>📊</span><div data-v-dc90dba2><h2 class="text-xl font-semibold text-gray-900 dark:text-white" data-v-dc90dba2>Google Analytics</h2><p class="text-sm text-gray-600 dark:text-gray-400" data-v-dc90dba2>Conecte suas propriedades do GA4</p></div></div></div>',1)),a.value.length>0?(L(),X("div",Bne,[(L(!0),X(xe,null,nt(a.value,m=>(L(),X("div",{key:m.id,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-md"},[T("div",Fne,[h[5]||(h[5]=T("span",{class:"text-green-500 mr-3"},"✓",-1)),T("div",null,[T("p",Lne,ye(m.email||m.accountEmail||m.name||`Conexão ${m.id?.substring(0,8)}`),1),T("p",Une," Conectado em "+ye(d(m.createdAt||m.createdDate)),1)])]),T("button",{onClick:v=>c(m.id),disabled:r.value,class:"px-3 py-1.5 text-sm text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors disabled:opacity-50"}," Desconectar ",8,Gne)]))),128))])):(L(),X("div",Zne," Nenhuma conta conectada ")),T("button",{onClick:h[0]||(h[0]=m=>u("analytics")),disabled:o.value,class:"w-full px-4 py-2.5 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium rounded-md transition-colors disabled:cursor-not-allowed flex items-center justify-center"},[h[6]||(h[6]=T("span",{class:"mr-2"},"➕",-1)),Ze(" "+ye(o.value?"Conectando...":"Adicionar conta Google Analytics"),1)],8,Yne)]),T("div",Xne,[h[10]||(h[10]=Bs('<div class="flex items-center justify-between mb-4" data-v-dc90dba2><div class="flex items-center" data-v-dc90dba2><span class="text-3xl mr-3" data-v-dc90dba2>📗</span><div data-v-dc90dba2><h2 class="text-xl font-semibold text-gray-900 dark:text-white" data-v-dc90dba2>Google Sheets</h2><p class="text-sm text-gray-600 dark:text-gray-400" data-v-dc90dba2>Acesse suas planilhas do Google</p></div></div></div>',1)),l.value.length>0?(L(),X("div",Wne,[(L(!0),X(xe,null,nt(l.value,m=>(L(),X("div",{key:m.id,class:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-md"},[T("div",jne,[h[8]||(h[8]=T("span",{class:"text-green-500 mr-3"},"✓",-1)),T("div",null,[T("p",qne,ye(m.email||m.accountEmail||m.name||`Conexão ${m.id?.substring(0,8)}`),1),T("p",Kne," Conectado em "+ye(d(m.createdAt||m.createdDate)),1)])]),T("button",{onClick:v=>c(m.id),disabled:r.value,class:"px-3 py-1.5 text-sm text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors disabled:opacity-50"}," Desconectar ",8,Jne)]))),128))])):(L(),X("div",Qne," Nenhuma conta conectada ")),T("button",{onClick:h[1]||(h[1]=m=>u("sheets")),disabled:o.value,class:"w-full px-4 py-2.5 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium rounded-md transition-colors disabled:cursor-not-allowed flex items-center justify-center"},[h[9]||(h[9]=T("span",{class:"mr-2"},"➕",-1)),Ze(" "+ye(o.value?"Conectando...":"Adicionar conta Google Sheets"),1)],8,eoe)])])]))}},noe=wt(toe,[["__scopeId","data-v-dc90dba2"]]),ooe=Yte({history:wte("/editor/"),routes:[{path:"/",name:"home",component:Kte},{path:"/integrations",name:"integrations",component:Tne},{path:"/connections",name:"connections",component:noe}]});async function roe(){try{const{initializeEngine:e}=await Ue(async()=>{const{initializeEngine:n}=await import("./loader-AwR0ZGJ0.js");return{initializeEngine:n}},[]),t=await e();if(t.success)return t;throw new Error(t.error)}catch(e){throw e}}async function ioe(){try{const e=await roe();if(!e.success)throw new Error(`Engine falhou: ${e.error}`);const t=i2(Gee);t.use(l2()),t.use(ooe),t.mount("#app")}catch(e){document.body.innerHTML=`
      <div style="
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100vh;
        font-family: system-ui, -apple-system, sans-serif;
        background: #0f172a;
        color: #f1f5f9;
        padding: 2rem;
      ">
        <div style="max-width: 600px; text-align: center;">
          <h1 style="font-size: 2rem; margin-bottom: 1rem; color: #ef4444;">
            ⚠️ Falha ao Inicializar
          </h1>
          <p style="font-size: 1rem; margin-bottom: 2rem; color: #94a3b8;">
            Não foi possível carregar o FlowForge Engine.
          </p>
          <details style="
            text-align: left;
            background: #1e293b;
            padding: 1rem;
            border-radius: 0.5rem;
            border: 1px solid #334155;
          ">
            <summary style="cursor: pointer; font-weight: 600; color: #f59e0b;">
              Detalhes do erro
            </summary>
            <pre style="
              margin-top: 1rem;
              font-size: 0.875rem;
              color: #e2e8f0;
              white-space: pre-wrap;
            ">${e.message}

${e.stack||""}</pre>
          </details>
          <button
            onclick="location.reload()"
            style="
              margin-top: 2rem;
              padding: 0.75rem 1.5rem;
              background: #3b82f6;
              color: white;
              border: none;
              border-radius: 0.5rem;
              font-size: 1rem;
              cursor: pointer;
              font-weight: 600;
            "
          >
            🔄 Tentar Novamente
          </button>
        </div>
      </div>
    `}}ioe();export{Ue as _,poe as a,goe as b,foe as c,ac as d,lc as e,doe as f,_W as i,Pr as r,coe as s,hoe as v};
