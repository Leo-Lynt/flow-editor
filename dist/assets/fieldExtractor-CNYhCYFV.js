import{u as g}from"./executor-D39oo3pD.js";import{g as o}from"./pathUtils-C9hlO1xX.js";import{d as y}from"./index-CpYWmskZ.js";const{unwrapData:P}=g;function i(n,s){return{value:n,__wrapped:!0,__originalData:s}}function D({nodeData:n,inputs:s,context:c}){const t=P(s["data-input"]),d=n.selectionMode||"single",m=n.selectedFields||[],f=n.manualPath,r=f?[f]:m;if(r.length===0)return t;const p={},u=Array.isArray(t)?t[0]:t;if(u&&typeof u=="object"&&(r.forEach(e=>{const a=o(u,e);p[e]=y(a)}),c?.updateNodeData&&c.updateNodeData({fieldTypes:p})),Array.isArray(t))if(d==="single"&&r.length===1){const e=r[0],a=t.map(l=>o(l,e));return i(a,t)}else{const e=t.map(a=>{const l={};return r.forEach(h=>{l[h]=o(a,h)}),l});return i(e,t)}if(typeof t=="object"&&t!==null)if(d==="single"&&r.length===1){const e=r[0],a=o(t,e);return i(a,t)}else{const e={};return r.forEach(a=>{e[a]=o(t,a)}),i(e,t)}return t}function F(n){const s=[],c=n.selectedFields||[],t=n.manualPath;return c.length===0&&!t&&s.push("Nenhum campo selecionado ou path manual definido"),{valid:s.length===0,errors:s}}export{D as execute,F as validate};
