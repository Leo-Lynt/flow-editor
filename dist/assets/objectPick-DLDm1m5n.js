import{u as n}from"./executor-D39oo3pD.js";import{g as c}from"./pathUtils-C9hlO1xX.js";import"./index-CpYWmskZ.js";const{unwrapData:f}=n;function d(t,l,o){if(!l)return t;const e=l.split(".");if(e.length===1)return{...t,[e[0]]:o};const r={...t};let s=r;for(let i=0;i<e.length-1;i++)!s[e[i]]||typeof s[e[i]]!="object"?s[e[i]]={}:s[e[i]]={...s[e[i]]},s=s[e[i]];return s[e[e.length-1]]=o,r}function h({nodeData:t,inputs:l}){let o=f(l.input);if(typeof o!="object"||o===null||Array.isArray(o))throw new Error("Input deve ser um objeto");const e=t.fieldMode||"selector";let r=[];if(e==="custom"?r=(t.customFields||"").split(",").map(u=>u.trim()).filter(u=>u.length>0):r=t.selectedFields||[],r.length===0)return{};let s={};return r.forEach(i=>{const u=c(o,i);u!==void 0&&(s=d(s,i,u))}),s}function g(t){const l=[];return(t.fieldMode||"selector")==="custom"?t.customFields||l.push("Campo customFields obrigatório no modo custom"):(!t.selectedFields||t.selectedFields.length===0)&&l.push("Seleção de campos obrigatória"),{valid:l.length===0,errors:l}}export{h as execute,g as validate};
