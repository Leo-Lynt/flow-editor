import{u as n}from"./executor-D39oo3pD.js";import"./index-CpYWmskZ.js";const{unwrapData:c}=n;function d(l,i){if(!i)return l;const e=i.split("."),s={...l};if(e.length===1)return delete s[e[0]],s;let t=s;for(let r=0;r<e.length-1;r++){if(t[e[r]]===null||t[e[r]]===void 0)return s;t[e[r]]={...t[e[r]]},t=t[e[r]]}return delete t[e[e.length-1]],s}function p({nodeData:l,inputs:i}){let e=c(i.input);if(typeof e!="object"||e===null||Array.isArray(e))throw new Error("Input deve ser um objeto");const s=l.fieldMode||"selector";let t=[];if(s==="custom"?t=(l.customFields||"").split(",").map(o=>o.trim()).filter(o=>o.length>0):t=l.selectedFields||[],t.length===0)return e;let r={...e};return t.forEach(u=>{r=d(r,u)}),r}function h(l){const i=[];return(l.fieldMode||"selector")==="custom"?l.customFields||i.push("Campo customFields obrigatório no modo custom"):(!l.selectedFields||l.selectedFields.length===0)&&i.push("Seleção de campos obrigatória"),{valid:i.length===0,errors:i}}export{p as execute,h as validate};
